project_snapshot:
  metadata:
    project_name: MES Parafina
    version: '1.1'
    timestamp_utc: '2025-09-13T13:59:22.752161+00:00'
  user_profile:
    role: Właściciel projektu / Główny deweloper
    technical_level: Zaawansowany (Python, Flask, SQLAlchemy, Docker)
    communication_style: Bezpośredni, techniczny, partnerski w podejmowaniu decyzji.
    main_goal: Zbudować nowoczesny, niezawodny i użyteczny system MES.
  ai_profile:
    role: Starszy Inżynier Oprogramowania / Architekt Systemu
    tasks:
    - Projektowanie architektury
    - Pisanie i refaktoryzacja kodu
    - Tworzenie testów (TDD)
    - Sugerowanie najlepszych praktyk
    - Aktualizacja dokumentacji
    style: Proaktywny, partnerski, dzielenie pracy na małe kroki, wyjaśnianie decyzji.
  source_files_base64:
  - path: DOKUMENTACJA.md
    content: RG9rdW1lbnRhY2phIEZ1bmtjam9uYWxuYSBpIEFyY2hpdGVrdG9uaWN6bmE6IFN5c3RlbSBNRVMgUGFyYWZpbmENCldlcnNqYTogMS4wDQpEYXRhOiAyMDI1LTA4LTE2DQoxLiBXcHJvd2FkemVuaWUgaSBHxYLDs3duZSBLb25jZXBjamUNCk5pbmllanN6eSBkb2t1bWVudCBvcGlzdWplIGxvZ2lrxJkgYml6bmVzb3fEhSBpIGFyY2hpdGVrdHVyxJkgc3lzdGVtdSBNRVMgKE1hbnVmYWN0dXJpbmcgRXhlY3V0aW9uIFN5c3RlbSkgcHJ6ZXpuYWN6b25lZ28gZG8gemFyesSFZHphbmlhIHByb2Nlc2VtIHByb2R1a2NqaSBpIG9jenlzemN6YW5pYSBwYXJhZmlueS4gU3lzdGVtIG1hIG5hIGNlbHUgY3lmcnl6YWNqxJksIGF1dG9tYXR5emFjasSZIGkgxZtsZWR6ZW5pZSB3c3p5c3RraWNoIGtsdWN6b3d5Y2ggb3BlcmFjamkgcHJvZHVrY3lqbnljaC4NCjEuMS4gS2x1Y3pvd2UgQnl0eSBTeXN0ZW11DQpTeXN0ZW0gb3BpZXJhIHNpxJkgbmEga2lsa3UgZnVuZGFtZW50YWxueWNoIG9iaWVrdGFjaCwga3TDs3JlIG1vZGVsdWrEhSBmaXp5Y3puZSBpIGxvZ2ljem5lIGVsZW1lbnR5IHByb2Nlc3U6DQpQYXJ0aWEgUGllcndvdG5hIChCYXRjaCk6IE5pZXptaWVubnksIGF0b21vd3kgIndzYWQiIHN1cm93Y2EgbyB6bmFueW0gcG9jaG9kemVuaXUsIHR5cGllIGkgd2FkemUuIFJlcHJlemVudHVqZSBmaXp5Y3puxIUgZG9zdGF3xJkgeiBjeXN0ZXJueSBsdWIgcG9qZWR5bmN6eSwga29tcGxldG55IHRyYW5zZmVyIHogd3l0YXBpYXJraSBBcG9sbG8uIFBhcnRpYSBQaWVyd290bmEgamVzdCB0eWxrbyAiY2VnaWXFgmvEhSIgaSBzxYJ1xbx5IGRvIMWbbGVkemVuaWEgcG9jaG9kemVuaWEgKHRyYWNlYWJpbGl0eSkuDQpNaWVzemFuaW5hIChUYW5rTWl4KTogR8WCw7N3bnkgb2JpZWt0IGJpem5lc293eSB3IHN5c3RlbWllLiBSZXByZXplbnR1amUgY2HFgsSFLCBha3R1YWxuxIUgemF3YXJ0b8WbxIcgamVkbmVnbyB6Ymlvcm5pa2EgKHJlYWt0b3JhIGx1YiBiZWN6a2kpLiBNaWVzemFuaW5hIGplc3QgZHluYW1pY3pueW0gYnl0ZW0sIGt0w7NyeSBld29sdXVqZSB3IHRyYWtjaWUgcHJvY2VzdS4gU2vFgmFkYSBzacSZIHogamVkbmVqIGx1YiB3acSZY2VqIFBhcnRpaSBQaWVyd290bnljaC4gUG9zaWFkYSB3xYJhc255IGN5a2wgxbx5Y2lhLCBoaXN0b3JpxJkgb3BlcmFjamkgaSB1bmlrYWxueSBza8WCYWQgcHJvY2VudG93eS4NCk9wZXJhY2phIChPcGVyYWNqZUxvZyk6IFphcGlzIGthxbxkZWogaW50ZW5jam9uYWxuZWogYWtjamkgd3lrb25hbmVqIHcgc3lzdGVtaWUsIGt0w7NyYSB6bWllbmlhIHN0YW4gTWllc3phbmlueSBsdWIgU3ByesSZdHUgKG5wLiB0cmFuc2ZlciwgZG9iaWVsYW5pZSwgZmlsdHJhY2phLCBkbXVjaGFuaWUpLg0KU3ByesSZdCAoU3ByemV0KSBpIFRvcG9sb2dpYTogQ3lmcm93YSByZXByZXplbnRhY2phIGZpenljem5laiBmYWJyeWtpLCB3xYLEhWN6YWrEhWMgdyB0byByZWFrdG9yeSwgZmlsdHJ5LCBiZWN6a2ksIHphd29yeSBpIHJ1cm9jacSFZ2kgKHNlZ21lbnR5KS4gU3lzdGVtIFBhdGhGaW5kZXIgd3lrb3J6eXN0dWplIHRlbiBtb2RlbCBkbyB6bmFqZG93YW5pYSB0cmFzIGRsYSBvcGVyYWNqaS4NClphc8OzYiBHbG9iYWxueTogUmVwcmV6ZW50dWplIGVsZW1lbnQgaW5mcmFzdHJ1a3R1cnksIGt0w7NyeSBtb8W8ZSBiecSHIHXFvHl3YW55IHR5bGtvIHByemV6IGplZG7EhSBvcGVyYWNqxJkgdyBkYW55bSBtb21lbmNpZSAobnAuIHN5c3RlbSBzcHLEmcW8b25lZ28gcG93aWV0cnphKS4gTW9kZWxvd2FueSBqZXN0IGpha28gIndpcnR1YWxueSIgcmVrb3JkIHcgdGFiZWxpIFNwcnpldC4NCjIuIE9waXMgUHJvY2Vzw7N3IEJpem5lc293eWNoIGkgQ3lrbHUgxbt5Y2lhIE1pZXN6YW5pbnkNCjIuMS4gUG96eXNraXdhbmllIFN1cm93Y2EgaSBUd29yemVuaWUgUGFydGlpIFBpZXJ3b3RueWNoDQpUcmFuc2ZlciB6IEFwb2xsbzogT3BlcmF0b3IgcG9kYWplIHJ6ZWN6eXdpc3TEhSwgcHJ6ZWxhbsSFIGlsb8WbxIcgc3Vyb3djYS4gU3lzdGVtIHBvcsOzd251amUgasSFIHogcHJvZ25vesSFLCBsb2d1amUgZXdlbnR1YWxuxIUgcm96Ymllxbxub8WbxIcgdyBBdWRpdFRyYWlsIGkgdHdvcnp5IG5vd8SFIEJhdGNoIG8gemFkYW55bSB0eXBpZSBpIHdhZHplLg0KUm96xYJhZHVuZWsgQ3lzdGVybnk6IE9wZXJhdG9yIHJlamVzdHJ1amUgZG9zdGF3xJksIHBvZGFqxIVjIHR5cCBzdXJvd2NhLCB3YWfEmSBpIGRhbmUgZG9zdGF3eS4gU3lzdGVtIHR3b3J6eSBub3fEhSBCYXRjaC4NCk1hZ2F6eW5vd2FuaWUgdyBCZWN6a2FjaCBCcnVkbnljaDogU3R3b3J6b25hIEJhdGNoIGplc3QgInRhbmtvd2FuYSIgKGxvZ2ljem5pZSkgZG8gd3licmFuZWogYmVjemtpIGJydWRuZWogemEgcG9tb2PEhSBCYXRjaE1hbmFnZW1lbnRTZXJ2aWNlLnRhbmtfaW50b19kaXJ0eV90YW5rLg0KSmXFm2xpIGJlY3prYSBqZXN0IHB1c3RhLCB0d29yem9uYSBqZXN0IHcgbmllaiBub3dhIFRhbmtNaXguDQpKZcWbbGkgdyBiZWN6Y2UgamVzdCBqdcW8IFRhbmtNaXgsIG5vd2EgQmF0Y2ggamVzdCBkb2Rhd2FuYSBqYWtvIGtvbGVqbnkgc2vFgmFkbmlrLCBhIHNrxYJhZCBwcm9jZW50b3d5IE1pZXN6YW5pbnkgamVzdCBha3R1YWxpem93YW55Lg0KRG96d29sb25lIGplc3QgbWllc3phbmllIHLDs8W8bnljaCB0eXDDs3cgc3Vyb3djw7N3LiBTeXN0ZW0gbXVzaSBvc3RyemVnYcSHIG9wZXJhdG9yYSBwcnplZCBwaWVyd3N6eW0gem1pZXN6YW5pZW0gcsOzxbxueWNoIHR5cMOzdyB3IGplZG55bSB6Ymlvcm5pa3UuDQoyLjIuIEN5a2wgxbt5Y2lhIE1pZXN6YW5pbnkgdyBSZWFrdG9yemUNCk1pZXN6YW5pbmEgdyByZWFrdG9yemUgKFRhbmtNaXgpIHByemVjaG9kemkgcHJ6ZXogc2VyacSZIHpkZWZpbmlvd2FueWNoIHN0YW7Ds3csIGt0w7NyZSBkeWt0dWrEhSwgamFraWUgYWtjamUgc8SFIGRvendvbG9uZS4NClN0YW55IFByb2Nlc3UgKFRhbmtNaXgucHJvY2Vzc19zdGF0dXMpOg0KU1VST1dZOiAoRG9tecWbbG55KSBNaWVzemFuaW5hIMWbd2llxbxvIHphdGFua293YW5hIHogbWFnYXp5bnUgYnJ1ZG5lZ28uDQpQT0RHUlpFV0FOWTogVyB0cmFrY2llIG9zacSFZ2FuaWEgdGVtcGVyYXR1cnkgcm9ib2N6ZWouDQpET0JJRUxPTllfT0NaRUtVSkU6IERvZGFubyB6aWVtacSZIGJpZWzEhWPEhSwgbWllc3phbmluYSBjemVrYSBuYSByb3pwb2N6xJljaWUgY3lrbHUgZmlsdHJhY2ppIHR5cHUgIlBsYWNlayIuDQpGSUxUUkFDSkFfUExBQ0VLX0tPxYFPOiBDeXJrdWxhY2phIHcgb2JpZWd1IHphbWtuacSZdHltIHcgY2VsdSBidWRvd3kgcGxhY2thICgzMCBtaW4pLg0KRklMVFJBQ0pBX1BSWkVMRVc6IFRyYW5zZmVyIHByemV6IGZpbHRyIGRvIGlubmVnbywgcHVzdGVnbyByZWFrdG9yYS4NCkZJTFRSQUNKQV9LT8WBTzogQ3lya3VsYWNqYSB3IG9iaWVndSB6YW1rbmnEmXR5bSBwbyBwcnplbGV3aWUgKDE1IG1pbikuDQpPQ1pFS1VKRV9OQV9PQ0VORTogWmFrb8WEY3pvbm8gY3lrbCwgcG9icmFubyBwcsOzYmvEmSwgc3lzdGVtIGN6ZWthIG5hIGRlY3l6asSZIG9wZXJhdG9yYSAoMTAgbWluIG5hIHN0eWduacSZY2llKS4NClpBVFdJRVJEWk9OQTogT2NlbmEgcG96eXR5d25hLCBNaWVzemFuaW5hIGdvdG93YSBkbyB3eXPFgmFuaWEgZG8gbWFnYXp5bnUgY3p5c3RlZ28uDQpaQVRXSUVSRFpPTkFfT0NaRUtVSkVfTkFfVFJBTlNGRVI6IEp3LiwgYWxlIHJ1cm9jacSFZyBqZXN0IHphasSZdHkuDQpET19QT05PV05FSl9GSUxUUkFDSkk6IE9jZW5hIG5lZ2F0eXduYSwgTWllc3phbmluYSB3eW1hZ2EgZGFsc3plZ28gcHJ6ZXR3YXJ6YW5pYS4NCjIuMy4gS2x1Y3pvd2UgT3BlcmFjamUgUHJvY2Vzb3dlDQoyLjMuMS4gWmFyesSFZHphbmllIFRlbXBlcmF0dXLEhSBpIFBhbG5pa2llbToNCkthxbxkeSByZWFrdG9yIHBvc2lhZGEgcGFsbmlrIChTcHJ6ZXQuc3Rhbl9wYWxuaWthKSwga3TDs3J5bSBvcGVyYXRvciBzdGVydWplIG1hbnVhbG5pZS4NClN5c3RlbSBzeW11bHVqZSB6bWlhbsSZIHRlbXBlcmF0dXJ5IHcgemFsZcW8bm/Fm2NpIG9kIHN0YW51IHBhbG5pa2EsIHXFvHl3YWrEhWMgc3p5Ymtvc2NfZ3J6YW5pYV9jX25hX21pbnV0ZSBpIHN6eWJrb3NjX2NobG9kemVuaWFfY19uYV9taW51dGUuDQpTeXN0ZW0gYWt0eXduaWUgbW9uaXRvcnVqZSB0ZW1wZXJhdHVyxJkgaSB3eXN5xYJhIHBvd2lhZG9taWVuaWEgKHByemV6IFNvY2tldC5JTykgbyBvc2nEhWduacSZY2l1IGNlbHUgb3JheiBtb25pdHkgeiBzdWdlc3RpYW1pIChucC4gIkN6eSB3xYLEhWN6ecSHIHBhbG5payBwbyB0cmFuc2ZlcnplPyIpLg0KV3N6eXN0a2llIGN5a2xlIGdyemFuaWEgc8SFIGxvZ293YW5lIHcgaGlzdG9yaWFfcG9kZ3J6ZXdhbmlhIHcgY2VsdSBwcnp5c3rFgmVqIGFuYWxpenkgaSB0cmVuaW5ndSBtb2RlbHUgcHJlZHlrY3lqbmVnbyBBSS4NCjIuMy4yLiBEb2JpZWxhbmllIChEb2RhbmllIFppZW1pIEJpZWzEhWNlaik6DQpSZWd1xYJhIEJpem5lc293YTogT3BlcmFjamEgamVzdCB6YWJsb2tvd2FuYSwgamXFm2xpIHRlbXBlcmF0dXJhX2FrdHVhbG5hIDwgMTEwwrBDLiBXYWxpZGFjamEgbXVzaSBvZGJ5d2HEhyBzacSZIHBvIHN0cm9uaWUgR1VJIChuaWVha3R5d255IHByenljaXNrKSBpIHNlcndlcmEgKGxvZ2lrYSB3IHNlcndpc2llKS4NCk9wZXJhY2phIGplc3QgbG9nb3dhbmEgdyBPcGVyYWNqZUxvZywgYSBsaWN6bmlrIFRhbmtNaXguYmxlYWNoaW5nX2VhcnRoX2JhZ3NfdG90YWwgamVzdCBpbmtyZW1lbnRvd2FueS4NClN0YXR1cyBNaWVzemFuaW55IHptaWVuaWEgc2nEmSBuYSBET0JJRUxPTllfT0NaRUtVSkUuDQoyLjMuMy4gUHJvY2VzIEZpbHRyYWNqaSBpIFphcnrEhWR6YW5pZSBGaWx0cmVtOg0KQXV0b21hdHl6YWNqYSBXeWJvcnUgQ3lrbHU6IFN5c3RlbSwgbmEgcG9kc3Rhd2llIHN0YXR1c3UgRE9CSUVMT05ZX09DWkVLVUpFLCBhdXRvbWF0eWN6bmllIHdpZSwgY3p5IHJvenBvY3rEhcSHIEN5a2wgMSAoUGxhY2VrKSBjenkgQ3lrbCAyIChDenlzdGEgRmlsdHJhY2phKS4NClN0YW4gRmlsdHJhOiBGaWx0ciAoU3ByemV0KSBwb3NpYWRhIHN0YXR1cyBmaWx0ZXJfY2FrZV9zdGF0dXMgKENaWVNUWSBsdWIgUExBQ0VLX0dPVE9XWSkgb3JheiBmaWx0ZXJfY2FrZV9vcmlnaW5fbWl4X2lkLCBrdMOzcmUgxZtsZWR6aSwgeiBrdMOzcmVqIE1pZXN6YW5pbnkgcG9jaG9kemkgcGxhY2VrLg0KU2lsbmlrIFJlZ3XFgiAoT3N0cnplxbxlbmlhKTogUHJ6ZWQgcm96cG9jesSZY2llbSBmaWx0cmFjamkgc3lzdGVtIHdhbGlkdWplIHpnb2Rub8WbxIcgdHlwdSBzdXJvd2NhIE1pZXN6YW5pbnkgeiB0eXBlbSBzdXJvd2NhIHBsYWNrYSBuYSBmaWx0cnplLiBXIHByenlwYWRrdSByeXp5a2EgbmllZG96d29sb25laiBrb250YW1pbmFjamkgKG5hIHBvZHN0YXdpZSBwcnplem5hY3plbmlhIHBhcnRpaSksIHN5c3RlbSB3ecWbd2lldGxhIG9zdHJ6ZcW8ZW5pZSBpIHd5bWFnYSBwb3R3aWVyZHplbmlhIG9kIG9wZXJhdG9yYS4NCsWabGVkemVuaWUgS29udGFtaW5hY2ppOiBXIHByenlwYWRrdSBkb3p3b2xvbmVnbyBtaWVzemFuaWEgbmEgZmlsdHJ6ZSwgc3lzdGVtIHN5bXVsdWplIGtvbnRhbWluYWNqxJksIHR3b3J6xIVjIHdpcnR1YWxuxIUgQmF0Y2ggbyB0eXBpZSBSRVNaVEtJX0ZJTFRSQUNZSk5FIGkgZG9kYWrEhWMgasSFIGRvIE1pZXN6YW5pbnkgZG9jZWxvd2VqLg0KMi4zLjQuIE9jZW5hIEpha2/Fm2NpIGkgUHJ6ZXDFgnl3IFByYWN5IChXb3JrZmxvd1NlcnZpY2UpOg0KUG8gY3lrbHUgZmlsdHJhY3lqbnltIE1pZXN6YW5pbmEgcHJ6ZWNob2R6aSB3IHN0YW4gT0NaRUtVSkVfTkFfT0NFTkUuDQpEZWN5emphIG9wZXJhdG9yYSAoIk9LIiAvICJaxYFBIikgamVzdCB6YXBpc3l3YW5hIHcgUHJvYmtpT2NlbmEgaSBkemlhxYJhIGphayB3eXp3YWxhY3o6DQpXeW5payAiT0siOiBNaWVzemFuaW5hIC0+IFpBVFdJRVJEWk9OQS4gU3lzdGVtIHNwcmF3ZHphIGRvc3TEmXBub8WbxIcgcnVyb2NpxIVndSBpIGF1dG9tYXR5Y3puaWUgcHJvcG9udWplIG9wZXJhY2rEmSBUUkFOU0ZFUl9ET19NQUdBWllOVSBsdWIgcHJ6ZWNob2R6aSB3IHN0YW4gWkFUV0lFUkRaT05BX09DWkVLVUpFX05BX1RSQU5TRkVSLg0KV3luaWsgIlrFgUEiOiBNaWVzemFuaW5hIC0+IERPX1BPTk9XTkVKX0ZJTFRSQUNKSS4gU3lzdGVtIGF1dG9tYXR5Y3puaWUgaW5pY2p1amUgb3BlcmFjasSZIERNVUNIQU5JRV9QT19PQ0VOSUUuDQoyLjMuNS4gRG11Y2hhbmllIGkgWmFyesSFZHphbmllIFd5ZG11Y2hlbToNCk9wZXJhY2plIERNVUNIQU5JRV8qIGkgUFJaRURNVUNIXyogd3ltYWdhasSFIHd5xYLEhWN6bmVnbyBkb3N0xJlwdSBkbyB6YXNvYnUgU1lTVEVNX1BPV0lFVFJaQS4gU3lzdGVtIGJsb2t1amUgbW/FvGxpd2/Fm8SHIHVydWNob21pZW5pYSBkcnVnaWVnbyBkbXVjaGFuaWEgdyB0eW0gc2FteW0gY3phc2llLg0KIld5ZG11Y2giIGplc3QgbW9kZWxvd2FueSBqYWtvIHNwZWNqYWxueSByb2R6YWogTWllc3phbmlueSAoVGFua01peCksIG96bmFjem9ueSBmbGFnxIUgaXNfd3lkbXVjaF9taXggPSBUcnVlLg0KRG8gTWllc3phbmlueSB3eWRtdWNob3dlaiBtb8W8bmEgZG9kYXdhxIcga29sZWpuZSB3eWRtdWNoeSBsdWIgdGFua293YcSHIMWbd2llxbx5IHN1cm93aWVjLiBEb2RhbmllIMWbd2llxbxlZ28gc3Vyb3djYSBuaWUgem1pZW5pYSBmbGFnaSBpc193eWRtdWNoX21peC4NCkZsYWdhIGlzX3d5ZG11Y2hfbWl4IGplc3QgcmVzZXRvd2FuYSBkbyBGYWxzZSBkb3BpZXJvIHBvIHBpZXJ3c3p5bSB1ZGFueW0gY3lrbHUgZmlsdHJhY3lqbnltIHRlaiBNaWVzemFuaW55Lg0KUmVha3RvciB6IE1pZXN6YW5pbsSFIHd5ZG11Y2hvd8SFIG5pZSBtb8W8ZSBiecSHIGNlbGVtIGRsYSBzdGFuZGFyZG93eWNoIHRyYW5zZmVyw7N3Lg0KMi40LiBOYXp3YSBXecWbd2lldGxhbmEgTWllc3phbmlueQ0KU3lzdGVtIG11c2kgcHJ6ZWNob3d5d2HEhyBrb21wb25lbnR5IG5hend5IHcgdXN0cnVrdHVyeXpvd2FueWNoIHBvbGFjaCB3IFRhbmtNaXhlcyBpIGR5bmFtaWN6bmllIGdlbmVyb3dhxIcgY3p5dGVsbsSFIHJlcHJlemVudGFjasSZIHcgR1VJLg0KRm9ybWF0OiBHxYHDk1dOWV9TS8WBQUQgKElEX1dISVRFQk9BUkQpIEhJU1RPUklBX09QRVJBQ0pJIChaQU5JRUNaWVNaQ1pFTklBKQ0KR8WBw5NXTllfU0vFgUFEOiBHZW5lcm93YW55IHogbWFpbl9jb21wb3NpdGlvbi4gUG9rYXp1amUgdHlsa28gc2vFgmFkbmlraSA+IDElLCBucC4gTUlYKFQxMFs3OCVdLCAxOVsxOCVdKS4NCkhJU1RPUklBX09QRVJBQ0pJOiBOYSBwb2RzdGF3aWUgbGljem5pa8OzdywgbnAuIDR4IDJ4V1lELg0KWkFOSUVDWllTWkNaRU5JQTogTmEgcG9kc3Rhd2llIHd5ZG11Y2hfcGVyY2VudGFnZSBpIGZpbHRlcl9yZW1haW5zX3BlcmNlbnRhZ2UsIHd5xZt3aWV0bGFuZSB3IHNwb3PDs2IgbW5pZWogZWtzcG9ub3dhbnksIG5wLiAoV1szJV0sIEZbMSVdKS4NCjMuIE1vZGVsIERhbnljaCAoS2x1Y3pvd2UgWm1pYW55IGkgTm93ZSBUYWJlbGUpDQpUYWJlbGEgVGFua01peGVzIChSb3pidWRvd2EpOg0KcHJvY2Vzc19zdGF0dXM6IFN0cmluZyg1MCkNCm1haW5fY29tcG9zaXRpb246IEpTT04NCnd5ZG11Y2hfcGVyY2VudGFnZTogREVDSU1BTCg1LCAyKQ0KZmlsdGVyX3JlbWFpbnNfcGVyY2VudGFnZTogREVDSU1BTCg1LCAyKQ0KZmlsdHJhdGlvbl9jeWNsZXNfY291bnQ6IEludGVnZXINCnd5ZG11Y2hfY3ljbGVzX2NvdW50OiBJbnRlZ2VyDQpibGVhY2hpbmdfZWFydGhfYmFnc190b3RhbDogSW50ZWdlcg0Kd2hpdGVib2FyZF9pZDogU3RyaW5nKDEwKQ0KaXNfd3lkbXVjaF9taXg6IEJvb2xlYW4NClRhYmVsYSBTcHJ6ZXQgKFJvemJ1ZG93YSk6DQpzenlia29zY19ncnphbmlhX2NfbmFfbWludXRlOiBERUNJTUFMKDUsMikNCnN6eWJrb3NjX2NobG9kemVuaWFfY19uYV9taW51dGU6IERFQ0lNQUwoNSwyKQ0Kc3Rhbl9wYWxuaWthOiBFTlVNKCdXTEFDWk9OWScsICdXWUxBQ1pPTlknKQ0KZmlsdGVyX2Nha2Vfc3RhdHVzOiBTdHJpbmcoNTApDQpmaWx0ZXJfY2FrZV9vcmlnaW5fbWl4X2lkOiBJbnRlZ2VyIChGb3JlaWduS2V5IGRvIFRhbmtNaXhlcy5pZCkNCk5vd2EgVGFiZWxhIGhpc3RvcmlhX3BvZGdyemV3YW5pYToNCmlkLCBpZF9zcHJ6ZXR1LCBpZF9taWVzemFuaW55LCBjemFzX3N0YXJ0dSwgdGVtcF9zdGFydG93YSwgY3phc19rb25jYSwgdGVtcF9rb25jb3dhLCB0ZW1wZXJhdHVyYV96ZXduZXRyem5hLCB3YWdhX3dzYWR1DQo0LiBBcmNoaXRla3R1cmEgaSBJbnRlcmZlanMgVcW8eXRrb3duaWthDQpTZXJ3aXN5OiBOYWxlxbx5IHJvendhxbx5xIcgc3R3b3J6ZW5pZSBkZWR5a293YW55Y2ggc2Vyd2lzw7N3IFdvcmtmbG93U2VydmljZSBpIE9wZXJhdGlvbnNTZXJ2aWNlIGRvIG9ic8WCdWdpIGxvZ2lraSBwcnplcMWCeXd1IHByYWN5IGkgemFyesSFZHphbmlhIG9wZXJhY2phbWkuDQpTb2NrZXQuSU86IEplc3Qga2x1Y3pvd3ltIGVsZW1lbnRlbSBkbyByZWFsaXphY2ppIHBvd2lhZG9taWXFhCB3IGN6YXNpZSByemVjenl3aXN0eW0gaSBha3R1YWxpemFjamkgZGFzaGJvYXJkw7N3Lg0KR1VJL1VYOiBJbnRlcmZlanMgbXVzaSBiecSHIHpvcmllbnRvd2FueSBuYSB6YWRhbmlhLiBOYWxlxbx5IHphcHJvamVrdG93YcSHIGRlZHlrb3dhbmUgcGlrdG9ncmFteSBkbGEga2HFvGRlZ28gc3RhbnUsIHByb2Nlc3UgaSB0eXB1IHNwcnrEmXR1IHcgY2VsdSBwb3ByYXd5IGN6eXRlbG5vxZtjaS4=
  - path: alembic//env.py
    content: IyBhbGVtYmljL2Vudi5weQ0KDQojIC0tLSBLUk9LIDE6IEtvbmZpZ3VyYWNqYSDFm2NpZcW8ZWsgaSBwb2RzdGF3b3dlIGltcG9ydHkgLS0tDQppbXBvcnQgc3lzDQpmcm9tIG9zLnBhdGggaW1wb3J0IGFic3BhdGgsIGRpcm5hbWUsIHJlYWxwYXRoLCBqb2luDQojIERvZGFqZW15IGfFgsOzd255IGZvbGRlciBwcm9qZWt0dSBkbyDFm2NpZcW8a2kgUHl0aG9uYS4gUm9iaW15IHRvIHR5bGtvIHJhei4NCnN5cy5wYXRoLmluc2VydCgwLCBkaXJuYW1lKGRpcm5hbWUoYWJzcGF0aChfX2ZpbGVfXykpKSkNCg0KZnJvbSBsb2dnaW5nLmNvbmZpZyBpbXBvcnQgZmlsZUNvbmZpZw0KZnJvbSBzcWxhbGNoZW15IGltcG9ydCBlbmdpbmVfZnJvbV9jb25maWcsIHBvb2wNCmZyb20gYWxlbWJpYyBpbXBvcnQgY29udGV4dA0KaW1wb3J0IG9zDQoNCiMgLS0tIEtST0sgMjogSW1wb3J0IG1ldGFkYW55Y2ggeiBvYnUgxbpyw7NkZcWCIC0tLQ0KIyBJbXBvcnR1amVteSBvYmlla3QgYGRiYCB6IFR3b2plaiBhcGxpa2FjamksIGFieSB1enlza2HEhyBkb3N0xJlwIGRvIFR3b2ljaCBtb2RlbGkNCmZyb20gYXBwLmV4dGVuc2lvbnMgaW1wb3J0IGRiICAjIFpha8WCYWRhbSwgxbxlIGRiIGplc3QgdyBleHRlbnNpb25zLnB5LCBqZcWbbGkgbmllLCB6bWllxYQgxZtjaWXFvGvEmQ0KIyBJbXBvcnR1amVteSBgTW9kZWxCYXNlYCB6IGJpYmxpb3Rla2kgc2NoZWR1bGVyYSwgemdvZG5pZSB6IHR5bSwgY28gb2RrcnlsacWbbXkNCmZyb20gY2VsZXJ5X3NxbGFsY2hlbXlfc2NoZWR1bGVyLnNlc3Npb24gaW1wb3J0IE1vZGVsQmFzZSBhcyBTY2hlZHVsZXJNb2RlbEJhc2UNCg0KIyAtLS0gS1JPSyAzOiBLb25maWd1cmFjamEgQWxlbWJpYyBpIGxvZ2lraSBVUkkgLS0tDQpjb25maWcgPSBjb250ZXh0LmNvbmZpZw0KDQppZiBjb25maWcuY29uZmlnX2ZpbGVfbmFtZSBpcyBub3QgTm9uZToNCiAgICBmaWxlQ29uZmlnKGNvbmZpZy5jb25maWdfZmlsZV9uYW1lKQ0KDQojIExvZ2lrYSB3eWJvcnUgVVJJIC0gamVzdCBkb2JyYSwgem9zdGF3aWFteSBqxIUNCkRCX1VTRVIgPSBvcy5lbnZpcm9uLmdldCgnTVlTUUxVU0VSJywgJ3Jvb3QnKQ0KREJfUEFTU1dPUkQgPSBvcy5lbnZpcm9uLmdldCgnTVlTUUxfUk9PVF9QQVNTV09SRCcsICcnKQ0KREJfSE9TVCA9IG9zLmVudmlyb24uZ2V0KCdNWVNRTEhPU1QnLCAnbG9jYWxob3N0JykNCg0KaWYgb3MuZW52aXJvbi5nZXQoJ0FMRU1CSUNfVEVTVF9NT0RFJykgPT0gJ3RydWUnOg0KICAgIGRhdGFiYXNlX3VyaSA9IGYibXlzcWwrbXlzcWxjb25uZWN0b3I6Ly97REJfVVNFUn06e0RCX1BBU1NXT1JEfUB7REJfSE9TVH0vbWVzX3BhcmFmaW5hX2RiX3Rlc3QiDQplbHNlOg0KICAgIGRhdGFiYXNlX3VyaSA9IGYibXlzcWwrbXlzcWxjb25uZWN0b3I6Ly97REJfVVNFUn06e0RCX1BBU1NXT1JEfUB7REJfSE9TVH0vbWVzX3BhcmFmaW5hX2RiIg0KDQpjb25maWcuc2V0X21haW5fb3B0aW9uKCdzcWxhbGNoZW15LnVybCcsIGRhdGFiYXNlX3VyaSkNCg0KIyAtLS0gS1JPSyA0OiBaZGVmaW5pb3dhbmllIGNlbHUgZGxhIEFsZW1iaWMgLS0tDQojIFRvIGplc3QgbmFqd2HFvG5pZWpzemEgY3rEmcWbxIcuIFR3b3J6eW15IGxpc3TEmSBvYmlla3TDs3cgTWV0YURhdGEuDQojIEFsZW1iaWMgbXVzaSB3aWVkemllxIcgbyBXU1pZU1RLSUNIIG1vZGVsYWNoLCBhYnkgZHppYcWCYcSHIHBvcHJhd25pZS4NCiMgSW1wb3J0IGBmcm9tIGFwcCBpbXBvcnQgbW9kZWxzYCB6YXBld25pYSwgxbxlIFNRTEFsY2hlbXkgIndpZHppIiBUd29qZSB0YWJlbGUuDQpmcm9tIGFwcCBpbXBvcnQgbW9kZWxzDQp0YXJnZXRfbWV0YWRhdGEgPSBbDQogICAgZGIubWV0YWRhdGEsICAgICAgICAgICAgICAgICAgICMgTWV0YWRhbmUgeiBUd29qZWogYXBsaWthY2ppDQogICAgU2NoZWR1bGVyTW9kZWxCYXNlLm1ldGFkYXRhICAgICMgTWV0YWRhbmUgeiBiaWJsaW90ZWtpIENlbGVyeQ0KXQ0KDQojIC0tLSBLUk9LIDU6IEZ1bmtjamUgdXJ1Y2hvbWllbmlvd2UgKGJleiB6bWlhbikgLS0tDQpkZWYgcnVuX21pZ3JhdGlvbnNfb2ZmbGluZSgpIC0+IE5vbmU6DQogICAgdXJsID0gY29uZmlnLmdldF9tYWluX29wdGlvbigic3FsYWxjaGVteS51cmwiKQ0KICAgIGNvbnRleHQuY29uZmlndXJlKA0KICAgICAgICB1cmw9dXJsLA0KICAgICAgICB0YXJnZXRfbWV0YWRhdGE9dGFyZ2V0X21ldGFkYXRhLA0KICAgICAgICBsaXRlcmFsX2JpbmRzPVRydWUsDQogICAgICAgIGRpYWxlY3Rfb3B0cz17InBhcmFtc3R5bGUiOiAibmFtZWQifSwNCiAgICApDQogICAgd2l0aCBjb250ZXh0LmJlZ2luX3RyYW5zYWN0aW9uKCk6DQogICAgICAgIGNvbnRleHQucnVuX21pZ3JhdGlvbnMoKQ0KDQpkZWYgcnVuX21pZ3JhdGlvbnNfb25saW5lKCkgLT4gTm9uZToNCiAgICBjb25uZWN0YWJsZSA9IGVuZ2luZV9mcm9tX2NvbmZpZygNCiAgICAgICAgY29uZmlnLmdldF9zZWN0aW9uKGNvbmZpZy5jb25maWdfaW5pX3NlY3Rpb24sIHt9KSwNCiAgICAgICAgcHJlZml4PSJzcWxhbGNoZW15LiIsDQogICAgICAgIHBvb2xjbGFzcz1wb29sLk51bGxQb29sLA0KICAgICkNCiAgICB3aXRoIGNvbm5lY3RhYmxlLmNvbm5lY3QoKSBhcyBjb25uZWN0aW9uOg0KICAgICAgICBjb250ZXh0LmNvbmZpZ3VyZSgNCiAgICAgICAgICAgIGNvbm5lY3Rpb249Y29ubmVjdGlvbiwgdGFyZ2V0X21ldGFkYXRhPXRhcmdldF9tZXRhZGF0YQ0KICAgICAgICApDQogICAgICAgIHdpdGggY29udGV4dC5iZWdpbl90cmFuc2FjdGlvbigpOg0KICAgICAgICAgICAgY29udGV4dC5ydW5fbWlncmF0aW9ucygpDQoNCmlmIGNvbnRleHQuaXNfb2ZmbGluZV9tb2RlKCk6DQogICAgcnVuX21pZ3JhdGlvbnNfb2ZmbGluZSgpDQplbHNlOg0KICAgIHJ1bl9taWdyYXRpb25zX29ubGluZSgp
  - path: app//__init__.py
    content: IyBhcHAvX19pbml0X18ucHkNCg0KZnJvbSBmbGFzayBpbXBvcnQgRmxhc2sNCmZyb20gLmNvbmZpZyBpbXBvcnQgQ29uZmlnLCBQcm9kQ29uZmlnLCBUZXN0Q29uZmlnDQpmcm9tIC5wYXRoZmluZGVyX3NlcnZpY2UgaW1wb3J0IFBhdGhGaW5kZXINCmZyb20gLm1vbml0b3JpbmcgaW1wb3J0IE1vbml0b3JpbmdTZXJ2aWNlDQpmcm9tIC5zZW5zb3JzIGltcG9ydCBTZW5zb3JTZXJ2aWNlDQppbXBvcnQgbG9nZ2luZw0KaW1wb3J0IG9zDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZXpvbmUNCmZyb20gZmxhc2tfc3FsYWxjaGVteSBpbXBvcnQgU1FMQWxjaGVteQ0KZnJvbSAuZXh0ZW5zaW9ucyBpbXBvcnQgZGIsIHNvY2tldGlvDQpmcm9tIGZsYXNrX2FkbWluIGltcG9ydCBBZG1pbg0KZnJvbSBmbGFza19hZG1pbi5jb250cmliLnNxbGEgaW1wb3J0IE1vZGVsVmlldw0KZnJvbSBsb2dnaW5nLmhhbmRsZXJzIGltcG9ydCBSb3RhdGluZ0ZpbGVIYW5kbGVyDQpmcm9tIGZsYXNrX2NvcnMgaW1wb3J0IENPUlMNCg0KIyAuLi4gaW5zdGFuY2plIHBhdGhmaW5kZXIsIG1vbml0b3JpbmcsIHNlbnNvcl9zZXJ2aWNlLCBzY2hlZHVsZXIgLi4uDQpwYXRoZmluZGVyID0gUGF0aEZpbmRlcigpDQptb25pdG9yaW5nID0gTW9uaXRvcmluZ1NlcnZpY2UoKQ0Kc2Vuc29yX3NlcnZpY2UgPSBTZW5zb3JTZXJ2aWNlKCkNCg0KDQojIEdsb2JhbG5lIHJlZmVyZW5jamUgZG8gemFkYcWEIHNjaGVkdWxlcmENCnNjaGVkdWxlcl9qb2JzID0ge30NCg0KIyBsb2dnaW5nLmJhc2ljQ29uZmlnKCkNCiMgbG9nZ2luZy5nZXRMb2dnZXIoJ2Fwc2NoZWR1bGVyJykuc2V0TGV2ZWwobG9nZ2luZy5ERUJVRykNCg0KZGVmIGNyZWF0ZV9hcHAoY29uZmlnX2NsYXNzPU5vbmUpOg0KICAgICMgLS0tIEtST0sgMTogV8WBxIRDWkVOSUUgU1pDWkVHw5PFgU9XRUdPIExPR09XQU5JQSAtLS0NCiAgICAjbG9nZ2luZy5iYXNpY0NvbmZpZyhsZXZlbD1sb2dnaW5nLklORk8sIGZvcm1hdD0nJShhc2N0aW1lKXMgLSAlKG5hbWUpcyAtICUobGV2ZWxuYW1lKXMgLSAlKG1lc3NhZ2UpcycpDQogICAgDQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCiAgICBhcHAgPSBGbGFzayhfX25hbWVfXykNCiAgICANCiAgICBDT1JTKGFwcCwgb3JpZ2lucz1bDQogICAgICAgICJodHRwczovL3JlYWN0LXByb2R1Y3Rpb24tOTFjNy51cC5yYWlsd2F5LmFwcCIsICAjIFR3w7NqIGZyb250ZW5kDQogICAgICAgICJodHRwOi8vbG9jYWxob3N0OjUxNzMiLCAgIyBEZXZlbG9wbWVudA0KICAgICAgICAiaHR0cDovL2xvY2FsaG9zdDozMDAwIiwgICMgQWx0ZXJuYXR5d255IGRldiBwb3J0DQogICAgXSkNCg0KDQogICAgIyAtLS0gT1NUQVRFQ1pOQSBQT1BSQVdLQTogRHluYW1pY3puZSDFgmFkb3dhbmllIGtvbmZpZ3VyYWNqaSAtLS0NCiAgICBpZiBjb25maWdfY2xhc3M6DQogICAgICAgIGFwcC5jb25maWcuZnJvbV9vYmplY3QoY29uZmlnX2NsYXNzKQ0KICAgIGVsc2U6DQogICAgICAgIGVudiA9IG9zLmVudmlyb24uZ2V0KCdGTEFTS19FTlYnLCAnZGV2ZWxvcG1lbnQnKQ0KICAgICAgICBpZiBlbnYgPT0gJ3Byb2R1Y3Rpb24nOg0KICAgICAgICAgICAgYXBwLmNvbmZpZy5mcm9tX29iamVjdChQcm9kQ29uZmlnKQ0KICAgICAgICAgICAgcHJpbnQoIi0tLSBaYcWCYWRvd2FubyBrb25maWd1cmFjasSZIHByb2R1a2N5am7EhSAoUHJvZENvbmZpZykgLS0tIikNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGFwcC5jb25maWcuZnJvbV9vYmplY3QoQ29uZmlnKQ0KICAgICAgICAgICAgcHJpbnQoIi0tLSBaYcWCYWRvd2FubyBrb25maWd1cmFjasSZIGRld2Vsb3BlcnNrxIUgKENvbmZpZykgLS0tIikNCiAgICAjIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQoNCiAgICAjIC0tLSBPU1RBVEVDWk5BIFBPUFJBV0tBOiBMb2dvd2FuaWUgZG8gcGxpa3UgLS0tDQogICAgaWYgbm90IG9zLnBhdGguZXhpc3RzKCdpbnN0YW5jZScpOg0KICAgICAgICBvcy5tYWtlZGlycygnaW5zdGFuY2UnKQ0KICAgIGZpbGVfaGFuZGxlciA9IFJvdGF0aW5nRmlsZUhhbmRsZXIoJ2luc3RhbmNlL2FwcC5sb2cnLCBtYXhCeXRlcz0xMDI0MCwgYmFja3VwQ291bnQ9MTApDQogICAgZmlsZV9oYW5kbGVyLnNldEZvcm1hdHRlcihsb2dnaW5nLkZvcm1hdHRlcigNCiAgICAgICAgJyUoYXNjdGltZSlzICUobGV2ZWxuYW1lKXM6ICUobWVzc2FnZSlzIFtpbiAlKHBhdGhuYW1lKXM6JShsaW5lbm8pZF0nDQogICAgKSkNCiAgICBmaWxlX2hhbmRsZXIuc2V0TGV2ZWwobG9nZ2luZy5JTkZPKQ0KICAgIGFwcC5sb2dnZXIuYWRkSGFuZGxlcihmaWxlX2hhbmRsZXIpDQogICAgYXBwLmxvZ2dlci5zZXRMZXZlbChsb2dnaW5nLklORk8pDQogICAgYXBwLmxvZ2dlci5pbmZvKCctLS0gQXBsaWthY2phIE1FUyBQYXJhZmluYSBzdGFydHVqZSAtLS0nKQ0KICAgICMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQogICAgcHJpbnQoZiItLS0gW1BJRDoge29zLmdldHBpZCgpfV0gU1RBUlQgRkFCUllLSSBBUExJS0FDSkkgKERlYnVnOiB7YXBwLmRlYnVnfSkgLS0tIikNCg0KICAgIGlmIGFwcC5jb25maWcuZ2V0KCdFTlZJUk9OTUVOVCcpID09ICdwcm9kdWN0aW9uJzoNCiAgICAgICAgYXBwLmNvbmZpZ1snUFJFRkVSUkVEX1VSTF9TQ0hFTUUnXSA9ICdodHRwcycNCiAgICBlbHNlOg0KICAgICAgICBhcHAuY29uZmlnWydQUkVGRVJSRURfVVJMX1NDSEVNRSddID0gJ2h0dHAnDQogICAgICAgIEBhcHAuYWZ0ZXJfcmVxdWVzdA0KICAgICAgICBkZWYgYWRkX3NlY3VyaXR5X2hlYWRlcnMocmVzcG9uc2UpOg0KICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVyc1snU3RyaWN0LVRyYW5zcG9ydC1TZWN1cml0eSddID0gJ21heC1hZ2U9MzE1MzYwMDA7IGluY2x1ZGVTdWJEb21haW5zJw0KICAgICAgICAgICAgcmVzcG9uc2UuaGVhZGVyc1snWC1Db250ZW50LVR5cGUtT3B0aW9ucyddID0gJ25vc25pZmYnDQogICAgICAgICAgICByZXNwb25zZS5oZWFkZXJzWydYLUZyYW1lLU9wdGlvbnMnXSA9ICdTQU1FT1JJR0lOJw0KICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlDQogICAgDQogICAgIyAtLS0gT1NUQVRFQ1pOQSBQT1BSQVdLQTogS29uZmlndXJhY2phIFNvY2tldElPIHogUmVkaXMgTWFuYWdlciAtLS0NCiAgICAjIFRvIGplc3Qga2x1Y3pvd3kgZWxlbWVudCBkbGEga29tdW5pa2FjamkgbWnEmWR6eSBDZWxlcnkgYSBHdW5pY29ybmVtDQogICAgUkVESVNfVVJMID0gb3MuZW52aXJvbi5nZXQoJ1JFRElTX1VSTCcsICdyZWRpczovL2xvY2FsaG9zdDo2Mzc5LzAnKQ0KICAgIGlmICJSRURJU19VUkwiIG5vdCBpbiBvcy5lbnZpcm9uOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBpbXBvcnQgc29ja2V0DQogICAgICAgICAgICBzb2NrZXQuZ2V0aG9zdGJ5bmFtZSgncmVkaXMnKQ0KICAgICAgICAgICAgUkVESVNfVVJMID0gJ3JlZGlzOi8vcmVkaXM6NjM3OS8wJw0KICAgICAgICBleGNlcHQgc29ja2V0LmVycm9yOg0KICAgICAgICAgICAgcGFzcw0KICAgIHNvY2tldGlvLmluaXRfYXBwKGFwcCwgbWVzc2FnZV9xdWV1ZT1SRURJU19VUkwpDQogICAgIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ0KDQogICAgZGIuaW5pdF9hcHAoYXBwKQ0KICAgIA0KICAgIA0KICAgIA0KICAgICMgSW5pY2phbGl6YWNqYSBzZXJ3aXPDs3cNCiAgICBwYXRoZmluZGVyX3NlcnZpY2UgPSBQYXRoRmluZGVyKCkNCiAgICBzZW5zb3Jfc2VydmljZSA9IFNlbnNvclNlcnZpY2UoKQ0KICAgIG1vbml0b3JpbmcgPSBNb25pdG9yaW5nU2VydmljZSgpDQoNCiAgICBwYXRoZmluZGVyX3NlcnZpY2UuaW5pdF9hcHAoYXBwKQ0KICAgIHNlbnNvcl9zZXJ2aWNlLmluaXRfYXBwKGFwcCkNCiAgICBtb25pdG9yaW5nLmluaXRfYXBwKGFwcCkNCiAgICANCiAgICAjIFJlamVzdHJ1amVteSBzZXJ3aXN5IHcgZXh0ZW5zaW9ucw0KICAgIGFwcC5leHRlbnNpb25zWydwYXRoZmluZGVyJ10gPSBwYXRoZmluZGVyX3NlcnZpY2UNCiAgICBhcHAuZXh0ZW5zaW9uc1snc2Vuc29yX3NlcnZpY2UnXSA9IHNlbnNvcl9zZXJ2aWNlDQogICAgYXBwLmV4dGVuc2lvbnNbJ21vbml0b3JpbmcnXSA9IG1vbml0b3JpbmcNCiAgICANCiAgICBwcmludChmIkRFQlVHOiBSZWdpc3RlcmVkIGV4dGVuc2lvbnM6IHtsaXN0KGFwcC5leHRlbnNpb25zLmtleXMoKSl9IikNCg0KICAgIA0KDQogICAgIyBSZWplc3RydWplbXkgYmx1ZXByaW50eQ0KICAgIGZyb20gLiBpbXBvcnQgcm91dGVzDQogICAgZnJvbSAuY3lrbGVfYXBpIGltcG9ydCBjeWtsZV9icA0KICAgIGZyb20gLnRvcG9sb2d5X3JvdXRlcyBpbXBvcnQgdG9wb2xvZ3lfYnANCiAgICBmcm9tIC5vcGVyYXRpb25zX3JvdXRlcyBpbXBvcnQgYnAgYXMgb3BlcmF0aW9uc19icA0KICAgIGZyb20gLmJhdGNoX3JvdXRlcyBpbXBvcnQgYmF0Y2hfYnANCiAgICBmcm9tIC5zcHJ6ZXRfcm91dGVzIGltcG9ydCBzcHJ6ZXRfYnANCiAgICBmcm9tIC5zY2hlZHVsZXJfcm91dGVzIGltcG9ydCBzY2hlZHVsZXJfYnANCiAgICBhcHAucmVnaXN0ZXJfYmx1ZXByaW50KHJvdXRlcy5icCkNCiAgICBhcHAucmVnaXN0ZXJfYmx1ZXByaW50KGN5a2xlX2JwKQ0KICAgIGFwcC5yZWdpc3Rlcl9ibHVlcHJpbnQodG9wb2xvZ3lfYnApDQogICAgYXBwLnJlZ2lzdGVyX2JsdWVwcmludChvcGVyYXRpb25zX2JwKQ0KICAgIGFwcC5yZWdpc3Rlcl9ibHVlcHJpbnQoYmF0Y2hfYnApDQogICAgYXBwLnJlZ2lzdGVyX2JsdWVwcmludChzcHJ6ZXRfYnApDQogICAgYXBwLnJlZ2lzdGVyX2JsdWVwcmludChzY2hlZHVsZXJfYnApDQogICAgQGFwcC5yb3V0ZSgnL2hlbGxvJykNCiAgICBkZWYgaGVsbG8oKToNCiAgICAgICAgcmV0dXJuICJXaXRhaiB3IGFwbGlrYWNqaSBNRVMhIg0KICAgIGZyb20gLiBpbXBvcnQgc29ja2V0cw0KICAgIA0KICAgIA0KICAgICMgS29uZmlndXJhY2phIEZsYXNrLUFkbWluDQogICAgDQogICAgDQogICAgYWRtaW4gPSBBZG1pbihhcHAsIG5hbWU9J01FUycsIHRlbXBsYXRlX21vZGU9J2Jvb3RzdHJhcDQnKQ0KICAgIGZyb20gLiBpbXBvcnQgbW9kZWxzDQogICAgYWRtaW4uYWRkX3ZpZXcoTW9kZWxWaWV3KG1vZGVscy5TcHJ6ZXQsIGRiLnNlc3Npb24sIG5hbWU9IlNwcnrEmXQiLCBlbmRwb2ludD0ic3ByemV0X2FkbWluIikpDQogICAgYWRtaW4uYWRkX3ZpZXcoTW9kZWxWaWV3KG1vZGVscy5QYXJ0aWVTdXJvd2NhLCBkYi5zZXNzaW9uLCBuYW1lPSJQYXJ0aWUgKHN0YXJlKSIpKQ0KICAgIGFkbWluLmFkZF92aWV3KE1vZGVsVmlldyhtb2RlbHMuWmF3b3J5LCBkYi5zZXNzaW9uKSkNCiAgICBhZG1pbi5hZGRfdmlldyhNb2RlbFZpZXcobW9kZWxzLlNlZ21lbnR5LCBkYi5zZXNzaW9uKSkNCiAgICBhZG1pbi5hZGRfdmlldyhNb2RlbFZpZXcobW9kZWxzLlBvcnR5U3ByemV0dSwgZGIuc2Vzc2lvbiwgbmFtZT0iUG9ydHkgU3ByesSZdHUiKSkNCiAgICANCiAgICAjIERvZGFqbXkgdGXFvCB3aWRva2kgZGxhIG5vd2VnbyBzeXN0ZW11IHBhcnRpaQ0KICAgIGFkbWluLmFkZF92aWV3KE1vZGVsVmlldyhtb2RlbHMuQmF0Y2hlcywgZGIuc2Vzc2lvbiwgbmFtZT0iUGFydGllIFBpZXJ3b3RuZSAobm93ZSkiLCBlbmRwb2ludD0iYmF0Y2hlc19hZG1pbiIpKQ0KICAgIGFkbWluLmFkZF92aWV3KE1vZGVsVmlldyhtb2RlbHMuVGFua01peGVzLCBkYi5zZXNzaW9uLCBuYW1lPSJNaWVzemFuaW55IHcgWmJpb3JuaWthY2giKSkNCiAgICBhZG1pbi5hZGRfdmlldyhNb2RlbFZpZXcobW9kZWxzLk1peENvbXBvbmVudHMsIGRiLnNlc3Npb24sIG5hbWU9IlNrxYJhZG5pa2kgTWllc3phbmluIikpDQogICAgYWRtaW4uYWRkX3ZpZXcoTW9kZWxWaWV3KG1vZGVscy5BdWRpdFRyYWlsLCBkYi5zZXNzaW9uLCBuYW1lPSLFmmxhZCBBdWR5dG93eSIpKQ0KDQogICAgDQoNCiAgICByZXR1cm4gYXBw
  - path: app//apollo_service.py
    content: IyBhcHAvYXBvbGxvX3NlcnZpY2UucHkNCg0KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWVkZWx0YSwgdGltZXpvbmUNCg0KZGVmIF9hc19hd2FyZV91dGMoZHQ6IGRhdGV0aW1lIHwgTm9uZSkgLT4gZGF0ZXRpbWU6DQogICAgaWYgZHQgaXMgTm9uZToNCiAgICAgICAgcmV0dXJuIGRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpDQogICAgcmV0dXJuIGR0IGlmIGR0LnR6aW5mbyBpcyBub3QgTm9uZSBlbHNlIGR0LnJlcGxhY2UodHppbmZvPXRpbWV6b25lLnV0YykNCiNmcm9tIC5kYiBpbXBvcnQgZ2V0X2RiX2Nvbm5lY3Rpb24NCiNpbXBvcnQgbXlzcWwuY29ubmVjdG9yDQpmcm9tIC5leHRlbnNpb25zIGltcG9ydCBkYiAgIyBJbXBvcnR1amVteSBvYmlla3QgYGRiYCB6IF9faW5pdF9fLnB5DQpmcm9tIC5tb2RlbHMgaW1wb3J0IFNwcnpldCwgQXBvbGxvU2VzamUsIEFwb2xsb1RyYWNraW5nLCBQYXJ0aWVTdXJvd2NhLCBPcGVyYWNqZUxvZw0KZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsDQpmcm9tIHNxbGFsY2hlbXkgaW1wb3J0IGZ1bmMNCg0KDQoNCmNsYXNzIEFwb2xsb1NlcnZpY2U6DQogICAgU1pZQktPU0NfV1lUQVBJQU5JQV9LR19IID0gMTAwMC4wDQoNCiAgICANCg0KICAgDQoNCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgcm96cG9jem5pal9zZXNqZV9hcG9sbG8oaWRfc3ByemV0dSwgdHlwX3N1cm93Y2EsIHdhZ2Ffa2csIG9wZXJhdG9yPU5vbmUsIGV2ZW50X3RpbWU9Tm9uZSk6DQogICAgICAgIGN6YXNfc3RhcnR1ID0gX2FzX2F3YXJlX3V0YyhldmVudF90aW1lKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBpc3RuaWVqYWNhX3Nlc2phID0gZGIuc2Vzc2lvbi5leGVjdXRlKA0KICAgICAgICAgICAgICAgIGRiLnNlbGVjdChBcG9sbG9TZXNqZSkuZmlsdGVyX2J5KGlkX3NwcnpldHU9aWRfc3ByemV0dSwgc3RhdHVzX3Nlc2ppPSdha3R5d25hJykNCiAgICAgICAgICAgICkuc2NhbGFyX29uZV9vcl9ub25lKCkNCiAgICAgICAgICAgIGlmIGlzdG5pZWphY2Ffc2VzamE6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIkFwb2xsbyBvIElEIHtpZF9zcHJ6ZXR1fSBtYSBqdcW8IGFrdHl3bsSFIHNlc2rEmS4iKQ0KDQogICAgICAgICAgICBub3dhX3Nlc2phID0gQXBvbGxvU2VzamUoDQogICAgICAgICAgICAgICAgaWRfc3ByemV0dT1pZF9zcHJ6ZXR1LCB0eXBfc3Vyb3djYT10eXBfc3Vyb3djYSwgY3phc19yb3pwb2N6ZWNpYT1jemFzX3N0YXJ0dSwNCiAgICAgICAgICAgICAgICByb3pwb2N6ZXRhX3ByemV6PW9wZXJhdG9yLCBzdGF0dXNfc2Vzamk9J2FrdHl3bmEnDQogICAgICAgICAgICApDQogICAgICAgICAgICANCiAgICAgICAgICAgIHBvY3phdGVrX3RyYWNraW5ndSA9IEFwb2xsb1RyYWNraW5nKA0KICAgICAgICAgICAgICAgIGFwb2xsb19zZXNqZT1ub3dhX3Nlc2phLCB0eXBfemRhcnplbmlhPSdET0RBTklFX1NVUk9XQ0EnLCB3YWdhX2tnPXdhZ2Ffa2csDQogICAgICAgICAgICAgICAgY3phc196ZGFyemVuaWE9Y3phc19zdGFydHUsIG9wZXJhdG9yPW9wZXJhdG9yDQogICAgICAgICAgICApDQogICAgICAgICAgICANCiAgICAgICAgICAgIHNwcnpldCA9IGRiLnNlc3Npb24uZ2V0KFNwcnpldCwgaWRfc3ByemV0dSkNCiAgICAgICAgICAgIG5hendhX3NwcnpldHUgPSBzcHJ6ZXQubmF6d2FfdW5pa2FsbmEgaWYgc3ByemV0IGVsc2UgZiJJRHtpZF9zcHJ6ZXR1fSINCiAgICAgICAgICAgIHRpbWVzdGFtcF9zdHIgPSBjemFzX3N0YXJ0dS5zdHJmdGltZSgnJVklbSVkLSVIJU0lUycpDQogICAgICAgICAgICB1bmlrYWxueV9rb2RfcGFydGlpID0gZiJ7bmF6d2Ffc3ByemV0dX0te3RpbWVzdGFtcF9zdHJ9Ig0KICAgICAgICAgICAgbmF6d2FfcGFydGlpID0gZiJQYXJ0aWEgdyB7bmF6d2Ffc3ByemV0dX0gKHt0eXBfc3Vyb3djYX0pIC0ge3RpbWVzdGFtcF9zdHJ9Ig0KDQogICAgICAgICAgICBub3dhX3BhcnRpYSA9IFBhcnRpZVN1cm93Y2EoDQogICAgICAgICAgICAgICAgdW5pa2Fsbnlfa29kPXVuaWthbG55X2tvZF9wYXJ0aWksIG5hendhX3BhcnRpaT1uYXp3YV9wYXJ0aWksIHR5cF9zdXJvd2NhPXR5cF9zdXJvd2NhLA0KICAgICAgICAgICAgICAgIHdhZ2FfcG9jemF0a293YV9rZz13YWdhX2tnLCB3YWdhX2FrdHVhbG5hX2tnPXdhZ2Ffa2csIGlkX3NwcnpldHU9aWRfc3ByemV0dSwNCiAgICAgICAgICAgICAgICB6cm9kbG9fcG9jaG9kemVuaWE9J2Fwb2xsbycsIHN0YXR1c19wYXJ0aWk9J1N1cm93eSB3IHJlYWt0b3J6ZScsIHR5cF90cmFuc2Zvcm1hY2ppPSdOT1dBJw0KICAgICAgICAgICAgKQ0KDQogICAgICAgICAgICBkYi5zZXNzaW9uLmFkZF9hbGwoW25vd2Ffc2VzamEsIHBvY3phdGVrX3RyYWNraW5ndSwgbm93YV9wYXJ0aWFdKQ0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5jb21taXQoKQ0KICAgICAgICAgICAgcmV0dXJuIG5vd2Ffc2VzamEuaWQNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpDQogICAgICAgICAgICByYWlzZSBlDQoNCiAgICBAc3RhdGljbWV0aG9kDQogICAgZGVmIGRvZGFqX3N1cm93aWVjX2RvX2Fwb2xsbyhpZF9zcHJ6ZXR1LCB3YWdhX2tnLCBvcGVyYXRvcj1Ob25lLCBldmVudF90aW1lPU5vbmUpOg0KICAgICAgICBjemFzX3pkYXJ6ZW5pYSA9IF9hc19hd2FyZV91dGMoZXZlbnRfdGltZSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VzamEgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoDQogICAgICAgICAgICAgICAgZGIuc2VsZWN0KEFwb2xsb1Nlc2plKS5maWx0ZXJfYnkoaWRfc3ByemV0dT1pZF9zcHJ6ZXR1LCBzdGF0dXNfc2Vzamk9J2FrdHl3bmEnKQ0KICAgICAgICAgICAgKS5zY2FsYXJfb25lX29yX25vbmUoKQ0KICAgICAgICAgICAgaWYgbm90IHNlc2phOg0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJBcG9sbG8gbyBJRCB7aWRfc3ByemV0dX0gbmllIG1hIGFrdHl3bmVqIHNlc2ppLiIpDQoNCiAgICAgICAgICAgIG5vd3lfdHJhY2tpbmcgPSBBcG9sbG9UcmFja2luZygNCiAgICAgICAgICAgICAgICBpZF9zZXNqaT1zZXNqYS5pZCwgdHlwX3pkYXJ6ZW5pYT0nRE9EQU5JRV9TVVJPV0NBJywgd2FnYV9rZz13YWdhX2tnLA0KICAgICAgICAgICAgICAgIGN6YXNfemRhcnplbmlhPWN6YXNfemRhcnplbmlhLCBvcGVyYXRvcj1vcGVyYXRvcg0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5hZGQobm93eV90cmFja2luZykNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcGFydGlhID0gZGIuc2Vzc2lvbi5leGVjdXRlKA0KICAgICAgICAgICAgICAgIGRiLnNlbGVjdChQYXJ0aWVTdXJvd2NhKS5maWx0ZXJfYnkoaWRfc3ByemV0dT1pZF9zcHJ6ZXR1KQ0KICAgICAgICAgICAgKS5zY2FsYXJfb25lX29yX25vbmUoKQ0KICAgICAgICAgICAgaWYgcGFydGlhOg0KICAgICAgICAgICAgICAgIHBhcnRpYS53YWdhX2FrdHVhbG5hX2tnICs9IERlY2ltYWwod2FnYV9rZykNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgIyBHYcWCxIXFuiBhd2FyeWpuYQ0KICAgICAgICAgICAgICAgIHNwcnpldCA9IGRiLnNlc3Npb24uZ2V0KFNwcnpldCwgaWRfc3ByemV0dSkNCiAgICAgICAgICAgICAgICBuYXp3YV9zcHJ6ZXR1ID0gc3ByemV0Lm5hendhX3VuaWthbG5hIGlmIHNwcnpldCBlbHNlIGYiSUR7aWRfc3ByemV0dX0iDQogICAgICAgICAgICAgICAgdGltZXN0YW1wX3N0ciA9IGN6YXNfemRhcnplbmlhLnN0cmZ0aW1lKCclWSVtJWQtJUglTSVTJykNCiAgICAgICAgICAgICAgICB1bmlrYWxueV9rb2RfcGFydGlpID0gZiJ7bmF6d2Ffc3ByemV0dX0te3RpbWVzdGFtcF9zdHJ9LUFVVE9DUkVBVEVEIg0KICAgICAgICAgICAgICAgIG5hendhX3BhcnRpaSA9IGYiUGFydGlhIHcge25hendhX3NwcnpldHV9ICh7c2VzamEudHlwX3N1cm93Y2F9KSAtIHt0aW1lc3RhbXBfc3RyfSINCiAgICAgICAgICAgICAgICBwYXJ0aWFfYXdhcnlqbmEgPSBQYXJ0aWVTdXJvd2NhKA0KICAgICAgICAgICAgICAgICAgICB1bmlrYWxueV9rb2Q9dW5pa2Fsbnlfa29kX3BhcnRpaSwgbmF6d2FfcGFydGlpPW5hendhX3BhcnRpaSwgdHlwX3N1cm93Y2E9c2VzamEudHlwX3N1cm93Y2EsDQogICAgICAgICAgICAgICAgICAgIHdhZ2FfcG9jemF0a293YV9rZz13YWdhX2tnLCB3YWdhX2FrdHVhbG5hX2tnPXdhZ2Ffa2csIGlkX3NwcnpldHU9aWRfc3ByemV0dSwNCiAgICAgICAgICAgICAgICAgICAgenJvZGxvX3BvY2hvZHplbmlhPSdhcG9sbG8nLCBzdGF0dXNfcGFydGlpPSdTdXJvd3kgdyByZWFrdG9yemUnLCB0eXBfdHJhbnNmb3JtYWNqaT0nTk9XQScNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgZGIuc2Vzc2lvbi5hZGQocGFydGlhX2F3YXJ5am5hKQ0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5jb21taXQoKQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBkYi5zZXNzaW9uLnJvbGxiYWNrKCkNCiAgICAgICAgICAgIHJhaXNlIGUNCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgb2JsaWN6X2FrdHVhbG55X3N0YW5fYXBvbGxvKGlkX3NwcnpldHUsIGN1cnJlbnRfdGltZT1Ob25lKToNCiAgICAgICAgIiIiDQogICAgICAgIE9ibGljemEgYWt0dWFsbnkgc3RhbiBBcG9sbG8uIFdlcnNqYSA2OiBQb3ByYXdueSwgcHJvc3R5IHN5bXVsYXRvci4NCiAgICAgICAgIiIiDQogICAgICAgIGN6YXNfdGVyYXogPSBfYXNfYXdhcmVfdXRjKGN1cnJlbnRfdGltZSkNCg0KICAgICAgICAjIDEpIFBvYmllcnogc2VzasSZDQogICAgICAgIHNlc2phID0gZGIuc2Vzc2lvbi5leGVjdXRlKA0KICAgICAgICAgICAgZGIuc2VsZWN0KEFwb2xsb1Nlc2plKS5maWx0ZXJfYnkoaWRfc3ByemV0dT1pZF9zcHJ6ZXR1LCBzdGF0dXNfc2Vzamk9J2FrdHl3bmEnKQ0KICAgICAgICApLnNjYWxhcl9vbmVfb3Jfbm9uZSgpDQoNCiAgICAgICAgaWYgbm90IHNlc2phOg0KICAgICAgICAgICAgcmV0dXJuIHsnYWt0eXduYV9zZXNqYSc6IEZhbHNlLCAnZG9zdGVwbmVfa2cnOiAwfQ0KDQogICAgICAgICMgMikgUG9iaWVyeiBwcsSZZGtvxZvEhyB6IERCIChmYWxsYmFjayBkbyBzdGHFgmVqKQ0KICAgICAgICBzcHJ6ZXQgPSBkYi5zZXNzaW9uLmdldChTcHJ6ZXQsIGlkX3NwcnpldHUpDQogICAgICAgIHNwZWVkX2tnX2ggPSBEZWNpbWFsKHNwcnpldC5zenlia29zY190b3BuaWVuaWFfa2dfaCkgaWYgc3ByemV0IGFuZCBzcHJ6ZXQuc3p5Ymtvc2NfdG9wbmllbmlhX2tnX2ggaXMgbm90IE5vbmUgZWxzZSBEZWNpbWFsKEFwb2xsb1NlcnZpY2UuU1pZQktPU0NfV1lUQVBJQU5JQV9LR19IKQ0KDQogICAgICAgICMgMykgWmRhcnplbmlhIGkgc3ltdWxhY2phDQogICAgICAgIHdzenlzdGtpZV96ZGFyemVuaWEgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoDQogICAgICAgICAgICBkYi5zZWxlY3QoQXBvbGxvVHJhY2tpbmcpLmZpbHRlcl9ieShpZF9zZXNqaT1zZXNqYS5pZCkub3JkZXJfYnkoQXBvbGxvVHJhY2tpbmcuY3phc196ZGFyemVuaWEpDQogICAgICAgICkuc2NhbGFycygpLmFsbCgpDQoNCiAgICAgICAgaWxvc2NfcGx5bm5hID0gRGVjaW1hbCgnMC4wJykNCiAgICAgICAgaWxvc2Nfc3RhbGEgPSBEZWNpbWFsKCcwLjAnKQ0KICAgICAgICBjemFzX3BvcHJ6ZWRuaSA9IF9hc19hd2FyZV91dGMoc2VzamEuY3phc19yb3pwb2N6ZWNpYSkNCg0KICAgICAgICBjbGFzcyBXaXJ0dWFsbmVaZGFyemVuaWU6DQogICAgICAgICAgICBkZWYgX19pbml0X18oc2VsZiwgY3phcyk6DQogICAgICAgICAgICAgICAgc2VsZi5jemFzX3pkYXJ6ZW5pYSA9IGN6YXMNCiAgICAgICAgICAgICAgICBzZWxmLnR5cF96ZGFyemVuaWEgPSAnS09OSUVDX1NZTVVMQUNKSScNCg0KICAgICAgICBwdW5rdHlfc3ltdWxhY2ppID0gbGlzdCh3c3p5c3RraWVfemRhcnplbmlhKSArIFtXaXJ0dWFsbmVaZGFyemVuaWUoY3phc190ZXJheildDQoNCiAgICAgICAgZm9yIHpkYXJ6ZW5pZSBpbiBwdW5rdHlfc3ltdWxhY2ppOg0KICAgICAgICAgICAgY3phc19iaWV6YWN5ID0gX2FzX2F3YXJlX3V0Yyh6ZGFyemVuaWUuY3phc196ZGFyemVuaWEpDQoNCiAgICAgICAgICAgICMgVG9waWVuaWUgb2QgcG9wcnplZG5pZWdvIHB1bmt0dQ0KICAgICAgICAgICAgZGVsdGFfY3phc3VfcyA9IChjemFzX2JpZXphY3kgLSBjemFzX3BvcHJ6ZWRuaSkudG90YWxfc2Vjb25kcygpDQogICAgICAgICAgICBpZiBkZWx0YV9jemFzdV9zID4gMCBhbmQgaWxvc2Nfc3RhbGEgPiAwOg0KICAgICAgICAgICAgICAgIHd5dG9waW9ubyA9IChEZWNpbWFsKGRlbHRhX2N6YXN1X3MpIC8gRGVjaW1hbCgnMzYwMCcpKSAqIHNwZWVkX2tnX2gNCiAgICAgICAgICAgICAgICByZWFsbmllX3N0b3Bpb25lID0gbWluKGlsb3NjX3N0YWxhLCB3eXRvcGlvbm8pDQogICAgICAgICAgICAgICAgaWxvc2NfcGx5bm5hICs9IHJlYWxuaWVfc3RvcGlvbmUNCiAgICAgICAgICAgICAgICBpbG9zY19zdGFsYSAtPSByZWFsbmllX3N0b3Bpb25lDQoNCiAgICAgICAgICAgICMgRWZla3QgemRhcnplbmlhDQogICAgICAgICAgICBpZiB6ZGFyemVuaWUudHlwX3pkYXJ6ZW5pYSA9PSAnRE9EQU5JRV9TVVJPV0NBJzoNCiAgICAgICAgICAgICAgICBpbG9zY19zdGFsYSArPSB6ZGFyemVuaWUud2FnYV9rZw0KICAgICAgICAgICAgZWxpZiB6ZGFyemVuaWUudHlwX3pkYXJ6ZW5pYSA9PSAnVFJBTlNGRVJfV1lKU0NJT1dZJzoNCiAgICAgICAgICAgICAgICBpbG9zY19wbHlubmEgPSBtYXgoRGVjaW1hbCgnMC4wJyksIGlsb3NjX3BseW5uYSAtIHpkYXJ6ZW5pZS53YWdhX2tnKQ0KICAgICAgICAgICAgZWxpZiB6ZGFyemVuaWUudHlwX3pkYXJ6ZW5pYSA9PSAnS09SRUtUQV9SRUNaTkEnOg0KICAgICAgICAgICAgICAgIGlsb3NjX3BseW5uYSA9IHpkYXJ6ZW5pZS53YWdhX2tnDQogICAgICAgICAgICAgICAgaWxvc2Nfc3RhbGEgPSBEZWNpbWFsKCcwLjAnKQ0KDQogICAgICAgICAgICBjemFzX3BvcHJ6ZWRuaSA9IGN6YXNfYmllemFjeQ0KDQogICAgICAgIGRvc3RlcG5lX2tnID0gbWF4KERlY2ltYWwoJzAuMCcpLCBpbG9zY19wbHlubmEpDQoNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICdha3R5d25hX3Nlc2phJzogVHJ1ZSwNCiAgICAgICAgICAgICdpZF9zZXNqaSc6IHNlc2phLmlkLA0KICAgICAgICAgICAgJ3R5cF9zdXJvd2NhJzogc2VzamEudHlwX3N1cm93Y2EsDQogICAgICAgICAgICAnZG9zdGVwbmVfa2cnOiByb3VuZChmbG9hdChkb3N0ZXBuZV9rZyksIDIpLA0KICAgICAgICAgICAgJ2N6YXNfcm96cG9jemVjaWEnOiBfYXNfYXdhcmVfdXRjKHNlc2phLmN6YXNfcm96cG9jemVjaWEpLmlzb2Zvcm1hdCgpDQogICAgICAgIH0NCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYga29yeWd1al9zdGFuX2Fwb2xsbyhpZF9zcHJ6ZXR1LCByemVjenl3aXN0YV93YWdhX2tnLCBvcGVyYXRvcj1Ob25lLCB1d2FnaT1Ob25lLCBldmVudF90aW1lPU5vbmUpOg0KICAgICAgICBjemFzX3pkYXJ6ZW5pYSA9IF9hc19hd2FyZV91dGMoZXZlbnRfdGltZSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc2VzamEgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoDQogICAgICAgICAgICAgICAgZGIuc2VsZWN0KEFwb2xsb1Nlc2plKS5maWx0ZXJfYnkoaWRfc3ByemV0dT1pZF9zcHJ6ZXR1LCBzdGF0dXNfc2Vzamk9J2FrdHl3bmEnKQ0KICAgICAgICAgICAgKS5zY2FsYXJfb25lX29yX25vbmUoKQ0KICAgICAgICAgICAgaWYgbm90IHNlc2phOg0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJBcG9sbG8gbyBJRCB7aWRfc3ByemV0dX0gbmllIG1hIGFrdHl3bmVqIHNlc2ppLiIpDQoNCiAgICAgICAgICAgIGtvcmVrdGEgPSBBcG9sbG9UcmFja2luZygNCiAgICAgICAgICAgICAgICBpZF9zZXNqaT1zZXNqYS5pZCwgdHlwX3pkYXJ6ZW5pYT0nS09SRUtUQV9SRUNaTkEnLCB3YWdhX2tnPXJ6ZWN6eXdpc3RhX3dhZ2Ffa2csDQogICAgICAgICAgICAgICAgY3phc196ZGFyemVuaWE9Y3phc196ZGFyemVuaWEsIG9wZXJhdG9yPW9wZXJhdG9yLCB1d2FnaT11d2FnaQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5hZGQoa29yZWt0YSkNCiAgICAgICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpDQogICAgICAgICAgICByYWlzZSBlDQoNCiAgICANCiAgICAgICAgICAgIA0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgemFrb25jel9zZXNqZV9hcG9sbG8oaWRfc3ByemV0dTogaW50LCBvcGVyYXRvcjogc3RyID0gTm9uZSk6DQogICAgICAgICIiIg0KICAgICAgICBLb8WEY3p5IGFrdHl3bsSFIHNlc2rEmSB3IEFwb2xsbyBpIGFyY2hpd2l6dWplIHBvd2nEhXphbsSFIHBhcnRpxJkgc3Vyb3djYS4NCiAgICAgICAgIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgICMgMS4gWm5hamTFuiBha3R5d27EhSBzZXNqxJkNCiAgICAgICAgICAgIHNlc2phID0gZGIuc2Vzc2lvbi5leGVjdXRlKA0KICAgICAgICAgICAgICAgIGRiLnNlbGVjdChBcG9sbG9TZXNqZSkuZmlsdGVyX2J5KGlkX3NwcnpldHU9aWRfc3ByemV0dSwgc3RhdHVzX3Nlc2ppPSdha3R5d25hJykNCiAgICAgICAgICAgICkuc2NhbGFyX29uZV9vcl9ub25lKCkNCg0KICAgICAgICAgICAgaWYgbm90IHNlc2phOg0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJBcG9sbG8gbyBJRCB7aWRfc3ByemV0dX0gbmllIG1hIGFrdHl3bmVqIHNlc2ppIGRvIHpha2/FhGN6ZW5pYS4iKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIDIuIFptaWXFhCBzdGF0dXMgc2VzamkNCiAgICAgICAgICAgIHNlc2phLnN0YXR1c19zZXNqaSA9ICd6YWtvbmN6b25hJw0KICAgICAgICAgICAgc2VzamEuY3phc196YWtvbmN6ZW5pYSA9IGRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpDQoNCiAgICAgICAgICAgICMgMy4gWm5hamTFuiBwYXJ0acSZIHBvd2nEhXphbsSFIHogdMSFIHNlc2rEhSBpIHphcmNoaXdpenVqIGrEhQ0KICAgICAgICAgICAgIyAgICBaYWvFgmFkYW15LCDFvGUgcGFydGlhIG1hIHBvZG9ibnkgY3phcyB1dHdvcnplbmlhIGNvIHNlc2phLg0KICAgICAgICAgICAgIyAgICBUbyBqZXN0IHphxYJvxbxlbmllLCBrdMOzcmUgbXVzaW15IHBvcHJhd2nEhyB3IHByenlzesWCb8WbY2kuDQogICAgICAgICAgICAjICAgIExlcHN6eW0gcm96d2nEhXphbmllbSBiecWCb2J5IGRvZGFuaWUgYGlkX3Nlc2ppYCBkbyB0YWJlbGkgYHBhcnRpZV9zdXJvd2NhYC4NCiAgICAgICAgICAgIHBhcnRpYSA9IGRiLnNlc3Npb24uZXhlY3V0ZSgNCiAgICAgICAgICAgICAgICBkYi5zZWxlY3QoUGFydGllU3Vyb3djYSkuZmlsdGVyKA0KICAgICAgICAgICAgICAgICAgICBQYXJ0aWVTdXJvd2NhLmlkX3NwcnpldHUgPT0gaWRfc3ByemV0dSwNCiAgICAgICAgICAgICAgICAgICAgUGFydGllU3Vyb3djYS5zdGF0dXNfcGFydGlpID09ICdTdXJvd3kgdyByZWFrdG9yemUnDQogICAgICAgICAgICAgICAgKS5vcmRlcl9ieShQYXJ0aWVTdXJvd2NhLmRhdGFfdXR3b3J6ZW5pYS5kZXNjKCkpDQogICAgICAgICAgICApLnNjYWxhcnMoKS5maXJzdCgpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIHBhcnRpYToNCiAgICAgICAgICAgICAgICBwYXJ0aWEuc3RhdHVzX3BhcnRpaSA9ICdBcmNoaXdhbG5hJw0KICAgICAgICAgICAgICAgICMgT3Bjam9uYWxuaWU6IG9kZXBuaWogcGFydGnEmSBvZCBzcHJ6xJl0dQ0KICAgICAgICAgICAgICAgIHBhcnRpYS5pZF9zcHJ6ZXR1ID0gTm9uZQ0KDQogICAgICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpDQoNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpDQogICAgICAgICAgICByYWlzZSBlDQoNCiAgICBAc3RhdGljbWV0aG9kDQogICAgZGVmIGdldF9zdGFuX2Fwb2xsbyhpZF9zcHJ6ZXR1OiBpbnQsIGN1cnJlbnRfdGltZT1Ob25lKToNCiAgICAgICAgIiIiDQogICAgICAgIFBvYmllcmEgYWt0dWFsbnksIGR5bmFtaWN6bnkgc3RhbiBkYW5lZ28gQXBvbGxvLCBkZWxlZ3VqxIVjDQogICAgICAgIG9ibGljemVuaWEgZG8gbm93ZWosIHByZWN5enlqbmVqIG1ldG9keSBzeW11bGFjeWpuZWouDQogICAgICAgICIiIg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBhcG9sbG8gPSBkYi5zZXNzaW9uLmdldChTcHJ6ZXQsIGlkX3NwcnpldHUpDQogICAgICAgICAgICBpZiBub3QgYXBvbGxvOg0KICAgICAgICAgICAgICAgIHJldHVybiBOb25lICMgbHViIHJ6dWNpxIcgd3lqxIV0ZWsNCg0KICAgICAgICAgICAgIyBQb2RzdGF3b3dlIGRhbmUgbyBzcHJ6xJljaWUNCiAgICAgICAgICAgIHJlc3VsdCA9IHsNCiAgICAgICAgICAgICAgICAnaWRfc3ByemV0dSc6IGFwb2xsby5pZCwNCiAgICAgICAgICAgICAgICAnbmF6d2FfYXBvbGxvJzogYXBvbGxvLm5hendhX3VuaWthbG5hLA0KICAgICAgICAgICAgICAgICdha3R5d25hX3Nlc2phJzogRmFsc2UsDQogICAgICAgICAgICAgICAgJ3N6eWJrb3NjX3RvcG5pZW5pYV9rZ19oJzogZmxvYXQoYXBvbGxvLnN6eWJrb3NjX3RvcG5pZW5pYV9rZ19oIG9yIEFwb2xsb1NlcnZpY2UuU1pZQktPU0NfV1lUQVBJQU5JQV9LR19IKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBzZXNqYSA9IGRiLnNlc3Npb24uZXhlY3V0ZSgNCiAgICAgICAgICAgICAgICBkYi5zZWxlY3QoQXBvbGxvU2VzamUpLmZpbHRlcl9ieShpZF9zcHJ6ZXR1PWlkX3NwcnpldHUsIHN0YXR1c19zZXNqaT0nYWt0eXduYScpDQogICAgICAgICAgICApLnNjYWxhcl9vbmVfb3Jfbm9uZSgpDQoNCiAgICAgICAgICAgIGlmIG5vdCBzZXNqYToNCiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0ICMgWndyw7PEhyBwb2RzdGF3b3dlIGRhbmUsIGplxZtsaSBuaWUgbWEgc2VzamkNCg0KICAgICAgICAgICAgIyAtLS0gS0xVQ1pPV0EgWk1JQU5BIC0tLQ0KICAgICAgICAgICAgIyBXeXdvxYJhaiBub3fEhSwgcG9wcmF3bsSFIG1ldG9kxJksIGFieSB1enlza2HEhyBkb2vFgmFkbsSFIGRvc3TEmXBuxIUgaWxvxZvEhw0KICAgICAgICAgICAgc3Rhbl9vYmxpY3pvbnkgPSBBcG9sbG9TZXJ2aWNlLm9ibGljel9ha3R1YWxueV9zdGFuX2Fwb2xsbyhpZF9zcHJ6ZXR1LCBjdXJyZW50X3RpbWU9Y3VycmVudF90aW1lKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIE9ibGljeiBiaWxhbnMgImtzacSZZ293eSIgZGxhIGluZm9ybWFjamkgZG9kYXRrb3dlaiB3IEdVSQ0KICAgICAgICAgICAgdG90YWxfYWRkZWRfcSA9IGRiLnNlbGVjdChmdW5jLnN1bShBcG9sbG9UcmFja2luZy53YWdhX2tnKSkud2hlcmUoDQogICAgICAgICAgICAgICAgQXBvbGxvVHJhY2tpbmcuaWRfc2VzamkgPT0gc2VzamEuaWQsDQogICAgICAgICAgICAgICAgQXBvbGxvVHJhY2tpbmcudHlwX3pkYXJ6ZW5pYSA9PSAnRE9EQU5JRV9TVVJPV0NBJw0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgdG90YWxfYWRkZWQgPSBkYi5zZXNzaW9uLmV4ZWN1dGUodG90YWxfYWRkZWRfcSkuc2NhbGFyKCkgb3IgRGVjaW1hbCgnMC4wJykNCg0KICAgICAgICAgICAgdG90YWxfdHJhbnNmZXJyZWRfcSA9IGRiLnNlbGVjdChmdW5jLnN1bShBcG9sbG9UcmFja2luZy53YWdhX2tnKSkud2hlcmUoDQogICAgICAgICAgICAgICAgQXBvbGxvVHJhY2tpbmcuaWRfc2VzamkgPT0gc2VzamEuaWQsDQogICAgICAgICAgICAgICAgQXBvbGxvVHJhY2tpbmcudHlwX3pkYXJ6ZW5pYSA9PSAnVFJBTlNGRVJfV1lKU0NJT1dZJw0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgdG90YWxfdHJhbnNmZXJyZWQgPSBkYi5zZXNzaW9uLmV4ZWN1dGUodG90YWxfdHJhbnNmZXJyZWRfcSkuc2NhbGFyKCkgb3IgRGVjaW1hbCgnMC4wJykNCg0KICAgICAgICAgICAgYmlsYW5zX2tzaWVnb3d5X2tnID0gZmxvYXQodG90YWxfYWRkZWQgLSB0b3RhbF90cmFuc2ZlcnJlZCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBQb2JpZXJ6IG9zdGF0bmkgdHJhbnNmZXIgZGxhIGNlbMOzdyBpbmZvcm1hY3lqbnljaA0KICAgICAgICAgICAgb3N0YXRuaV90cmFuc2ZlciA9IGRiLnNlc3Npb24uZXhlY3V0ZSgNCiAgICAgICAgICAgICAgICBkYi5zZWxlY3QoQXBvbGxvVHJhY2tpbmcpLndoZXJlKA0KICAgICAgICAgICAgICAgICAgICBBcG9sbG9UcmFja2luZy5pZF9zZXNqaSA9PSBzZXNqYS5pZCwNCiAgICAgICAgICAgICAgICAgICAgQXBvbGxvVHJhY2tpbmcudHlwX3pkYXJ6ZW5pYSA9PSAnVFJBTlNGRVJfV1lKU0NJT1dZJw0KICAgICAgICAgICAgICAgICkub3JkZXJfYnkoQXBvbGxvVHJhY2tpbmcuY3phc196ZGFyemVuaWEuZGVzYygpKQ0KICAgICAgICAgICAgKS5zY2FsYXJzKCkuZmlyc3QoKQ0KDQogICAgICAgICAgICAjIFpha3R1YWxpenVqIHPFgm93bmlrIHd5bmlrb3d5IG8gd3N6eXN0a2llIHBvdHJ6ZWJuZSBkYW5lDQogICAgICAgICAgICByZXN1bHQudXBkYXRlKHsNCiAgICAgICAgICAgICAgICAnYWt0eXduYV9zZXNqYSc6IFRydWUsDQogICAgICAgICAgICAgICAgJ2lkX3Nlc2ppJzogc2VzamEuaWQsDQogICAgICAgICAgICAgICAgJ3R5cF9zdXJvd2NhJzogc2VzamEudHlwX3N1cm93Y2EsDQogICAgICAgICAgICAgICAgJ2Rvc3RlcG5lX2tnJzogc3Rhbl9vYmxpY3pvbnlbJ2Rvc3RlcG5lX2tnJ10sICMgVcW8eWogd3luaWt1IHogbm93ZWogbWV0b2R5DQogICAgICAgICAgICAgICAgJ2JpbGFuc19zZXNqaV9rZyc6IHJvdW5kKG1heCgwLCBiaWxhbnNfa3NpZWdvd3lfa2cpLCAyKSwNCiAgICAgICAgICAgICAgICAnb3N0YXRuaV90cmFuc2Zlcl9jemFzJzogb3N0YXRuaV90cmFuc2Zlci5jemFzX3pkYXJ6ZW5pYS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKSBpZiBvc3RhdG5pX3RyYW5zZmVyIGVsc2UgTm9uZSwNCiAgICAgICAgICAgICAgICAnb3N0YXRuaV90cmFuc2Zlcl9rZyc6IGZsb2F0KG9zdGF0bmlfdHJhbnNmZXIud2FnYV9rZykgaWYgb3N0YXRuaV90cmFuc2ZlciBlbHNlIE5vbmUNCiAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgIHJldHVybiByZXN1bHQNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgIyBMZXBzemUgbG9nb3dhbmllIGLFgsSZZMOzdw0KICAgICAgICAgICAgcHJpbnQoZiJCxYLEhWQgYmF6eSBkYW55Y2ggcHJ6eSBwb2JpZXJhbml1IHN0YW51IEFwb2xsbyAoSUQ6IHtpZF9zcHJ6ZXR1fSk6IHtlfSIpDQogICAgICAgICAgICBpbXBvcnQgdHJhY2ViYWNrDQogICAgICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkNCiAgICAgICAgICAgIHJhaXNlICMgUnp1xIcgd3lqxIV0a2llbSwgYWJ5IHdhcnN0d2EgQVBJIG1vZ8WCYSBnbyBvYnPFgnXFvHnEhw==
  - path: app//batch_management_service.py
    content: IyBhcHAvYmF0Y2hfbWFuYWdlbWVudF9zZXJ2aWNlLnB5DQpmcm9tIC5leHRlbnNpb25zIGltcG9ydCBkYg0KZnJvbSAubW9kZWxzIGltcG9ydCBCYXRjaGVzLCBTcHJ6ZXQsIFRhbmtNaXhlcywgTWl4Q29tcG9uZW50cywgQXVkaXRUcmFpbCwgQXBvbGxvU2VzamUsIEFwb2xsb1RyYWNraW5nDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZXpvbmUNCmZyb20gc3FsYWxjaGVteSBpbXBvcnQgZnVuYywgc2VsZWN0DQpmcm9tIHNxbGFsY2hlbXkub3JtIGltcG9ydCBqb2luZWRsb2FkDQpmcm9tIGRlY2ltYWwgaW1wb3J0IERlY2ltYWwNCmZyb20gLmFwb2xsb19zZXJ2aWNlIGltcG9ydCBBcG9sbG9TZXJ2aWNlDQppbXBvcnQgcHl0eg0KZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgZGVmYXVsdGRpY3QNCg0KV0FSU0FXX1RaID0gcHl0ei50aW1lem9uZSgnRXVyb3BlL1dhcnNhdycpDQoNCmNsYXNzIEJhdGNoTWFuYWdlbWVudFNlcnZpY2U6DQogICAgDQogICAgZGVmIF9nZW5lcmF0ZV91bmlxdWVfY29kZShtYXRlcmlhbF90eXBlLCBzb3VyY2VfbmFtZSk6DQogICAgICAgICMgMS4gUG9iaWVyeiBha3R1YWxueSBjemFzIHcgVVRDDQogICAgICAgIG5vd191dGMgPSBkYXRldGltZS5ub3codGltZXpvbmUudXRjKQ0KICAgICAgICAjIDIuIFNrb253ZXJ0dWogZ28gZG8gc3RyZWZ5IGN6YXNvd2VqIFdhcnN6YXd5DQogICAgICAgIG5vd193YXJzYXcgPSBub3dfdXRjLmFzdGltZXpvbmUoV0FSU0FXX1RaKQ0KICAgICAgICAjIDMuIFXFvHlqIGN6YXN1IGxva2FsbmVnbyBkbyBzZm9ybWF0b3dhbmlhIHN0cmluZ2ENCiAgICAgICAgdG9kYXlfc3RyID0gbm93X3dhcnNhdy5zdHJmdGltZSgnJXklbSVkJykNCiAgICAgICAgDQogICAgICAgIGJhc2VfcHJlZml4ID0gZiJTLXtzb3VyY2VfbmFtZX0te21hdGVyaWFsX3R5cGV9LXt0b2RheV9zdHJ9Ig0KICAgICAgICBxdWVyeSA9IHNlbGVjdChmdW5jLmNvdW50KEJhdGNoZXMuaWQpKS53aGVyZShCYXRjaGVzLnVuaXF1ZV9jb2RlLmxpa2UoZiJ7YmFzZV9wcmVmaXh9JSIpKQ0KICAgICAgICBkYWlseV9jb3VudCA9IGRiLnNlc3Npb24uZXhlY3V0ZShxdWVyeSkuc2NhbGFyKCkNCiAgICAgICAgcmV0dXJuIGYie2Jhc2VfcHJlZml4fS17ZGFpbHlfY291bnQgKyAxOjAyZH0iDQoNCiAgICBAc3RhdGljbWV0aG9kDQogICAgZGVmIGNyZWF0ZV9yYXdfbWF0ZXJpYWxfYmF0Y2gobWF0ZXJpYWxfdHlwZSwgc291cmNlX3R5cGUsIHNvdXJjZV9uYW1lLCBxdWFudGl0eSwgb3BlcmF0b3IpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICB1bmlxdWVfY29kZSA9IEJhdGNoTWFuYWdlbWVudFNlcnZpY2UuX2dlbmVyYXRlX3VuaXF1ZV9jb2RlKG1hdGVyaWFsX3R5cGUsIHNvdXJjZV9uYW1lKQ0KICAgICAgICAgICAgbmV3X2JhdGNoID0gQmF0Y2hlcygNCiAgICAgICAgICAgICAgICB1bmlxdWVfY29kZT11bmlxdWVfY29kZSwgbWF0ZXJpYWxfdHlwZT1tYXRlcmlhbF90eXBlLCBzb3VyY2VfdHlwZT1zb3VyY2VfdHlwZSwNCiAgICAgICAgICAgICAgICBzb3VyY2VfbmFtZT1zb3VyY2VfbmFtZSwgaW5pdGlhbF9xdWFudGl0eT1xdWFudGl0eSwgY3VycmVudF9xdWFudGl0eT1xdWFudGl0eQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5hZGQobmV3X2JhdGNoKQ0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5jb21taXQoKQ0KICAgICAgICAgICAgcmV0dXJuIHsnYmF0Y2hfaWQnOiBuZXdfYmF0Y2guaWQsICd1bmlxdWVfY29kZSc6IG5ld19iYXRjaC51bmlxdWVfY29kZX0NCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpOyByYWlzZSBlDQoNCiAgICBAc3RhdGljbWV0aG9kDQogICAgZGVmIF9nZW5lcmF0ZV9taXhfY29kZSh0YW5rX25hbWUpOg0KICAgICAgICAjIFphc3Rvc3VqIHTEmSBzYW3EhSBsb2dpa8SZIGNvIHBvd3nFvGVqDQogICAgICAgIG5vd191dGMgPSBkYXRldGltZS5ub3codGltZXpvbmUudXRjKQ0KICAgICAgICBub3dfd2Fyc2F3ID0gbm93X3V0Yy5hc3RpbWV6b25lKFdBUlNBV19UWikNCiAgICAgICAgdG9kYXlfc3RyID0gbm93X3dhcnNhdy5zdHJmdGltZSgnJXklbSVkJykNCg0KICAgICAgICBiYXNlX3ByZWZpeCA9IGYiQi17dGFua19uYW1lfS17dG9kYXlfc3RyfSINCiAgICAgICAgcXVlcnkgPSBzZWxlY3QoZnVuYy5jb3VudChUYW5rTWl4ZXMuaWQpKS53aGVyZShUYW5rTWl4ZXMudW5pcXVlX2NvZGUubGlrZShmIntiYXNlX3ByZWZpeH0lIikpDQogICAgICAgIGRhaWx5X2NvdW50ID0gZGIuc2Vzc2lvbi5leGVjdXRlKHF1ZXJ5KS5zY2FsYXIoKQ0KICAgICAgICByZXR1cm4gZiJ7YmFzZV9wcmVmaXh9LXtkYWlseV9jb3VudCArIDE6MDJkfSINCiAgICAgICAgDQogICAgQHN0YXRpY21ldGhvZA0KICAgIGRlZiB0YW5rX2ludG9fZGlydHlfdGFuayhiYXRjaF9pZCwgdGFua19pZCwgb3BlcmF0b3IpOg0KICAgICAgICAiIiJUYW5rdWplIHBhcnRpxJkgZG8gemJpb3JuaWthLCB6YXJ6xIVkemFqxIVjIGBhY3RpdmVfbWl4X2lkYC4iIiINCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdGFuayA9IGRiLnNlc3Npb24uZ2V0KFNwcnpldCwgdGFua19pZCkNCiAgICAgICAgICAgIGJhdGNoID0gZGIuc2Vzc2lvbi5nZXQoQmF0Y2hlcywgYmF0Y2hfaWQpDQogICAgICAgICAgICBpZiBub3QgdGFuayBvciBub3QgYmF0Y2g6IHJhaXNlIFZhbHVlRXJyb3IoIlpiaW9ybmlrIGx1YiBwYXJ0aWEgbmllIGlzdG5pZWplLiIpDQoNCiAgICAgICAgICAgIGFjdGl2ZV9taXggPSBkYi5zZXNzaW9uLmdldChUYW5rTWl4ZXMsIHRhbmsuYWN0aXZlX21peF9pZCkgaWYgdGFuay5hY3RpdmVfbWl4X2lkIGVsc2UgTm9uZQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiBub3QgYWN0aXZlX21peCBvciBhY3RpdmVfbWl4LnN0YXR1cyA9PSAnQVJDSElWRUQnOg0KICAgICAgICAgICAgICAgIG1peF9jb2RlID0gQmF0Y2hNYW5hZ2VtZW50U2VydmljZS5fZ2VuZXJhdGVfbWl4X2NvZGUodGFuay5uYXp3YV91bmlrYWxuYSkNCiAgICAgICAgICAgICAgICBhY3RpdmVfbWl4ID0gVGFua01peGVzKHVuaXF1ZV9jb2RlPW1peF9jb2RlLCB0YW5rX2lkPXRhbmsuaWQpDQogICAgICAgICAgICAgICAgZGIuc2Vzc2lvbi5hZGQoYWN0aXZlX21peCkNCiAgICAgICAgICAgICAgICBkYi5zZXNzaW9uLmZsdXNoKCkNCiAgICAgICAgICAgICAgICB0YW5rLmFjdGl2ZV9taXhfaWQgPSBhY3RpdmVfbWl4LmlkDQoNCiAgICAgICAgICAgIHF1YW50aXR5X3RvX2FkZCA9IGJhdGNoLmN1cnJlbnRfcXVhbnRpdHkNCiAgICAgICAgICAgIGlmIHF1YW50aXR5X3RvX2FkZCA8PSAwOiByYWlzZSBWYWx1ZUVycm9yKCJOaWUgbW/FvG5hIGRvZGHEhyBwYXJ0aWkgbyB6ZXJvd2VqIGlsb8WbY2kuIikNCg0KICAgICAgICAgICAgZXhpc3RpbmdfY29tcG9uZW50ID0gbmV4dCgoYyBmb3IgYyBpbiBhY3RpdmVfbWl4LmNvbXBvbmVudHMgaWYgYy5iYXRjaF9pZCA9PSBiYXRjaF9pZCksIE5vbmUpDQogICAgICAgICAgICBpZiBleGlzdGluZ19jb21wb25lbnQ6DQogICAgICAgICAgICAgICAgZXhpc3RpbmdfY29tcG9uZW50LnF1YW50aXR5X2luX21peCArPSBxdWFudGl0eV90b19hZGQNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgbmV3X2NvbXBvbmVudCA9IE1peENvbXBvbmVudHMobWl4X2lkPWFjdGl2ZV9taXguaWQsIGJhdGNoX2lkPWJhdGNoX2lkLCBxdWFudGl0eV9pbl9taXg9cXVhbnRpdHlfdG9fYWRkKQ0KICAgICAgICAgICAgICAgIGRiLnNlc3Npb24uYWRkKG5ld19jb21wb25lbnQpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGJhdGNoLmN1cnJlbnRfcXVhbnRpdHkgPSAwDQogICAgICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpDQogICAgICAgICAgICByZXR1cm4geydtaXhfaWQnOiBhY3RpdmVfbWl4LmlkfQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBkYi5zZXNzaW9uLnJvbGxiYWNrKCk7IHJhaXNlIGUNCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgZ2V0X21peF9jb21wb3NpdGlvbihtaXhfaWQpOg0KICAgICAgICAiIiJad3JhY2Egc2vFgmFkIG5hIHBvZHN0YXdpZSB3YWcgemFwaXNhbnljaCB3IE1peENvbXBvbmVudHMuIChXZXJzamEgd3ptb2NuaW9uYSkiIiINCiAgICAgICAgIyBwcmludChmIkRFQlVHOiBVcnVjaG9taW9ubyBnZXRfbWl4X2NvbXBvc2l0aW9uIGRsYSBtaXhfaWQ6IHttaXhfaWR9IikNCiAgICAgICAgDQogICAgICAgICMgVcW8eWogam9pbmVkbG9hZCwgYWJ5IG9kIHJhenUgemHFgmFkb3dhxIcgcG93acSFemFuZSBvYmlla3R5IEJhdGNoDQogICAgICAgIHF1ZXJ5ID0gZGIuc2VsZWN0KFRhbmtNaXhlcykub3B0aW9ucygNCiAgICAgICAgICAgIGpvaW5lZGxvYWQoVGFua01peGVzLmNvbXBvbmVudHMpLmpvaW5lZGxvYWQoTWl4Q29tcG9uZW50cy5iYXRjaCkNCiAgICAgICAgKS53aGVyZShUYW5rTWl4ZXMuaWQgPT0gbWl4X2lkKQ0KICAgICAgICANCiAgICAgICAgbWl4ID0gZGIuc2Vzc2lvbi5leGVjdXRlKHF1ZXJ5KS51bmlxdWUoKS5zY2FsYXJfb25lX29yX25vbmUoKQ0KDQogICAgICAgIGlmIG5vdCBtaXg6DQogICAgICAgICAgICAjIHByaW50KGYiREVCVUc6IE5pZSB6bmFsZXppb25vIG1pZXN6YW5pbnkgbyBJRCB7bWl4X2lkfSIpDQogICAgICAgICAgICByZXR1cm4geyd0b3RhbF93ZWlnaHQnOiAwLjAsICdjb21wb25lbnRzX2J5X2JhdGNoJzogW10sICdzdW1tYXJ5X2J5X21hdGVyaWFsJzogW119DQogICAgICAgIA0KICAgICAgICAjIEZpbHRydWogc2vFgmFkbmlraSwga3TDs3JlIG1hasSFIHJlYWxuxIUgd2FnxJkgdyBtaWVzemFuaW5pZQ0KICAgICAgICBjb21wb25lbnRzX3dpdGhfcXVhbnRpdHkgPSBbYyBmb3IgYyBpbiBtaXguY29tcG9uZW50cyBpZiBjLnF1YW50aXR5X2luX21peCA+IDBdDQogICAgICAgICNwcmludChmIkRFQlVHOiBabmFsZXppb25vIHtsZW4oY29tcG9uZW50c193aXRoX3F1YW50aXR5KX0gc2vFgmFkbmlrw7N3IHogd2FnxIUgPiAwLiIpDQoNCiAgICAgICAgdG90YWxfd2VpZ2h0ID0gc3VtKGMucXVhbnRpdHlfaW5fbWl4IGZvciBjIGluIGNvbXBvbmVudHNfd2l0aF9xdWFudGl0eSkNCiAgICAgICAgaWYgdG90YWxfd2VpZ2h0ID09IDA6DQogICAgICAgICAgICAjIHByaW50KCJERUJVRzogQ2HFgmtvd2l0YSB3YWdhIG1pZXN6YW5pbnkgd3lub3NpIDAuIikNCiAgICAgICAgICAgIHJldHVybiB7J3RvdGFsX3dlaWdodCc6IDAuMCwgJ2NvbXBvbmVudHNfYnlfYmF0Y2gnOiBbXSwgJ3N1bW1hcnlfYnlfbWF0ZXJpYWwnOiBbXX0NCg0KICAgICAgICAjIE9ibGljeiBzemN6ZWfDs8WCeSBkbGEga2HFvGRlaiBwYXJ0aWkgcGllcndvdG5lag0KICAgICAgICBjb21wb3NpdGlvbl9kZXRhaWxzID0gW10NCiAgICAgICAgZm9yIGMgaW4gY29tcG9uZW50c193aXRoX3F1YW50aXR5Og0KICAgICAgICAgICAgcGVyY2VudGFnZSA9IChjLnF1YW50aXR5X2luX21peCAvIHRvdGFsX3dlaWdodCkgKiAxMDAgaWYgdG90YWxfd2VpZ2h0ID4gMCBlbHNlIDANCiAgICAgICAgICAgIGNvbXBvc2l0aW9uX2RldGFpbHMuYXBwZW5kKHsNCiAgICAgICAgICAgICAgICAnYmF0Y2hfaWQnOiBjLmJhdGNoLmlkLA0KICAgICAgICAgICAgICAgICdiYXRjaF9jb2RlJzogYy5iYXRjaC51bmlxdWVfY29kZSwNCiAgICAgICAgICAgICAgICAnbWF0ZXJpYWxfdHlwZSc6IGMuYmF0Y2gubWF0ZXJpYWxfdHlwZSwNCiAgICAgICAgICAgICAgICAncXVhbnRpdHlfaW5fbWl4JzogYy5xdWFudGl0eV9pbl9taXgsDQogICAgICAgICAgICAgICAgJ3BlcmNlbnRhZ2UnOiBwZXJjZW50YWdlDQogICAgICAgICAgICB9KQ0KDQogICAgICAgICMgQWdyZWd1aiB3eW5pa2kgcG8gdHlwaWUgbWF0ZXJpYcWCdQ0KICAgICAgICBtYXRlcmlhbF90eXBlX3N1bW1hcnkgPSBkZWZhdWx0ZGljdChsYW1iZGE6IERlY2ltYWwoJzAuMCcpKQ0KICAgICAgICBmb3IgYyBpbiBjb21wb25lbnRzX3dpdGhfcXVhbnRpdHk6DQogICAgICAgICAgICBtYXRlcmlhbF90eXBlX3N1bW1hcnlbYy5iYXRjaC5tYXRlcmlhbF90eXBlXSArPSBjLnF1YW50aXR5X2luX21peA0KDQogICAgICAgIG1hdGVyaWFsX3N1bW1hcnlfZGV0YWlscyA9IFtdDQogICAgICAgIGZvciBtYXRlcmlhbF90eXBlLCB0b3RhbF9xdWFudGl0eSBpbiBtYXRlcmlhbF90eXBlX3N1bW1hcnkuaXRlbXMoKToNCiAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSAodG90YWxfcXVhbnRpdHkgLyB0b3RhbF93ZWlnaHQpICogMTAwIGlmIHRvdGFsX3dlaWdodCA+IDAgZWxzZSAwDQogICAgICAgICAgICBtYXRlcmlhbF9zdW1tYXJ5X2RldGFpbHMuYXBwZW5kKHsNCiAgICAgICAgICAgICAgICAnbWF0ZXJpYWxfdHlwZSc6IG1hdGVyaWFsX3R5cGUsDQogICAgICAgICAgICAgICAgJ3RvdGFsX3F1YW50aXR5JzogdG90YWxfcXVhbnRpdHksDQogICAgICAgICAgICAgICAgJ3BlcmNlbnRhZ2UnOiBwZXJjZW50YWdlDQogICAgICAgICAgICB9KQ0KICAgICAgICANCiAgICAgICAgIyBQcnp5Z290dWogZmluYWxueSB3eW5paw0KICAgICAgICBmaW5hbF9yZXN1bHQgPSB7DQogICAgICAgICAgICAndG90YWxfd2VpZ2h0JzogdG90YWxfd2VpZ2h0LCANCiAgICAgICAgICAgICdjb21wb25lbnRzX2J5X2JhdGNoJzogY29tcG9zaXRpb25fZGV0YWlscywNCiAgICAgICAgICAgICdjb21wb25lbnRzJzogY29tcG9zaXRpb25fZGV0YWlscywgIyA8LS0gWldSQUNBTVkgS0xVQ1ogJ2NvbXBvbmVudHMnDQogICAgICAgICAgICAnc3VtbWFyeV9ieV9tYXRlcmlhbCc6IHNvcnRlZChtYXRlcmlhbF9zdW1tYXJ5X2RldGFpbHMsIGtleT1sYW1iZGEgeDogeFsnbWF0ZXJpYWxfdHlwZSddKQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICAjIHByaW50KGYiREVCVUc6IFp3cmFjYW5lIGRhbmUgc2vFgmFkdToge2ZpbmFsX3Jlc3VsdH0iKQ0KICAgICAgICByZXR1cm4gZmluYWxfcmVzdWx0DQoNCiAgICBAc3RhdGljbWV0aG9kDQogICAgZGVmIHRyYW5zZmVyX2JldHdlZW5fZGlydHlfdGFua3Moc291cmNlX3RhbmtfaWQsIGRlc3RpbmF0aW9uX3RhbmtfaWQsIHF1YW50aXR5X3RvX3RyYW5zZmVyLCBvcGVyYXRvcik6DQogICAgICAgICIiIk9ya2llc3RydWplIHRyYW5zZmVyIG1pxJlkenkgemJpb3JuaWthbWksIG9ic8WCdWd1asSFYyBrb3Jla3R5LiIiIg0KICAgICAgICBpZiBzb3VyY2VfdGFua19pZCA9PSBkZXN0aW5hdGlvbl90YW5rX2lkOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiWmJpb3JuaWsgxbpyw7NkxYJvd3kgaSBkb2NlbG93eSBuaWUgbW9nxIUgYnnEhyB0YWtpZSBzYW1lLiIpDQogICAgICAgIGlmIHF1YW50aXR5X3RvX3RyYW5zZmVyIDwgMDoNCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIklsb8WbxIcgZG8gcHJ6ZWxhbmlhIG11c2kgYnnEhyBkb2RhdG5pYS4iKQ0KICAgICAgICBpZiBxdWFudGl0eV90b190cmFuc2ZlciA9PSAwOg0KICAgICAgICAgICAgcmV0dXJuIHsnd2FzX2FkanVzdGVkJzogRmFsc2UsICdkaXNjcmVwYW5jeSc6IERlY2ltYWwoJzAuMDAnKSwgJ3RyYW5zZmVycmVkX3F1YW50aXR5JzogRGVjaW1hbCgnMC4wMCcpfQ0KICAgICAgICANCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgc291cmNlX3RhbmsgPSBkYi5zZXNzaW9uLmdldChTcHJ6ZXQsIHNvdXJjZV90YW5rX2lkKQ0KICAgICAgICAgICAgZGVzdF90YW5rID0gZGIuc2Vzc2lvbi5nZXQoU3ByemV0LCBkZXN0aW5hdGlvbl90YW5rX2lkKQ0KICAgICAgICAgICAgaWYgbm90IHNvdXJjZV90YW5rIG9yIG5vdCBkZXN0X3Rhbms6IHJhaXNlIFZhbHVlRXJyb3IoIkplZGVuIHplIHpiaW9ybmlrw7N3IG5pZSBpc3RuaWVqZS4iKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBzb3VyY2VfbWl4ID0gZGIuc2Vzc2lvbi5nZXQoVGFua01peGVzLCBzb3VyY2VfdGFuay5hY3RpdmVfbWl4X2lkKSBpZiBzb3VyY2VfdGFuay5hY3RpdmVfbWl4X2lkIGVsc2UgTm9uZQ0KICAgICAgICAgICAgaWYgbm90IHNvdXJjZV9taXggb3Igc291cmNlX21peC5zdGF0dXMgPT0gJ0FSQ0hJVkVEJzoNCiAgICAgICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKCJaYmlvcm5payDFunLDs2TFgm93eSBqZXN0IHB1c3R5LiIpDQoNCiAgICAgICAgICAgIGNvbXBvc2l0aW9uID0gQmF0Y2hNYW5hZ2VtZW50U2VydmljZS5nZXRfbWl4X2NvbXBvc2l0aW9uKHNvdXJjZV9taXguaWQpDQogICAgICAgICAgICB0b3RhbF93ZWlnaHRfaW5fc3lzdGVtID0gY29tcG9zaXRpb25bJ3RvdGFsX3dlaWdodCddDQogICAgICAgICAgICB3YXNfYWRqdXN0ZWQsIGRpc2NyZXBhbmN5ID0gRmFsc2UsIERlY2ltYWwoJzAuMDAnKQ0KDQogICAgICAgICAgICBpZiBxdWFudGl0eV90b190cmFuc2ZlciA+IHRvdGFsX3dlaWdodF9pbl9zeXN0ZW06DQogICAgICAgICAgICAgICAgd2FzX2FkanVzdGVkID0gVHJ1ZQ0KICAgICAgICAgICAgICAgIGRpc2NyZXBhbmN5ID0gcXVhbnRpdHlfdG9fdHJhbnNmZXIgLSB0b3RhbF93ZWlnaHRfaW5fc3lzdGVtDQogICAgICAgICAgICAgICAgaWYgdG90YWxfd2VpZ2h0X2luX3N5c3RlbSA+IDA6DQogICAgICAgICAgICAgICAgICAgIGZvciBjb21wb25lbnQgaW4gc291cmNlX21peC5jb21wb25lbnRzOg0KICAgICAgICAgICAgICAgICAgICAgICAgcHJvcG9ydGlvbiA9IGNvbXBvbmVudC5xdWFudGl0eV9pbl9taXggLyB0b3RhbF93ZWlnaHRfaW5fc3lzdGVtDQogICAgICAgICAgICAgICAgICAgICAgICBjb21wb25lbnQucXVhbnRpdHlfaW5fbWl4ICs9IGRpc2NyZXBhbmN5ICogcHJvcG9ydGlvbg0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGF1ZGl0X2xvZyA9IEF1ZGl0VHJhaWwoDQogICAgICAgICAgICAgICAgICAgIHVzZXJfaWQ9b3BlcmF0b3IsIGVudGl0eV90eXBlPSdUYW5rTWl4ZXMnLCBlbnRpdHlfaWQ9c291cmNlX21peC5pZCwNCiAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uX3R5cGU9J0JBTEFOQ0VfQ09SUkVDVElPTicsIGZpZWxkX25hbWU9J3RvdGFsX3dlaWdodCcsDQogICAgICAgICAgICAgICAgICAgIG9sZF92YWx1ZT1zdHIodG90YWxfd2VpZ2h0X2luX3N5c3RlbSksIG5ld192YWx1ZT1zdHIodG90YWxfd2VpZ2h0X2luX3N5c3RlbSArIGRpc2NyZXBhbmN5KSwNCiAgICAgICAgICAgICAgICAgICAgcmVhc29uPWYiQXV0b21hdHljem5hIGtvcmVrdGEgYmlsYW5zdSBwb2RjemFzIHRyYW5zZmVydSB6IHtzb3VyY2VfdGFuay5uYXp3YV91bmlrYWxuYX0iDQogICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgIGRiLnNlc3Npb24uYWRkKGF1ZGl0X2xvZykNCg0KICAgICAgICAgICAgIyBVxbx5d2FteSB6YWt0dWFsaXpvd2FuZWogd2FnaSBkbyBvYmxpY3plxYQgcHJvcG9yY2ppDQogICAgICAgICAgICB0b3RhbF93ZWlnaHRfZm9yX3Byb3BvcnRpb24gPSBzdW0oYy5xdWFudGl0eV9pbl9taXggZm9yIGMgaW4gc291cmNlX21peC5jb21wb25lbnRzKQ0KICAgICAgICAgICAgd2l0aGRyYXdhbF9kZXRhaWxzID0gW10NCiAgICAgICAgICAgIGlmIHRvdGFsX3dlaWdodF9mb3JfcHJvcG9ydGlvbiA+IDA6DQogICAgICAgICAgICAgICAgZm9yIGNvbXBvbmVudCBpbiBzb3VyY2VfbWl4LmNvbXBvbmVudHM6DQogICAgICAgICAgICAgICAgICAgIHByb3BvcnRpb24gPSBjb21wb25lbnQucXVhbnRpdHlfaW5fbWl4IC8gdG90YWxfd2VpZ2h0X2Zvcl9wcm9wb3J0aW9uDQogICAgICAgICAgICAgICAgICAgIGFtb3VudF90b19kZWR1Y3QgPSBxdWFudGl0eV90b190cmFuc2ZlciAqIHByb3BvcnRpb24NCiAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LnF1YW50aXR5X2luX21peCAtPSBhbW91bnRfdG9fZGVkdWN0DQogICAgICAgICAgICAgICAgICAgIHdpdGhkcmF3YWxfZGV0YWlscy5hcHBlbmQoeydiYXRjaF9pZCc6IGNvbXBvbmVudC5iYXRjaF9pZCwgJ3F1YW50aXR5JzogYW1vdW50X3RvX2RlZHVjdH0pDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIHN1bShjLnF1YW50aXR5X2luX21peCBmb3IgYyBpbiBzb3VyY2VfbWl4LmNvbXBvbmVudHMpIDw9IERlY2ltYWwoJzAuMDEnKTogIyBUb2xlcmFuY2phIGRsYSBixYLEmWTDs3cgemFva3LEhWdsZcWEDQogICAgICAgICAgICAgICAgc291cmNlX21peC5zdGF0dXMgPSAnQVJDSElWRUQnDQogICAgICAgICAgICAgICAgc291cmNlX3RhbmsuYWN0aXZlX21peF9pZCA9IE5vbmUNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgZGVzdF9taXggPSBkYi5zZXNzaW9uLmdldChUYW5rTWl4ZXMsIGRlc3RfdGFuay5hY3RpdmVfbWl4X2lkKSBpZiBkZXN0X3RhbmsuYWN0aXZlX21peF9pZCBlbHNlIE5vbmUNCiAgICAgICAgICAgIGlmIG5vdCBkZXN0X21peCBvciBkZXN0X21peC5zdGF0dXMgPT0gJ0FSQ0hJVkVEJzoNCiAgICAgICAgICAgICAgICBtaXhfY29kZSA9IEJhdGNoTWFuYWdlbWVudFNlcnZpY2UuX2dlbmVyYXRlX21peF9jb2RlKGRlc3RfdGFuay5uYXp3YV91bmlrYWxuYSkNCiAgICAgICAgICAgICAgICBkZXN0X21peCA9IFRhbmtNaXhlcyh1bmlxdWVfY29kZT1taXhfY29kZSwgdGFua19pZD1kZXN0X3RhbmsuaWQpDQogICAgICAgICAgICAgICAgZGIuc2Vzc2lvbi5hZGQoZGVzdF9taXgpOyBkYi5zZXNzaW9uLmZsdXNoKCkNCiAgICAgICAgICAgICAgICBkZXN0X3RhbmsuYWN0aXZlX21peF9pZCA9IGRlc3RfbWl4LmlkDQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbXBvbmVudHNfaW5fZGVzdCA9IHtjLmJhdGNoX2lkOiBjIGZvciBjIGluIGRlc3RfbWl4LmNvbXBvbmVudHN9DQogICAgICAgICAgICBmb3IgZGV0YWlsIGluIHdpdGhkcmF3YWxfZGV0YWlsczoNCiAgICAgICAgICAgICAgICBpZiBkZXRhaWxbJ3F1YW50aXR5J10gPiAwOg0KICAgICAgICAgICAgICAgICAgICBpZiBkZXRhaWxbJ2JhdGNoX2lkJ10gaW4gY29tcG9uZW50c19pbl9kZXN0Og0KICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50c19pbl9kZXN0W2RldGFpbFsnYmF0Y2hfaWQnXV0ucXVhbnRpdHlfaW5fbWl4ICs9IGRldGFpbFsncXVhbnRpdHknXQ0KICAgICAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICAgICAgbmV3X2NvbXBvbmVudCA9IE1peENvbXBvbmVudHMobWl4X2lkPWRlc3RfbWl4LmlkLCBiYXRjaF9pZD1kZXRhaWxbJ2JhdGNoX2lkJ10sIHF1YW50aXR5X2luX21peD1kZXRhaWxbJ3F1YW50aXR5J10pDQogICAgICAgICAgICAgICAgICAgICAgICBkYi5zZXNzaW9uLmFkZChuZXdfY29tcG9uZW50KQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpDQogICAgICAgICAgICByZXR1cm4geyd3YXNfYWRqdXN0ZWQnOiB3YXNfYWRqdXN0ZWQsICdkaXNjcmVwYW5jeSc6IGRpc2NyZXBhbmN5LCAndHJhbnNmZXJyZWRfcXVhbnRpdHknOiBxdWFudGl0eV90b190cmFuc2Zlcn0NCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpOyByYWlzZSBlDQoNCiAgICBAc3RhdGljbWV0aG9kDQogICAgZGVmIGNvcnJlY3RfYmF0Y2hfcXVhbnRpdHkoYmF0Y2hfaWQsIG5ld19xdWFudGl0eSwgb3BlcmF0b3IsIHJlYXNvbik6DQogICAgICAgICIiIkRva29udWplIHLEmWN6bmVqIGtvcmVrdHkgaWxvxZtjaSBwYXJ0aWkgaSB0d29yenkgd3BpcyB3IGR6aWVubmlrdSB6ZGFyemXFhC4iIiINCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgYmF0Y2hfdG9fY29ycmVjdCA9IGRiLnNlc3Npb24uZ2V0KEJhdGNoZXMsIGJhdGNoX2lkKQ0KICAgICAgICAgICAgaWYgbm90IGJhdGNoX3RvX2NvcnJlY3Q6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlBhcnRpYSBvIElEIHtiYXRjaF9pZH0gbmllIGlzdG5pZWplLiIpDQogICAgICAgICAgICANCiAgICAgICAgICAgIG9yaWdpbmFsX3F1YW50aXR5ID0gYmF0Y2hfdG9fY29ycmVjdC5jdXJyZW50X3F1YW50aXR5DQogICAgICAgICAgICBhdWRpdF9sb2cgPSBBdWRpdFRyYWlsKA0KICAgICAgICAgICAgICAgIHVzZXJfaWQ9b3BlcmF0b3IsIGVudGl0eV90eXBlPSdCYXRjaGVzJywgZW50aXR5X2lkPWJhdGNoX2lkLA0KICAgICAgICAgICAgICAgIG9wZXJhdGlvbl90eXBlPSdDT1JSRUNUSU9OJywgZmllbGRfbmFtZT0nY3VycmVudF9xdWFudGl0eScsDQogICAgICAgICAgICAgICAgb2xkX3ZhbHVlPXN0cihvcmlnaW5hbF9xdWFudGl0eSksIG5ld192YWx1ZT1zdHIobmV3X3F1YW50aXR5KSwNCiAgICAgICAgICAgICAgICByZWFzb249cmVhc29uDQogICAgICAgICAgICApDQogICAgICAgICAgICBiYXRjaF90b19jb3JyZWN0LmN1cnJlbnRfcXVhbnRpdHkgPSBuZXdfcXVhbnRpdHkNCiAgICAgICAgICAgIGRiLnNlc3Npb24uYWRkKGF1ZGl0X2xvZykNCiAgICAgICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCiAgICAgICAgICAgIHJldHVybiB7J3N1Y2Nlc3MnOiBUcnVlLCAnYXVkaXRfbG9nX2lkJzogYXVkaXRfbG9nLmlkfQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBkYi5zZXNzaW9uLnJvbGxiYWNrKCk7IHJhaXNlIGUNCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgY3JlYXRlX2JhdGNoX2Zyb21fYXBvbGxvX3RyYW5zZmVyKGFwb2xsb19pZCwgZGVzdGluYXRpb25fdGFua19pZCwgYWN0dWFsX3F1YW50aXR5X3RyYW5zZmVycmVkLCBvcGVyYXRvcik6DQogICAgICAgICIiIg0KICAgICAgICBPcmtpZXN0cnVqZSB0cmFuc2ZlciB6IEFwb2xsbyBkbyB6Ymlvcm5pa2EsIHR3b3J6eSBwYXJ0acSZIHBpZXJ3b3RuxIUsDQogICAgICAgIHRhbmt1amUgasSFIGkgb2JzxYJ1Z3VqZSByb3piaWXFvG5vxZtjaSBtacSZZHp5IHByb2dub3rEhSBhIHJ6ZWN6eXdpc3RvxZtjacSFLg0KICAgICAgICAiIiINCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgIyAxLiBQb2JpZXJ6IGRhbmUga29udGVrc3Rvd2UNCiAgICAgICAgICAgIGFwb2xsb19lcXVpcG1lbnQgPSBkYi5zZXNzaW9uLmdldChTcHJ6ZXQsIGFwb2xsb19pZCkNCiAgICAgICAgICAgIGlmIG5vdCBhcG9sbG9fZXF1aXBtZW50IG9yIGFwb2xsb19lcXVpcG1lbnQudHlwX3NwcnpldHUgIT0gJ2Fwb2xsbyc6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlNwcnrEmXQgbyBJRCB7YXBvbGxvX2lkfSBuaWUgamVzdCB3eXRhcGlhcmvEhSBBcG9sbG8uIikNCg0KICAgICAgICAgICAgIyBXeXdvxYJhaiBwcmF3ZHppd8SFIG1ldG9kxJkgc2Vyd2lzdSBBcG9sbG8sIGt0w7NyxIUgdyB0ZcWbY2llIG1vY2t1amVteQ0KICAgICAgICAgICAgYXBvbGxvX3N0YXRlID0gQXBvbGxvU2VydmljZS5vYmxpY3pfYWt0dWFsbnlfc3Rhbl9hcG9sbG8oYXBvbGxvX2lkKQ0KICAgICAgICAgICAgcHJvZ25vem93YW5hX2lsb3NjID0gRGVjaW1hbChhcG9sbG9fc3RhdGUuZ2V0KCdkb3N0ZXBuZV9rZycsIDApKQ0KICAgICAgICAgICAgaWRfc2VzamkgPSBhcG9sbG9fc3RhdGUuZ2V0KCdpZF9zZXNqaScpDQogICAgICAgICAgICB0eXBfc3Vyb3djYSA9IGFwb2xsb19zdGF0ZS5nZXQoJ3R5cF9zdXJvd2NhJykNCg0KICAgICAgICAgICAgaWYgbm90IGlkX3Nlc2ppOg0KICAgICAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJBcG9sbG8gbyBJRCB7YXBvbGxvX2lkfSBuaWUgbWEgYWt0eXduZWogc2VzamkuIikNCg0KICAgICAgICAgICAgIyAyLiBPYnPFgnVnYSByb3piaWXFvG5vxZtjaQ0KICAgICAgICAgICAgd2FzX2FkanVzdGVkID0gRmFsc2UNCiAgICAgICAgICAgIGRpc2NyZXBhbmN5ID0gRGVjaW1hbCgnMC4wMCcpDQogICAgICAgICAgICBpZiBhY3R1YWxfcXVhbnRpdHlfdHJhbnNmZXJyZWQgPiBwcm9nbm96b3dhbmFfaWxvc2M6DQogICAgICAgICAgICAgICAgd2FzX2FkanVzdGVkID0gVHJ1ZQ0KICAgICAgICAgICAgICAgIGRpc2NyZXBhbmN5ID0gYWN0dWFsX3F1YW50aXR5X3RyYW5zZmVycmVkIC0gcHJvZ25vem93YW5hX2lsb3NjDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgYXVkaXRfbG9nID0gQXVkaXRUcmFpbCgNCiAgICAgICAgICAgICAgICAgICAgdXNlcl9pZD1vcGVyYXRvciwNCiAgICAgICAgICAgICAgICAgICAgZW50aXR5X3R5cGU9J0Fwb2xsb1Nlc2plJywNCiAgICAgICAgICAgICAgICAgICAgZW50aXR5X2lkPWlkX3Nlc2ppLA0KICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25fdHlwZT0nQkFMQU5DRV9DT1JSRUNUSU9OJywNCiAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZT0nYXZhaWxhYmxlX3F1YW50aXR5X2ZvcmVjYXN0JywNCiAgICAgICAgICAgICAgICAgICAgb2xkX3ZhbHVlPXN0cihwcm9nbm96b3dhbmFfaWxvc2MpLA0KICAgICAgICAgICAgICAgICAgICBuZXdfdmFsdWU9c3RyKGFjdHVhbF9xdWFudGl0eV90cmFuc2ZlcnJlZCksDQogICAgICAgICAgICAgICAgICAgIHJlYXNvbj0iQXV0b21hdHljem5hIGtvcmVrdGEgYmlsYW5zdSBBcG9sbG8gbmEgcG9kc3Rhd2llIHJ6ZWN6eXdpc3RlZ28gdHJhbnNmZXJ1LiINCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgZGIuc2Vzc2lvbi5hZGQoYXVkaXRfbG9nKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIDMuIFd5a29uYW5pZSB0cmFuc2ZlcnUNCiAgICAgICAgICAgICMgM2EuIFpha3R1YWxpenVqIHN0YW4gdyBBcG9sbG8NCiAgICAgICAgICAgIHRyYWNraW5nX2xvZyA9IEFwb2xsb1RyYWNraW5nKA0KICAgICAgICAgICAgICAgIGlkX3Nlc2ppPWlkX3Nlc2ppLA0KICAgICAgICAgICAgICAgIHR5cF96ZGFyemVuaWE9J1RSQU5TRkVSX1dZSlNDSU9XWScsDQogICAgICAgICAgICAgICAgd2FnYV9rZz1hY3R1YWxfcXVhbnRpdHlfdHJhbnNmZXJyZWQsDQogICAgICAgICAgICAgICAgY3phc196ZGFyemVuaWE9ZGF0ZXRpbWUubm93KHRpbWV6b25lLnV0YyksDQogICAgICAgICAgICAgICAgb3BlcmF0b3I9b3BlcmF0b3INCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIGRiLnNlc3Npb24uYWRkKHRyYWNraW5nX2xvZykNCg0KICAgICAgICAgICAgIyAzYi4gU3R3w7NyeiBQYXJ0acSZIFBpZXJ3b3RuxIUNCiAgICAgICAgICAgIGJhdGNoX3Jlc3VsdCA9IEJhdGNoTWFuYWdlbWVudFNlcnZpY2UuY3JlYXRlX3Jhd19tYXRlcmlhbF9iYXRjaCgNCiAgICAgICAgICAgICAgICBtYXRlcmlhbF90eXBlPXR5cF9zdXJvd2NhLA0KICAgICAgICAgICAgICAgIHNvdXJjZV90eXBlPSdBUE9MTE8nLA0KICAgICAgICAgICAgICAgIHNvdXJjZV9uYW1lPWFwb2xsb19lcXVpcG1lbnQubmF6d2FfdW5pa2FsbmEsDQogICAgICAgICAgICAgICAgcXVhbnRpdHk9YWN0dWFsX3F1YW50aXR5X3RyYW5zZmVycmVkLA0KICAgICAgICAgICAgICAgIG9wZXJhdG9yPW9wZXJhdG9yDQogICAgICAgICAgICApDQogICAgICAgICAgICBiYXRjaF9pZCA9IGJhdGNoX3Jlc3VsdFsnYmF0Y2hfaWQnXQ0KDQogICAgICAgICAgICAjIDNjLiBaYXRhbmt1aiBkbyB6Ymlvcm5pa2ENCiAgICAgICAgICAgIHRhbmtpbmdfcmVzdWx0ID0gQmF0Y2hNYW5hZ2VtZW50U2VydmljZS50YW5rX2ludG9fZGlydHlfdGFuaygNCiAgICAgICAgICAgICAgICBiYXRjaF9pZD1iYXRjaF9pZCwNCiAgICAgICAgICAgICAgICB0YW5rX2lkPWRlc3RpbmF0aW9uX3RhbmtfaWQsDQogICAgICAgICAgICAgICAgb3BlcmF0b3I9b3BlcmF0b3INCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIG1peF9pZCA9IHRhbmtpbmdfcmVzdWx0WydtaXhfaWQnXQ0KDQogICAgICAgICAgICAjIDQuIFphdHdpZXJkxbogdHJhbnNha2NqxJkgaSB6d3LDs8SHIHd5bmlrDQogICAgICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgJ2JhdGNoX2lkJzogYmF0Y2hfaWQsDQogICAgICAgICAgICAgICAgJ21peF9pZCc6IG1peF9pZCwNCiAgICAgICAgICAgICAgICAnYWRqdXN0ZWQnOiB3YXNfYWRqdXN0ZWQsDQogICAgICAgICAgICAgICAgJ2Rpc2NyZXBhbmN5JzogZGlzY3JlcGFuY3kNCiAgICAgICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIGRiLnNlc3Npb24ucm9sbGJhY2soKQ0KICAgICAgICAgICAgcmFpc2UgZQ==
  - path: app//batch_routes.py
    content: IyBhcHAvYmF0Y2hfcm91dGVzLnB5DQoNCmZyb20gZmxhc2sgaW1wb3J0IEJsdWVwcmludCwganNvbmlmeSwgcmVxdWVzdA0KZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsDQoNCmZyb20gLmV4dGVuc2lvbnMgaW1wb3J0IGRiDQpmcm9tIC5tb2RlbHMgaW1wb3J0ICoNCmZyb20gLmJhdGNoX21hbmFnZW1lbnRfc2VydmljZSBpbXBvcnQgQmF0Y2hNYW5hZ2VtZW50U2VydmljZQ0KDQoNCiMgTm93eSBCbHVlcHJpbnQgZGxhIG9wZXJhY2ppIG5hIHBhcnRpYWNoDQpiYXRjaF9icCA9IEJsdWVwcmludCgnYmF0Y2hlcycsIF9fbmFtZV9fLCB1cmxfcHJlZml4PScvYXBpL2JhdGNoZXMnKQ0KDQpAYmF0Y2hfYnAucm91dGUoJy9yZWNlaXZlL2Zyb20tdGFua2VyJywgbWV0aG9kcz1bJ1BPU1QnXSkNCmRlZiByZWNlaXZlX2Zyb21fdGFua2VyKCk6DQogICAgIiIiDQogICAgRW5kcG9pbnQgZG8gcmVqZXN0cmFjamkgbm93ZWogUGFydGlpIFBpZXJ3b3RuZWogeiBkb3N0YXd5IGN5c3Rlcm7EhS4NCiAgICAiIiINCiAgICBkYXRhID0gcmVxdWVzdC5nZXRfanNvbigpDQogICAgDQogICAgIyBQb2RzdGF3b3dhIHdhbGlkYWNqYSBkYW55Y2ggd2VqxZtjaW93eWNoDQogICAgcmVxdWlyZWRfZmllbGRzID0gWydtYXRlcmlhbF90eXBlJywgJ3NvdXJjZV9uYW1lJywgJ3F1YW50aXR5X2tnJ10NCiAgICBpZiBub3QgZGF0YSBvciBub3QgYWxsKGZpZWxkIGluIGRhdGEgZm9yIGZpZWxkIGluIHJlcXVpcmVkX2ZpZWxkcyk6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnc3RhdHVzJzogJ2Vycm9yJywgJ21lc3NhZ2UnOiAnQnJhayB3eW1hZ2FueWNoIHDDs2w6IG1hdGVyaWFsX3R5cGUsIHNvdXJjZV9uYW1lLCBxdWFudGl0eV9rZyd9KSwgNDAwDQoNCiAgICB0cnk6DQogICAgICAgIHF1YW50aXR5ID0gRGVjaW1hbChkYXRhWydxdWFudGl0eV9rZyddKQ0KICAgICAgICBvcGVyYXRvciA9IGRhdGEuZ2V0KCdvcGVyYXRvcicsICdBUElfVVNFUicpICMgRG9tecWbbG5hIHdhcnRvxZvEhywgamXFm2xpIG5pZSBwb2Rhbm8NCg0KICAgICAgICAjIFd5d2/FgmFuaWUgbmFzemVnbyBzZXJ3aXN1DQogICAgICAgIHJlc3VsdCA9IEJhdGNoTWFuYWdlbWVudFNlcnZpY2UuY3JlYXRlX3Jhd19tYXRlcmlhbF9iYXRjaCgNCiAgICAgICAgICAgIG1hdGVyaWFsX3R5cGU9ZGF0YVsnbWF0ZXJpYWxfdHlwZSddLA0KICAgICAgICAgICAgc291cmNlX3R5cGU9J0NZUycsICMgTmEgc3RhxYJlLCBibyB0byBlbmRwb2ludCBkbGEgY3lzdGVybg0KICAgICAgICAgICAgc291cmNlX25hbWU9ZGF0YVsnc291cmNlX25hbWUnXSwNCiAgICAgICAgICAgIHF1YW50aXR5PXF1YW50aXR5LA0KICAgICAgICAgICAgb3BlcmF0b3I9b3BlcmF0b3INCiAgICAgICAgKQ0KDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnc3RhdHVzJzogJ3N1Y2Nlc3MnLCAnZGF0YSc6IHJlc3VsdH0pLCAyMDEgIyAyMDEgQ3JlYXRlZA0KDQogICAgZXhjZXB0IChWYWx1ZUVycm9yLCBUeXBlRXJyb3IpIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnc3RhdHVzJzogJ2Vycm9yJywgJ21lc3NhZ2UnOiBmJ05pZXByYXdpZMWCb3dlIGRhbmU6IHtlfSd9KSwgNDAwDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBkYi5zZXNzaW9uLnJvbGxiYWNrKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydzdGF0dXMnOiAnZXJyb3InLCAnbWVzc2FnZSc6IGYnQsWCxIVkIHNlcndlcmE6IHtlfSd9KSwgNTAwDQoNCg0KQGJhdGNoX2JwLnJvdXRlKCcvdHJhbnNmZXIvdG8tZGlydHktdGFuaycsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYgdHJhbnNmZXJfdG9fZGlydHlfdGFuaygpOg0KICAgICIiIg0KICAgIEVuZHBvaW50IGRvIHRhbmtvd2FuaWEgUGFydGlpIFBpZXJ3b3RuZWogZG8gemJpb3JuaWthIGJydWRuZWdvLg0KICAgIFd5d2/FgnVqZSBsb2dpa8SZLCBrdMOzcmEgdHdvcnp5L2FrdHVhbGl6dWplIE1pZXN6YW5pbsSZLg0KICAgICIiIg0KICAgIGRhdGEgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICByZXF1aXJlZF9maWVsZHMgPSBbJ2JhdGNoX2lkJywgJ3RhbmtfaWQnXQ0KICAgIGlmIG5vdCBkYXRhIG9yIG5vdCBhbGwoZmllbGQgaW4gZGF0YSBmb3IgZmllbGQgaW4gcmVxdWlyZWRfZmllbGRzKToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydzdGF0dXMnOiAnZXJyb3InLCAnbWVzc2FnZSc6ICdCcmFrIHd5bWFnYW55Y2ggcMOzbDogYmF0Y2hfaWQsIHRhbmtfaWQnfSksIDQwMA0KDQogICAgdHJ5Og0KICAgICAgICBiYXRjaF9pZCA9IGludChkYXRhWydiYXRjaF9pZCddKQ0KICAgICAgICB0YW5rX2lkID0gaW50KGRhdGFbJ3RhbmtfaWQnXSkNCiAgICAgICAgb3BlcmF0b3IgPSBkYXRhLmdldCgnb3BlcmF0b3InLCAnQVBJX1VTRVInKQ0KDQogICAgICAgICMgV3l3b8WCYW5pZSBzZXJ3aXN1DQogICAgICAgIHJlc3VsdCA9IEJhdGNoTWFuYWdlbWVudFNlcnZpY2UudGFua19pbnRvX2RpcnR5X3RhbmsoDQogICAgICAgICAgICBiYXRjaF9pZD1iYXRjaF9pZCwNCiAgICAgICAgICAgIHRhbmtfaWQ9dGFua19pZCwNCiAgICAgICAgICAgIG9wZXJhdG9yPW9wZXJhdG9yDQogICAgICAgICkNCiAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnc3RhdHVzJzogJ3N1Y2Nlc3MnLCAnZGF0YSc6IHJlc3VsdH0pLCAyMDAgIyAyMDAgT0sNCg0KICAgIGV4Y2VwdCBWYWx1ZUVycm9yIGFzIGU6DQogICAgICAgICMgVGVuIGLFgsSFZCBtb8W8ZSBiecSHIHJ6dWNvbnkgemFyw7N3bm8gcHJ6ZXogYGludCgpYCBqYWsgaSBwcnpleiBuYXN6IHNlcndpcw0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J3N0YXR1cyc6ICdlcnJvcicsICdtZXNzYWdlJzogZidOaWVwcmF3aWTFgm93ZSBkYW5lIGx1YiBzdGFuOiB7ZX0nfSksIDQwMA0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnc3RhdHVzJzogJ2Vycm9yJywgJ21lc3NhZ2UnOiBmJ0LFgsSFZCBzZXJ3ZXJhOiB7ZX0nfSksIDUwMA0KDQpAYmF0Y2hfYnAucm91dGUoJy90cmFuc2Zlci90YW5rLXRvLXRhbmsnLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIHRyYW5zZmVyX2JldHdlZW5fZGlydHlfdGFua3MoKToNCiAgICAiIiINCiAgICBFbmRwb2ludCBkbyBvcmtpZXN0cmFjamkgdHJhbnNmZXJ1IG1pxJlkenkgZHdvbWEgemJpb3JuaWthbWkgYnJ1ZG55bWkuDQogICAgIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIHJlcXVpcmVkX2ZpZWxkcyA9IFsnc291cmNlX3RhbmtfaWQnLCAnZGVzdGluYXRpb25fdGFua19pZCcsICdxdWFudGl0eV9rZyddDQogICAgaWYgbm90IGRhdGEgb3Igbm90IGFsbChmaWVsZCBpbiBkYXRhIGZvciBmaWVsZCBpbiByZXF1aXJlZF9maWVsZHMpOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J3N0YXR1cyc6ICdlcnJvcicsICdtZXNzYWdlJzogJ0JyYWsgd3ltYWdhbnljaCBww7NsOiBzb3VyY2VfdGFua19pZCwgZGVzdGluYXRpb25fdGFua19pZCwgcXVhbnRpdHlfa2cnfSksIDQwMA0KDQogICAgdHJ5Og0KICAgICAgICBzb3VyY2VfdGFua19pZCA9IGludChkYXRhWydzb3VyY2VfdGFua19pZCddKQ0KICAgICAgICBkZXN0aW5hdGlvbl90YW5rX2lkID0gaW50KGRhdGFbJ2Rlc3RpbmF0aW9uX3RhbmtfaWQnXSkNCiAgICAgICAgcXVhbnRpdHkgPSBEZWNpbWFsKGRhdGFbJ3F1YW50aXR5X2tnJ10pDQogICAgICAgIG9wZXJhdG9yID0gZGF0YS5nZXQoJ29wZXJhdG9yJywgJ0FQSV9VU0VSJykNCg0KICAgICAgICAjIFd5d2/FgmFuaWUgc2Vyd2lzdSwga3TDs3J5IHpham11amUgc2nEmSBjYcWCxIUgbG9naWvEhQ0KICAgICAgICBCYXRjaE1hbmFnZW1lbnRTZXJ2aWNlLnRyYW5zZmVyX2JldHdlZW5fZGlydHlfdGFua3MoDQogICAgICAgICAgICBzb3VyY2VfdGFua19pZD1zb3VyY2VfdGFua19pZCwNCiAgICAgICAgICAgIGRlc3RpbmF0aW9uX3RhbmtfaWQ9ZGVzdGluYXRpb25fdGFua19pZCwNCiAgICAgICAgICAgIHF1YW50aXR5X3RvX3RyYW5zZmVyPXF1YW50aXR5LA0KICAgICAgICAgICAgb3BlcmF0b3I9b3BlcmF0b3INCiAgICAgICAgKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N0YXR1cyc6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidQb215xZtsbmllIHByemV0cmFuc2Zlcm93YW5vIHtxdWFudGl0eX0ga2cgemUgemJpb3JuaWthIHtzb3VyY2VfdGFua19pZH0gZG8ge2Rlc3RpbmF0aW9uX3RhbmtfaWR9LicNCiAgICAgICAgfSksIDIwMA0KDQogICAgZXhjZXB0IFZhbHVlRXJyb3IgYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydzdGF0dXMnOiAnZXJyb3InLCAnbWVzc2FnZSc6IGYnTmllcHJhd2lkxYJvd2UgZGFuZSBsdWIgc3Rhbjoge2V9J30pLCA0MDANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICMgU2Vyd2lzIHNhbSByb2JpIHJvbGxiYWNrLCBhbGUgbmEgd3N6ZWxraSB3eXBhZGVrDQogICAgICAgIGRiLnNlc3Npb24ucm9sbGJhY2soKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J3N0YXR1cyc6ICdlcnJvcicsICdtZXNzYWdlJzogZidCxYLEhWQgc2Vyd2VyYToge2V9J30pLCA1MDANCg0KQGJhdGNoX2JwLnJvdXRlKCcvcmVjZWl2ZS9mcm9tLWFwb2xsbycsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYgcmVjZWl2ZV9mcm9tX2Fwb2xsbygpOg0KICAgICIiIg0KICAgIEVuZHBvaW50IGRvIHJlamVzdHJhY2ppIG5vd2VqIFBhcnRpaSBQaWVyd290bmVqIHogd3l0b3B1IHcgQXBvbGxvLg0KICAgICIiIg0KICAgIGRhdGEgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICANCiAgICByZXF1aXJlZF9maWVsZHMgPSBbJ21hdGVyaWFsX3R5cGUnLCAnc291cmNlX25hbWUnLCAncXVhbnRpdHlfa2cnXQ0KICAgIGlmIG5vdCBkYXRhIG9yIG5vdCBhbGwoZmllbGQgaW4gZGF0YSBmb3IgZmllbGQgaW4gcmVxdWlyZWRfZmllbGRzKToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydzdGF0dXMnOiAnZXJyb3InLCAnbWVzc2FnZSc6ICdCcmFrIHd5bWFnYW55Y2ggcMOzbDogbWF0ZXJpYWxfdHlwZSwgc291cmNlX25hbWUsIHF1YW50aXR5X2tnJ30pLCA0MDANCg0KICAgIHRyeToNCiAgICAgICAgcXVhbnRpdHkgPSBEZWNpbWFsKGRhdGFbJ3F1YW50aXR5X2tnJ10pDQogICAgICAgIG9wZXJhdG9yID0gZGF0YS5nZXQoJ29wZXJhdG9yJywgJ0FQSV9VU0VSJykNCg0KICAgICAgICAjIFd5d2/FgmFuaWUgdGVqIHNhbWVqIG1ldG9keSBzZXJ3aXN1LCBhbGUgeiBpbm55bSBgc291cmNlX3R5cGVgDQogICAgICAgIHJlc3VsdCA9IEJhdGNoTWFuYWdlbWVudFNlcnZpY2UuY3JlYXRlX3Jhd19tYXRlcmlhbF9iYXRjaCgNCiAgICAgICAgICAgIG1hdGVyaWFsX3R5cGU9ZGF0YVsnbWF0ZXJpYWxfdHlwZSddLA0KICAgICAgICAgICAgc291cmNlX3R5cGU9J0FQT0xMTycsICMgTmEgc3RhxYJlLCBibyB0byBlbmRwb2ludCBkbGEgQXBvbGxvDQogICAgICAgICAgICBzb3VyY2VfbmFtZT1kYXRhWydzb3VyY2VfbmFtZSddLA0KICAgICAgICAgICAgcXVhbnRpdHk9cXVhbnRpdHksDQogICAgICAgICAgICBvcGVyYXRvcj1vcGVyYXRvcg0KICAgICAgICApDQoNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydzdGF0dXMnOiAnc3VjY2VzcycsICdkYXRhJzogcmVzdWx0fSksIDIwMQ0KDQogICAgZXhjZXB0IChWYWx1ZUVycm9yLCBUeXBlRXJyb3IpIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnc3RhdHVzJzogJ2Vycm9yJywgJ21lc3NhZ2UnOiBmJ05pZXByYXdpZMWCb3dlIGRhbmU6IHtlfSd9KSwgNDAwDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBkYi5zZXNzaW9uLnJvbGxiYWNrKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydzdGF0dXMnOiAnZXJyb3InLCAnbWVzc2FnZSc6IGYnQsWCxIVkIHNlcndlcmE6IHtlfSd9KSwgNTAwDQoNCkBiYXRjaF9icC5yb3V0ZSgnL3RhbmtzLzxpbnQ6dGFua19pZD4vc3RhdHVzJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF90YW5rX3N0YXR1cyh0YW5rX2lkKToNCiAgICAiIiINCiAgICBad3JhY2Egc3pjemVnw7PFgm93eSBzdGF0dXMgaSBza8WCYWQgbWllc3phbmlueSBkbGEgZGFuZWdvIHpiaW9ybmlrYS4NCiAgICAiIiINCiAgICB0cnk6DQogICAgICAgIHRhbmsgPSBkYi5zZXNzaW9uLmdldChTcHJ6ZXQsIHRhbmtfaWQpDQogICAgICAgIGlmIG5vdCB0YW5rOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeydzdGF0dXMnOiAnZXJyb3InLCAnbWVzc2FnZSc6IGYnWmJpb3JuaWsgbyBJRCB7dGFua19pZH0gbmllIHpvc3RhxYIgem5hbGV6aW9ueS4nfSksIDQwNA0KDQogICAgICAgICMgWk1JQU5BOiBKYXduaWUgd3lzenVrdWplbXkgbWllc3phbmluxJkgbmEgcG9kc3Rhd2llIGBhY3RpdmVfbWl4X2lkYA0KICAgICAgICBhY3RpdmVfbWl4ID0gZGIuc2Vzc2lvbi5nZXQoVGFua01peGVzLCB0YW5rLmFjdGl2ZV9taXhfaWQpIGlmIHRhbmsuYWN0aXZlX21peF9pZCBlbHNlIE5vbmUNCiAgICAgICAgDQogICAgICAgIGlmIG5vdCBhY3RpdmVfbWl4Og0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgICAgICdzdGF0dXMnOiAnc3VjY2VzcycsICd0YW5rX25hbWUnOiB0YW5rLm5hendhX3VuaWthbG5hLCAnaXNfZW1wdHknOiBUcnVlLA0KICAgICAgICAgICAgICAgICdkYXRhJzogeyd0b3RhbF93ZWlnaHQnOiAnMC4wMCcsICdjb21wb25lbnRzJzogW119DQogICAgICAgICAgICB9KSwgMjAwDQoNCiAgICAgICAgY29tcG9zaXRpb24gPSBCYXRjaE1hbmFnZW1lbnRTZXJ2aWNlLmdldF9taXhfY29tcG9zaXRpb24obWl4X2lkPWFjdGl2ZV9taXguaWQpDQogICAgICAgIA0KICAgICAgICAjIDQuIFNmb3JtYXR1aiBkYW5lIGRvIEpTT04gKERlY2ltYWwgbmllIGplc3QgZG9tecWbbG5pZSBzZXJpYWxpem93YWxueSkNCiAgICAgICAgZm9ybWF0dGVkX2NvbXBvbmVudHMgPSBbXQ0KICAgICAgICBmb3IgY29tcCBpbiBjb21wb3NpdGlvblsnY29tcG9uZW50cyddOg0KICAgICAgICAgICAgZm9ybWF0dGVkX2NvbXBvbmVudHMuYXBwZW5kKHsNCiAgICAgICAgICAgICAgICAnYmF0Y2hfaWQnOiBjb21wWydiYXRjaF9pZCddLA0KICAgICAgICAgICAgICAgICdiYXRjaF9jb2RlJzogY29tcFsnYmF0Y2hfY29kZSddLA0KICAgICAgICAgICAgICAgICdtYXRlcmlhbF90eXBlJzogY29tcFsnbWF0ZXJpYWxfdHlwZSddLA0KICAgICAgICAgICAgICAgICdxdWFudGl0eV9pbl9taXgnOiBzdHIoY29tcFsncXVhbnRpdHlfaW5fbWl4J10pLCAjIEtvbndlcnNqYSBuYSBzdHJpbmcNCiAgICAgICAgICAgICAgICAncGVyY2VudGFnZSc6IGYie2NvbXBbJ3BlcmNlbnRhZ2UnXTouMmZ9IiAjIEZvcm1hdG93YW5pZSBkbyAyIG1pZWpzYyBwbyBwcnplY2lua3UNCiAgICAgICAgICAgIH0pDQoNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N0YXR1cyc6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICd0YW5rX25hbWUnOiB0YW5rLm5hendhX3VuaWthbG5hLA0KICAgICAgICAgICAgJ2lzX2VtcHR5JzogRmFsc2UsDQogICAgICAgICAgICAnZGF0YSc6IHsNCiAgICAgICAgICAgICAgICAnbWl4X2lkJzogYWN0aXZlX21peC5pZCwNCiAgICAgICAgICAgICAgICAnbWl4X2NvZGUnOiBhY3RpdmVfbWl4LnVuaXF1ZV9jb2RlLA0KICAgICAgICAgICAgICAgICd0b3RhbF93ZWlnaHQnOiBzdHIoY29tcG9zaXRpb25bJ3RvdGFsX3dlaWdodCddKSwgIyBLb253ZXJzamEgbmEgc3RyaW5nDQogICAgICAgICAgICAgICAgJ2NvbXBvbmVudHMnOiBmb3JtYXR0ZWRfY29tcG9uZW50cw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KSwgMjAwDQoNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICMgTmllIHJvYmlteSByb2xsYmFjaywgYm8gdG8gb3BlcmFjamEgdHlsa28gZG8gb2Rjenl0dQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J3N0YXR1cyc6ICdlcnJvcicsICdtZXNzYWdlJzogZidCxYLEhWQgc2Vyd2VyYToge2V9J30pLCA1MDANCg0KQGJhdGNoX2JwLnJvdXRlKCcvbWl4ZXMvPGludDptaXhfaWQ+L2NvbXBvc2l0aW9uJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9taXhfY29tcG9zaXRpb25fZW5kcG9pbnQobWl4X2lkKToNCiAgICAiIiINCiAgICBad3JhY2Egc3pjemVnw7PFgm93eSwgZHd1cG96aW9tb3d5IHNrxYJhZCBkbGEgZGFuZWogbWllc3phbmlueS4NCiAgICAiIiINCiAgICB0cnk6DQogICAgICAgIGNvbXBvc2l0aW9uX2RhdGEgPSBCYXRjaE1hbmFnZW1lbnRTZXJ2aWNlLmdldF9taXhfY29tcG9zaXRpb24obWl4X2lkKQ0KICAgICAgICBpZiBub3QgY29tcG9zaXRpb25fZGF0YToNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ01pZXN6YW5pbmEgbyBJRCB7bWl4X2lkfSBuaWUgem9zdGHFgmEgem5hbGV6aW9uYS4nfSksIDQwNA0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoY29tcG9zaXRpb25fZGF0YSkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGltcG9ydCB0cmFjZWJhY2sNCiAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ0LFgsSFZCBzZXJ3ZXJhOiB7ZX0nfSksIDUwMA==
  - path: app//config.py
    content: IyBhcHAvY29uZmlnLnB5DQoNCmltcG9ydCBvcw0KZnJvbSBkb3RlbnYgaW1wb3J0IGxvYWRfZG90ZW52DQoNCmxvYWRfZG90ZW52KCkNCg0KY2xhc3MgQ29uZmlnOg0KICAgICIiIktvbmZpZ3VyYWNqYSBwcm9kdWtjeWpuYSAvIGRld2Vsb3BlcnNrYSIiIg0KICAgIFNFQ1JFVF9LRVkgPSBvcy5lbnZpcm9uLmdldCgnU0VDUkVUX0tFWScpIG9yICd0cnVkbmUtZG8temdhZG5pZWNpYS1oYXNsbycNCiAgICBERUJVRyA9IG9zLmVudmlyb24uZ2V0KCdGTEFTS19ERUJVRycsICdUcnVlJykubG93ZXIoKSBpbiAoJ3RydWUnLCAnMScsICd0JykNCg0KICAgICMgRGFuZSBkbyBwb8WCxIVjemVuaWEgeiBiYXrEhSBkYW55Y2ggTXlTUUwNCiAgICBNWVNRTF9IT1NUID0gb3MuZW52aXJvbi5nZXQoJ01ZU1FMSE9TVCcsICdsb2NhbGhvc3QnKQ0KICAgIE1ZU1FMX1VTRVIgPSBvcy5lbnZpcm9uLmdldCgnTVlTUUxVU0VSJywgJ3Jvb3QnKQ0KICAgIE1ZU1FMX1BBU1NXT1JEID0gb3MuZW52aXJvbi5nZXQoJ01ZU1FMX1JPT1RfUEFTU1dPUkQnLCAnJykNCiAgICBNWVNRTF9EQiA9ICdtZXNfcGFyYWZpbmFfZGInDQogICAgRU5WSVJPTk1FTlQgPSBvcy5lbnZpcm9uLmdldCgnRU5WSVJPTk1FTlQnLCAnZGV2ZWxvcG1lbnQnKQ0KICAgIFBSRUZFUlJFRF9VUkxfU0NIRU1FID0gJ2h0dHBzJyBpZiBFTlZJUk9OTUVOVCA9PSAncHJvZHVjdGlvbicgZWxzZSAnaHR0cCcNCiAgICBwcmludChmIkVOVklST05NRU5UOiB7RU5WSVJPTk1FTlR9IikNCiAgICBwcmludChmIlBSRUZFUlJFRF9VUkxfU0NIRU1FOiB7UFJFRkVSUkVEX1VSTF9TQ0hFTUV9IikNCiAgICAjIFVSSSBkbGEgYmF6eSBkZXdlbG9wZXJza2llai9wcm9kdWtjeWpuZWoNCiAgICBTUUxBTENIRU1ZX0RBVEFCQVNFX1VSSSA9ICgNCiAgICAgICAgZiJteXNxbCtteXNxbGNvbm5lY3RvcjovL3tNWVNRTF9VU0VSfTp7TVlTUUxfUEFTU1dPUkR9QCINCiAgICAgICAgZiJ7TVlTUUxfSE9TVH0ve01ZU1FMX0RCfSINCiAgICAgICAgIj9jaGFyc2V0PXV0ZjhtYjQiDQogICAgKQ0KICAgIHByaW50KGYiLS0tIFtDT05GSUcgREVCVUddIFpidWRvd2FubyBTUUxBTENIRU1ZX0RBVEFCQVNFX1VSSToge1NRTEFMQ0hFTVlfREFUQUJBU0VfVVJJfSIpDQogICAgU1FMQUxDSEVNWV9UUkFDS19NT0RJRklDQVRJT05TID0gRmFsc2UNCiAgICBURVNUSU5HID0gRmFsc2UNCiAgICBDRUxFUllfQkVBVF9EQlVSSSA9IFNRTEFMQ0hFTVlfREFUQUJBU0VfVVJJDQogICAgcHJpbnQoZiItLS0gW0NPTkZJRyBERUJVR10gVXN0YXdpb25vIENFTEVSWV9CRUFUX0RCVVJJIG5hOiB7Q0VMRVJZX0JFQVRfREJVUkl9IikNCg0KDQpjbGFzcyBQcm9kQ29uZmlnKENvbmZpZyk6DQogICAgIiIiS29uZmlndXJhY2phIHByb2R1a2N5am5hIiIiDQogICAgREVCVUcgPSBGYWxzZQ0KICAgIFRFU1RJTkcgPSBGYWxzZQ0KICAgIEVOVklST05NRU5UID0gJ3Byb2R1Y3Rpb24nDQoNCmNsYXNzIFRlc3RDb25maWcoQ29uZmlnKToNCiAgICBURVNUSU5HID0gVHJ1ZQ0KICAgICMgTmFkcGlzdWplbXkgd3N6eXN0a28sIGJleiBwb2xlZ2FuaWEgbmEgZHppZWR6aWN6ZW5pdQ0KICAgIE1ZU1FMX0hPU1QgPSBvcy5lbnZpcm9uLmdldCgnTVlTUUxIT1NUJywgJ2xvY2FsaG9zdCcpDQogICAgTVlTUUxfVVNFUiA9IG9zLmVudmlyb24uZ2V0KCdNWVNRTFVTRVInLCAncm9vdCcpDQogICAgTVlTUUxfUEFTU1dPUkQgPSBvcy5lbnZpcm9uLmdldCgnTVlTUUxfUk9PVF9QQVNTV09SRCcsICcnKQ0KICAgIE1ZU1FMX0RCID0gJ21lc19wYXJhZmluYV9kYl90ZXN0JyAjIEplZHluYSBwcmF3ZHppd2Egem1pYW5hDQoNCiAgICBTUUxBTENIRU1ZX0RBVEFCQVNFX1VSSSA9ICgNCiAgICAgICAgZiJteXNxbCtteXNxbGNvbm5lY3RvcjovL3tNWVNRTF9VU0VSfTp7TVlTUUxfUEFTU1dPUkR9QCINCiAgICAgICAgZiJ7TVlTUUxfSE9TVH0ve01ZU1FMX0RCfSINCiAgICAgICAgIj9jaGFyc2V0PXV0ZjhtYjQiDQogICAgKQ0KDQpjbGFzcyBEZXZDb25maWdGb3JUZXN0aW5nKENvbmZpZyk6DQogICAgIiIiDQogICAgU3BlY2phbG5hIGtvbmZpZ3VyYWNqYSBkbyB0ZXN0w7N3LCBrdMOzcmUgbXVzesSFIGJ5xIcgdXJ1Y2hvbWlvbmUNCiAgICBuYSBkZXdlbG9wZXJza2llaiBiYXppZSBkYW55Y2ggKHogcGXFgm55bWkgZGFueW1pKS4NCiAgICAiIiINCiAgICBURVNUSU5HID0gVHJ1ZQ==
  - path: app//dashboard_service.py
    content: IyBhcHAvZGFzaGJvYXJkX3NlcnZpY2UucHkNCg0KZnJvbSAuZXh0ZW5zaW9ucyBpbXBvcnQgZGINCmZyb20gLm1vZGVscyBpbXBvcnQgU3ByemV0LCBBbGFybXksIFRhbmtNaXhlcw0KZnJvbSAuYmF0Y2hfbWFuYWdlbWVudF9zZXJ2aWNlIGltcG9ydCBCYXRjaE1hbmFnZW1lbnRTZXJ2aWNlDQpmcm9tIHNxbGFsY2hlbXkgaW1wb3J0IGZ1bmMNCmZyb20gc3FsYWxjaGVteS5vcm0gaW1wb3J0IGpvaW5lZGxvYWQNCmZyb20gZGVjaW1hbCBpbXBvcnQgRGVjaW1hbA0KZnJvbSBjb2xsZWN0aW9ucyBpbXBvcnQgZGVmYXVsdGRpY3QNCg0KY2xhc3MgRGFzaGJvYXJkU2VydmljZToNCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgZ2V0X21haW5fZGFzaGJvYXJkX2RhdGEoKToNCiAgICAgICAgIiIiDQogICAgICAgIEFncmVndWplIHdzenlzdGtpZSBkYW5lIGRsYSBkYXNoYm9hcmR1LiAoV2Vyc2phIDM6IFBvcHJhd25hIGtvbndlcnNqYSBuYSBmbG9hdCkNCiAgICAgICAgIiIiDQogICAgICAgIA0KICAgICAgICBzcHJ6ZXRfcSA9IGRiLnNlbGVjdChTcHJ6ZXQpLm9wdGlvbnMoDQogICAgICAgICAgICBqb2luZWRsb2FkKFNwcnpldC5hY3RpdmVfbWl4KQ0KICAgICAgICApLndoZXJlKA0KICAgICAgICAgICAgU3ByemV0LnR5cF9zcHJ6ZXR1LmluXyhbJ3JlYWt0b3InLCAnYmVjemthX2JydWRuYScsICdiZWN6a2FfY3p5c3RhJ10pDQogICAgICAgICkub3JkZXJfYnkoU3ByemV0LnR5cF9zcHJ6ZXR1LCBTcHJ6ZXQubmF6d2FfdW5pa2FsbmEpDQogICAgICAgIA0KICAgICAgICB3c3p5c3RraWVfdXJ6YWR6ZW5pYSA9IGRiLnNlc3Npb24uZXhlY3V0ZShzcHJ6ZXRfcSkuc2NhbGFycygpLnVuaXF1ZSgpLmFsbCgpDQoNCiAgICAgICAgcmVha3Rvcnlfd19wcm9jZXNpZV9kYXRhID0gW10NCiAgICAgICAgcmVha3RvcnlfcHVzdGVfZGF0YSA9IFtdDQogICAgICAgIGJlY3praV9icnVkbmVfZGF0YSA9IFtdDQogICAgICAgIGJlY3praV9jenlzdGVfZGF0YSA9IFtdDQoNCiAgICAgICAgZm9yIHNwcnpldCBpbiB3c3p5c3RraWVfdXJ6YWR6ZW5pYToNCiAgICAgICAgICAgIHNwcnpldF9kYXRhID0gew0KICAgICAgICAgICAgICAgICJpZCI6IHNwcnpldC5pZCwNCiAgICAgICAgICAgICAgICAibmF6d2EiOiBzcHJ6ZXQubmF6d2FfdW5pa2FsbmEsDQogICAgICAgICAgICAgICAgInN0YW5fc3ByemV0dSI6IHNwcnpldC5zdGFuX3NwcnpldHUsDQogICAgICAgICAgICAgICAgInBhcnRpYSI6IE5vbmUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIHNwcnpldC50eXBfc3ByemV0dSA9PSAncmVha3Rvcic6DQogICAgICAgICAgICAgICAgc3ByemV0X2RhdGEudXBkYXRlKHsNCiAgICAgICAgICAgICAgICAgICAgInRlbXBlcmF0dXJhX2FrdHVhbG5hIjogZmxvYXQoc3ByemV0LnRlbXBlcmF0dXJhX2FrdHVhbG5hKSBpZiBzcHJ6ZXQudGVtcGVyYXR1cmFfYWt0dWFsbmEgZWxzZSBOb25lLA0KICAgICAgICAgICAgICAgICAgICAidGVtcGVyYXR1cmFfZG9jZWxvd2EiOiBmbG9hdChzcHJ6ZXQudGVtcGVyYXR1cmFfZG9jZWxvd2EpIGlmIHNwcnpldC50ZW1wZXJhdHVyYV9kb2NlbG93YSBlbHNlIE5vbmUsDQogICAgICAgICAgICAgICAgICAgICJjaXNuaWVuaWVfYWt0dWFsbmUiOiBmbG9hdChzcHJ6ZXQuY2lzbmllbmllX2FrdHVhbG5lKSBpZiBzcHJ6ZXQuY2lzbmllbmllX2FrdHVhbG5lIGVsc2UgTm9uZSwNCiAgICAgICAgICAgICAgICAgICAgInN0YW5fcGFsbmlrYSI6IHNwcnpldC5zdGFuX3BhbG5pa2EsDQogICAgICAgICAgICAgICAgICAgICJ0ZW1wZXJhdHVyYV9tYXgiOiBmbG9hdChzcHJ6ZXQudGVtcGVyYXR1cmFfbWF4IG9yICcxMjAuMCcpLA0KICAgICAgICAgICAgICAgICAgICAiY2lzbmllbmllX21heCI6IGZsb2F0KHNwcnpldC5jaXNuaWVuaWVfbWF4IG9yICc2LjAnKQ0KICAgICAgICAgICAgICAgIH0pDQoNCiAgICAgICAgICAgIGlmIHNwcnpldC5hY3RpdmVfbWl4Og0KICAgICAgICAgICAgICAgIG1peCA9IHNwcnpldC5hY3RpdmVfbWl4DQogICAgICAgICAgICAgICAgIyBnZXRfbWl4X2NvbXBvc2l0aW9uIHp3cmFjYSBuYW0gdGVyYXogc3DDs2puZSBvYmlla3R5IERlY2ltYWwNCiAgICAgICAgICAgICAgICBjb21wb3NpdGlvbiA9IEJhdGNoTWFuYWdlbWVudFNlcnZpY2UuZ2V0X21peF9jb21wb3NpdGlvbihtaXguaWQpDQogICAgICAgICAgICAgICAgd2FnYV9rZyA9IGNvbXBvc2l0aW9uLmdldCgndG90YWxfd2VpZ2h0JywgRGVjaW1hbCgnMC4wJykpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgIyBLb253ZXJ0dWplbXkgc2vFgmFkIG5hIGZsb2F0eSBUVVRBSiwgdHXFvCBwcnplZCB3eXPFgmFuaWVtDQogICAgICAgICAgICAgICAgc2tsYWRfZGxhX2FwaSA9IFsNCiAgICAgICAgICAgICAgICAgICAgeydtYXRlcmlhbF90eXBlJzogaXRlbVsnbWF0ZXJpYWxfdHlwZSddLCAndG90YWxfcXVhbnRpdHknOiBmbG9hdChpdGVtWyd0b3RhbF9xdWFudGl0eSddKX0NCiAgICAgICAgICAgICAgICAgICAgZm9yIGl0ZW0gaW4gY29tcG9zaXRpb24uZ2V0KCdzdW1tYXJ5X2J5X21hdGVyaWFsJywgW10pDQogICAgICAgICAgICAgICAgXQ0KDQogICAgICAgICAgICAgICAgc3ByemV0X2RhdGFbInBhcnRpYSJdID0gew0KICAgICAgICAgICAgICAgICAgICAiaWQiOiBtaXguaWQsDQogICAgICAgICAgICAgICAgICAgICJrb2QiOiBtaXgudW5pcXVlX2NvZGUsDQogICAgICAgICAgICAgICAgICAgICJ3YWdhX2tnIjogZmxvYXQod2FnYV9rZyksDQogICAgICAgICAgICAgICAgICAgICJza2xhZCI6IHNrbGFkX2RsYV9hcGksDQogICAgICAgICAgICAgICAgICAgICJwcm9jZXNzX3N0YXR1cyI6IG1peC5wcm9jZXNzX3N0YXR1cw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgc3ByemV0LnR5cF9zcHJ6ZXR1ID09ICdyZWFrdG9yJzoNCiAgICAgICAgICAgICAgICBpZiBzcHJ6ZXQuYWN0aXZlX21peDoNCiAgICAgICAgICAgICAgICAgICAgcmVha3Rvcnlfd19wcm9jZXNpZV9kYXRhLmFwcGVuZChzcHJ6ZXRfZGF0YSkNCiAgICAgICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICAgICByZWFrdG9yeV9wdXN0ZV9kYXRhLmFwcGVuZChzcHJ6ZXRfZGF0YSkNCiAgICAgICAgICAgIGVsaWYgc3ByemV0LnR5cF9zcHJ6ZXR1ID09ICdiZWN6a2FfYnJ1ZG5hJzoNCiAgICAgICAgICAgICAgICBiZWN6a2lfYnJ1ZG5lX2RhdGEuYXBwZW5kKHNwcnpldF9kYXRhKQ0KICAgICAgICAgICAgZWxpZiBzcHJ6ZXQudHlwX3NwcnpldHUgPT0gJ2JlY3prYV9jenlzdGEnOg0KICAgICAgICAgICAgICAgIGJlY3praV9jenlzdGVfZGF0YS5hcHBlbmQoc3ByemV0X2RhdGEpDQoNCiAgICAgICAgc3RvY2tfc3VtbWFyeSA9IGRlZmF1bHRkaWN0KGxhbWJkYTogeydicnVkbnknOiBEZWNpbWFsKCcwLjAnKSwgJ2N6eXN0eSc6IERlY2ltYWwoJzAuMCcpfSkNCg0KICAgICAgICBmb3IgYmVjemthIGluIGJlY3praV9icnVkbmVfZGF0YToNCiAgICAgICAgICAgIGlmIGJlY3prYS5nZXQoJ3BhcnRpYScpIGFuZCBiZWN6a2FbJ3BhcnRpYSddLmdldCgnc2tsYWQnKToNCiAgICAgICAgICAgICAgICBmb3IgbWF0ZXJpYWxfaW5mbyBpbiBiZWN6a2FbJ3BhcnRpYSddWydza2xhZCddOg0KICAgICAgICAgICAgICAgICAgICBtYXRfdHlwZSA9IG1hdGVyaWFsX2luZm9bJ21hdGVyaWFsX3R5cGUnXQ0KICAgICAgICAgICAgICAgICAgICBtYXRfcXVhbnRpdHkgPSBEZWNpbWFsKG1hdGVyaWFsX2luZm8uZ2V0KCd0b3RhbF9xdWFudGl0eScsICcwLjAnKSkNCiAgICAgICAgICAgICAgICAgICAgc3RvY2tfc3VtbWFyeVttYXRfdHlwZV1bJ2JydWRueSddICs9IG1hdF9xdWFudGl0eQ0KDQogICAgICAgIGZvciBiZWN6a2EgaW4gYmVjemtpX2N6eXN0ZV9kYXRhOg0KICAgICAgICAgICAgaWYgYmVjemthLmdldCgncGFydGlhJykgYW5kIGJlY3prYVsncGFydGlhJ10uZ2V0KCdza2xhZCcpOg0KICAgICAgICAgICAgICAgIGZvciBtYXRlcmlhbF9pbmZvIGluIGJlY3prYVsncGFydGlhJ11bJ3NrbGFkJ106DQogICAgICAgICAgICAgICAgICAgIG1hdF90eXBlID0gbWF0ZXJpYWxfaW5mb1snbWF0ZXJpYWxfdHlwZSddDQogICAgICAgICAgICAgICAgICAgIG1hdF9xdWFudGl0eSA9IERlY2ltYWwobWF0ZXJpYWxfaW5mby5nZXQoJ3RvdGFsX3F1YW50aXR5JywgJzAuMCcpKQ0KICAgICAgICAgICAgICAgICAgICBzdG9ja19zdW1tYXJ5W21hdF90eXBlXVsnY3p5c3R5J10gKz0gbWF0X3F1YW50aXR5DQogICAgICAgIA0KICAgICAgICBzdG9ja19zdW1tYXJ5X2xpc3QgPSBzb3J0ZWQoWw0KICAgICAgICAgICAgeydtYXRlcmlhbF90eXBlJzogaywgJ2RpcnR5X3N0b2NrX2tnJzogZmxvYXQodlsnYnJ1ZG55J10pLCAnY2xlYW5fc3RvY2tfa2cnOiBmbG9hdCh2WydjenlzdHknXSl9DQogICAgICAgICAgICBmb3IgaywgdiBpbiBzdG9ja19zdW1tYXJ5Lml0ZW1zKCkNCiAgICAgICAgXSwga2V5PWxhbWJkYSB4OiB4WydtYXRlcmlhbF90eXBlJ10pDQogICAgICAgIA0KICAgICAgICBhbGFybXlfcSA9IGRiLnNlbGVjdChBbGFybXkpLndoZXJlKEFsYXJteS5zdGF0dXNfYWxhcm11ID09ICdBS1RZV05ZJykub3JkZXJfYnkoQWxhcm15LmN6YXNfd3lzdGFwaWVuaWEuZGVzYygpKS5saW1pdCg1KQ0KICAgICAgICBhbGFybXkgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoYWxhcm15X3EpLnNjYWxhcnMoKS5hbGwoKQ0KICAgICAgICBhbGFybXlfZGF0YSA9IFt7ICJpZCI6IGEuaWQsICJ0eXAiOiBhLnR5cF9hbGFybXUsICJzcHJ6ZXQiOiBhLm5hendhX3NwcnpldHUsICJ3YXJ0b3NjIjogZmxvYXQoYS53YXJ0b3NjKSwgImxpbWl0IjogZmxvYXQoYS5saW1pdF9wcnpla3JvY3plbmlhKSwgImN6YXMiOiBhLmN6YXNfd3lzdGFwaWVuaWEuaXNvZm9ybWF0KCkgKyAnWicgfSBmb3IgYSBpbiBhbGFybXldDQoNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICJyZWFrdG9yeV93X3Byb2Nlc2llIjogcmVha3Rvcnlfd19wcm9jZXNpZV9kYXRhLA0KICAgICAgICAgICAgInJlYWt0b3J5X3B1c3RlIjogcmVha3RvcnlfcHVzdGVfZGF0YSwNCiAgICAgICAgICAgICJiZWN6a2lfYnJ1ZG5lIjogYmVjemtpX2JydWRuZV9kYXRhLA0KICAgICAgICAgICAgImJlY3praV9jenlzdGUiOiBiZWN6a2lfY3p5c3RlX2RhdGEsDQogICAgICAgICAgICAiYWxhcm15IjogYWxhcm15X2RhdGEsDQogICAgICAgICAgICAic3RvY2tfc3VtbWFyeSI6IHN0b2NrX3N1bW1hcnlfbGlzdA0KICAgICAgICB9
  - path: app//db.py
    content: IyBhcHAvZGIucHkNCg0KaW1wb3J0IG15c3FsLmNvbm5lY3Rvcg0KZnJvbSBmbGFzayBpbXBvcnQgY3VycmVudF9hcHANCg0KZGVmIGdldF9kYl9jb25uZWN0aW9uKGNvbmZpZz1Ob25lKToNCiAgICAiIiJUd29yenkgaSB6d3JhY2Egbm93ZSBwb8WCxIVjemVuaWUgeiBiYXrEhSBkYW55Y2ggbmEgcG9kc3Rhd2llIHBvZGFuZWoga29uZmlndXJhY2ppIGx1YiB6IGN1cnJlbnRfYXBwLiIiIg0KICAgIGlmIGNvbmZpZyBpcyBOb25lOg0KICAgICAgICBjb25maWcgPSBjdXJyZW50X2FwcC5jb25maWcNCiAgICBjb25uZWN0aW9uID0gbXlzcWwuY29ubmVjdG9yLmNvbm5lY3QoDQogICAgICAgIGhvc3Q9Y29uZmlnWydNWVNRTF9IT1NUJ10sDQogICAgICAgIHVzZXI9Y29uZmlnWydNWVNRTF9VU0VSJ10sDQogICAgICAgIHBhc3N3b3JkPWNvbmZpZ1snTVlTUUxfUEFTU1dPUkQnXSwNCiAgICAgICAgZGF0YWJhc2U9Y29uZmlnWydNWVNRTF9EQiddLA0KICAgICAgICBhdXRvY29tbWl0PUZhbHNlDQogICAgKQ0KICAgIGN1cnNvciA9IGNvbm5lY3Rpb24uY3Vyc29yKCkNCiAgICBjdXJzb3IuZXhlY3V0ZSgiU0VUIHRpbWVfem9uZSA9ICcrMDA6MDAnIikNCiAgICBjdXJzb3IuY2xvc2UoKQ0KICAgIHJldHVybiBjb25uZWN0aW9u
  - path: app//extensions.py
    content: IyBhcHAvZXh0ZW5zaW9ucy5weQ0KDQppbXBvcnQgb3MNCmZyb20gZmxhc2tfc3FsYWxjaGVteSBpbXBvcnQgU1FMQWxjaGVteQ0KZnJvbSBmbGFza19zb2NrZXRpbyBpbXBvcnQgU29ja2V0SU8NCmZyb20gc3FsYWxjaGVteSBpbXBvcnQgZXZlbnQNCmZyb20gc3FsYWxjaGVteS5lbmdpbmUgaW1wb3J0IEVuZ2luZQ0KDQoNCmRiID0gU1FMQWxjaGVteSgpDQoNCkBldmVudC5saXN0ZW5zX2ZvcihFbmdpbmUsICJjb25uZWN0IikNCmRlZiBzZXRfdXRjX3RpbWV6b25lKGRiYXBpX2Nvbm5lY3Rpb24sIGNvbm5lY3Rpb25fcmVjb3JkKToNCiAgICAiIiINCiAgICBXeWtvbnVqZSBTRVQgdGltZV96b25lID0gJyswMDowMCcgZGxhIGthxbxkZWdvIG5vd2VnbyBwb8WCxIVjemVuaWEuDQogICAgWmFwZXduaWEgdG8sIMW8ZSBzZXNqYSBNeVNRTCB6YXdzemUgZHppYcWCYSB3IFVUQy4NCiAgICAiIiINCiAgICBjdXJzb3IgPSBkYmFwaV9jb25uZWN0aW9uLmN1cnNvcigpDQogICAgY3Vyc29yLmV4ZWN1dGUoIlNFVCB0aW1lX3pvbmUgPSAnKzAwOjAwJyIpDQogICAgY3Vyc29yLmNsb3NlKCkNCg0KcmVkaXNfdXJsID0gb3MuZW52aXJvbi5nZXQoJ1JFRElTX1VSTCcpDQoNCnNvY2tldGlvID0gU29ja2V0SU8oDQogICAgYXN5bmNfbW9kZT0nZXZlbnRsZXQnLA0KICAgIGNvcnNfYWxsb3dlZF9vcmlnaW5zPSIqIiwNCiAgICAjbG9nZ2VyPVRydWUsDQogICAgI2VuZ2luZWlvX2xvZ2dlcj1UcnVlLA0KICAgIG1lc3NhZ2VfcXVldWU9cmVkaXNfdXJsLA0KICAgIHBpbmdfdGltZW91dD0yMCwNCiAgICBwaW5nX2ludGVydmFsPTEwDQoNCik=
  - path: app//models.py
    content: IyBhcHAvbW9kZWxzLnB5DQpmcm9tIC5leHRlbnNpb25zIGltcG9ydCBkYg0KaW1wb3J0IGRlY2ltYWwNCmltcG9ydCBkYXRldGltZQ0KZnJvbSB0eXBpbmcgaW1wb3J0IE9wdGlvbmFsLCBMaXN0DQoNCg0KZnJvbSBzcWxhbGNoZW15IGltcG9ydCAoDQogICAgREVDSU1BTCwgRGF0ZVRpbWUsIEZvcmVpZ25LZXlDb25zdHJhaW50LCBJbmRleCwgSW50ZWdlciwgSlNPTiwgU3RyaW5nLA0KICAgIFRhYmxlLCBUZXh0LCBUSU1FU1RBTVAsIHRleHQsIFZBUkNIQVIsIEZvcmVpZ25LZXksIGZ1bmMsIEJvb2xlYW4NCikNCmZyb20gc3FsYWxjaGVteS5kaWFsZWN0cy5teXNxbCBpbXBvcnQgRU5VTSwgVElOWUlOVA0KZnJvbSBzcWxhbGNoZW15Lm9ybSBpbXBvcnQgTWFwcGVkLCBtYXBwZWRfY29sdW1uLCByZWxhdGlvbnNoaXANCg0KDQojIERlZmluaXVqZW15IHRhYmVsxJkgYHNwcnpldGAgamFrbyBrbGFzxJkgUHl0aG9uYQ0KY2xhc3MgQWxhcm15KGRiLk1vZGVsKToNCiAgICBfX3RhYmxlbmFtZV9fID0gJ2FsYXJteScNCg0KICAgIGlkOiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSkNCiAgICB0eXBfYWxhcm11OiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgnVEVNUEVSQVRVUkEnLCAnQ0lTTklFTklFJywgJ1BPWklPTScsICdTWVNURU0nKSkNCiAgICBuYXp3YV9zcHJ6ZXR1OiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUigxMDApKQ0KICAgIHdhcnRvc2M6IE1hcHBlZFtkZWNpbWFsLkRlY2ltYWxdID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDEwLCAyKSkNCiAgICBsaW1pdF9wcnpla3JvY3plbmlhOiBNYXBwZWRbZGVjaW1hbC5EZWNpbWFsXSA9IG1hcHBlZF9jb2x1bW4oREVDSU1BTCgxMCwgMikpDQogICAgY3phc193eXN0YXBpZW5pYTogTWFwcGVkW2RhdGV0aW1lLmRhdGV0aW1lXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUpDQogICAgc3RhdHVzX2FsYXJtdTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihFTlVNKCdBS1RZV05ZJywgJ1BPVFdJRVJEWk9OWScsICdaQUtPTkNaT05ZJyksIHNlcnZlcl9kZWZhdWx0PXRleHQoIidBS1RZV05ZJyIpKQ0KICAgIGN6YXNfcG90d2llcmR6ZW5pYTogTWFwcGVkW09wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXV0gPSBtYXBwZWRfY29sdW1uKERhdGVUaW1lKQ0KICAgIGN6YXNfemFrb25jemVuaWE6IE1hcHBlZFtPcHRpb25hbFtkYXRldGltZS5kYXRldGltZV1dID0gbWFwcGVkX2NvbHVtbihEYXRlVGltZSkNCiAgICBrb21lbnRhcno6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVGV4dCkNCg0KDQpjbGFzcyBQYXRoZmluZGVyVGVzdEhpc3RvcnkoZGIuTW9kZWwpOg0KICAgIF9fdGFibGVuYW1lX18gPSAncGF0aGZpbmRlcl90ZXN0X2hpc3RvcnknDQoNCiAgICBpZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgdGVzdF90eXBlOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUig1MCkpDQogICAgc3RhcnRfcG9pbnQ6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUigxMDApKQ0KICAgIGVuZF9wb2ludDogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDEwMCkpDQogICAgdGVzdF9wYXJhbWV0ZXJzOiBNYXBwZWRbT3B0aW9uYWxbZGljdF1dID0gbWFwcGVkX2NvbHVtbihKU09OKQ0KICAgIHJlc3VsdDogTWFwcGVkW09wdGlvbmFsW2RpY3RdXSA9IG1hcHBlZF9jb2x1bW4oSlNPTikNCiAgICBzdWNjZXNzOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKFRJTllJTlQoMSkpDQogICAgZXhlY3V0aW9uX3RpbWVfbXM6IE1hcHBlZFtPcHRpb25hbFtpbnRdXSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICBjcmVhdGVkX2F0OiBNYXBwZWRbT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUsIHNlcnZlcl9kZWZhdWx0PXRleHQoJ0NVUlJFTlRfVElNRVNUQU1QJykpDQoNCg0KY2xhc3MgU3ByemV0KGRiLk1vZGVsKToNCiAgICBfX3RhYmxlbmFtZV9fID0gJ3NwcnpldCcNCiAgICBfX3RhYmxlX2FyZ3NfXyA9ICgNCiAgICAgICAgSW5kZXgoJ25hendhX3VuaWthbG5hJywgJ25hendhX3VuaWthbG5hJywgdW5pcXVlPVRydWUpLA0KICAgICAgICB7J2NvbW1lbnQnOiAnTGlzdGEgY2HFgmVnbyBzcHJ6xJl0dSBwcm9kdWtjeWpuZWdvIGkgbWFnYXp5bm93ZWdvJ30NCiAgICApDQogICAgIyBLb2x1bW55DQogICAgDQogICAgDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIHV3YWdpX3Nlcndpc293ZTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihUZXh0KQ0KICAgIG5hendhX3VuaWthbG5hOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUigyMCksIGNvbW1lbnQ9J05wLiBSMSwgRlosIEIxYiwgQjdjJykNCiAgICB0eXBfc3ByemV0dTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihFTlVNKCdyZWFrdG9yJywgJ2ZpbHRyJywgJ2JlY3prYV9icnVkbmEnLCAnYmVjemthX2N6eXN0YScsICdhcG9sbG8nLCAnbWFnYXp5bicsICdjeXN0ZXJuYScsICdtYXV6ZXInKSkNCiAgICBwb2plbW5vc2Nfa2c6IE1hcHBlZFtPcHRpb25hbFtkZWNpbWFsLkRlY2ltYWxdXSA9IG1hcHBlZF9jb2x1bW4oREVDSU1BTCgxMCwgMikpDQogICAgc3Rhbl9zcHJ6ZXR1OiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFZBUkNIQVIoNTApLCBjb21tZW50PSdOcC4gUHVzdHksIFcga2/Fgm8sIFByemVsZXcsIERtdWNoYW5pZSBmaWx0cmEnKQ0KICAgIHRlbXBlcmF0dXJhX2FrdHVhbG5hOiBNYXBwZWRbT3B0aW9uYWxbZGVjaW1hbC5EZWNpbWFsXV0gPSBtYXBwZWRfY29sdW1uKERFQ0lNQUwoMTAsIDYpKQ0KICAgIGNpc25pZW5pZV9ha3R1YWxuZTogTWFwcGVkW09wdGlvbmFsW2RlY2ltYWwuRGVjaW1hbF1dID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDUsIDIpKQ0KICAgIHBvemlvbV9ha3R1YWxueV9wcm9jZW50OiBNYXBwZWRbT3B0aW9uYWxbZGVjaW1hbC5EZWNpbWFsXV0gPSBtYXBwZWRfY29sdW1uKERFQ0lNQUwoNSwgMikpDQogICAgb3N0YXRuaWFfYWt0dWFsaXphY2phOiBNYXBwZWRbT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUpDQogICAgdGVtcGVyYXR1cmFfbWF4OiBNYXBwZWRbT3B0aW9uYWxbZGVjaW1hbC5EZWNpbWFsXV0gPSBtYXBwZWRfY29sdW1uKERFQ0lNQUwoMTAsIDYpLCBzZXJ2ZXJfZGVmYXVsdD10ZXh0KCInMTIwLjAwJyIpKQ0KICAgIGNpc25pZW5pZV9tYXg6IE1hcHBlZFtPcHRpb25hbFtkZWNpbWFsLkRlY2ltYWxdXSA9IG1hcHBlZF9jb2x1bW4oREVDSU1BTCg1LCAyKSwgc2VydmVyX2RlZmF1bHQ9dGV4dCgiJzYuMDAnIikpDQogICAgaWRfcGFydGlpX3N1cm93Y2E6IE1hcHBlZFtPcHRpb25hbFtpbnRdXSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICB0ZW1wZXJhdHVyYV9kb2NlbG93YTogTWFwcGVkW09wdGlvbmFsW2RlY2ltYWwuRGVjaW1hbF1dID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDEwLCA2KSwgY29tbWVudD0nVGVtcGVyYXR1cmEgemFkYW5hIHByemV6IG9wZXJhdG9yYScpDQogICAgc3p5Ymtvc2NfdG9wbmllbmlhX2tnX2g6IE1hcHBlZFtPcHRpb25hbFtkZWNpbWFsLkRlY2ltYWxdXSA9IG1hcHBlZF9jb2x1bW4oREVDSU1BTCgxMCwgMiksIHNlcnZlcl9kZWZhdWx0PXRleHQoIicxMDAwLjAwJyIpLCBjb21tZW50PSdTemFjb3dhbmEgc3p5YmtvxZvEhyB0b3BuaWVuaWEgc3Vyb3djYSB3IGtnIG5hIGdvZHppbsSZJykNCiAgICBhY3RpdmVfbWl4X2lkOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIG51bGxhYmxlPVRydWUsIGluZGV4PVRydWUpDQogICAgc3p5Ymtvc2NfZ3J6YW5pYV9jX25hX21pbnV0ZTogTWFwcGVkW09wdGlvbmFsW2RlY2ltYWwuRGVjaW1hbF1dID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDEwLCA2KSwgY29tbWVudD0iU3phY293YW5hIHN6eWJrb8WbxIcgZ3J6YW5pYSB3IMKwQy9taW4iKQ0KICAgIHN6eWJrb3NjX2NobG9kemVuaWFfY19uYV9taW51dGU6IE1hcHBlZFtPcHRpb25hbFtkZWNpbWFsLkRlY2ltYWxdXSA9IG1hcHBlZF9jb2x1bW4oREVDSU1BTCgxMCwgNiksIGNvbW1lbnQ9IlN6YWNvd2FuYSBzenlia2/Fm8SHIGNoxYJvZHplbmlhIHcgwrBDL21pbiIpDQogICAgc3Rhbl9wYWxuaWthOiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKEVOVU0oJ1dMQUNaT05ZJywgJ1dZTEFDWk9OWScpLCBkZWZhdWx0PSdXWUxBQ1pPTlknLCBjb21tZW50PSJBa3R1YWxueSBzdGFuIHBhbG5pa2EgcmVha3RvcmEiKQ0KICAgIA0KICAgIGZpbHRlcl9jYWtlX3N0YXR1czogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihTdHJpbmcoNTApLCBjb21tZW50PSdTdGF0dXMgcGxhY2thIG5hIGZpbHRyemUgKG5wLiBDWllTVFksIFQxMF9HT1RPV1kpJykNCiAgICBmaWx0ZXJfY2FrZV9vcmlnaW5fbWl4X2lkOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIGNvbW1lbnQ9J0lEIG1pZXN6YW5pbnkgKFRhbmtNaXgpLCB6IGt0w7NyZWogcG9jaG9kemkgb2JlY255IHBsYWNlaycpDQogICAgIyBSZWxhY2plDQogICAgDQogICAgYXBvbGxvX3Nlc2plOiBNYXBwZWRbTGlzdFsnQXBvbGxvU2VzamUnXV0gPSByZWxhdGlvbnNoaXAoJ0Fwb2xsb1Nlc2plJywgYmFja19wb3B1bGF0ZXM9J3NwcnpldCcpDQogICAgaGlzdG9yaWFfcG9taWFyb3c6IE1hcHBlZFtMaXN0WydIaXN0b3JpYVBvbWlhcm93J11dID0gcmVsYXRpb25zaGlwKCdIaXN0b3JpYVBvbWlhcm93JywgYmFja19wb3B1bGF0ZXM9J3NwcnpldCcpDQogICAgb3BlcmF0b3JfdGVtcGVyYXR1cmVzOiBNYXBwZWRbTGlzdFsnT3BlcmF0b3JUZW1wZXJhdHVyZXMnXV0gPSByZWxhdGlvbnNoaXAoJ09wZXJhdG9yVGVtcGVyYXR1cmVzJywgYmFja19wb3B1bGF0ZXM9J3NwcnpldCcpDQogICAgcGFydGllX3N1cm93Y2E6IE1hcHBlZFtMaXN0WydQYXJ0aWVTdXJvd2NhJ11dID0gcmVsYXRpb25zaGlwKCdQYXJ0aWVTdXJvd2NhJywgYmFja19wb3B1bGF0ZXM9J3NwcnpldCcpDQogICAgcG9ydHlfc3ByemV0dTogTWFwcGVkW0xpc3RbJ1BvcnR5U3ByemV0dSddXSA9IHJlbGF0aW9uc2hpcCgnUG9ydHlTcHJ6ZXR1JywgYmFja19wb3B1bGF0ZXM9J3NwcnpldCcpDQogICAgb3BlcmFjamVfZG9jZWxvd2U6IE1hcHBlZFtMaXN0WydPcGVyYWNqZUxvZyddXSA9IHJlbGF0aW9uc2hpcChmb3JlaWduX2tleXM9J09wZXJhY2plTG9nLmlkX3NwcnpldHVfZG9jZWxvd2VnbycsIGJhY2tfcG9wdWxhdGVzPSdzcHJ6ZXRfZG9jZWxvd3knKQ0KICAgIG9wZXJhY2plX3pyb2Rsb3dlOiBNYXBwZWRbTGlzdFsnT3BlcmFjamVMb2cnXV0gPSByZWxhdGlvbnNoaXAoZm9yZWlnbl9rZXlzPSdPcGVyYWNqZUxvZy5pZF9zcHJ6ZXR1X3pyb2Rsb3dlZ28nLCBiYWNrX3BvcHVsYXRlcz0nc3ByemV0X3pyb2Rsb3d5JykNCiAgICAjYWN0aXZlX21peDogTWFwcGVkW09wdGlvbmFsWydUYW5rTWl4ZXMnXV0gPSByZWxhdGlvbnNoaXAoYmFja19wb3B1bGF0ZXM9J3RhbmsnKQ0KICAgIG1peGVzOiBNYXBwZWRbTGlzdFsiVGFua01peGVzIl1dID0gcmVsYXRpb25zaGlwKA0KICAgICAgICBiYWNrX3BvcHVsYXRlcz0idGFuayIsDQogICAgICAgIGZvcmVpZ25fa2V5cz0iVGFua01peGVzLnRhbmtfaWQiDQogICAgKQ0KICAgIGFjdGl2ZV9taXg6IE1hcHBlZFtPcHRpb25hbFsiVGFua01peGVzIl1dID0gcmVsYXRpb25zaGlwKA0KICAgICAgICBwcmltYXJ5am9pbj0iZm9yZWlnbihTcHJ6ZXQuYWN0aXZlX21peF9pZCkgPT0gVGFua01peGVzLmlkIiwNCiAgICAgICAgdXNlbGlzdD1GYWxzZSwNCiAgICAgICAgcG9zdF91cGRhdGU9VHJ1ZSAjIFdhxbxuZSBkbGEgY3lrbGljem55Y2ggemFsZcW8bm/Fm2NpDQogICAgKQ0KDQogICAgZGVmIF9fcmVwcl9fKHNlbGYpOg0KICAgICAgICAjIFRhIG1ldG9kYSBwb21hZ2EgdyBkZWJ1Z293YW5pdSwgxYJhZG5pZSB3ecWbd2lldGxhasSFYyBvYmlla3QNCiAgICAgICAgcmV0dXJuIGYiPFNwcnpldCBpZD17c2VsZi5pZH0gbmF6d2E9J3tzZWxmLm5hendhX3VuaWthbG5hfSc+Ig0KDQpjbGFzcyBTdGF0dXN5KGRiLk1vZGVsKToNCiAgICBfX3RhYmxlbmFtZV9fID0gJ3N0YXR1c3knDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEluZGV4KCduYXp3YV9zdGF0dXN1JywgJ25hendhX3N0YXR1c3UnLCB1bmlxdWU9VHJ1ZSksDQogICAgICAgIHsnY29tbWVudCc6ICdTxYJvd25payBtb8W8bGl3eWNoIHN0YXR1c8OzdyBwYXJ0aWkgc3Vyb3djYSd9DQogICAgKQ0KDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIG5hendhX3N0YXR1c3U6IE1hcHBlZFtzdHJdID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDUwKSwgY29tbWVudD0nTnAuIFN1cm93eSwgRmlsdHJvd2FueSwgRG9iaWVsb255LCBXeWRtdWNoJykNCg0KICAgIHBhcnRpZV9zdGF0dXN5OiBNYXBwZWRbTGlzdFsnUGFydGllU3RhdHVzeSddXSA9IHJlbGF0aW9uc2hpcCgnUGFydGllU3RhdHVzeScsIGJhY2tfcG9wdWxhdGVzPSdzdGF0dXN5JykNCg0KDQpjbGFzcyBTdGF0dXN5UGFydGlpKGRiLk1vZGVsKToNCiAgICBfX3RhYmxlbmFtZV9fID0gJ3N0YXR1c3lfcGFydGlpJw0KICAgIF9fdGFibGVfYXJnc19fID0gKA0KICAgICAgICBJbmRleCgnbmF6d2Ffc3RhdHVzdScsICduYXp3YV9zdGF0dXN1JywgdW5pcXVlPVRydWUpLA0KICAgICkNCg0KICAgIGlkOiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSkNCiAgICBuYXp3YV9zdGF0dXN1OiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oU3RyaW5nKDUwKSkNCiAgICBvcGlzOiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFRleHQpDQoNCg0KY2xhc3MgVHlweVN1cm93Y2EoZGIuTW9kZWwpOg0KICAgIF9fdGFibGVuYW1lX18gPSAndHlweV9zdXJvd2NhJw0KICAgIF9fdGFibGVfYXJnc19fID0gKA0KICAgICAgICBJbmRleCgnbmF6d2EnLCAnbmF6d2EnLCB1bmlxdWU9VHJ1ZSksDQogICAgICAgIHsnY29tbWVudCc6ICdTxYJvd25payB0eXDDs3cgc3Vyb3djYSd9DQogICAgKQ0KDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIG5hendhOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUig1MCkpDQogICAgb3BpczogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDI1NSkpDQoNCg0KY2xhc3MgV2V6bHlSdXJvY2lhZ3UoZGIuTW9kZWwpOg0KICAgIF9fdGFibGVuYW1lX18gPSAnd2V6bHlfcnVyb2NpYWd1Jw0KICAgIF9fdGFibGVfYXJnc19fID0gKA0KICAgICAgICBJbmRleCgnbmF6d2Ffd2V6bGEnLCAnbmF6d2Ffd2V6bGEnLCB1bmlxdWU9VHJ1ZSksDQogICAgICAgIHsnY29tbWVudCc6ICdQdW5rdHkgxYLEhWN6ZW5pb3dlIHcgcnVyb2NpxIVndSAodHLDs2puaWtpLCBrb2xla3RvcnkpJ30NCiAgICApDQoNCiAgICBpZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgbmF6d2Ffd2V6bGE6IE1hcHBlZFtzdHJdID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDUwKSkNCg0KICAgIHNlZ21lbnR5OiBNYXBwZWRbTGlzdFsnU2VnbWVudHknXV0gPSByZWxhdGlvbnNoaXAoJ1NlZ21lbnR5JywgZm9yZWlnbl9rZXlzPSdbU2VnbWVudHkuaWRfd2V6bGFfa29uY293ZWdvXScsIGJhY2tfcG9wdWxhdGVzPSd3ZXpseV9ydXJvY2lhZ3UnKQ0KICAgIHNlZ21lbnR5XzogTWFwcGVkW0xpc3RbJ1NlZ21lbnR5J11dID0gcmVsYXRpb25zaGlwKCdTZWdtZW50eScsIGZvcmVpZ25fa2V5cz0nW1NlZ21lbnR5LmlkX3dlemxhX3N0YXJ0b3dlZ29dJywgYmFja19wb3B1bGF0ZXM9J3dlemx5X3J1cm9jaWFndV8nKQ0KDQoNCmNsYXNzIFphd29yeShkYi5Nb2RlbCk6DQogICAgX190YWJsZW5hbWVfXyA9ICd6YXdvcnknDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEluZGV4KCduYXp3YV96YXdvcnUnLCAnbmF6d2FfemF3b3J1JywgdW5pcXVlPVRydWUpLA0KICAgICAgICB7J2NvbW1lbnQnOiAnTGlzdGEgemF3b3LDs3cgc3RlcnVqxIVjeWNoIHByemVwxYJ5d2VtJ30NCiAgICApDQoNCiAgICBpZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgc3RhbjogTWFwcGVkW3N0cl0gPSBtYXBwZWRfY29sdW1uKEVOVU0oJ09UV0FSVFknLCAnWkFNS05JRVRZJyksIHNlcnZlcl9kZWZhdWx0PXRleHQoIidaQU1LTklFVFknIikpDQogICAgbmF6d2FfemF3b3J1OiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFN0cmluZyg4MCwgJ3V0ZjhtYjRfdW5pY29kZV9jaScpKQ0KDQogICAgc2VnbWVudHk6IE1hcHBlZFtMaXN0WydTZWdtZW50eSddXSA9IHJlbGF0aW9uc2hpcCgnU2VnbWVudHknLCBiYWNrX3BvcHVsYXRlcz0nemF3b3J5JykNCg0KDQpjbGFzcyBBcG9sbG9TZXNqZShkYi5Nb2RlbCk6DQogICAgX190YWJsZW5hbWVfXyA9ICdhcG9sbG9fc2VzamUnDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfc3ByemV0dSddLCBbJ3NwcnpldC5pZCddLCBuYW1lPSdhcG9sbG9fc2VzamVfaWJma18xJyksDQogICAgICAgIEluZGV4KCdpZF9zcHJ6ZXR1JywgJ2lkX3NwcnpldHUnKQ0KICAgICkNCg0KICAgIGlkOiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSkNCiAgICBpZF9zcHJ6ZXR1OiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICB0eXBfc3Vyb3djYTogTWFwcGVkW3N0cl0gPSBtYXBwZWRfY29sdW1uKFN0cmluZygyNTUsICd1dGY4bWI0X3VuaWNvZGVfY2knKSkNCiAgICBzdGF0dXNfc2Vzamk6IE1hcHBlZFtzdHJdID0gbWFwcGVkX2NvbHVtbihFTlVNKCdha3R5d25hJywgJ3pha29uY3pvbmEnKSwgc2VydmVyX2RlZmF1bHQ9dGV4dCgiJ2FrdHl3bmEnIikpDQogICAgY3phc19yb3pwb2N6ZWNpYTogTWFwcGVkW2RhdGV0aW1lLmRhdGV0aW1lXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUpDQogICAgY3phc196YWtvbmN6ZW5pYTogTWFwcGVkW09wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXV0gPSBtYXBwZWRfY29sdW1uKERhdGVUaW1lKQ0KICAgIHJvenBvY3pldGFfcHJ6ZXo6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oU3RyaW5nKDI1NSwgJ3V0ZjhtYjRfdW5pY29kZV9jaScpKQ0KICAgIHV3YWdpOiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFRleHQoY29sbGF0aW9uPSd1dGY4bWI0X3VuaWNvZGVfY2knKSkNCiAgICAjdXdhZ2lfZG9fa29sZWt0b3JhOiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFRleHQoY29sbGF0aW9uPSd1dGY4bWI0X3VuaWNvZGVfY2knKSkNCg0KICAgIHNwcnpldDogTWFwcGVkWydTcHJ6ZXQnXSA9IHJlbGF0aW9uc2hpcCgnU3ByemV0JywgYmFja19wb3B1bGF0ZXM9J2Fwb2xsb19zZXNqZScpDQogICAgb3BlcmFjamVfbG9nOiBNYXBwZWRbTGlzdFsnT3BlcmFjamVMb2cnXV0gPSByZWxhdGlvbnNoaXAoJ09wZXJhY2plTG9nJywgYmFja19wb3B1bGF0ZXM9J2Fwb2xsb19zZXNqZScpDQogICAgYXBvbGxvX3RyYWNraW5nOiBNYXBwZWRbTGlzdFsnQXBvbGxvVHJhY2tpbmcnXV0gPSByZWxhdGlvbnNoaXAoJ0Fwb2xsb1RyYWNraW5nJywgYmFja19wb3B1bGF0ZXM9J2Fwb2xsb19zZXNqZScpDQoNCg0KY2xhc3MgSGlzdG9yaWFQb21pYXJvdyhkYi5Nb2RlbCk6DQogICAgX190YWJsZW5hbWVfXyA9ICdoaXN0b3JpYV9wb21pYXJvdycNCiAgICBfX3RhYmxlX2FyZ3NfXyA9ICgNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF9zcHJ6ZXR1J10sIFsnc3ByemV0LmlkJ10sIG5hbWU9J2hpc3RvcmlhX3BvbWlhcm93X2liZmtfMScpLA0KICAgICAgICBJbmRleCgnaWR4X2hpc3RvcmlhX3NwcnpldF9jemFzJywgJ2lkX3NwcnpldHUnLCAnY3phc19wb21pYXJ1JykNCiAgICApDQoNCiAgICBpZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgaWRfc3ByemV0dTogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgY3phc19wb21pYXJ1OiBNYXBwZWRbZGF0ZXRpbWUuZGF0ZXRpbWVdID0gbWFwcGVkX2NvbHVtbihEYXRlVGltZSkNCiAgICB0ZW1wZXJhdHVyYTogTWFwcGVkW09wdGlvbmFsW2RlY2ltYWwuRGVjaW1hbF1dID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDEwLCA2KSkNCiAgICBjaXNuaWVuaWU6IE1hcHBlZFtPcHRpb25hbFtkZWNpbWFsLkRlY2ltYWxdXSA9IG1hcHBlZF9jb2x1bW4oREVDSU1BTCg1LCAyKSkNCg0KICAgIHNwcnpldDogTWFwcGVkWydTcHJ6ZXQnXSA9IHJlbGF0aW9uc2hpcCgnU3ByemV0JywgYmFja19wb3B1bGF0ZXM9J2hpc3RvcmlhX3BvbWlhcm93JykNCg0KDQpjbGFzcyBPcGVyYXRvclRlbXBlcmF0dXJlcyhkYi5Nb2RlbCk6DQogICAgX190YWJsZW5hbWVfXyA9ICdvcGVyYXRvcl90ZW1wZXJhdHVyZXMnDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfc3ByemV0dSddLCBbJ3NwcnpldC5pZCddLCBuYW1lPSdvcGVyYXRvcl90ZW1wZXJhdHVyZXNfaWJma18xJyksDQogICAgICAgIEluZGV4KCdpZF9zcHJ6ZXR1JywgJ2lkX3NwcnpldHUnKQ0KICAgICkNCg0KICAgIGlkOiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSkNCiAgICBpZF9zcHJ6ZXR1OiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICB0ZW1wZXJhdHVyYTogTWFwcGVkW2RlY2ltYWwuRGVjaW1hbF0gPSBtYXBwZWRfY29sdW1uKERFQ0lNQUwoMTAsIDYpKQ0KICAgIGN6YXNfdXN0YXdpZW5pYTogTWFwcGVkW2RhdGV0aW1lLmRhdGV0aW1lXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUpDQoNCiAgICBzcHJ6ZXQ6IE1hcHBlZFsnU3ByemV0J10gPSByZWxhdGlvbnNoaXAoJ1NwcnpldCcsIGJhY2tfcG9wdWxhdGVzPSdvcGVyYXRvcl90ZW1wZXJhdHVyZXMnKQ0KDQoNCmNsYXNzIFBhcnRpZVN1cm93Y2EoZGIuTW9kZWwpOg0KICAgIF9fdGFibGVuYW1lX18gPSAncGFydGllX3N1cm93Y2EnDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfc3ByemV0dSddLCBbJ3NwcnpldC5pZCddLCBvbmRlbGV0ZT0nU0VUIE5VTEwnLCBuYW1lPSdwYXJ0aWVfc3Vyb3djYV9pYmZrXzEnKSwNCiAgICAgICAgSW5kZXgoJ2lkX3NwcnpldHUnLCAnaWRfc3ByemV0dScpLA0KICAgICAgICBJbmRleCgnaWR4X2V0YXBfcHJvY2VzdScsICdldGFwX3Byb2Nlc3UnKSwNCiAgICAgICAgSW5kZXgoJ2lkeF90eXBfdHJhbnNmb3JtYWNqaScsICd0eXBfdHJhbnNmb3JtYWNqaScpLA0KICAgICAgICBJbmRleCgnbmF6d2FfcGFydGlpJywgJ25hendhX3BhcnRpaScsIHVuaXF1ZT1UcnVlKSwNCiAgICAgICAgSW5kZXgoJ3VuaWthbG55X2tvZCcsICd1bmlrYWxueV9rb2QnLCB1bmlxdWU9VHJ1ZSksDQogICAgICAgIHsnY29tbWVudCc6ICdLYcW8ZHkgd2llcnN6IHRvIHVuaWthbG5hIHBhcnRpYSBwcm9kdWtjeWpuYSBzdXJvd2NhJ30NCiAgICApDQoNCiAgICBpZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgdW5pa2Fsbnlfa29kOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUig1MCksIGNvbW1lbnQ9J0lkZW50eWZpa2F0b3IgcGFydGlpLCBucC4gVDEwLTIwMjMxMDI3LTE0MzAtQVBPTExPJykNCiAgICB6cm9kbG9fcG9jaG9kemVuaWE6IE1hcHBlZFtzdHJdID0gbWFwcGVkX2NvbHVtbihFTlVNKCdhcG9sbG8nLCAnY3lzdGVybmEnKSkNCiAgICB3YWdhX3BvY3phdGtvd2Ffa2c6IE1hcHBlZFtkZWNpbWFsLkRlY2ltYWxdID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDEwLCAyKSkNCiAgICBuYXp3YV9wYXJ0aWk6IE1hcHBlZFtzdHJdID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDEwMCkpDQogICAgc3RhdHVzX3BhcnRpaTogTWFwcGVkW3N0cl0gPSBtYXBwZWRfY29sdW1uKEVOVU0oJ1cgbWFnYXp5bmllIGJydWRueW0nLCAnU3Vyb3d5IHcgcmVha3RvcnplJywgJ0J1ZG93YW5pZSBwbGFja2EnLCAnUHJ6ZWxld2FuaWUnLCAnRmlsdHJvd2FuaWUnLCAnT2N6ZWtpd2FuaWUgbmEgb2NlbsSZJywgJ0RvIHBvbm93bmVqIGZpbHRyYWNqaScsICdEb2JpZWxhbmllJywgJ0dvdG93eSBkbyB3eXPFgmFuaWEnLCAnVyBtYWdhenluaWUgY3p5c3R5bScsICdBcmNoaXdhbG5hJykpDQogICAgdHlwX3N1cm93Y2E6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUig1MCkpDQogICAgd2FnYV9ha3R1YWxuYV9rZzogTWFwcGVkW09wdGlvbmFsW2RlY2ltYWwuRGVjaW1hbF1dID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDEwLCAyKSkNCiAgICBkYXRhX3V0d29yemVuaWE6IE1hcHBlZFtPcHRpb25hbFtkYXRldGltZS5kYXRldGltZV1dID0gbWFwcGVkX2NvbHVtbihUSU1FU1RBTVAsIHNlcnZlcl9kZWZhdWx0PXRleHQoJ0NVUlJFTlRfVElNRVNUQU1QJykpDQogICAgaWRfc3ByemV0dTogTWFwcGVkW09wdGlvbmFsW2ludF1dID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyKQ0KICAgIHJvZHphal9zdXJvd2NhOiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFZBUkNIQVIoNTApKQ0KICAgIGlkX2FrdHVhbG5lZ29fc3ByemV0dTogTWFwcGVkW09wdGlvbmFsW2ludF1dID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyKQ0KICAgIGFrdHVhbG55X2V0YXBfcHJvY2VzdTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihFTlVNKCdzdXJvd3knLCAncGxhY2VrJywgJ3ByemVsZXcnLCAnd19rb2xlJywgJ29jZW5hX3Byb2JraScsICdkbXVjaGFuaWUnLCAnZ290b3d5JywgJ3d5ZG11Y2gnKSwgc2VydmVyX2RlZmF1bHQ9dGV4dCgiJ3N1cm93eSciKSkNCiAgICBudW1lcl9jeWtsdV9ha3R1YWxuZWdvOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHNlcnZlcl9kZWZhdWx0PXRleHQoIicwJyIpKQ0KICAgIGN6YXNfcm96cG9jemVjaWFfZXRhcHU6IE1hcHBlZFtPcHRpb25hbFtkYXRldGltZS5kYXRldGltZV1dID0gbWFwcGVkX2NvbHVtbihEYXRlVGltZSkNCiAgICBwbGFub3dhbnlfY3phc196YWtvbmN6ZW5pYTogTWFwcGVkW09wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXV0gPSBtYXBwZWRfY29sdW1uKERhdGVUaW1lKQ0KICAgIGlkX2FrdHVhbG5lZ29fZmlsdHJhOiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFZBUkNIQVIoMTApKQ0KICAgIHJlYWt0b3JfZG9jZWxvd3k6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUigxMCkpDQogICAgaWxvc2NfY3lrbGlfZmlsdHJhY3lqbnljaDogTWFwcGVkW09wdGlvbmFsW2ludF1dID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBzZXJ2ZXJfZGVmYXVsdD10ZXh0KCInMCciKSkNCiAgICBoaXN0b3JpYV9vcGVyYWNqaTogTWFwcGVkW09wdGlvbmFsW2RpY3RdXSA9IG1hcHBlZF9jb2x1bW4oSlNPTikNCiAgICB0eXBfdHJhbnNmb3JtYWNqaTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihFTlVNKCdOT1dBJywgJ1RSQU5TRkVSJywgJ0ZJTFRSQUNKQScsICdNSUVTWkFOSUUnLCAnRFpJRUxFTklFJyksIHNlcnZlcl9kZWZhdWx0PXRleHQoIidOT1dBJyIpKQ0KICAgIGV0YXBfcHJvY2VzdTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihFTlVNKCdTVVJPV0EnLCAnV19QUk9DRVNJRScsICdGSUxUUk9XQU5BJywgJ0dPVE9XQScsICdaQVRXSUVSRFpPTkEnLCAnT0RSWlVDT05BJyksIHNlcnZlcl9kZWZhdWx0PXRleHQoIidTVVJPV0EnIikpDQogICAgcG9jaG9kemVuaWVfb3BpczogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihUZXh0KQ0KICAgIGRhdGFfb3N0YXRuaWVqX21vZHlmaWthY2ppOiBNYXBwZWRbT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdXSA9IG1hcHBlZF9jb2x1bW4oVElNRVNUQU1QLCBzZXJ2ZXJfZGVmYXVsdD10ZXh0KCdDVVJSRU5UX1RJTUVTVEFNUCBPTiBVUERBVEUgQ1VSUkVOVF9USU1FU1RBTVAnKSkNCiAgICB1dHdvcnpvbmFfcHJ6ZXo6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUigxMDApKQ0KICAgIGNlcnR5ZmlrYXRfamFrb3NjaTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihUZXh0KQ0KICAgIHV3YWdpX29wZXJhdG9yYTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihUZXh0KQ0KDQogICAgc3ByemV0OiBNYXBwZWRbT3B0aW9uYWxbJ1NwcnpldCddXSA9IHJlbGF0aW9uc2hpcCgnU3ByemV0JywgYmFja19wb3B1bGF0ZXM9J3BhcnRpZV9zdXJvd2NhJykNCiAgICBjeWtsZV9maWx0cmFjeWpuZTogTWFwcGVkW0xpc3RbJ0N5a2xlRmlsdHJhY3lqbmUnXV0gPSByZWxhdGlvbnNoaXAoJ0N5a2xlRmlsdHJhY3lqbmUnLCBiYWNrX3BvcHVsYXRlcz0ncGFydGllX3N1cm93Y2EnKQ0KICAgIG9wZXJhY2plX2xvZzogTWFwcGVkW0xpc3RbJ09wZXJhY2plTG9nJ11dID0gcmVsYXRpb25zaGlwKCdPcGVyYWNqZUxvZycsIGJhY2tfcG9wdWxhdGVzPSdwYXJ0aWVfc3Vyb3djYScpDQogICAgcGFydGllX3Byb2JraTogTWFwcGVkW0xpc3RbJ1BhcnRpZVByb2JraSddXSA9IHJlbGF0aW9uc2hpcCgnUGFydGllUHJvYmtpJywgYmFja19wb3B1bGF0ZXM9J3BhcnRpZV9zdXJvd2NhJykNCiAgICBwYXJ0aWVfc2tsYWRuaWtpOiBNYXBwZWRbTGlzdFsnUGFydGllU2tsYWRuaWtpJ11dID0gcmVsYXRpb25zaGlwKCdQYXJ0aWVTa2xhZG5pa2knLCBmb3JlaWduX2tleXM9J1tQYXJ0aWVTa2xhZG5pa2kuaWRfcGFydGlpX3NrbGFkb3dlal0nLCBiYWNrX3BvcHVsYXRlcz0ncGFydGllX3N1cm93Y2EnKQ0KICAgIHBhcnRpZV9za2xhZG5pa2lfOiBNYXBwZWRbTGlzdFsnUGFydGllU2tsYWRuaWtpJ11dID0gcmVsYXRpb25zaGlwKCdQYXJ0aWVTa2xhZG5pa2knLCBmb3JlaWduX2tleXM9J1tQYXJ0aWVTa2xhZG5pa2kuaWRfcGFydGlpX3d5bmlrb3dlal0nLCBiYWNrX3BvcHVsYXRlcz0ncGFydGllX3N1cm93Y2FfJykNCiAgICBwYXJ0aWVfc3RhdHVzeTogTWFwcGVkW0xpc3RbJ1BhcnRpZVN0YXR1c3knXV0gPSByZWxhdGlvbnNoaXAoJ1BhcnRpZVN0YXR1c3knLCBiYWNrX3BvcHVsYXRlcz0ncGFydGllX3N1cm93Y2EnKQ0KICAgIHBhcnRpZV9oaXN0b3JpYTogTWFwcGVkW0xpc3RbJ1BhcnRpZUhpc3RvcmlhJ11dID0gcmVsYXRpb25zaGlwKCdQYXJ0aWVIaXN0b3JpYScsIGJhY2tfcG9wdWxhdGVzPSdwYXJ0aWVfc3Vyb3djYScpDQogICAgcGFydGllX3Bvd2lhemFuaWE6IE1hcHBlZFtMaXN0WydQYXJ0aWVQb3dpYXphbmlhJ11dID0gcmVsYXRpb25zaGlwKCdQYXJ0aWVQb3dpYXphbmlhJywgZm9yZWlnbl9rZXlzPSdbUGFydGllUG93aWF6YW5pYS5wYXJ0aWFfZG9jZWxvd2FfaWRdJywgYmFja19wb3B1bGF0ZXM9J3BhcnRpYV9kb2NlbG93YScpDQogICAgcGFydGllX3Bvd2lhemFuaWFfOiBNYXBwZWRbTGlzdFsnUGFydGllUG93aWF6YW5pYSddXSA9IHJlbGF0aW9uc2hpcCgnUGFydGllUG93aWF6YW5pYScsIGZvcmVpZ25fa2V5cz0nW1BhcnRpZVBvd2lhemFuaWEucGFydGlhX3pyb2Rsb3dhX2lkXScsIGJhY2tfcG9wdWxhdGVzPSdwYXJ0aWFfenJvZGxvd2EnKQ0KICAgIHByb2JraV9vY2VuYTogTWFwcGVkW0xpc3RbJ1Byb2JraU9jZW5hJ11dID0gcmVsYXRpb25zaGlwKCdQcm9ia2lPY2VuYScsIGJhY2tfcG9wdWxhdGVzPSdwYXJ0aWVfc3Vyb3djYScpDQoNCg0KY2xhc3MgUG9ydHlTcHJ6ZXR1KGRiLk1vZGVsKToNCiAgICBfX3RhYmxlbmFtZV9fID0gJ3BvcnR5X3NwcnpldHUnDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfc3ByemV0dSddLCBbJ3NwcnpldC5pZCddLCBvbmRlbGV0ZT0nQ0FTQ0FERScsIG5hbWU9J3BvcnR5X3NwcnpldHVfaWJma18xJyksDQogICAgICAgIEluZGV4KCdpZF9zcHJ6ZXR1JywgJ2lkX3NwcnpldHUnKSwNCiAgICAgICAgSW5kZXgoJ25hendhX3BvcnR1JywgJ25hendhX3BvcnR1JywgdW5pcXVlPVRydWUpLA0KICAgICAgICB7J2NvbW1lbnQnOiAnUHVua3R5IHdlasWbY2lvd2Uvd3lqxZtjaW93ZSBuYSBzcHJ6xJljaWUgKHJlYWt0b3JhY2gsIGZpbHRyYWNoKSd9DQogICAgKQ0KDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIGlkX3NwcnpldHU6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyKQ0KICAgIG5hendhX3BvcnR1OiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUig1MCkpDQogICAgdHlwX3BvcnR1OiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgnSU4nLCAnT1VUJykpDQoNCiAgICBzcHJ6ZXQ6IE1hcHBlZFsnU3ByemV0J10gPSByZWxhdGlvbnNoaXAoJ1NwcnpldCcsIGJhY2tfcG9wdWxhdGVzPSdwb3J0eV9zcHJ6ZXR1JykNCiAgICBzZWdtZW50eTogTWFwcGVkW0xpc3RbJ1NlZ21lbnR5J11dID0gcmVsYXRpb25zaGlwKCdTZWdtZW50eScsIGZvcmVpZ25fa2V5cz0nW1NlZ21lbnR5LmlkX3BvcnR1X2tvbmNvd2Vnb10nLCBiYWNrX3BvcHVsYXRlcz0ncG9ydHlfc3ByemV0dScpDQogICAgc2VnbWVudHlfOiBNYXBwZWRbTGlzdFsnU2VnbWVudHknXV0gPSByZWxhdGlvbnNoaXAoJ1NlZ21lbnR5JywgZm9yZWlnbl9rZXlzPSdbU2VnbWVudHkuaWRfcG9ydHVfc3RhcnRvd2Vnb10nLCBiYWNrX3BvcHVsYXRlcz0ncG9ydHlfc3ByemV0dV8nKQ0KDQoNCmNsYXNzIEN5a2xlRmlsdHJhY3lqbmUoZGIuTW9kZWwpOg0KICAgIF9fdGFibGVuYW1lX18gPSAnY3lrbGVfZmlsdHJhY3lqbmUnDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfcGFydGlpJ10sIFsncGFydGllX3N1cm93Y2EuaWQnXSwgb25kZWxldGU9J0NBU0NBREUnLCBuYW1lPSdjeWtsZV9maWx0cmFjeWpuZV9pYmZrXzEnKSwNCiAgICAgICAgSW5kZXgoJ2lkeF9maWx0cl9jemFzJywgJ2lkX2ZpbHRyYScsICdjemFzX3JvenBvY3plY2lhJyksDQogICAgICAgIEluZGV4KCdpZHhfcGFydGlhX2N5a2wnLCAnaWRfcGFydGlpJywgJ251bWVyX2N5a2x1JyksDQogICAgICAgIHsnY29tbWVudCc6ICdIaXN0b3JpYSB3c3p5c3RraWNoIGN5a2xpIGZpbHRyYWN5am55Y2ggZGxhIGthxbxkZWogcGFydGlpJ30NCiAgICApDQoNCiAgICBpZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgaWRfcGFydGlpOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgbnVtZXJfY3lrbHU6IE1hcHBlZFtPcHRpb25hbFtpbnRdXSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICB0eXBfY3lrbHU6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgncGxhY2VrJywgJ2ZpbHRyYWNqYScsICdkbXVjaGFuaWUnKSkNCiAgICBpZF9maWx0cmE6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUigxMCkpDQogICAgcmVha3Rvcl9zdGFydG93eTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDEwKSkNCiAgICByZWFrdG9yX2RvY2Vsb3d5OiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFZBUkNIQVIoMTApKQ0KICAgIGN6YXNfcm96cG9jemVjaWE6IE1hcHBlZFtPcHRpb25hbFtkYXRldGltZS5kYXRldGltZV1dID0gbWFwcGVkX2NvbHVtbihEYXRlVGltZSkNCiAgICBjemFzX3pha29uY3plbmlhOiBNYXBwZWRbT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUpDQogICAgY3phc190cndhbmlhX21pbnV0OiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgd3luaWtfb2Nlbnk6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgncG96eXR5d25hJywgJ25lZ2F0eXduYScsICdvY3pla3VqZScpKQ0KICAgIGtvbWVudGFyejogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihUZXh0KQ0KDQogICAgcGFydGllX3N1cm93Y2E6IE1hcHBlZFtPcHRpb25hbFsnUGFydGllU3Vyb3djYSddXSA9IHJlbGF0aW9uc2hpcCgnUGFydGllU3Vyb3djYScsIGJhY2tfcG9wdWxhdGVzPSdjeWtsZV9maWx0cmFjeWpuZScpDQogICAgcHJvYmtpX29jZW5hOiBNYXBwZWRbTGlzdFsnUHJvYmtpT2NlbmEnXV0gPSByZWxhdGlvbnNoaXAoJ1Byb2JraU9jZW5hJywgYmFja19wb3B1bGF0ZXM9J2N5a2xlX2ZpbHRyYWN5am5lJykNCg0KDQpjbGFzcyBPcGVyYWNqZUxvZyhkYi5Nb2RlbCk6DQogICAgX190YWJsZW5hbWVfXyA9ICdvcGVyYWNqZV9sb2cnDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfYXBvbGxvX3Nlc2ppJ10sIFsnYXBvbGxvX3Nlc2plLmlkJ10sIG5hbWU9J2ZrX29wZXJhY2plX2xvZ19hcG9sbG9fc2VzamUnKSwNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF9wYXJ0aWlfc3Vyb3djYSddLCBbJ3BhcnRpZV9zdXJvd2NhLmlkJ10sIG9uZGVsZXRlPSdTRVQgTlVMTCcsIG5hbWU9J29wZXJhY2plX2xvZ19pYmZrXzEnKSwNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF9zcHJ6ZXR1X2RvY2Vsb3dlZ28nXSwgWydzcHJ6ZXQuaWQnXSwgb25kZWxldGU9J1NFVCBOVUxMJywgbmFtZT0nb3BlcmFjamVfbG9nX2liZmtfMycpLA0KICAgICAgICBGb3JlaWduS2V5Q29uc3RyYWludChbJ2lkX3NwcnpldHVfenJvZGxvd2VnbyddLCBbJ3NwcnpldC5pZCddLCBvbmRlbGV0ZT0nU0VUIE5VTEwnLCBuYW1lPSdvcGVyYWNqZV9sb2dfaWJma18yJyksDQogICAgICAgIEluZGV4KCdma19vcGVyYWNqZV9sb2dfYXBvbGxvX3Nlc2plJywgJ2lkX2Fwb2xsb19zZXNqaScpLA0KICAgICAgICBJbmRleCgnaWRfcGFydGlpX3N1cm93Y2EnLCAnaWRfcGFydGlpX3N1cm93Y2EnKSwNCiAgICAgICAgSW5kZXgoJ2lkX3NwcnpldHVfZG9jZWxvd2VnbycsICdpZF9zcHJ6ZXR1X2RvY2Vsb3dlZ28nKSwNCiAgICAgICAgSW5kZXgoJ2lkX3NwcnpldHVfenJvZGxvd2VnbycsICdpZF9zcHJ6ZXR1X3pyb2Rsb3dlZ28nKSwNCiAgICAgICAgeydjb21tZW50JzogJ0xvZyB3c3p5c3RraWNoIHpkYXJ6ZcWEIGkgb3BlcmFjamkgdyBwcm9jZXNpZSd9DQogICAgKQ0KDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIHR5cF9vcGVyYWNqaTogTWFwcGVkW3N0cl0gPSBtYXBwZWRfY29sdW1uKFZBUkNIQVIoNTApLCBjb21tZW50PSdOcC4gVFJBTlNGRVIsIERPREFOSUVfWklFTUksIEZJTFRSQUNKQV9LT8WBTycpDQogICAgY3phc19yb3pwb2N6ZWNpYTogTWFwcGVkW2RhdGV0aW1lLmRhdGV0aW1lXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUpDQogICAgc3RhdHVzX29wZXJhY2ppOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgnYWt0eXduYScsICd6YWtvbmN6b25hJywgJ3dzdHJ6eW1hbmEnLCAnYW51bG93YW5hJyksIHNlcnZlcl9kZWZhdWx0PXRleHQoIidha3R5d25hJyIpKQ0KICAgIGlkX3BhcnRpaV9zdXJvd2NhOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgaWRfc3ByemV0dV96cm9kbG93ZWdvOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgaWRfc3ByemV0dV9kb2NlbG93ZWdvOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgaWRfYXBvbGxvX3Nlc2ppOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgY3phc196YWtvbmN6ZW5pYTogTWFwcGVkW09wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXV0gPSBtYXBwZWRfY29sdW1uKERhdGVUaW1lKQ0KICAgIG9zdGF0bmlhX21vZHlmaWthY2phOiBNYXBwZWRbT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUpDQogICAgem1vZHlmaWtvd2FuZV9wcnplejogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihTdHJpbmcoMjU1LCAndXRmOG1iNF91bmljb2RlX2NpJykpDQogICAgdXdhZ2k6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVGV4dChjb2xsYXRpb249J3V0ZjhtYjRfdW5pY29kZV9jaScpKQ0KICAgIGlsb3NjX2tnOiBNYXBwZWRbT3B0aW9uYWxbZGVjaW1hbC5EZWNpbWFsXV0gPSBtYXBwZWRfY29sdW1uKERFQ0lNQUwoMTAsIDIpKQ0KICAgIG9waXM6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVGV4dCkNCiAgICBwdW5rdF9zdGFydG93eTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDUwKSkNCiAgICBwdW5rdF9kb2NlbG93eTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDUwKSkNCg0KICAgIGFwb2xsb19zZXNqZTogTWFwcGVkW09wdGlvbmFsWydBcG9sbG9TZXNqZSddXSA9IHJlbGF0aW9uc2hpcCgnQXBvbGxvU2VzamUnLCBiYWNrX3BvcHVsYXRlcz0nb3BlcmFjamVfbG9nJykNCiAgICBwYXJ0aWVfc3Vyb3djYTogTWFwcGVkW09wdGlvbmFsWydQYXJ0aWVTdXJvd2NhJ11dID0gcmVsYXRpb25zaGlwKCdQYXJ0aWVTdXJvd2NhJywgYmFja19wb3B1bGF0ZXM9J29wZXJhY2plX2xvZycpDQogICAgc3ByemV0X2RvY2Vsb3d5OiBNYXBwZWRbT3B0aW9uYWxbJ1NwcnpldCddXSA9IHJlbGF0aW9uc2hpcChmb3JlaWduX2tleXM9W2lkX3NwcnpldHVfZG9jZWxvd2Vnb10sIGJhY2tfcG9wdWxhdGVzPSdvcGVyYWNqZV9kb2NlbG93ZScpDQogICAgc3ByemV0X3pyb2Rsb3d5OiBNYXBwZWRbT3B0aW9uYWxbJ1NwcnpldCddXSA9IHJlbGF0aW9uc2hpcChmb3JlaWduX2tleXM9W2lkX3NwcnpldHVfenJvZGxvd2Vnb10sIGJhY2tfcG9wdWxhdGVzPSdvcGVyYWNqZV96cm9kbG93ZScpDQogICAgc2VnbWVudHk6IE1hcHBlZFtMaXN0WydTZWdtZW50eSddXSA9IHJlbGF0aW9uc2hpcCgnU2VnbWVudHknLCBzZWNvbmRhcnk9J2xvZ191enl0ZV9zZWdtZW50eScsIGJhY2tfcG9wdWxhdGVzPSdvcGVyYWNqZV9sb2cnKQ0KICAgIGFwb2xsb190cmFja2luZzogTWFwcGVkW0xpc3RbJ0Fwb2xsb1RyYWNraW5nJ11dID0gcmVsYXRpb25zaGlwKCdBcG9sbG9UcmFja2luZycsIGJhY2tfcG9wdWxhdGVzPSdvcGVyYWNqZV9sb2cnKQ0KICAgIHBhcnRpZV9oaXN0b3JpYTogTWFwcGVkW0xpc3RbJ1BhcnRpZUhpc3RvcmlhJ11dID0gcmVsYXRpb25zaGlwKCdQYXJ0aWVIaXN0b3JpYScsIGJhY2tfcG9wdWxhdGVzPSdvcGVyYWNqZV9sb2cnKQ0KICAgIHBhcnRpZV9wb3dpYXphbmlhOiBNYXBwZWRbTGlzdFsnUGFydGllUG93aWF6YW5pYSddXSA9IHJlbGF0aW9uc2hpcCgnUGFydGllUG93aWF6YW5pYScsIGJhY2tfcG9wdWxhdGVzPSdvcGVyYWNqZV9sb2cnKQ0KDQoNCmNsYXNzIFBhcnRpZVByb2JraShkYi5Nb2RlbCk6DQogICAgX190YWJsZW5hbWVfXyA9ICdwYXJ0aWVfcHJvYmtpJw0KICAgIF9fdGFibGVfYXJnc19fID0gKA0KICAgICAgICBGb3JlaWduS2V5Q29uc3RyYWludChbJ2lkX3BhcnRpaV9zdXJvd2NhJ10sIFsncGFydGllX3N1cm93Y2EuaWQnXSwgb25kZWxldGU9J0NBU0NBREUnLCBuYW1lPSdwYXJ0aWVfcHJvYmtpX2liZmtfMScpLA0KICAgICAgICBJbmRleCgnaWR4X2RhdGFfcG9icmFuaWEnLCAnZGF0YV9wb2JyYW5pYScpLA0KICAgICAgICBJbmRleCgnaWR4X251bWVyX3Byb2JraScsICdudW1lcl9wcm9ia2knKSwNCiAgICAgICAgSW5kZXgoJ2lkeF9wYXJ0aWEnLCAnaWRfcGFydGlpX3N1cm93Y2EnKSwNCiAgICAgICAgSW5kZXgoJ2lkeF9zdGF0dXMnLCAnc3RhdHVzX3Byb2JraScpLA0KICAgICAgICBJbmRleCgnbnVtZXJfcHJvYmtpJywgJ251bWVyX3Byb2JraScsIHVuaXF1ZT1UcnVlKQ0KICAgICkNCg0KICAgIGlkOiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSkNCiAgICBpZF9wYXJ0aWlfc3Vyb3djYTogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgbnVtZXJfcHJvYmtpOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUig1MCkpDQogICAgZGF0YV9wb2JyYW5pYTogTWFwcGVkW09wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXV0gPSBtYXBwZWRfY29sdW1uKFRJTUVTVEFNUCwgc2VydmVyX2RlZmF1bHQ9dGV4dCgnQ1VSUkVOVF9USU1FU1RBTVAnKSkNCiAgICBwb2JyYW5hX3ByemV6OiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFZBUkNIQVIoMTAwKSkNCiAgICBsb2thbGl6YWNqYV9wb2JyYW5pYTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDEwMCkpDQogICAgdHlwX3Byb2JraTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihFTlVNKCdSVVRZTk9XQScsICdLT05UUk9MTkEnLCAnUkVLTEFNQUNZSk5BJywgJ1dBTElEQUNZSk5BJyksIHNlcnZlcl9kZWZhdWx0PXRleHQoIidSVVRZTk9XQSciKSkNCiAgICBzdGF0dXNfcHJvYmtpOiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKEVOVU0oJ1BPQlJBTkEnLCAnV19BTkFMSVpJRScsICdaQVRXSUVSRFpPTkEnLCAnT0RSWlVDT05BJyksIHNlcnZlcl9kZWZhdWx0PXRleHQoIidQT0JSQU5BJyIpKQ0KICAgIHd5bmlraV9hbmFsaXp5OiBNYXBwZWRbT3B0aW9uYWxbZGljdF1dID0gbWFwcGVkX2NvbHVtbihKU09OKQ0KICAgIGRhdGFfYW5hbGl6eTogTWFwcGVkW09wdGlvbmFsW2RhdGV0aW1lLmRhdGV0aW1lXV0gPSBtYXBwZWRfY29sdW1uKFRJTUVTVEFNUCkNCiAgICBhbmFsaXpvd2FuYV9wcnplejogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDEwMCkpDQogICAgdXdhZ2k6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVGV4dCkNCg0KICAgIHBhcnRpZV9zdXJvd2NhOiBNYXBwZWRbJ1BhcnRpZVN1cm93Y2EnXSA9IHJlbGF0aW9uc2hpcCgnUGFydGllU3Vyb3djYScsIGJhY2tfcG9wdWxhdGVzPSdwYXJ0aWVfcHJvYmtpJykNCg0KDQpjbGFzcyBQYXJ0aWVTa2xhZG5pa2koZGIuTW9kZWwpOg0KICAgIF9fdGFibGVuYW1lX18gPSAncGFydGllX3NrbGFkbmlraScNCiAgICBfX3RhYmxlX2FyZ3NfXyA9ICgNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF9wYXJ0aWlfc2tsYWRvd2VqJ10sIFsncGFydGllX3N1cm93Y2EuaWQnXSwgb25kZWxldGU9J1JFU1RSSUNUJywgbmFtZT0nZmtfcGFydGlhX3NrbGFkb3dhJyksDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfcGFydGlpX3d5bmlrb3dlaiddLCBbJ3BhcnRpZV9zdXJvd2NhLmlkJ10sIG9uZGVsZXRlPSdDQVNDQURFJywgbmFtZT0nZmtfcGFydGlhX3d5bmlrb3dhJyksDQogICAgICAgIEluZGV4KCdpZHhfcGFydGlhX3NrbGFkb3dhJywgJ2lkX3BhcnRpaV9za2xhZG93ZWonKSwNCiAgICAgICAgSW5kZXgoJ2lkeF9wYXJ0aWFfd3luaWtvd2EnLCAnaWRfcGFydGlpX3d5bmlrb3dlaicpLA0KICAgICAgICB7J2NvbW1lbnQnOiAnVGFiZWxhIMWCxIVjesSFY2EgcGFydGllLW1pZXN6YW5pbnkgeiBpY2ggc2vFgmFkbmlrYW1pLid9DQogICAgKQ0KDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIGlkX3BhcnRpaV93eW5pa293ZWo6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyKQ0KICAgIGlkX3BhcnRpaV9za2xhZG93ZWo6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyKQ0KICAgIHdhZ2Ffc2tsYWRvd2Ffa2c6IE1hcHBlZFtkZWNpbWFsLkRlY2ltYWxdID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDEwLCAyKSkNCiAgICBkYXRhX2RvZGFuaWE6IE1hcHBlZFtPcHRpb25hbFtkYXRldGltZS5kYXRldGltZV1dID0gbWFwcGVkX2NvbHVtbihUSU1FU1RBTVAsIHNlcnZlcl9kZWZhdWx0PXRleHQoJ0NVUlJFTlRfVElNRVNUQU1QJykpDQoNCiAgICBwYXJ0aWVfc3Vyb3djYTogTWFwcGVkWydQYXJ0aWVTdXJvd2NhJ10gPSByZWxhdGlvbnNoaXAoJ1BhcnRpZVN1cm93Y2EnLCBmb3JlaWduX2tleXM9W2lkX3BhcnRpaV9za2xhZG93ZWpdLCBiYWNrX3BvcHVsYXRlcz0ncGFydGllX3NrbGFkbmlraScpDQogICAgcGFydGllX3N1cm93Y2FfOiBNYXBwZWRbJ1BhcnRpZVN1cm93Y2EnXSA9IHJlbGF0aW9uc2hpcCgnUGFydGllU3Vyb3djYScsIGZvcmVpZ25fa2V5cz1baWRfcGFydGlpX3d5bmlrb3dlal0sIGJhY2tfcG9wdWxhdGVzPSdwYXJ0aWVfc2tsYWRuaWtpXycpDQoNCg0KY2xhc3MgUGFydGllU3RhdHVzeShkYi5Nb2RlbCk6DQogICAgX190YWJsZW5hbWVfXyA9ICdwYXJ0aWVfc3RhdHVzeScNCiAgICBfX3RhYmxlX2FyZ3NfXyA9ICgNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF9wYXJ0aWknXSwgWydwYXJ0aWVfc3Vyb3djYS5pZCddLCBvbmRlbGV0ZT0nQ0FTQ0FERScsIG5hbWU9J3BhcnRpZV9zdGF0dXN5X2liZmtfMScpLA0KICAgICAgICBGb3JlaWduS2V5Q29uc3RyYWludChbJ2lkX3N0YXR1c3UnXSwgWydzdGF0dXN5LmlkJ10sIG9uZGVsZXRlPSdDQVNDQURFJywgbmFtZT0ncGFydGllX3N0YXR1c3lfaWJma18yJyksDQogICAgICAgIEluZGV4KCdpZF9zdGF0dXN1JywgJ2lkX3N0YXR1c3UnKSwNCiAgICAgICAgeydjb21tZW50JzogJ1ByenlwaXN1amUgd2llbGUgc3RhdHVzw7N3IGRvIGplZG5laiBwYXJ0aWknfQ0KICAgICkNCg0KICAgIGlkX3BhcnRpaTogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgaWRfc3RhdHVzdTogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgZGF0YV9uYWRhbmlhOiBNYXBwZWRbT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdXSA9IG1hcHBlZF9jb2x1bW4oVElNRVNUQU1QLCBzZXJ2ZXJfZGVmYXVsdD10ZXh0KCdDVVJSRU5UX1RJTUVTVEFNUCcpKQ0KDQogICAgcGFydGllX3N1cm93Y2E6IE1hcHBlZFsnUGFydGllU3Vyb3djYSddID0gcmVsYXRpb25zaGlwKCdQYXJ0aWVTdXJvd2NhJywgYmFja19wb3B1bGF0ZXM9J3BhcnRpZV9zdGF0dXN5JykNCiAgICBzdGF0dXN5OiBNYXBwZWRbJ1N0YXR1c3knXSA9IHJlbGF0aW9uc2hpcCgnU3RhdHVzeScsIGJhY2tfcG9wdWxhdGVzPSdwYXJ0aWVfc3RhdHVzeScpDQoNCg0KY2xhc3MgU2VnbWVudHkoZGIuTW9kZWwpOg0KICAgIF9fdGFibGVuYW1lX18gPSAnc2VnbWVudHknDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfcG9ydHVfa29uY293ZWdvJ10sIFsncG9ydHlfc3ByemV0dS5pZCddLCBuYW1lPSdzZWdtZW50eV9pYmZrXzMnKSwNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF9wb3J0dV9zdGFydG93ZWdvJ10sIFsncG9ydHlfc3ByemV0dS5pZCddLCBuYW1lPSdzZWdtZW50eV9pYmZrXzEnKSwNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF93ZXpsYV9rb25jb3dlZ28nXSwgWyd3ZXpseV9ydXJvY2lhZ3UuaWQnXSwgbmFtZT0nc2VnbWVudHlfaWJma180JyksDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfd2V6bGFfc3RhcnRvd2VnbyddLCBbJ3dlemx5X3J1cm9jaWFndS5pZCddLCBuYW1lPSdzZWdtZW50eV9pYmZrXzInKSwNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF96YXdvcnUnXSwgWyd6YXdvcnkuaWQnXSwgbmFtZT0nc2VnbWVudHlfaWJma181JyksDQogICAgICAgIEluZGV4KCdpZF9wb3J0dV9rb25jb3dlZ28nLCAnaWRfcG9ydHVfa29uY293ZWdvJyksDQogICAgICAgIEluZGV4KCdpZF9wb3J0dV9zdGFydG93ZWdvJywgJ2lkX3BvcnR1X3N0YXJ0b3dlZ28nKSwNCiAgICAgICAgSW5kZXgoJ2lkX3dlemxhX2tvbmNvd2VnbycsICdpZF93ZXpsYV9rb25jb3dlZ28nKSwNCiAgICAgICAgSW5kZXgoJ2lkX3dlemxhX3N0YXJ0b3dlZ28nLCAnaWRfd2V6bGFfc3RhcnRvd2VnbycpLA0KICAgICAgICBJbmRleCgnaWRfemF3b3J1JywgJ2lkX3phd29ydScpLA0KICAgICAgICBJbmRleCgnbmF6d2Ffc2VnbWVudHUnLCAnbmF6d2Ffc2VnbWVudHUnLCB1bmlxdWU9VHJ1ZSksDQogICAgICAgIHsnY29tbWVudCc6ICdEZWZpbml1amUgZml6eWN6bmUgcG/FgsSFY3plbmlhIChrcmF3xJlkemllIGdyYWZ1KSd9DQogICAgKQ0KDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIG5hendhX3NlZ21lbnR1OiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUigxMDApKQ0KICAgIGlkX3phd29ydTogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgaWRfcG9ydHVfc3RhcnRvd2VnbzogTWFwcGVkW09wdGlvbmFsW2ludF1dID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyKQ0KICAgIGlkX3dlemxhX3N0YXJ0b3dlZ286IE1hcHBlZFtPcHRpb25hbFtpbnRdXSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICBpZF9wb3J0dV9rb25jb3dlZ286IE1hcHBlZFtPcHRpb25hbFtpbnRdXSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICBpZF93ZXpsYV9rb25jb3dlZ286IE1hcHBlZFtPcHRpb25hbFtpbnRdXSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCg0KICAgIG9wZXJhY2plX2xvZzogTWFwcGVkW0xpc3RbJ09wZXJhY2plTG9nJ11dID0gcmVsYXRpb25zaGlwKCdPcGVyYWNqZUxvZycsIHNlY29uZGFyeT0nbG9nX3V6eXRlX3NlZ21lbnR5JywgYmFja19wb3B1bGF0ZXM9J3NlZ21lbnR5JykNCiAgICBwb3J0eV9zcHJ6ZXR1OiBNYXBwZWRbT3B0aW9uYWxbJ1BvcnR5U3ByemV0dSddXSA9IHJlbGF0aW9uc2hpcCgnUG9ydHlTcHJ6ZXR1JywgZm9yZWlnbl9rZXlzPVtpZF9wb3J0dV9rb25jb3dlZ29dLCBiYWNrX3BvcHVsYXRlcz0nc2VnbWVudHknKQ0KICAgIHBvcnR5X3NwcnpldHVfOiBNYXBwZWRbT3B0aW9uYWxbJ1BvcnR5U3ByemV0dSddXSA9IHJlbGF0aW9uc2hpcCgnUG9ydHlTcHJ6ZXR1JywgZm9yZWlnbl9rZXlzPVtpZF9wb3J0dV9zdGFydG93ZWdvXSwgYmFja19wb3B1bGF0ZXM9J3NlZ21lbnR5XycpDQogICAgd2V6bHlfcnVyb2NpYWd1OiBNYXBwZWRbT3B0aW9uYWxbJ1dlemx5UnVyb2NpYWd1J11dID0gcmVsYXRpb25zaGlwKCdXZXpseVJ1cm9jaWFndScsIGZvcmVpZ25fa2V5cz1baWRfd2V6bGFfa29uY293ZWdvXSwgYmFja19wb3B1bGF0ZXM9J3NlZ21lbnR5JykNCiAgICB3ZXpseV9ydXJvY2lhZ3VfOiBNYXBwZWRbT3B0aW9uYWxbJ1dlemx5UnVyb2NpYWd1J11dID0gcmVsYXRpb25zaGlwKCdXZXpseVJ1cm9jaWFndScsIGZvcmVpZ25fa2V5cz1baWRfd2V6bGFfc3RhcnRvd2Vnb10sIGJhY2tfcG9wdWxhdGVzPSdzZWdtZW50eV8nKQ0KICAgIHphd29yeTogTWFwcGVkWydaYXdvcnknXSA9IHJlbGF0aW9uc2hpcCgnWmF3b3J5JywgYmFja19wb3B1bGF0ZXM9J3NlZ21lbnR5JykNCg0KDQpjbGFzcyBBcG9sbG9UcmFja2luZyhkYi5Nb2RlbCk6DQogICAgX190YWJsZW5hbWVfXyA9ICdhcG9sbG9fdHJhY2tpbmcnDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfb3BlcmFjamlfbG9nJ10sIFsnb3BlcmFjamVfbG9nLmlkJ10sIG5hbWU9J2Fwb2xsb190cmFja2luZ19pYmZrXzInKSwNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF9zZXNqaSddLCBbJ2Fwb2xsb19zZXNqZS5pZCddLCBuYW1lPSdhcG9sbG9fdHJhY2tpbmdfaWJma18xJyksDQogICAgICAgIEluZGV4KCdpZF9vcGVyYWNqaV9sb2cnLCAnaWRfb3BlcmFjamlfbG9nJyksDQogICAgICAgIEluZGV4KCdpZF9zZXNqaScsICdpZF9zZXNqaScpDQogICAgKQ0KDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIGlkX3Nlc2ppOiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICB0eXBfemRhcnplbmlhOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgnRE9EQU5JRV9TVVJPV0NBJywgJ1RSQU5TRkVSX1dZSlNDSU9XWScsICdLT1JFS1RBX1JFQ1pOQScpKQ0KICAgIHdhZ2Ffa2c6IE1hcHBlZFtkZWNpbWFsLkRlY2ltYWxdID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDEwLCAyKSkNCiAgICBjemFzX3pkYXJ6ZW5pYTogTWFwcGVkW2RhdGV0aW1lLmRhdGV0aW1lXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUpDQogICAgaWRfb3BlcmFjamlfbG9nOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgb3BlcmF0b3I6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oU3RyaW5nKDI1NSwgJ3V0ZjhtYjRfdW5pY29kZV9jaScpKQ0KICAgIHV3YWdpOiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFRleHQoY29sbGF0aW9uPSd1dGY4bWI0X3VuaWNvZGVfY2knKSkNCg0KICAgIG9wZXJhY2plX2xvZzogTWFwcGVkW09wdGlvbmFsWydPcGVyYWNqZUxvZyddXSA9IHJlbGF0aW9uc2hpcCgnT3BlcmFjamVMb2cnLCBiYWNrX3BvcHVsYXRlcz0nYXBvbGxvX3RyYWNraW5nJykNCiAgICBhcG9sbG9fc2VzamU6IE1hcHBlZFsnQXBvbGxvU2VzamUnXSA9IHJlbGF0aW9uc2hpcCgnQXBvbGxvU2VzamUnLCBiYWNrX3BvcHVsYXRlcz0nYXBvbGxvX3RyYWNraW5nJykNCg0KDQp0X2xvZ191enl0ZV9zZWdtZW50eSA9IGRiLlRhYmxlKA0KICAgICdsb2dfdXp5dGVfc2VnbWVudHknLCBkYi5Nb2RlbC5tZXRhZGF0YSwNCiAgICBkYi5Db2x1bW4oJ2lkX29wZXJhY2ppX2xvZycsIEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUsIG51bGxhYmxlPUZhbHNlKSwNCiAgICBkYi5Db2x1bW4oJ2lkX3NlZ21lbnR1JywgSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSwgbnVsbGFibGU9RmFsc2UpLA0KICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfb3BlcmFjamlfbG9nJ10sIFsnb3BlcmFjamVfbG9nLmlkJ10sIG9uZGVsZXRlPSdDQVNDQURFJywgbmFtZT0nbG9nX3V6eXRlX3NlZ21lbnR5X2liZmtfMScpLA0KICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfc2VnbWVudHUnXSwgWydzZWdtZW50eS5pZCddLCBuYW1lPSdsb2dfdXp5dGVfc2VnbWVudHlfaWJma18yJyksDQogICAgSW5kZXgoJ2lkX3NlZ21lbnR1JywgJ2lkX3NlZ21lbnR1JyksDQogICAgY29tbWVudD0nWmFwaXN1amUsIGt0w7NyZSBzZWdtZW50eSBiecWCeSB1xbx5d2FuZSB3IGRhbmVqIG9wZXJhY2ppIHogbG9ndScNCikNCg0KDQpjbGFzcyBQYXJ0aWVIaXN0b3JpYShkYi5Nb2RlbCk6DQogICAgX190YWJsZW5hbWVfXyA9ICdwYXJ0aWVfaGlzdG9yaWEnDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfb3BlcmFjamlfbG9nJ10sIFsnb3BlcmFjamVfbG9nLmlkJ10sIG9uZGVsZXRlPSdTRVQgTlVMTCcsIG5hbWU9J3BhcnRpZV9oaXN0b3JpYV9pYmZrXzInKSwNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF9wYXJ0aWlfc3Vyb3djYSddLCBbJ3BhcnRpZV9zdXJvd2NhLmlkJ10sIG9uZGVsZXRlPSdDQVNDQURFJywgbmFtZT0ncGFydGllX2hpc3RvcmlhX2liZmtfMScpLA0KICAgICAgICBJbmRleCgnaWRfb3BlcmFjamlfbG9nJywgJ2lkX29wZXJhY2ppX2xvZycpLA0KICAgICAgICBJbmRleCgnaWR4X2RhdGFfb3BlcmFjamknLCAnZGF0YV9vcGVyYWNqaScpLA0KICAgICAgICBJbmRleCgnaWR4X3BhcnRpYScsICdpZF9wYXJ0aWlfc3Vyb3djYScpLA0KICAgICAgICBJbmRleCgnaWR4X3R5cF9vcGVyYWNqaScsICd0eXBfb3BlcmFjamknKQ0KICAgICkNCg0KICAgIGlkOiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlciwgcHJpbWFyeV9rZXk9VHJ1ZSkNCiAgICBpZF9wYXJ0aWlfc3Vyb3djYTogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgdHlwX29wZXJhY2ppOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgnVVRXT1JaRU5JRScsICdUUkFOU0ZFUicsICdGSUxUUkFDSkEnLCAnTUlFU1pBTklFJywgJ0RaSUVMRU5JRScsICdaTUlBTkFfU1RBTlUnLCAnUE9CT1JfUFJPQktJJywgJ1pBVFdJRVJEWkVOSUUnKSkNCiAgICBkYXRhX29wZXJhY2ppOiBNYXBwZWRbT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdXSA9IG1hcHBlZF9jb2x1bW4oVElNRVNUQU1QLCBzZXJ2ZXJfZGVmYXVsdD10ZXh0KCdDVVJSRU5UX1RJTUVTVEFNUCcpKQ0KICAgIG9wZXJhdG9yOiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFZBUkNIQVIoMTAwKSkNCiAgICBsb2thbGl6YWNqYV9wcnplZDogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDEwMCkpDQogICAgbG9rYWxpemFjamFfcG86IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVkFSQ0hBUigxMDApKQ0KICAgIHdhZ2FfcHJ6ZWQ6IE1hcHBlZFtPcHRpb25hbFtkZWNpbWFsLkRlY2ltYWxdXSA9IG1hcHBlZF9jb2x1bW4oREVDSU1BTCgxMCwgMykpDQogICAgd2FnYV9wbzogTWFwcGVkW09wdGlvbmFsW2RlY2ltYWwuRGVjaW1hbF1dID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDEwLCAzKSkNCiAgICBwYXJhbWV0cnlfb3BlcmFjamk6IE1hcHBlZFtPcHRpb25hbFtkaWN0XV0gPSBtYXBwZWRfY29sdW1uKEpTT04pDQogICAgb3Bpc19vcGVyYWNqaTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihUZXh0KQ0KICAgIGlkX29wZXJhY2ppX2xvZzogTWFwcGVkW09wdGlvbmFsW2ludF1dID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyKQ0KDQogICAgb3BlcmFjamVfbG9nOiBNYXBwZWRbT3B0aW9uYWxbJ09wZXJhY2plTG9nJ11dID0gcmVsYXRpb25zaGlwKCdPcGVyYWNqZUxvZycsIGJhY2tfcG9wdWxhdGVzPSdwYXJ0aWVfaGlzdG9yaWEnKQ0KICAgIHBhcnRpZV9zdXJvd2NhOiBNYXBwZWRbJ1BhcnRpZVN1cm93Y2EnXSA9IHJlbGF0aW9uc2hpcCgnUGFydGllU3Vyb3djYScsIGJhY2tfcG9wdWxhdGVzPSdwYXJ0aWVfaGlzdG9yaWEnKQ0KDQoNCmNsYXNzIFBhcnRpZVBvd2lhemFuaWEoZGIuTW9kZWwpOg0KICAgIF9fdGFibGVuYW1lX18gPSAncGFydGllX3Bvd2lhemFuaWEnDQogICAgX190YWJsZV9hcmdzX18gPSAoDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsnaWRfb3BlcmFjamlfbG9nJ10sIFsnb3BlcmFjamVfbG9nLmlkJ10sIG9uZGVsZXRlPSdTRVQgTlVMTCcsIG5hbWU9J3BhcnRpZV9wb3dpYXphbmlhX2liZmtfMycpLA0KICAgICAgICBGb3JlaWduS2V5Q29uc3RyYWludChbJ3BhcnRpYV9kb2NlbG93YV9pZCddLCBbJ3BhcnRpZV9zdXJvd2NhLmlkJ10sIG9uZGVsZXRlPSdDQVNDQURFJywgbmFtZT0ncGFydGllX3Bvd2lhemFuaWFfaWJma18yJyksDQogICAgICAgIEZvcmVpZ25LZXlDb25zdHJhaW50KFsncGFydGlhX3pyb2Rsb3dhX2lkJ10sIFsncGFydGllX3N1cm93Y2EuaWQnXSwgb25kZWxldGU9J0NBU0NBREUnLCBuYW1lPSdwYXJ0aWVfcG93aWF6YW5pYV9pYmZrXzEnKSwNCiAgICAgICAgSW5kZXgoJ2lkX29wZXJhY2ppX2xvZycsICdpZF9vcGVyYWNqaV9sb2cnKSwNCiAgICAgICAgSW5kZXgoJ2lkeF9wYXJ0aWFfZG9jZWxvd2EnLCAncGFydGlhX2RvY2Vsb3dhX2lkJyksDQogICAgICAgIEluZGV4KCdpZHhfcGFydGlhX3pyb2Rsb3dhJywgJ3BhcnRpYV96cm9kbG93YV9pZCcpLA0KICAgICAgICBJbmRleCgnaWR4X3R5cF9wb3dpYXphbmlhJywgJ3R5cF9wb3dpYXphbmlhJykNCiAgICApDQoNCiAgICBpZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgcGFydGlhX3pyb2Rsb3dhX2lkOiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICBwYXJ0aWFfZG9jZWxvd2FfaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyKQ0KICAgIHR5cF9wb3dpYXphbmlhOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgnRFpJRUxFTklFJywgJ0xBQ1pFTklFJywgJ1RSQU5TRk9STUFDSkEnKSkNCiAgICBwcm9jZW50X3VkemlhbHU6IE1hcHBlZFtPcHRpb25hbFtkZWNpbWFsLkRlY2ltYWxdXSA9IG1hcHBlZF9jb2x1bW4oREVDSU1BTCg1LCAyKSkNCiAgICBkYXRhX3Bvd2lhemFuaWE6IE1hcHBlZFtPcHRpb25hbFtkYXRldGltZS5kYXRldGltZV1dID0gbWFwcGVkX2NvbHVtbihUSU1FU1RBTVAsIHNlcnZlcl9kZWZhdWx0PXRleHQoJ0NVUlJFTlRfVElNRVNUQU1QJykpDQogICAgaWRfb3BlcmFjamlfbG9nOiBNYXBwZWRbT3B0aW9uYWxbaW50XV0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIpDQogICAgdXdhZ2k6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVGV4dCkNCg0KICAgIG9wZXJhY2plX2xvZzogTWFwcGVkW09wdGlvbmFsWydPcGVyYWNqZUxvZyddXSA9IHJlbGF0aW9uc2hpcCgnT3BlcmFjamVMb2cnLCBiYWNrX3BvcHVsYXRlcz0ncGFydGllX3Bvd2lhemFuaWEnKQ0KICAgIHBhcnRpYV9kb2NlbG93YTogTWFwcGVkWydQYXJ0aWVTdXJvd2NhJ10gPSByZWxhdGlvbnNoaXAoJ1BhcnRpZVN1cm93Y2EnLCBmb3JlaWduX2tleXM9W3BhcnRpYV9kb2NlbG93YV9pZF0sIGJhY2tfcG9wdWxhdGVzPSdwYXJ0aWVfcG93aWF6YW5pYScpDQogICAgcGFydGlhX3pyb2Rsb3dhOiBNYXBwZWRbJ1BhcnRpZVN1cm93Y2EnXSA9IHJlbGF0aW9uc2hpcCgnUGFydGllU3Vyb3djYScsIGZvcmVpZ25fa2V5cz1bcGFydGlhX3pyb2Rsb3dhX2lkXSwgYmFja19wb3B1bGF0ZXM9J3BhcnRpZV9wb3dpYXphbmlhXycpDQoNCg0KY2xhc3MgUHJvYmtpT2NlbmEoZGIuTW9kZWwpOg0KICAgIF9fdGFibGVuYW1lX18gPSAncHJvYmtpX29jZW5hJw0KICAgIF9fdGFibGVfYXJnc19fID0gKA0KICAgICAgICBGb3JlaWduS2V5Q29uc3RyYWludChbJ2lkX2N5a2x1X2ZpbHRyYWN5am5lZ28nXSwgWydjeWtsZV9maWx0cmFjeWpuZS5pZCddLCBvbmRlbGV0ZT0nQ0FTQ0FERScsIG5hbWU9J3Byb2JraV9vY2VuYV9pYmZrXzInKSwNCiAgICAgICAgRm9yZWlnbktleUNvbnN0cmFpbnQoWydpZF9wYXJ0aWknXSwgWydwYXJ0aWVfc3Vyb3djYS5pZCddLCBvbmRlbGV0ZT0nQ0FTQ0FERScsIG5hbWU9J3Byb2JraV9vY2VuYV9pYmZrXzEnKSwNCiAgICAgICAgSW5kZXgoJ2lkX2N5a2x1X2ZpbHRyYWN5am5lZ28nLCAnaWRfY3lrbHVfZmlsdHJhY3lqbmVnbycpLA0KICAgICAgICBJbmRleCgnaWR4X3BhcnRpYV9jemFzJywgJ2lkX3BhcnRpaScsICdjemFzX3BvYnJhbmlhJyksDQogICAgICAgIHsnY29tbWVudCc6ICdSZWplc3RyIHByw7NiZWsgaSBpY2ggb2NlbiBwb2RjemFzIHByb2Nlc3UgZmlsdHJhY2ppJ30NCiAgICApDQoNCiAgICBpZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgaWRfcGFydGlpOiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICBpZF9jeWtsdV9maWx0cmFjeWpuZWdvOiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlcikNCiAgICBjemFzX3BvYnJhbmlhOiBNYXBwZWRbZGF0ZXRpbWUuZGF0ZXRpbWVdID0gbWFwcGVkX2NvbHVtbihEYXRlVGltZSkNCiAgICBjemFzX29jZW55OiBNYXBwZWRbT3B0aW9uYWxbZGF0ZXRpbWUuZGF0ZXRpbWVdXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUpDQogICAgd3luaWtfb2Nlbnk6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgncG96eXR5d25hJywgJ25lZ2F0eXduYScsICdvY3pla3VqZScpLCBzZXJ2ZXJfZGVmYXVsdD10ZXh0KCInb2N6ZWt1amUnIikpDQogICAgb2NlbmFfa29sb3J1OiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFZBUkNIQVIoNTApKQ0KICAgIGRlY3l6amE6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgna29udHludXVqX2ZpbHRyYWNqZScsICd3eXNsaWpfZG9fbWFnYXp5bnUnLCAnZG9kYWpfemllbWllJykpDQogICAgb3BlcmF0b3Jfb2NlbmlhamFjeTogTWFwcGVkW09wdGlvbmFsW3N0cl1dID0gbWFwcGVkX2NvbHVtbihWQVJDSEFSKDEwMCkpDQogICAgdXdhZ2k6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVGV4dCkNCg0KICAgIGN5a2xlX2ZpbHRyYWN5am5lOiBNYXBwZWRbJ0N5a2xlRmlsdHJhY3lqbmUnXSA9IHJlbGF0aW9uc2hpcCgnQ3lrbGVGaWx0cmFjeWpuZScsIGJhY2tfcG9wdWxhdGVzPSdwcm9ia2lfb2NlbmEnKQ0KICAgIHBhcnRpZV9zdXJvd2NhOiBNYXBwZWRbJ1BhcnRpZVN1cm93Y2EnXSA9IHJlbGF0aW9uc2hpcCgnUGFydGllU3Vyb3djYScsIGJhY2tfcG9wdWxhdGVzPSdwcm9ia2lfb2NlbmEnKQ0KDQogICAgDQpjbGFzcyBCYXRjaGVzKGRiLk1vZGVsKToNCiAgICBfX3RhYmxlbmFtZV9fID0gJ2JhdGNoZXMnDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIHVuaXF1ZV9jb2RlOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oU3RyaW5nKDUwKSwgbnVsbGFibGU9RmFsc2UsIHVuaXF1ZT1UcnVlKQ0KICAgIG1hdGVyaWFsX3R5cGU6IE1hcHBlZFtzdHJdID0gbWFwcGVkX2NvbHVtbihTdHJpbmcoNTApLCBudWxsYWJsZT1GYWxzZSkNCiAgICBzb3VyY2VfdHlwZTogTWFwcGVkW3N0cl0gPSBtYXBwZWRfY29sdW1uKEVOVU0oJ0NZUycsICdBUE9MTE8nKSwgbnVsbGFibGU9RmFsc2UpDQogICAgc291cmNlX25hbWU6IE1hcHBlZFtzdHJdID0gbWFwcGVkX2NvbHVtbihTdHJpbmcoNTApLCBudWxsYWJsZT1GYWxzZSkNCiAgICBpbml0aWFsX3F1YW50aXR5OiBNYXBwZWRbT3B0aW9uYWxbZGVjaW1hbC5EZWNpbWFsXV0gPSBtYXBwZWRfY29sdW1uKERFQ0lNQUwoMTAsIDIpLCBudWxsYWJsZT1GYWxzZSkNCiAgICBjdXJyZW50X3F1YW50aXR5OiBNYXBwZWRbT3B0aW9uYWxbZGVjaW1hbC5EZWNpbWFsXV0gPSBtYXBwZWRfY29sdW1uKERFQ0lNQUwoMTAsIDIpLCBudWxsYWJsZT1GYWxzZSkNCiAgICBjcmVhdGlvbl9kYXRlOiBNYXBwZWRbZGF0ZXRpbWUuZGF0ZXRpbWVdID0gbWFwcGVkX2NvbHVtbihEYXRlVGltZSwgc2VydmVyX2RlZmF1bHQ9ZnVuYy5ub3coKSkNCiAgICBzdGF0dXM6IE1hcHBlZFtzdHJdID0gbWFwcGVkX2NvbHVtbihFTlVNKCdBQ1RJVkUnLCAnREVQTEVURUQnLCAnQVJDSElWRUQnKSwgZGVmYXVsdD0nQUNUSVZFJykNCg0KY2xhc3MgVGFua01peGVzKGRiLk1vZGVsKToNCiAgICBfX3RhYmxlbmFtZV9fID0gJ3RhbmtfbWl4ZXMnDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIHVuaXF1ZV9jb2RlOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oU3RyaW5nKDUwKSwgbnVsbGFibGU9RmFsc2UsIHVuaXF1ZT1UcnVlKQ0KICAgIHRhbmtfaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihGb3JlaWduS2V5KCdzcHJ6ZXQuaWQnKSwgbnVsbGFibGU9RmFsc2UpDQogICAgY3JlYXRpb25fZGF0ZTogTWFwcGVkW2RhdGV0aW1lXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUsIHNlcnZlcl9kZWZhdWx0PWZ1bmMubm93KCkpDQogICAgc3RhdHVzOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oRU5VTSgnQUNUSVZFJywgJ0FSQ0hJVkVEJyksIGRlZmF1bHQ9J0FDVElWRScpDQogICAgcHJvY2Vzc19zdGF0dXM6IE1hcHBlZFtzdHJdID0gbWFwcGVkX2NvbHVtbihTdHJpbmcoNTApLCBkZWZhdWx0PSdTVVJPV1knLCBudWxsYWJsZT1GYWxzZSwgY29tbWVudD0nSmF3bnkgc3RhdHVzIGV0YXB1IHByemV0d2FyemFuaWEgbWllc3phbmlueScpDQogICAgbWFpbl9jb21wb3NpdGlvbjogTWFwcGVkW09wdGlvbmFsW2RpY3RdXSA9IG1hcHBlZF9jb2x1bW4oSlNPTiwgY29tbWVudD0nU8WCb3duaWsgZ8WCw7N3bnljaCBza8WCYWRuaWvDs3cgeiBwcm9jZW50YW1pLCBucC4geyJUMTAiOiA5OS4wfScpDQogICAgd3lkbXVjaF9wZXJjZW50YWdlOiBNYXBwZWRbZGVjaW1hbC5EZWNpbWFsXSA9IG1hcHBlZF9jb2x1bW4oREVDSU1BTCg1LCAyKSwgZGVmYXVsdD1kZWNpbWFsLkRlY2ltYWwoJzAuMDAnKSwgbnVsbGFibGU9RmFsc2UpDQogICAgZmlsdGVyX3JlbWFpbnNfcGVyY2VudGFnZTogTWFwcGVkW2RlY2ltYWwuRGVjaW1hbF0gPSBtYXBwZWRfY29sdW1uKERFQ0lNQUwoNSwgMiksIGRlZmF1bHQ9ZGVjaW1hbC5EZWNpbWFsKCcwLjAwJyksIG51bGxhYmxlPUZhbHNlKQ0KICAgIGZpbHRyYXRpb25fY3ljbGVzX2NvdW50OiBNYXBwZWRbaW50XSA9IG1hcHBlZF9jb2x1bW4oSW50ZWdlciwgZGVmYXVsdD0wLCBudWxsYWJsZT1GYWxzZSkNCiAgICB3eWRtdWNoX2N5Y2xlc19jb3VudDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIGRlZmF1bHQ9MCwgbnVsbGFibGU9RmFsc2UpDQogICAgYmxlYWNoaW5nX2VhcnRoX2JhZ3NfdG90YWw6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBkZWZhdWx0PTAsIG51bGxhYmxlPUZhbHNlKQ0KICAgIHdoaXRlYm9hcmRfaWQ6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oU3RyaW5nKDEwKSwgY29tbWVudD0iSWRlbnR5ZmlrYXRvciB6IHdoaXRlYm9hcmR1LCBucC4gKEEpLCAoQikiKQ0KICAgIGlzX3d5ZG11Y2hfbWl4OiBNYXBwZWRbYm9vbF0gPSBtYXBwZWRfY29sdW1uKEJvb2xlYW4sIGRlZmF1bHQ9RmFsc2UsIG51bGxhYmxlPUZhbHNlLCBjb21tZW50PSdPem5hY3phLCBjenkgdGEgbWllc3phbmluYSBza8WCYWRhIHNpxJkgd3nFgsSFY3puaWUgeiB3eWRtdWNow7N3LicpDQogICAgIyBSZWxhY2phIGRvIHNwcnrEmXR1ICh6Ymlvcm5pa2EpDQogICAgdGFuazogTWFwcGVkWyJTcHJ6ZXQiXSA9IHJlbGF0aW9uc2hpcCgNCiAgICAgICAgYmFja19wb3B1bGF0ZXM9Im1peGVzIiwNCiAgICAgICAgZm9yZWlnbl9rZXlzPVt0YW5rX2lkXQ0KICAgICkNCiAgICAjIFJlbGFjamEgZG8gc2vFgmFkbmlrw7N3DQogICAgY29tcG9uZW50czogTWFwcGVkW0xpc3RbJ01peENvbXBvbmVudHMnXV0gPSByZWxhdGlvbnNoaXAoYmFja19wb3B1bGF0ZXM9J21peCcpDQoNCmNsYXNzIE1peENvbXBvbmVudHMoZGIuTW9kZWwpOg0KICAgIF9fdGFibGVuYW1lX18gPSAnbWl4X2NvbXBvbmVudHMnDQogICAgaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihJbnRlZ2VyLCBwcmltYXJ5X2tleT1UcnVlKQ0KICAgIG1peF9pZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEZvcmVpZ25LZXkoJ3RhbmtfbWl4ZXMuaWQnKSwgbnVsbGFibGU9RmFsc2UpDQogICAgYmF0Y2hfaWQ6IE1hcHBlZFtpbnRdID0gbWFwcGVkX2NvbHVtbihGb3JlaWduS2V5KCdiYXRjaGVzLmlkJyksIG51bGxhYmxlPUZhbHNlKQ0KICAgIHF1YW50aXR5X2luX21peDogTWFwcGVkW09wdGlvbmFsW2RlY2ltYWwuRGVjaW1hbF1dID0gbWFwcGVkX2NvbHVtbihERUNJTUFMKDEwLCAyKSwgbnVsbGFibGU9RmFsc2UpDQogICAgZGF0ZV9hZGRlZDogTWFwcGVkW2RhdGV0aW1lLmRhdGV0aW1lXSA9IG1hcHBlZF9jb2x1bW4oRGF0ZVRpbWUsIHNlcnZlcl9kZWZhdWx0PWZ1bmMubm93KCkpDQogICAgDQoNCg0KICAgICMgUmVsYWNqZQ0KICAgIG1peDogTWFwcGVkWydUYW5rTWl4ZXMnXSA9IHJlbGF0aW9uc2hpcChiYWNrX3BvcHVsYXRlcz0nY29tcG9uZW50cycpDQogICAgYmF0Y2g6IE1hcHBlZFsnQmF0Y2hlcyddID0gcmVsYXRpb25zaGlwKCkgIyBQcm9zdGEgcmVsYWNqYSBqZWRub2tpZXJ1bmtvd2ENCg0KY2xhc3MgQXVkaXRUcmFpbChkYi5Nb2RlbCk6DQogICAgX190YWJsZW5hbWVfXyA9ICdhdWRpdF90cmFpbCcNCiAgICBpZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIHByaW1hcnlfa2V5PVRydWUpDQogICAgdGltZXN0YW1wOiBNYXBwZWRbZGF0ZXRpbWVdID0gbWFwcGVkX2NvbHVtbihEYXRlVGltZSwgc2VydmVyX2RlZmF1bHQ9ZnVuYy5ub3coKSkNCiAgICB1c2VyX2lkOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oU3RyaW5nKDEwMCksIG51bGxhYmxlPUZhbHNlKQ0KICAgIA0KICAgIGVudGl0eV90eXBlOiBNYXBwZWRbc3RyXSA9IG1hcHBlZF9jb2x1bW4oU3RyaW5nKDUwKSwgbnVsbGFibGU9RmFsc2UsIGNvbW1lbnQ9J05wLiBCYXRjaGVzLCBUYW5rTWl4ZXMnKQ0KICAgIGVudGl0eV9pZDogTWFwcGVkW2ludF0gPSBtYXBwZWRfY29sdW1uKEludGVnZXIsIG51bGxhYmxlPUZhbHNlKQ0KICAgIA0KICAgIGZpZWxkX25hbWU6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oU3RyaW5nKDUwKSkNCiAgICBvbGRfdmFsdWU6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVGV4dCkNCiAgICBuZXdfdmFsdWU6IE1hcHBlZFtPcHRpb25hbFtzdHJdXSA9IG1hcHBlZF9jb2x1bW4oVGV4dCkNCiAgICANCiAgICBvcGVyYXRpb25fdHlwZTogTWFwcGVkW3N0cl0gPSBtYXBwZWRfY29sdW1uKFN0cmluZyg1MCksIG51bGxhYmxlPUZhbHNlLCBjb21tZW50PSdOcC4gQ1JFQVRFLCBVUERBVEUsIERFTEVURSwgQ09SUkVDVElPTicpDQogICAgcmVhc29uOiBNYXBwZWRbT3B0aW9uYWxbc3RyXV0gPSBtYXBwZWRfY29sdW1uKFRleHQpDQoNCg==
  - path: app//monitoring.py
    content: IyBhcHAvbW9uaXRvcmluZy5weQ0KDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZXpvbmUNCmZyb20gLmV4dGVuc2lvbnMgaW1wb3J0IGRiDQpmcm9tIC5tb2RlbHMgaW1wb3J0IFNwcnpldCwgQWxhcm15DQoNCmNsYXNzIE1vbml0b3JpbmdTZXJ2aWNlOg0KICAgIA0KICAgIGRlZiBpbml0X2FwcChzZWxmLCBhcHApOg0KICAgICAgICBzZWxmLmFwcCA9IGFwcA0KDQogICAgZGVmIGNoZWNrX2VxdWlwbWVudF9zdGF0dXMoc2VsZik6DQogICAgICAgICIiIg0KICAgICAgICBTcHJhd2R6YSBzdGFuIHdzenlzdGtpY2ggdXJ6xIVkemXFhCAod2Vyc2phIE9STSkuIFR3b3J6eSBpIHphbXlrYSBhbGFybXkuDQogICAgICAgICIiIg0KICAgICAgICB0cnk6DQogICAgICAgICAgICAjIDEuIFBvYmllcnogc3RhbiB3c3p5c3RraWNoIHVyesSFZHplxYQNCiAgICAgICAgICAgIGFsbF9lcXVpcG1lbnQgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoZGIuc2VsZWN0KFNwcnpldCkpLnNjYWxhcnMoKS5hbGwoKQ0KDQogICAgICAgICAgICAjIDIuIFBvYmllcnogd3N6eXN0a2llIEFLVFlXTkUgYWxhcm15DQogICAgICAgICAgICBhY3RpdmVfYWxhcm1zX3EgPSBkYi5zZWxlY3QoQWxhcm15KS53aGVyZShBbGFybXkuc3RhdHVzX2FsYXJtdSA9PSAnQUtUWVdOWScpDQogICAgICAgICAgICBhY3RpdmVfYWxhcm1zX3JhdyA9IGRiLnNlc3Npb24uZXhlY3V0ZShhY3RpdmVfYWxhcm1zX3EpLnNjYWxhcnMoKS5hbGwoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIFN0d8Ozcnogc8WCb3duaWsgZGxhIHN6eWJraWNoIHNwcmF3ZHplxYQ6IChuYXp3YV9zcHJ6xJl0dSwgdHlwX2FsYXJtdSkgLT4gb2JpZWt0IEFsYXJtDQogICAgICAgICAgICBhY3RpdmVfYWxhcm1zID0geyhhLm5hendhX3NwcnpldHUsIGEudHlwX2FsYXJtdSk6IGEgZm9yIGEgaW4gYWN0aXZlX2FsYXJtc19yYXd9DQoNCiAgICAgICAgICAgICMgMy4gUHJ6ZWpkxbogcHJ6ZXoga2HFvGRlIHVyesSFZHplbmllIGkgendlcnlmaWt1aiBqZWdvIHN0YW4NCiAgICAgICAgICAgIGZvciBpdGVtIGluIGFsbF9lcXVpcG1lbnQ6DQogICAgICAgICAgICAgICAgbmF6d2Ffc3ByemV0dSA9IGl0ZW0ubmF6d2FfdW5pa2FsbmENCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAjIC0tLSBTcHJhd2R6YW5pZSB0ZW1wZXJhdHVyeSAtLS0NCiAgICAgICAgICAgICAgICAjIFXFvHl3YW15IHRlcmF6IGRvc3TEmXB1IHByemV6IGF0cnlidXQgKGtyb3BrxJkpDQogICAgICAgICAgICAgICAgYWt0dWFsbmFfdGVtcCA9IGl0ZW0udGVtcGVyYXR1cmFfYWt0dWFsbmENCiAgICAgICAgICAgICAgICBtYXhfdGVtcCA9IGl0ZW0udGVtcGVyYXR1cmFfbWF4DQogICAgICAgICAgICAgICAgaXNfdGVtcF9hbGFybSA9IChuYXp3YV9zcHJ6ZXR1LCAnVEVNUEVSQVRVUkEnKSBpbiBhY3RpdmVfYWxhcm1zDQoNCiAgICAgICAgICAgICAgICBpZiBha3R1YWxuYV90ZW1wIGlzIG5vdCBOb25lIGFuZCBtYXhfdGVtcCBpcyBub3QgTm9uZToNCiAgICAgICAgICAgICAgICAgICAgaWYgYWt0dWFsbmFfdGVtcCA+IG1heF90ZW1wOg0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IGlzX3RlbXBfYWxhcm06DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY3JlYXRlX2FsYXJtKCdURU1QRVJBVFVSQScsIG5hendhX3NwcnpldHUsIGFrdHVhbG5hX3RlbXAsIG1heF90ZW1wKQ0KICAgICAgICAgICAgICAgICAgICBlbGlmIGlzX3RlbXBfYWxhcm06DQogICAgICAgICAgICAgICAgICAgICAgICBhbGFybV90b19yZXNvbHZlID0gYWN0aXZlX2FsYXJtc1sobmF6d2Ffc3ByemV0dSwgJ1RFTVBFUkFUVVJBJyldDQogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9yZXNvbHZlX2FsYXJtKGFsYXJtX3RvX3Jlc29sdmUpDQoNCiAgICAgICAgICAgICAgICAjIC0tLSBTcHJhd2R6YW5pZSBjacWbbmllbmlhIC0tLQ0KICAgICAgICAgICAgICAgIGFrdHVhbG5lX2Npc25pZW5pZSA9IGl0ZW0uY2lzbmllbmllX2FrdHVhbG5lDQogICAgICAgICAgICAgICAgbWF4X2Npc25pZW5pZSA9IGl0ZW0uY2lzbmllbmllX21heA0KICAgICAgICAgICAgICAgIGlzX3ByZXNzdXJlX2FsYXJtID0gKG5hendhX3NwcnpldHUsICdDSVNOSUVOSUUnKSBpbiBhY3RpdmVfYWxhcm1zDQoNCiAgICAgICAgICAgICAgICBpZiBha3R1YWxuZV9jaXNuaWVuaWUgaXMgbm90IE5vbmUgYW5kIG1heF9jaXNuaWVuaWUgaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgICAgIGlmIGFrdHVhbG5lX2Npc25pZW5pZSA+IG1heF9jaXNuaWVuaWU6DQogICAgICAgICAgICAgICAgICAgICAgICBpZiBub3QgaXNfcHJlc3N1cmVfYWxhcm06DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fY3JlYXRlX2FsYXJtKCdDSVNOSUVOSUUnLCBuYXp3YV9zcHJ6ZXR1LCBha3R1YWxuZV9jaXNuaWVuaWUsIG1heF9jaXNuaWVuaWUpDQogICAgICAgICAgICAgICAgICAgIGVsaWYgaXNfcHJlc3N1cmVfYWxhcm06DQogICAgICAgICAgICAgICAgICAgICAgICBhbGFybV90b19yZXNvbHZlID0gYWN0aXZlX2FsYXJtc1sobmF6d2Ffc3ByemV0dSwgJ0NJU05JRU5JRScpXQ0KICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fcmVzb2x2ZV9hbGFybShhbGFybV90b19yZXNvbHZlKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpDQoNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpDQogICAgICAgICAgICBwcmludChmIkLFgcSERCBwb2RjemFzIHNwcmF3ZHphbmlhIGFsYXJtw7N3OiB7ZX0iKQ0KICAgICAgICAgICAgcmFpc2UNCg0KDQogICAgZGVmIF9jcmVhdGVfYWxhcm0oc2VsZiwgdHlwX2FsYXJtdSwgbmF6d2Ffc3ByemV0dSwgd2FydG9zYywgbGltaXQpOg0KICAgICAgICAiIiJQcnl3YXRuYSBtZXRvZGEgZG8gdHdvcnplbmlhIG5vd2VnbyBhbGFybXUgdyBiYXppZSBkYW55Y2ggKHdlcnNqYSBPUk0pLiIiIg0KICAgICAgICBub3d5X2FsYXJtID0gQWxhcm15KA0KICAgICAgICAgICAgdHlwX2FsYXJtdT10eXBfYWxhcm11LA0KICAgICAgICAgICAgbmF6d2Ffc3ByemV0dT1uYXp3YV9zcHJ6ZXR1LA0KICAgICAgICAgICAgd2FydG9zYz13YXJ0b3NjLA0KICAgICAgICAgICAgbGltaXRfcHJ6ZWtyb2N6ZW5pYT1saW1pdCwNCiAgICAgICAgICAgIGN6YXNfd3lzdGFwaWVuaWE9ZGF0ZXRpbWUubm93KHRpbWV6b25lLnV0YyksDQogICAgICAgICAgICBzdGF0dXNfYWxhcm11PSdBS1RZV05ZJw0KICAgICAgICApDQogICAgICAgIGRiLnNlc3Npb24uYWRkKG5vd3lfYWxhcm0pDQoNCiAgICBkZWYgX3Jlc29sdmVfYWxhcm0oc2VsZiwgYWxhcm1fb2JqKToNCiAgICAgICAgIiIiUHJ5d2F0bmEgbWV0b2RhIGRvIHphbXlrYW5pYSBpc3RuaWVqxIVjZWdvIGFsYXJtdSAod2Vyc2phIE9STSkuIiIiDQogICAgICAgIGFsYXJtX29iai5zdGF0dXNfYWxhcm11ID0gJ1pBS09OQ1pPTlknDQogICAgICAgIGFsYXJtX29iai5jemFzX3pha29uY3plbmlhID0gZGF0ZXRpbWUubm93KHRpbWV6b25lLnV0Yyk=
  - path: app//operations_routes.py
    content: IyBhcHAvb3BlcmF0aW9uc19yb3V0ZXMucHkNCmZyb20gZmxhc2sgaW1wb3J0IEJsdWVwcmludCwganNvbmlmeSwgcmVxdWVzdCwgY3VycmVudF9hcHANCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lIGFzIGR0DQpmcm9tIGRhdGV0aW1lIGltcG9ydCB0aW1lem9uZQ0KaW1wb3J0IG15c3FsLmNvbm5lY3Rvcg0KZnJvbSAuZGIgaW1wb3J0IGdldF9kYl9jb25uZWN0aW9uDQpmcm9tIC5wYXRoZmluZGVyX3NlcnZpY2UgaW1wb3J0IFBhdGhGaW5kZXINCmZyb20gLmFwb2xsb19zZXJ2aWNlIGltcG9ydCBBcG9sbG9TZXJ2aWNlDQppbXBvcnQgdHJhY2ViYWNrDQpmcm9tIGRlY2ltYWwgaW1wb3J0IERlY2ltYWwNCmZyb20gLmJhdGNoX21hbmFnZW1lbnRfc2VydmljZSBpbXBvcnQgQmF0Y2hNYW5hZ2VtZW50U2VydmljZQ0KDQpmcm9tIC5leHRlbnNpb25zIGltcG9ydCBkYg0KZnJvbSAubW9kZWxzIGltcG9ydCAqICNTcHJ6ZXQsIFBhcnRpZVN1cm93Y2EsIFBvcnR5U3ByemV0dSwgU2VnbWVudHksIFphd29yeSwgT3BlcmFjamVMb2csIHRfbG9nX3V6eXRlX3NlZ21lbnR5DQpmcm9tIGFwcC5zb2NrZXRzIGltcG9ydCBicm9hZGNhc3RfYXBvbGxvX3VwZGF0ZSwgYnJvYWRjYXN0X2Rhc2hib2FyZF91cGRhdGUNCg0KIyBVdHdvcnplbmllIG5vd2VnbyBCbHVlcHJpbnR1IGRsYSBvcGVyYWNqaQ0KYnAgPSBCbHVlcHJpbnQoJ29wZXJhdGlvbnMnLCBfX25hbWVfXywgdXJsX3ByZWZpeD0nL2FwaS9vcGVyYXRpb25zJykNCg0KZGVmIGdldF9wYXRoZmluZGVyKCk6DQogICAgIiIiUG9iaWVyYSBpbnN0YW5jasSZIHNlcndpc3UgUGF0aEZpbmRlciB6IGtvbnRla3N0dSBhcGxpa2FjamkuIiIiDQogICAgcHJpbnQoZiJERUJVRzogZ2V0X3BhdGhmaW5kZXIoKSBjYWxsZWQiKQ0KICAgIHByaW50KGYiREVCVUc6IGN1cnJlbnRfYXBwLmV4dGVuc2lvbnMga2V5czoge2xpc3QoY3VycmVudF9hcHAuZXh0ZW5zaW9ucy5rZXlzKCkpfSIpDQogICAgDQogICAgaWYgJ3BhdGhmaW5kZXInIG5vdCBpbiBjdXJyZW50X2FwcC5leHRlbnNpb25zOg0KICAgICAgICBwcmludChmIkVSUk9SOiAncGF0aGZpbmRlcicgbm90IGZvdW5kIGluIGN1cnJlbnRfYXBwLmV4dGVuc2lvbnMiKQ0KICAgICAgICBwcmludChmIkF2YWlsYWJsZSBleHRlbnNpb25zOiB7bGlzdChjdXJyZW50X2FwcC5leHRlbnNpb25zLmtleXMoKSl9IikNCiAgICAgICAgcmFpc2UgS2V5RXJyb3IoIidwYXRoZmluZGVyJyBub3QgZm91bmQgaW4gY3VycmVudF9hcHAuZXh0ZW5zaW9ucyIpDQogICAgDQogICAgcGF0aGZpbmRlciA9IGN1cnJlbnRfYXBwLmV4dGVuc2lvbnNbJ3BhdGhmaW5kZXInXQ0KICAgIHByaW50KGYiREVCVUc6IHBhdGhmaW5kZXIgcmV0cmlldmVkOiB7dHlwZShwYXRoZmluZGVyKX0iKQ0KICAgIHJldHVybiBwYXRoZmluZGVyDQoNCiMgRW5kcG9pbnQgZG8gdHdvcnplbmlhIG5vd2VqIHBhcnRpaSBwcnpleiB0YW5rb3dhbmllDQoNCg0KDQpAYnAucm91dGUoJy9yb3pwb2N6bmlqX3RyYXNlJywgbWV0aG9kcz1bJ1BPU1QnXSkNCmRlZiByb3pwb2N6bmlqX3RyYXNlKCk6DQogICAgZGFuZSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIGlmIG5vdCBkYW5lIG9yIG5vdCBhbGwoayBpbiBkYW5lIGZvciBrIGluIFsnc3RhcnQnLCAnY2VsJywgJ290d2FydGVfemF3b3J5JywgJ3R5cF9vcGVyYWNqaSddKToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeyJzdGF0dXMiOiAiZXJyb3IiLCAibWVzc2FnZSI6ICJCcmFrIHd5bWFnYW55Y2ggcMOzbDogc3RhcnQsIGNlbCwgb3R3YXJ0ZV96YXdvcnksIHR5cF9vcGVyYWNqaS4ifSksIDQwMA0KDQogICAgc3RhcnRfcG9pbnQgPSBkYW5lWydzdGFydCddDQogICAgZW5kX3BvaW50ID0gZGFuZVsnY2VsJ10NCiAgICBvcGVuX3ZhbHZlc19saXN0ID0gZGFuZVsnb3R3YXJ0ZV96YXdvcnknXQ0KICAgIHR5cF9vcGVyYWNqaSA9IGRhbmVbJ3R5cF9vcGVyYWNqaSddDQogICAgc3ByemV0X3Bvc3JlZG5pID0gZGFuZS5nZXQoJ3NwcnpldF9wb3NyZWRuaScpDQogICAgDQogICAgcGF0aGZpbmRlciA9IGdldF9wYXRoZmluZGVyKCkNCiAgICB6bmFsZXppb25hX3NjaWV6a2FfbmF6d3kgPSBbXQ0KDQogICAgIyAtLS0gTG9naWthIFBhdGhGaW5kZXIgKHRlcmF6IGtvbXBsZXRuYSkgLS0tDQogICAgaWYgc3ByemV0X3Bvc3JlZG5pOg0KICAgICAgICAjIEplxZtsaSBqZXN0IHNwcnrEmXQgcG/Fm3JlZG5pIChucC4gZmlsdHIpLCBzenVrYW15IHRyYXN5IHcgZHfDs2NoIGN6xJnFm2NpYWNoLg0KICAgICAgICBwb3NyZWRuaV9pbiA9IGYie3NwcnpldF9wb3NyZWRuaX1fSU4iDQogICAgICAgIHBvc3JlZG5pX291dCA9IGYie3NwcnpldF9wb3NyZWRuaX1fT1VUIg0KDQogICAgICAgIHNjaWV6a2FfMSA9IHBhdGhmaW5kZXIuZmluZF9wYXRoKHN0YXJ0X3BvaW50LCBwb3NyZWRuaV9pbiwgb3Blbl92YWx2ZXNfbGlzdCkNCiAgICAgICAgaWYgbm90IHNjaWV6a2FfMToNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsic3RhdHVzIjogImVycm9yIiwgIm1lc3NhZ2UiOiBmIk5pZSB6bmFsZXppb25vIMWbY2llxbxraSB6IHtzdGFydF9wb2ludH0gZG8ge3Bvc3JlZG5pX2lufS4ifSksIDQwNA0KICAgICAgICANCiAgICAgICAgc2NpZXprYV93ZXduZXRyem5hID0gcGF0aGZpbmRlci5maW5kX3BhdGgocG9zcmVkbmlfaW4sIHBvc3JlZG5pX291dCwgb3Blbl92YWx2ZXNfbGlzdCkNCiAgICAgICAgaWYgbm90IHNjaWV6a2Ffd2V3bmV0cnpuYToNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsic3RhdHVzIjogImVycm9yIiwgIm1lc3NhZ2UiOiBmIk5pZSB6bmFsZXppb25vIMWbY2llxbxraSB3ZXduxJl0cnpuZWogdyB7c3ByemV0X3Bvc3JlZG5pfSAoeiB7cG9zcmVkbmlfaW59IGRvIHtwb3NyZWRuaV9vdXR9KS4ifSksIDQwNA0KDQogICAgICAgIHNjaWV6a2FfMiA9IHBhdGhmaW5kZXIuZmluZF9wYXRoKHBvc3JlZG5pX291dCwgZW5kX3BvaW50LCBvcGVuX3ZhbHZlc19saXN0KQ0KICAgICAgICBpZiBub3Qgc2NpZXprYV8yOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeyJzdGF0dXMiOiAiZXJyb3IiLCAibWVzc2FnZSI6IGYiTmllIHpuYWxlemlvbm8gxZtjaWXFvGtpIHoge3Bvc3JlZG5pX291dH0gZG8ge2VuZF9wb2ludH0uIn0pLCA0MDQNCg0KICAgICAgICB6bmFsZXppb25hX3NjaWV6a2FfbmF6d3kgPSBzY2llemthXzEgKyBzY2llemthX3dld25ldHJ6bmEgKyBzY2llemthXzINCiAgICBlbHNlOg0KICAgICAgICAjIEplxZtsaSBuaWUgbWEgcHVua3R1IHBvxZtyZWRuaWVnbywgc3p1a2FteSBqZWRuZWosIGNpxIVnxYJlaiDFm2NpZcW8a2kuDQogICAgICAgIHpuYWxlemlvbmFfc2NpZXprYV9uYXp3eSA9IHBhdGhmaW5kZXIuZmluZF9wYXRoKHN0YXJ0X3BvaW50LCBlbmRfcG9pbnQsIG9wZW5fdmFsdmVzX2xpc3QpDQoNCiAgICBpZiBub3Qgem5hbGV6aW9uYV9zY2llemthX25hend5Og0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAic3RhdHVzIjogImVycm9yIiwNCiAgICAgICAgICAgICJtZXNzYWdlIjogZiJOaWUgem5hbGV6aW9ubyBrb21wbGV0bmVqIMWbY2llxbxraSB6IHtzdGFydF9wb2ludH0gZG8ge2VuZF9wb2ludH0uIg0KICAgICAgICB9KSwgNDA0DQoNCiAgICAjIC0tLSBMb2dpa2EgaW50ZXJha2NqaSB6IGJhesSFIGRhbnljaCAoV0VSU0pBIE9STSkgLS0tDQogICAgdHJ5Og0KICAgICAgICAjIEtyb2sgMTogWm5hamTFuiBwYXJ0acSZIHcgcmVha3RvcnplIHN0YXJ0b3d5bQ0KICAgICAgICBwYXJ0aWFfcXVlcnkgPSBkYi5zZWxlY3QoUGFydGllU3Vyb3djYSkuam9pbihQYXJ0aWVTdXJvd2NhLnNwcnpldCkuam9pbihTcHJ6ZXQucG9ydHlfc3ByemV0dSkud2hlcmUoUG9ydHlTcHJ6ZXR1Lm5hendhX3BvcnR1ID09IHN0YXJ0X3BvaW50KQ0KICAgICAgICBwYXJ0aWEgPSBkYi5zZXNzaW9uLmV4ZWN1dGUocGFydGlhX3F1ZXJ5KS5zY2FsYXJfb25lX29yX25vbmUoKQ0KDQogICAgICAgIGlmIG5vdCBwYXJ0aWE6DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7InN0YXR1cyI6ICJlcnJvciIsICJtZXNzYWdlIjogZiJXIHVyesSFZHplbml1IHN0YXJ0b3d5bSAoe3N0YXJ0X3BvaW50fSkgbmllIHpuYWxlemlvbm8gxbxhZG5laiBwYXJ0aWkuIn0pLCA0MDQNCiAgICAgICAgDQogICAgICAgICMgS3JvayAyOiBTcHJhd2TFuiBrb25mbGlrdHkNCiAgICAgICAga29uZmxpa3RfcXVlcnkgPSBkYi5zZWxlY3QoU2VnbWVudHkubmF6d2Ffc2VnbWVudHUpLmpvaW4oU2VnbWVudHkub3BlcmFjamVfbG9nKS53aGVyZSgNCiAgICAgICAgICAgIE9wZXJhY2plTG9nLnN0YXR1c19vcGVyYWNqaSA9PSAnYWt0eXduYScsDQogICAgICAgICAgICBTZWdtZW50eS5uYXp3YV9zZWdtZW50dS5pbl8oem5hbGV6aW9uYV9zY2llemthX25hend5KQ0KICAgICAgICApDQogICAgICAgIGtvbmZsaWt0eSA9IGRiLnNlc3Npb24uZXhlY3V0ZShrb25mbGlrdF9xdWVyeSkuc2NhbGFycygpLmFsbCgpDQoNCiAgICAgICAgaWYga29uZmxpa3R5Og0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgICAgICJzdGF0dXMiOiAiZXJyb3IiLCAibWVzc2FnZSI6ICJLb25mbGlrdCB6YXNvYsOzdy4iLA0KICAgICAgICAgICAgICAgICJ6YWpldGVfc2VnbWVudHkiOiBrb25mbGlrdHkNCiAgICAgICAgICAgIH0pLCA0MDkNCg0KICAgICAgICAjIEtyb2sgMzogVXJ1Y2hvbWllbmllIG9wZXJhY2ppIHcgamVkbmVqIHRyYW5zYWtjamkNCiAgICAgICAgZGIuc2Vzc2lvbi5leGVjdXRlKA0KICAgICAgICAgICAgZGIudXBkYXRlKFphd29yeSkNCiAgICAgICAgICAgIC53aGVyZShaYXdvcnkubmF6d2FfemF3b3J1LmluXyhvcGVuX3ZhbHZlc19saXN0KSkNCiAgICAgICAgICAgIC52YWx1ZXMoc3Rhbj0nT1RXQVJUWScpDQogICAgICAgICkNCg0KICAgICAgICBvcGlzX29wZXJhY2ppID0gZiJPcGVyYWNqYSB7dHlwX29wZXJhY2ppfSB6IHtzdGFydF9wb2ludH0gZG8ge2VuZF9wb2ludH0iDQogICAgICAgIG5vd2Ffb3BlcmFjamEgPSBPcGVyYWNqZUxvZygNCiAgICAgICAgICAgIHR5cF9vcGVyYWNqaT10eXBfb3BlcmFjamksDQogICAgICAgICAgICBpZF9wYXJ0aWlfc3Vyb3djYT1wYXJ0aWEuaWQsDQogICAgICAgICAgICBzdGF0dXNfb3BlcmFjamk9J2FrdHl3bmEnLA0KICAgICAgICAgICAgY3phc19yb3pwb2N6ZWNpYT1kdC5ub3codGltZXpvbmUudXRjKSwNCiAgICAgICAgICAgIG9waXM9b3Bpc19vcGVyYWNqaSwNCiAgICAgICAgICAgIHB1bmt0X3N0YXJ0b3d5PXN0YXJ0X3BvaW50LA0KICAgICAgICAgICAgcHVua3RfZG9jZWxvd3k9ZW5kX3BvaW50DQogICAgICAgICkNCiAgICAgICAgZGIuc2Vzc2lvbi5hZGQobm93YV9vcGVyYWNqYSkNCg0KICAgICAgICBzZWdtZW50eV90cmFzeV9xdWVyeSA9IGRiLnNlbGVjdChTZWdtZW50eSkud2hlcmUoU2VnbWVudHkubmF6d2Ffc2VnbWVudHUuaW5fKHpuYWxlemlvbmFfc2NpZXprYV9uYXp3eSkpDQogICAgICAgIHNlZ21lbnR5X3RyYXN5ID0gZGIuc2Vzc2lvbi5leGVjdXRlKHNlZ21lbnR5X3RyYXN5X3F1ZXJ5KS5zY2FsYXJzKCkuYWxsKCkNCiAgICAgICAgDQogICAgICAgIG5vd2Ffb3BlcmFjamEuc2VnbWVudHkgPSBzZWdtZW50eV90cmFzeQ0KDQogICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCiAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICJzdGF0dXMiOiAic3VjY2VzcyIsDQogICAgICAgICAgICAibWVzc2FnZSI6ICJPcGVyYWNqYSB6b3N0YcWCYSBwb215xZtsbmllIHJvenBvY3rEmXRhLiIsDQogICAgICAgICAgICAiaWRfb3BlcmFjamkiOiBub3dhX29wZXJhY2phLmlkLA0KICAgICAgICAgICAgInRyYXNhIjogew0KICAgICAgICAgICAgICAgICJzdGFydCI6IHN0YXJ0X3BvaW50LA0KICAgICAgICAgICAgICAgICJjZWwiOiBlbmRfcG9pbnQsDQogICAgICAgICAgICAgICAgInV6eXRlX3NlZ21lbnR5Ijogem5hbGV6aW9uYV9zY2llemthX25hend5DQogICAgICAgICAgICB9DQogICAgICAgIH0pLCAyMDENCg0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpDQogICAgICAgIGltcG9ydCB0cmFjZWJhY2sNCiAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsic3RhdHVzIjogImVycm9yIiwgIm1lc3NhZ2UiOiBmIkLFgsSFZCB3ZXduxJl0cnpueSBzZXJ3ZXJhOiB7c3RyKGUpfSJ9KSwgNTAwDQoNCg0KQGJwLnJvdXRlKCcvemFrb25jeicsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYgemFrb25jel9vcGVyYWNqZSgpOg0KICAgIGRhbmUgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICBpZiBub3QgZGFuZSBvciAnaWRfb3BlcmFjamknIG5vdCBpbiBkYW5lOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7InN0YXR1cyI6ICJlcnJvciIsICJtZXNzYWdlIjogIkJyYWsgd3ltYWdhbmVnbyBwb2xhOiBpZF9vcGVyYWNqaS4ifSksIDQwMA0KDQogICAgaWRfb3BlcmFjamkgPSBkYW5lWydpZF9vcGVyYWNqaSddDQogICAgdHJ5Og0KICAgICAgICAjIEtyb2sgMTogWm5hamTFuiBvcGVyYWNqxJkgdyBiYXppZSB6YSBwb21vY8SFIFNRTEFsY2hlbXkNCiAgICAgICAgb3BlcmFjamEgPSBkYi5zZXNzaW9uLmdldChPcGVyYWNqZUxvZywgaWRfb3BlcmFjamkpDQoNCiAgICAgICAgaWYgbm90IG9wZXJhY2phOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeyJzdGF0dXMiOiAiZXJyb3IiLCAibWVzc2FnZSI6IGYiT3BlcmFjamEgbyBJRCB7aWRfb3BlcmFjaml9IG5pZSBpc3RuaWVqZS4ifSksIDQwNA0KICAgICAgICBpZiBvcGVyYWNqYS5zdGF0dXNfb3BlcmFjamkgIT0gJ2FrdHl3bmEnOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgICAgICJzdGF0dXMiOiAiZXJyb3IiLCANCiAgICAgICAgICAgICAgICAibWVzc2FnZSI6IGYiTmllIG1vxbxuYSB6YWtvxYRjennEhyBvcGVyYWNqaSwga3TDs3JhIG5pZSBqZXN0IGFrdHl3bmEgKHN0YXR1czoge29wZXJhY2phLnN0YXR1c19vcGVyYWNqaX0pLiINCiAgICAgICAgICAgIH0pLCA0MDkNCg0KICAgICAgICAjIEtyb2sgMjogWm1pZcWEIHN0YXR1cyBvcGVyYWNqaQ0KICAgICAgICBvcGVyYWNqYS5zdGF0dXNfb3BlcmFjamkgPSAnemFrb25jem9uYScNCiAgICAgICAgb3BlcmFjamEuY3phc196YWtvbmN6ZW5pYSA9IGR0Lm5vdyh0aW1lem9uZS51dGMpICMgVcW8eXdhbXkgYWxpYXN1IGBkdGANCg0KICAgICAgICAjIEtyb2sgMzogWm5hamTFuiBpIHphbWtuaWogemF3b3J5IChrb3J6eXN0YWrEhWMgeiByZWxhY2ppKQ0KICAgICAgICB6YXdvcnlfZG9femFta25pZWNpYV9uYXp3eSA9IFtdDQogICAgICAgIGlmIG9wZXJhY2phLnNlZ21lbnR5Og0KICAgICAgICAgICAgemF3b3J5X2RvX3phbWtuaWVjaWFfbmF6d3kgPSBbc2VnbWVudC56YXdvcnkubmF6d2FfemF3b3J1IGZvciBzZWdtZW50IGluIG9wZXJhY2phLnNlZ21lbnR5IGlmIHNlZ21lbnQuemF3b3J5XQ0KICAgICAgICAgICAgZm9yIHNlZ21lbnQgaW4gb3BlcmFjamEuc2VnbWVudHk6DQogICAgICAgICAgICAgICAgaWYgc2VnbWVudC56YXdvcnk6DQogICAgICAgICAgICAgICAgICAgIHNlZ21lbnQuemF3b3J5LnN0YW4gPSAnWkFNS05JRVRZJw0KICAgICAgICANCiAgICAgICAgIyBLcm9rIDQ6IEFrdHVhbGl6YWNqYSBsb2thbGl6YWNqaSBwYXJ0aWkgaSBzdGFudSBzcHJ6xJl0dQ0KICAgICAgICBpZiBvcGVyYWNqYS5wYXJ0aWVfc3Vyb3djYSBhbmQgb3BlcmFjamEuaWRfc3ByemV0dV96cm9kbG93ZWdvIGFuZCBvcGVyYWNqYS5pZF9zcHJ6ZXR1X2RvY2Vsb3dlZ28gYW5kIG9wZXJhY2phLmlkX3NwcnpldHVfenJvZGxvd2VnbyAhPSBvcGVyYWNqYS5pZF9zcHJ6ZXR1X2RvY2Vsb3dlZ286DQogICAgICAgICAgICBzcHJ6ZXRfZG9jZWxvd3kgPSBvcGVyYWNqYS5zcHJ6ZXRfZG9jZWxvd3kNCiAgICAgICAgICAgIHNwcnpldF96cm9kbG93eSA9IG9wZXJhY2phLnNwcnpldF96cm9kbG93eQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiBzcHJ6ZXRfZG9jZWxvd3kgYW5kIHNwcnpldF96cm9kbG93eToNCiAgICAgICAgICAgICAgICBvcGVyYWNqYS5wYXJ0aWVfc3Vyb3djYS5pZF9zcHJ6ZXR1ID0gc3ByemV0X2RvY2Vsb3d5LmlkDQogICAgICAgICAgICAgICAgc3ByemV0X2RvY2Vsb3d5LnN0YW5fc3ByemV0dSA9ICdaYXRhbmtvd2FueScNCiAgICAgICAgICAgICAgICBzcHJ6ZXRfenJvZGxvd3kuc3Rhbl9zcHJ6ZXR1ID0gJ1B1c3R5Jw0KDQogICAgICAgICMgS3JvayA1OiBaYXR3aWVyZMW6IHRyYW5zYWtjasSZDQogICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAic3RhdHVzIjogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgIm1lc3NhZ2UiOiBmIk9wZXJhY2phIG8gSUQge2lkX29wZXJhY2ppfSB6b3N0YcWCYSBwb215xZtsbmllIHpha2/FhGN6b25hLiIsDQogICAgICAgICAgICAiemFta25pZXRlX3phd29yeSI6IHphd29yeV9kb196YW1rbmllY2lhX25hend5DQogICAgICAgIH0pLCAyMDANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGRiLnNlc3Npb24ucm9sbGJhY2soKQ0KICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeyJzdGF0dXMiOiAiZXJyb3IiLCAibWVzc2FnZSI6IGYiQsWCxIVkIHdld27EmXRyem55IHNlcndlcmE6IHtzdHIoZSl9In0pLCA1MDANCg0KQGJwLnJvdXRlKCcvYWt0eXduZScsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBnZXRfYWt0eXduZV9vcGVyYWNqZSgpOg0KICAgICIiIlp3cmFjYSBsaXN0xJkgd3N6eXN0a2ljaCBvcGVyYWNqaSB6ZSBzdGF0dXNlbSAnYWt0eXduYScgKFdFUlNKQSBPUk0pLiIiIg0KICAgIHRyeToNCiAgICAgICAgIyBCdWR1amVteSB6YXB5dGFuaWUNCiAgICAgICAgcXVlcnkgPSBkYi5zZWxlY3QoT3BlcmFjamVMb2cpLmZpbHRlcl9ieShzdGF0dXNfb3BlcmFjamk9J2FrdHl3bmEnKS5vcmRlcl9ieShPcGVyYWNqZUxvZy5jemFzX3JvenBvY3plY2lhLmRlc2MoKSkNCiAgICAgICAgDQogICAgICAgICMgV3lrb251amVteSB6YXB5dGFuaWUgaSBwb2JpZXJhbXkgd3N6eXN0a2llIHd5bmlraQ0KICAgICAgICBha3R5d25lX29wZXJhY2plID0gZGIuc2Vzc2lvbi5leGVjdXRlKHF1ZXJ5KS5zY2FsYXJzKCkuYWxsKCkNCg0KICAgICAgICAjIFByenlnb3Rvd3VqZW15IG9kcG93aWVkxbogSlNPTg0KICAgICAgICAjIE11c2lteSByxJljem5pZSB6YnVkb3dhxIcgc8WCb3duaWtpLCBhYnkga29udHJvbG93YcSHIGZvcm1hdA0KICAgICAgICB3eW5pa19qc29uID0gW10NCiAgICAgICAgZm9yIG9wIGluIGFrdHl3bmVfb3BlcmFjamU6DQogICAgICAgICAgICB3eW5pa19qc29uLmFwcGVuZCh7DQogICAgICAgICAgICAgICAgJ2lkJzogb3AuaWQsDQogICAgICAgICAgICAgICAgJ3R5cF9vcGVyYWNqaSc6IG9wLnR5cF9vcGVyYWNqaSwNCiAgICAgICAgICAgICAgICAnaWRfcGFydGlpX3N1cm93Y2EnOiBvcC5pZF9wYXJ0aWlfc3Vyb3djYSwNCiAgICAgICAgICAgICAgICAnY3phc19yb3pwb2N6ZWNpYSc6IG9wLmN6YXNfcm96cG9jemVjaWEuc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykgaWYgb3AuY3phc19yb3pwb2N6ZWNpYSBlbHNlIE5vbmUsDQogICAgICAgICAgICAgICAgJ29waXMnOiBvcC5vcGlzDQogICAgICAgICAgICB9KQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkod3luaWtfanNvbikNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICMgTGVwc3phIG9ic8WCdWdhIGLFgsSZZMOzdw0KICAgICAgICByZXR1cm4ganNvbmlmeSh7InN0YXR1cyI6ICJlcnJvciIsICJtZXNzYWdlIjogZiJCxYLEhWQgc2Vyd2VyYToge2V9In0pLCA1MDANCg0KQGJwLnJvdXRlKCcvZG9iaWVsYW5pZScsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYgZG9iaWVsYW5pZSgpOg0KICAgIGRhbmUgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICBpZiBub3QgZGFuZSBvciBub3QgYWxsKGsgaW4gZGFuZSBmb3IgayBpbiBbJ2lkX3JlYWt0b3JhJywgJ2lsb3NjX3dvcmtvdycsICd3YWdhX3dvcmthX2tnJ10pOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7InN0YXR1cyI6ICJlcnJvciIsICJtZXNzYWdlIjogIkJyYWsgd3ltYWdhbnljaCBww7NsOiBpZF9yZWFrdG9yYSwgaWxvc2Nfd29ya293LCB3YWdhX3dvcmthX2tnLiJ9KSwgNDAwDQoNCiAgICBpZF9yZWFrdG9yYSA9IGRhbmVbJ2lkX3JlYWt0b3JhJ10NCiAgICBpbG9zY193b3Jrb3cgPSBkYW5lWydpbG9zY193b3Jrb3cnXQ0KICAgIHdhZ2Ffd29ya2Ffa2cgPSBkYW5lWyd3YWdhX3dvcmthX2tnJ10NCiAgICBkb2RhbmFfd2FnYSA9IGlsb3NjX3dvcmtvdyAqIHdhZ2Ffd29ya2Ffa2cNCg0KICAgIGNvbm4gPSBOb25lDQogICAgdHJ5Og0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQoNCiAgICAgICAgIyBabmFqZMW6IHBhcnRpxJkgdyBwb2RhbnltIHJlYWt0b3J6ZQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiU0VMRUNUIGlkIEZST00gcGFydGllX3N1cm93Y2EgV0hFUkUgaWRfc3ByemV0dSA9ICVzIiwgKGlkX3JlYWt0b3JhLCkpDQogICAgICAgIHBhcnRpYSA9IGN1cnNvci5mZXRjaG9uZSgpDQogICAgICAgIGlmIG5vdCBwYXJ0aWE6DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7InN0YXR1cyI6ICJlcnJvciIsICJtZXNzYWdlIjogZiJXIHJlYWt0b3J6ZSBvIElEIHtpZF9yZWFrdG9yYX0gbmllIHpuYWxlemlvbm8gxbxhZG5laiBwYXJ0aWkuIn0pLCA0MDQNCiAgICAgICAgDQogICAgICAgIGlkX3BhcnRpaSA9IHBhcnRpYVsnaWQnXQ0KDQogICAgICAgICMgLS0tIFRyYW5zYWtjamEgLS0tDQogICAgICAgIHdyaXRlX2N1cnNvciA9IGNvbm4uY3Vyc29yKCkNCg0KICAgICAgICAjIDEuIERvZGFqIHdwaXMgZG8gb3BlcmFjamVfbG9nDQogICAgICAgIG9waXMgPSBmIkRvZGFubyB7aWxvc2Nfd29ya293fSB3b3Jrw7N3IHppZW1pICh7ZG9kYW5hX3dhZ2F9IGtnKSBkbyBwYXJ0aWkge2lkX3BhcnRpaX0iDQogICAgICAgIHNxbF9sb2cgPSAiSU5TRVJUIElOVE8gb3BlcmFjamVfbG9nICh0eXBfb3BlcmFjamksIGlkX3BhcnRpaV9zdXJvd2NhLCBjemFzX3JvenBvY3plY2lhLCBzdGF0dXNfb3BlcmFjamksIG9waXMsIGlsb3NjX2tnKSBWQUxVRVMgKCdET0JJRUxBTklFJywgJXMsIE5PVygpLCAnemFrb25jem9uYScsICVzLCAlcykiDQogICAgICAgIHdyaXRlX2N1cnNvci5leGVjdXRlKHNxbF9sb2csIChpZF9wYXJ0aWksIG9waXMsIGRvZGFuYV93YWdhKSkNCg0KICAgICAgICAjIDIuIFpha3R1YWxpenVqIHdhZ8SZIHBhcnRpaQ0KICAgICAgICBzcWxfd2FnYSA9ICJVUERBVEUgcGFydGllX3N1cm93Y2EgU0VUIHdhZ2FfYWt0dWFsbmFfa2cgPSB3YWdhX2FrdHVhbG5hX2tnICsgJXMgV0hFUkUgaWQgPSAlcyINCiAgICAgICAgd3JpdGVfY3Vyc29yLmV4ZWN1dGUoc3FsX3dhZ2EsIChkb2RhbmFfd2FnYSwgaWRfcGFydGlpKSkNCg0KICAgICAgICAjIDMuIERvZGFqIHN0YXR1cyAiRG9iaWVsb255IiBkbyBwYXJ0aWkNCiAgICAgICAgIyBaYcWCw7PFvG15LCDFvGUgSUQgc3RhdHVzdSAiRG9iaWVsb255IiB0byAzDQogICAgICAgICMgVcW8eXdhbXkgSU5TRVJUIElHTk9SRSwgYWJ5IHVuaWtuxIXEhyBixYLEmWR1LCBqZcWbbGkgcGFydGlhIGp1xbwgbWEgdGVuIHN0YXR1cw0KICAgICAgICBzcWxfc3RhdHVzID0gIklOU0VSVCBJR05PUkUgSU5UTyBwYXJ0aWVfc3RhdHVzeSAoaWRfcGFydGlpLCBpZF9zdGF0dXN1KSBWQUxVRVMgKCVzLCAzKSINCiAgICAgICAgd3JpdGVfY3Vyc29yLmV4ZWN1dGUoc3FsX3N0YXR1cywgKGlkX3BhcnRpaSwpKQ0KICAgICAgICANCiAgICAgICAgY29ubi5jb21taXQoKQ0KDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsic3RhdHVzIjogInN1Y2Nlc3MiLCAibWVzc2FnZSI6IG9waXN9KSwgMjAwDQoNCiAgICBleGNlcHQgbXlzcWwuY29ubmVjdG9yLkVycm9yIGFzIGVycjoNCiAgICAgICAgaWYgY29ubjogY29ubi5yb2xsYmFjaygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsic3RhdHVzIjogImVycm9yIiwgIm1lc3NhZ2UiOiBmIkLFgsSFZCBiYXp5IGRhbnljaDoge2Vycn0ifSksIDUwMA0KICAgIGZpbmFsbHk6DQogICAgICAgIGlmIGNvbm4gYW5kIGNvbm4uaXNfY29ubmVjdGVkKCk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQoNCg0KDQpAYnAucm91dGUoJy9hcG9sbG8tdHJhbnNmZXIvc3RhcnQnLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIHN0YXJ0X2Fwb2xsb190cmFuc2ZlcigpOg0KICAgICIiIlJvenBvY3p5bmEgb3BlcmFjasSZIHRyYW5zZmVydSB6IEFwb2xsbywgYmxva3VqxIVjIHphc29ieSB3IGBsb2dfdXp5dGVfc2VnbWVudHlgLiIiIg0KICAgIHByaW50KGYiREVCVUc6IHN0YXJ0X2Fwb2xsb190cmFuc2ZlcigpIGNhbGxlZCIpDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIHByaW50KGYiREVCVUc6IFJlY2VpdmVkIGRhdGE6IHtkYXRhfSIpDQogICAgDQogICAgaWRfenJvZGxhID0gZGF0YVsnaWRfenJvZGxhJ10NCiAgICBpZF9jZWx1ID0gZGF0YVsnaWRfY2VsdSddDQogICAgb3BlcmF0b3IgPSBkYXRhLmdldCgnb3BlcmF0b3InLCAnU1lTVEVNJykNCiAgICBwcmludChmIkRFQlVHOiBpZF96cm9kbGE9e2lkX3pyb2RsYX0sIGlkX2NlbHU9e2lkX2NlbHV9LCBvcGVyYXRvcj17b3BlcmF0b3J9IikNCiAgICANCiAgICBjb25uID0gTm9uZQ0KICAgIHJlYWRfY3Vyc29yID0gTm9uZQ0KICAgIHdyaXRlX2N1cnNvciA9IE5vbmUNCiAgICB0cnk6DQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIHJlYWRfY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KDQogICAgICAgIHJlYWRfY3Vyc29yLmV4ZWN1dGUoIlNFTEVDVCBpZCwgbmF6d2FfdW5pa2FsbmEsIHR5cF9zcHJ6ZXR1LCBzdGFuX3NwcnpldHUgRlJPTSBzcHJ6ZXQgV0hFUkUgaWQgSU4gKCVzLCAlcykiLCAoaWRfenJvZGxhLCBpZF9jZWx1KSkNCiAgICAgICAgc3ByemV0eSA9IHtzWydpZCddOiBzIGZvciBzIGluIHJlYWRfY3Vyc29yLmZldGNoYWxsKCl9DQogICAgICAgIHpyb2RsbyA9IHNwcnpldHkuZ2V0KGlkX3pyb2RsYSkNCiAgICAgICAgY2VsID0gc3ByemV0eS5nZXQoaWRfY2VsdSkNCg0KICAgICAgICBpZiBub3QgenJvZGxvIG9yIHpyb2Rsb1sndHlwX3NwcnpldHUnXS5sb3dlcigpICE9ICdhcG9sbG8nOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogJ05pZXByYXdpZMWCb3dlIMW6csOzZMWCby4gT2N6ZWtpd2FubyB1cnrEhWR6ZW5pYSB0eXB1ICJhcG9sbG8iLid9KSwgNDAwDQogICAgICAgIGlmIG5vdCBjZWwgb3IgY2VsWyd0eXBfc3ByemV0dSddLmxvd2VyKCkgbm90IGluIFsncmVha3RvcicsICdiZWN6a2FfYnJ1ZG5hJ106DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiAnTmllcHJhd2lkxYJvd3kgY2VsLiBPY3pla2l3YW5vIHJlYWt0b3JhIGx1YiBiZWN6a2kgYnJ1ZG5lai4nfSksIDQwMA0KDQogICAgICAgIGlmIGNlbFsnc3Rhbl9zcHJ6ZXR1J10gIT0gJ1B1c3R5JzoNCiAgICAgICAgICAgIHByaW50KGYiT1NUUlpFxbtFTklFOiBDZWwgb3BlcmFjamkge2NlbFsnbmF6d2FfdW5pa2FsbmEnXX0gbmllIGplc3QgcHVzdHkgKHN0YW46IHtjZWxbJ3N0YW5fc3ByemV0dSddfSkuIikNCg0KICAgICAgICBwcmludChmIkRFQlVHOiBBYm91dCB0byBjYWxsIGdldF9wYXRoZmluZGVyKCkiKQ0KICAgICAgICBwYXRoZmluZGVyID0gZ2V0X3BhdGhmaW5kZXIoKQ0KICAgICAgICBwcmludChmIkRFQlVHOiBwYXRoZmluZGVyIHJldHJpZXZlZCBzdWNjZXNzZnVsbHk6IHt0eXBlKHBhdGhmaW5kZXIpfSIpDQogICAgICAgIA0KICAgICAgICBwdW5rdF9zdGFydG93eSA9IGYie3pyb2Rsb1snbmF6d2FfdW5pa2FsbmEnXX1fT1VUIg0KICAgICAgICBwdW5rdF9kb2NlbG93eSA9IGYie2NlbFsnbmF6d2FfdW5pa2FsbmEnXX1fSU4iDQogICAgICAgIHByaW50KGYiREVCVUc6IHB1bmt0X3N0YXJ0b3d5PXtwdW5rdF9zdGFydG93eX0sIHB1bmt0X2RvY2Vsb3d5PXtwdW5rdF9kb2NlbG93eX0iKQ0KICAgICAgICANCiAgICAgICAgcHJpbnQoZiJERUJVRzogR2V0dGluZyBhbGwgdmFsdmVzIGZyb20gcGF0aGZpbmRlciBncmFwaCIpDQogICAgICAgIHdzenlzdGtpZV96YXdvcnkgPSBbZWRnZV9kYXRhWyd2YWx2ZV9uYW1lJ10gZm9yIF8sIF8sIGVkZ2VfZGF0YSBpbiBwYXRoZmluZGVyLmdyYXBoLmVkZ2VzKGRhdGE9VHJ1ZSldDQogICAgICAgIHByaW50KGYiREVCVUc6IEZvdW5kIHtsZW4od3N6eXN0a2llX3phd29yeSl9IHZhbHZlcyIpDQogICAgICAgIA0KICAgICAgICBwcmludChmIkRFQlVHOiBDYWxsaW5nIHBhdGhmaW5kZXIuZmluZF9wYXRoKCkiKQ0KICAgICAgICB0cmFzYV9zZWdtZW50b3dfbmF6d3kgPSBwYXRoZmluZGVyLmZpbmRfcGF0aChwdW5rdF9zdGFydG93eSwgcHVua3RfZG9jZWxvd3ksIHdzenlzdGtpZV96YXdvcnkpDQogICAgICAgIHByaW50KGYiREVCVUc6IHBhdGhmaW5kZXIuZmluZF9wYXRoKCkgcmV0dXJuZWQ6IHt0cmFzYV9zZWdtZW50b3dfbmF6d3l9IikNCg0KICAgICAgICBpZiBub3QgdHJhc2Ffc2VnbWVudG93X25hend5Og0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogZidOaWUgbW/FvG5hIHpuYWxlxbrEhyB0cmFzeSB6IHtwdW5rdF9zdGFydG93eX0gZG8ge3B1bmt0X2RvY2Vsb3d5fSd9KSwgNDA0DQogICAgICAgICAgICANCiAgICAgICAgcGxhY2Vob2xkZXJzX2tvbmZsaWt0ID0gJywgJy5qb2luKFsnJXMnXSAqIGxlbih0cmFzYV9zZWdtZW50b3dfbmF6d3kpKQ0KICAgICAgICBzcWxfa29uZmxpa3QgPSBmIlNFTEVDVCBzLm5hendhX3NlZ21lbnR1IEZST00gbG9nX3V6eXRlX3NlZ21lbnR5IGx1cyBKT0lOIG9wZXJhY2plX2xvZyBvbCBPTiBsdXMuaWRfb3BlcmFjamlfbG9nID0gb2wuaWQgSk9JTiBzZWdtZW50eSBzIE9OIGx1cy5pZF9zZWdtZW50dSA9IHMuaWQgV0hFUkUgb2wuc3RhdHVzX29wZXJhY2ppID0gJ2FrdHl3bmEnIEFORCBzLm5hendhX3NlZ21lbnR1IElOICh7cGxhY2Vob2xkZXJzX2tvbmZsaWt0fSkiDQogICAgICAgIHJlYWRfY3Vyc29yLmV4ZWN1dGUoc3FsX2tvbmZsaWt0LCB0cmFzYV9zZWdtZW50b3dfbmF6d3kpDQogICAgICAgIGtvbmZsaWt0eSA9IHJlYWRfY3Vyc29yLmZldGNoYWxsKCkNCg0KICAgICAgICBpZiBrb25mbGlrdHk6DQogICAgICAgICAgICBuYXp3eV96YWpldHljaCA9IFtrWyduYXp3YV9zZWdtZW50dSddIGZvciBrIGluIGtvbmZsaWt0eV0NCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6ICdLb25mbGlrdCB6YXNvYsOzdyAtIG5pZWt0w7NyZSBzZWdtZW50eSBzxIUgdcW8eXdhbmUgcHJ6ZXogaW5uZSBvcGVyYWNqZS4nLCd6YWpldGVfc2VnbWVudHknOiBuYXp3eV96YWpldHljaH0pLCA0MDkNCg0KICAgICAgICB3cml0ZV9jdXJzb3IgPSBjb25uLmN1cnNvcigpDQoNCiAgICAgICAgIyBOT1dZIEtST0s6IE90d8OzcnogemF3b3J5IG5hIHRyYXNpZQ0KICAgICAgICB6YXdvcnlfZG9fb3R3YXJjaWEgPSBzZXQoKQ0KICAgICAgICBmb3Igc2VnbWVudF9uYW1lIGluIHRyYXNhX3NlZ21lbnRvd19uYXp3eToNCiAgICAgICAgICAgIGZvciB1LCB2LCBkYXRhIGluIHBhdGhmaW5kZXIuZ3JhcGguZWRnZXMoZGF0YT1UcnVlKToNCiAgICAgICAgICAgICAgICBpZiBkYXRhLmdldCgnc2VnbWVudF9uYW1lJykgPT0gc2VnbWVudF9uYW1lOg0KICAgICAgICAgICAgICAgICAgICB6YXdvcnlfZG9fb3R3YXJjaWEuYWRkKGRhdGFbJ3ZhbHZlX25hbWUnXSkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgDQogICAgICAgIGlmIHphd29yeV9kb19vdHdhcmNpYToNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyc196YXdvcnkgPSAnLCAnLmpvaW4oWyclcyddICogbGVuKHphd29yeV9kb19vdHdhcmNpYSkpDQogICAgICAgICAgICBzcWxfemF3b3J5ID0gZiJVUERBVEUgemF3b3J5IFNFVCBzdGFuID0gJ09UV0FSVFknIFdIRVJFIG5hendhX3phd29ydSBJTiAoe3BsYWNlaG9sZGVyc196YXdvcnl9KSINCiAgICAgICAgICAgIHdyaXRlX2N1cnNvci5leGVjdXRlKHNxbF96YXdvcnksIGxpc3QoemF3b3J5X2RvX290d2FyY2lhKSkNCg0KICAgICAgICB0eXBfb3BlcmFjamkgPSAnUk9aVEFOS09XQU5JRV9BUE9MTE8nDQogICAgICAgIG9waXNfb3BlcmFjamkgPSBmIlRyYW5zZmVyIHoge3pyb2Rsb1snbmF6d2FfdW5pa2FsbmEnXX0gZG8ge2NlbFsnbmF6d2FfdW5pa2FsbmEnXX0iDQogICAgICAgIA0KICAgICAgICBzcWxfbG9nID0gIklOU0VSVCBJTlRPIG9wZXJhY2plX2xvZyAodHlwX29wZXJhY2ppLCBpZF9zcHJ6ZXR1X3pyb2Rsb3dlZ28sIGlkX3NwcnpldHVfZG9jZWxvd2Vnbywgc3RhdHVzX29wZXJhY2ppLCBjemFzX3JvenBvY3plY2lhLCBvcGlzLCBwdW5rdF9zdGFydG93eSwgcHVua3RfZG9jZWxvd3ksIHptb2R5Zmlrb3dhbmVfcHJ6ZXopIFZBTFVFUyAoJXMsICVzLCAlcywgJ2FrdHl3bmEnLCBOT1coKSwgJXMsICVzLCAlcywgJXMpIg0KICAgICAgICB3cml0ZV9jdXJzb3IuZXhlY3V0ZShzcWxfbG9nLCAodHlwX29wZXJhY2ppLCBpZF96cm9kbGEsIGlkX2NlbHUsIG9waXNfb3BlcmFjamksIHB1bmt0X3N0YXJ0b3d5LCBwdW5rdF9kb2NlbG93eSwgb3BlcmF0b3IpKQ0KICAgICAgICBvcGVyYWNqYV9pZCA9IHdyaXRlX2N1cnNvci5sYXN0cm93aWQNCg0KICAgICAgICBwbGFjZWhvbGRlcnNfc2VnbWVudHkgPSAnLCAnLmpvaW4oWyclcyddICogbGVuKHRyYXNhX3NlZ21lbnRvd19uYXp3eSkpDQogICAgICAgIHNxbF9pZF9zZWdtZW50b3cgPSBmIlNFTEVDVCBpZCBGUk9NIHNlZ21lbnR5IFdIRVJFIG5hendhX3NlZ21lbnR1IElOICh7cGxhY2Vob2xkZXJzX3NlZ21lbnR5fSkiDQogICAgICAgIHJlYWRfY3Vyc29yLmV4ZWN1dGUoc3FsX2lkX3NlZ21lbnRvdywgdHJhc2Ffc2VnbWVudG93X25hend5KQ0KICAgICAgICBpZF9zZWdtZW50b3cgPSBbcm93WydpZCddIGZvciByb3cgaW4gcmVhZF9jdXJzb3IuZmV0Y2hhbGwoKV0NCg0KICAgICAgICBzcWxfYmxva2FkYSA9ICJJTlNFUlQgSU5UTyBsb2dfdXp5dGVfc2VnbWVudHkgKGlkX29wZXJhY2ppX2xvZywgaWRfc2VnbWVudHUpIFZBTFVFUyAoJXMsICVzKSINCiAgICAgICAgZGFuZV9kb19ibG9rYWR5ID0gWyhvcGVyYWNqYV9pZCwgaWRfc2VnKSBmb3IgaWRfc2VnIGluIGlkX3NlZ21lbnRvd10NCiAgICAgICAgd3JpdGVfY3Vyc29yLmV4ZWN1dGVtYW55KHNxbF9ibG9rYWRhLCBkYW5lX2RvX2Jsb2thZHkpDQogICAgICAgIA0KICAgICAgICB3cml0ZV9jdXJzb3IuZXhlY3V0ZSgiVVBEQVRFIHNwcnpldCBTRVQgc3Rhbl9zcHJ6ZXR1ID0gJ1cgdHJhbnNmZXJ6ZScgV0hFUkUgaWQgPSAlcyIsIChpZF96cm9kbGEsKSkNCiAgICAgICAgd3JpdGVfY3Vyc29yLmV4ZWN1dGUoIlVQREFURSBzcHJ6ZXQgU0VUIHN0YW5fc3ByemV0dSA9ICdXIHRyYW5zZmVyemUnIFdIRVJFIGlkID0gJXMiLCAoaWRfY2VsdSwpKQ0KICAgICAgICANCiAgICAgICAgY29ubi5jb21taXQoKQ0KICAgICAgICBicm9hZGNhc3RfYXBvbGxvX3VwZGF0ZSgpDQoNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogJ1RyYW5zZmVyIHJvenBvY3rEmXR5IHBvbXnFm2xuaWUuJywnaWRfb3BlcmFjamknOiBvcGVyYWNqYV9pZH0pLCAyMDENCg0KICAgIGV4Y2VwdCBteXNxbC5jb25uZWN0b3IuRXJyb3IgYXMgZXJyOg0KICAgICAgICBpbXBvcnQgdHJhY2ViYWNrOyB0cmFjZWJhY2sucHJpbnRfZXhjKCkNCiAgICAgICAgaWYgY29ubiBhbmQgY29ubi5pc19jb25uZWN0ZWQoKTogY29ubi5yb2xsYmFjaygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6IGYnQsWCxIVkIGJhenkgZGFueWNoOiB7c3RyKGVycil9J30pLCA1MDANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGlmIGNvbm4gYW5kIGNvbm4uaXNfY29ubmVjdGVkKCk6IGNvbm4ucm9sbGJhY2soKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiBmJ0LFgsSFZCBhcGxpa2Fjamk6IHtzdHIoZSl9J30pLCA1MDANCiAgICBmaW5hbGx5Og0KICAgICAgICBpZiByZWFkX2N1cnNvcjogcmVhZF9jdXJzb3IuY2xvc2UoKQ0KICAgICAgICBpZiB3cml0ZV9jdXJzb3I6IHdyaXRlX2N1cnNvci5jbG9zZSgpDQogICAgICAgIGlmIGNvbm4gYW5kIGNvbm4uaXNfY29ubmVjdGVkKCk6IGNvbm4uY2xvc2UoKQ0KDQpAYnAucm91dGUoJy9hcG9sbG8tdHJhbnNmZXIvZW5kJywgbWV0aG9kcz1bJ1BPU1QnXSkNCmRlZiBlbmRfYXBvbGxvX3RyYW5zZmVyKCk6DQogICAgIiIiDQogICAgS2/FhGN6eSBvcGVyYWNqxJkgdHJhbnNmZXJ1IHogQXBvbGxvIChXRVJTSkEgT1JNIHogcGXFgm7EhSBpbnRlZ3JhY2rEhSBCYXRjaFNlcnZpY2UpLg0KICAgIExvZ3VqZSB0cmFuc2ZlciB3IEFwb2xsbywgdHdvcnp5IHBhcnRpxJkgcGllcndvdG7EhSBpIHRhbmt1amUgasSFIGRvIGNlbHUuDQogICAgIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIHRyeToNCiAgICAgICAgaWRfb3BlcmFjamkgPSBpbnQoZGF0YVsnaWRfb3BlcmFjamknXSkNCiAgICAgICAgd2FnYV9rZyA9IERlY2ltYWwoZGF0YVsnd2FnYV9rZyddKQ0KICAgICAgICBvcGVyYXRvciA9IGRhdGEuZ2V0KCdvcGVyYXRvcicsICdTWVNURU0nKQ0KDQogICAgICAgIG9wZXJhY2phID0gZGIuc2Vzc2lvbi5nZXQoT3BlcmFjamVMb2csIGlkX29wZXJhY2ppKQ0KICAgICAgICBpZiBub3Qgb3BlcmFjamEgb3Igb3BlcmFjamEuc3RhdHVzX29wZXJhY2ppICE9ICdha3R5d25hJzoNCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ05pZSB6bmFsZXppb25vIGFrdHl3bmVqIG9wZXJhY2ppIG8gcG9kYW55bSBJRC4nKQ0KDQogICAgICAgIGlkX2Fwb2xsbyA9IG9wZXJhY2phLmlkX3NwcnpldHVfenJvZGxvd2Vnbw0KICAgICAgICBpZF9jZWx1ID0gb3BlcmFjamEuaWRfc3ByemV0dV9kb2NlbG93ZWdvDQogICAgICAgIA0KICAgICAgICBzZXNqYSA9IGRiLnNlc3Npb24uZXhlY3V0ZSgNCiAgICAgICAgICAgIGRiLnNlbGVjdChBcG9sbG9TZXNqZSkuZmlsdGVyX2J5KGlkX3NwcnpldHU9aWRfYXBvbGxvLCBzdGF0dXNfc2Vzamk9J2FrdHl3bmEnKQ0KICAgICAgICApLnNjYWxhcl9vbmVfb3Jfbm9uZSgpDQogICAgICAgIGlmIG5vdCBzZXNqYToNCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoJ05pZSB6bmFsZXppb25vIGFrdHl3bmVqIHNlc2ppIGRsYSBkYW5lZ28gQXBvbGxvLicpDQoNCiAgICAgICAgIyAtLS0gS1JPSyAxOiBBa3R1YWxpemFjamEgc3RhbnUgQXBvbGxvIC0tLQ0KICAgICAgICB0cmFja2luZ190cmFuc2ZlciA9IEFwb2xsb1RyYWNraW5nKA0KICAgICAgICAgICAgaWRfc2Vzamk9c2VzamEuaWQsIHR5cF96ZGFyemVuaWE9J1RSQU5TRkVSX1dZSlNDSU9XWScsIHdhZ2Ffa2c9d2FnYV9rZywNCiAgICAgICAgICAgIGN6YXNfemRhcnplbmlhPWR0Lm5vdyh0aW1lem9uZS51dGMpLCBpZF9vcGVyYWNqaV9sb2c9b3BlcmFjamEuaWQsIG9wZXJhdG9yPW9wZXJhdG9yDQogICAgICAgICkNCiAgICAgICAgZGIuc2Vzc2lvbi5hZGQodHJhY2tpbmdfdHJhbnNmZXIpDQoNCiAgICAgICAgIyAtLS0gS1JPSyAyOiBTdHdvcnplbmllIHBhcnRpaSBwaWVyd290bmVqIGkgemF0YW5rb3dhbmllIGplaiBkbyBjZWx1IC0tLQ0KICAgICAgICBhcG9sbG9fc3ByemV0ID0gZGIuc2Vzc2lvbi5nZXQoU3ByemV0LCBpZF9hcG9sbG8pDQogICAgICAgIA0KICAgICAgICAjIDJhLiBTdHfDs3J6IHdpcnR1YWxuxIUgcGFydGnEmSBwaWVyd290bsSFIGRsYSB0ZWdvIHRyYW5zZmVydQ0KICAgICAgICBiYXRjaF9yZXN1bHQgPSBCYXRjaE1hbmFnZW1lbnRTZXJ2aWNlLmNyZWF0ZV9yYXdfbWF0ZXJpYWxfYmF0Y2goDQogICAgICAgICAgICBtYXRlcmlhbF90eXBlPXNlc2phLnR5cF9zdXJvd2NhLA0KICAgICAgICAgICAgc291cmNlX3R5cGU9J0FQT0xMTycsDQogICAgICAgICAgICBzb3VyY2VfbmFtZT1hcG9sbG9fc3ByemV0Lm5hendhX3VuaWthbG5hLA0KICAgICAgICAgICAgcXVhbnRpdHk9d2FnYV9rZywNCiAgICAgICAgICAgIG9wZXJhdG9yPW9wZXJhdG9yDQogICAgICAgICkNCiAgICAgICAgbm93eV9iYXRjaF9pZCA9IGJhdGNoX3Jlc3VsdFsnYmF0Y2hfaWQnXQ0KICAgICAgICANCiAgICAgICAgIyAyYi4gWmF0YW5rdWogdMSZIG5vd8SFIHBhcnRpxJkgZG8gemJpb3JuaWthIGRvY2Vsb3dlZ28uDQogICAgICAgICMgICAgVGEgbWV0b2RhIHpham1pZSBzacSZIGNhxYLEhSBsb2dpa8SFIHR3b3J6ZW5pYS9ha3R1YWxpemFjamkgbWllc3phbmlueS4NCiAgICAgICAgQmF0Y2hNYW5hZ2VtZW50U2VydmljZS50YW5rX2ludG9fZGlydHlfdGFuaygNCiAgICAgICAgICAgIGJhdGNoX2lkPW5vd3lfYmF0Y2hfaWQsDQogICAgICAgICAgICB0YW5rX2lkPWlkX2NlbHUsDQogICAgICAgICAgICBvcGVyYXRvcj1vcGVyYXRvcg0KICAgICAgICApDQoNCiAgICAgICAgIyAtLS0gS1JPSyAzOiBaYWtvxYRjemVuaWUgbG9naXN0eWtpIG9wZXJhY2ppIC0tLQ0KICAgICAgICBvcGVyYWNqYS5zdGF0dXNfb3BlcmFjamkgPSAnemFrb25jem9uYScNCiAgICAgICAgb3BlcmFjamEuY3phc196YWtvbmN6ZW5pYSA9IGR0Lm5vdyh0aW1lem9uZS51dGMpDQogICAgICAgIG9wZXJhY2phLmlsb3NjX2tnID0gd2FnYV9rZw0KICAgICAgICBvcGVyYWNqYS56bW9keWZpa293YW5lX3ByemV6ID0gb3BlcmF0b3INCiAgICAgICAgb3BlcmFjamEuaWRfYXBvbGxvX3Nlc2ppID0gc2VzamEuaWQNCiAgICAgICAgDQogICAgICAgICMgUHJ6eXBpc3ogSUQgbm93byB1dHdvcnpvbmVqIHBhcnRpaSBkbyBsb2d1IG9wZXJhY2ppDQogICAgICAgICMgKE1vxbxlbXkgdG8genJvYmnEhywgY2hvxIcgQmF0Y2hlcyBuaWUgbWEgYmV6cG/Fm3JlZG5pZWogcmVsYWNqaSB6IE9wZXJhY2plTG9nKQ0KICAgICAgICBvcGVyYWNqYS5vcGlzID0gZiJUcmFuc2ZlciB6IHthcG9sbG9fc3ByemV0Lm5hendhX3VuaWthbG5hfSBkbyB6Ymlvcm5pa2EgSUQge2lkX2NlbHV9LiBVdHdvcnpvbm8gcGFydGnEmSBwaWVyd290bsSFIElEOiB7bm93eV9iYXRjaF9pZH0uIg0KICAgICAgICANCiAgICAgICAgemF3b3J5X2RvX3phbWtuaWVjaWFfbmF6d3kgPSBbc2VnLnphd29yeS5uYXp3YV96YXdvcnUgZm9yIHNlZyBpbiBvcGVyYWNqYS5zZWdtZW50eSBpZiBzZWcuemF3b3J5XQ0KICAgICAgICBpZiB6YXdvcnlfZG9femFta25pZWNpYV9uYXp3eToNCiAgICAgICAgICAgIHN0bXQgPSBkYi51cGRhdGUoWmF3b3J5KS53aGVyZSgNCiAgICAgICAgICAgICAgICBaYXdvcnkubmF6d2FfemF3b3J1LmluXyh6YXdvcnlfZG9femFta25pZWNpYV9uYXp3eSkNCiAgICAgICAgICAgICkudmFsdWVzKHN0YW49J1pBTUtOSUVUWScpDQogICAgICAgICAgICBkYi5zZXNzaW9uLmV4ZWN1dGUoc3RtdCkNCg0KICAgICAgICBpZiBvcGVyYWNqYS5zcHJ6ZXRfenJvZGxvd3k6DQogICAgICAgICAgICBvcGVyYWNqYS5zcHJ6ZXRfenJvZGxvd3kuc3Rhbl9zcHJ6ZXR1ID0gJ0dvdG93eScNCiAgICAgICAgaWYgb3BlcmFjamEuc3ByemV0X2RvY2Vsb3d5Og0KICAgICAgICAgICAgb3BlcmFjamEuc3ByemV0X2RvY2Vsb3d5LnN0YW5fc3ByemV0dSA9ICdaYXRhbmtvd2FueScNCiAgICAgICAgDQogICAgICAgICMgWmFtaWFzdCByxJljem5pZSB6YXJ6xIVkemHEhyBQYXJ0acSFU3Vyb3djYSwgcG96d2FsYW15LCBhYnkgQmF0Y2hNYW5hZ2VtZW50U2VydmljZSB0byByb2JpxYIuDQogICAgICAgICMgVXN1d2FteSBzdGFyxIUgbG9naWvEmToNCiAgICAgICAgIyBwYXJ0aWFfd19hcG9sbG8gPSBkYi5zZXNzaW9uLmV4ZWN1dGUoLi4uKS5zY2FsYXJfb25lX29yX25vbmUoKQ0KICAgICAgICAjIGlmIHBhcnRpYV93X2Fwb2xsbzoNCiAgICAgICAgIyAgICAgcGFydGlhX3dfYXBvbGxvLndhZ2FfYWt0dWFsbmFfa2cgLT0gd2FnYV9rZw0KICAgICAgICANCiAgICAgICAgZGIuc2Vzc2lvbi5jb21taXQoKQ0KICAgICAgICBicm9hZGNhc3RfYXBvbGxvX3VwZGF0ZSgpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnc3VjY2Vzcyc6IFRydWUsICdtZXNzYWdlJzogZidPcGVyYWNqYSB7aWRfb3BlcmFjaml9IHpha2/FhGN6b25hLiBVdHdvcnpvbm8gaSB6YXRhbmtvd2FubyBwYXJ0acSZLid9KQ0KDQogICAgZXhjZXB0IChWYWx1ZUVycm9yLCBLZXlFcnJvcikgYXMgZToNCiAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBzdHIoZSl9KSwgNDAwDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBkYi5zZXNzaW9uLnJvbGxiYWNrKCkNCiAgICAgICAgaW1wb3J0IHRyYWNlYmFjaw0KICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIHNlcndlcmE6IHtzdHIoZSl9J30pLCA1MDANCg0KQGJwLnJvdXRlKCcvYXBvbGxvLXRyYW5zZmVyL2FudWx1aicsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYgYW51bHVqX2Fwb2xsb190cmFuc2ZlcigpOg0KICAgICIiIkFudWx1amUgYWt0eXdueSB0cmFuc2ZlciwgendhbG5pYSB6YXNvYnkgaSBwcnp5d3JhY2Egc3Rhbnkgc3ByesSZdHUuIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIGlmIG5vdCBkYXRhIG9yICdpZF9vcGVyYWNqaScgbm90IGluIGRhdGE6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiAnQnJhayB3eW1hZ2FuZWdvIHBvbGE6IGlkX29wZXJhY2ppJ30pLCA0MDANCg0KICAgIGlkX29wZXJhY2ppID0gZGF0YVsnaWRfb3BlcmFjamknXQ0KICAgIGNvbm4gPSBOb25lDQogICAgdHJ5Og0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQoNCiAgICAgICAgIyBQb2JpZXJ6IGRhbmUgb3BlcmFjamkNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICBTRUxFQ1QgaWQsIHN0YXR1c19vcGVyYWNqaSwgaWRfc3ByemV0dV96cm9kbG93ZWdvLCBpZF9zcHJ6ZXR1X2RvY2Vsb3dlZ28gDQogICAgICAgICAgICBGUk9NIG9wZXJhY2plX2xvZyBXSEVSRSBpZCA9ICVzDQogICAgICAgICIiIiwgKGlkX29wZXJhY2ppLCkpDQogICAgICAgIG9wZXJhY2phID0gY3Vyc29yLmZldGNob25lKCkNCg0KICAgICAgICBpZiBub3Qgb3BlcmFjamE6DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ05pZSB6bmFsZXppb25vIG9wZXJhY2ppJ30pLCA0MDQNCiAgICAgICAgaWYgb3BlcmFjamFbJ3N0YXR1c19vcGVyYWNqaSddICE9ICdha3R5d25hJzoNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmIk5pZSBtb8W8bmEgYW51bG93YcSHIG9wZXJhY2ppLCBrdMOzcmEgbmllIGplc3QgYWt0eXduYSAoc3RhdHVzOiB7b3BlcmFjamFbJ3N0YXR1c19vcGVyYWNqaSddfSkifSksIDQwOQ0KDQogICAgICAgICMgMS4gWm1pZcWEIHN0YXR1cyBvcGVyYWNqaSBuYSAnYW51bG93YW5hJw0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiVVBEQVRFIG9wZXJhY2plX2xvZyBTRVQgc3RhdHVzX29wZXJhY2ppID0gJ2FudWxvd2FuYScgV0hFUkUgaWQgPSAlcyIsIChpZF9vcGVyYWNqaSwpKQ0KDQogICAgICAgICMgMi4gWndvbG5paiB6YXNvYnkgKHpuYWpkxbogaSB6YW1rbmlqIHphd29yeSkNCiAgICAgICAgc3FsX3puYWpkel96YXdvcnkgPSAiIiINCiAgICAgICAgICAgIFNFTEVDVCBESVNUSU5DVCB6Lm5hendhX3phd29ydSBGUk9NIHphd29yeSB6DQogICAgICAgICAgICBKT0lOIHNlZ21lbnR5IHMgT04gei5pZCA9IHMuaWRfemF3b3J1DQogICAgICAgICAgICBKT0lOIGxvZ191enl0ZV9zZWdtZW50eSBsdXMgT04gcy5pZCA9IGx1cy5pZF9zZWdtZW50dQ0KICAgICAgICAgICAgV0hFUkUgbHVzLmlkX29wZXJhY2ppX2xvZyA9ICVzDQogICAgICAgICIiIg0KICAgICAgICBjdXJzb3IuZXhlY3V0ZShzcWxfem5hamR6X3phd29yeSwgKGlkX29wZXJhY2ppLCkpDQogICAgICAgIHphd29yeV9kb196YW1rbmllY2lhID0gW3Jvd1snbmF6d2FfemF3b3J1J10gZm9yIHJvdyBpbiBjdXJzb3IuZmV0Y2hhbGwoKV0NCg0KICAgICAgICBpZiB6YXdvcnlfZG9femFta25pZWNpYToNCiAgICAgICAgICAgIHBsYWNlaG9sZGVycyA9ICcsICcuam9pbihbJyVzJ10gKiBsZW4oemF3b3J5X2RvX3phbWtuaWVjaWEpKQ0KICAgICAgICAgICAgc3FsX3phbWtuaWpfemF3b3J5ID0gZiJVUERBVEUgemF3b3J5IFNFVCBzdGFuID0gJ1pBTUtOSUVUWScgV0hFUkUgbmF6d2FfemF3b3J1IElOICh7cGxhY2Vob2xkZXJzfSkiDQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZShzcWxfemFta25pal96YXdvcnksIHphd29yeV9kb196YW1rbmllY2lhKQ0KDQogICAgICAgICMgMy4gUHJ6eXdyw7PEhyBzdGFuIHNwcnrEmXR1ICjFunLDs2TFgmEgaSBjZWx1KSBkbyAnR290b3d5Jw0KICAgICAgICBpZF96cm9kbGEgPSBvcGVyYWNqYVsnaWRfc3ByemV0dV96cm9kbG93ZWdvJ10NCiAgICAgICAgaWRfY2VsdSA9IG9wZXJhY2phWydpZF9zcHJ6ZXR1X2RvY2Vsb3dlZ28nXQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiVVBEQVRFIHNwcnpldCBTRVQgc3Rhbl9zcHJ6ZXR1ID0gJ0dvdG93eScgV0hFUkUgaWQgPSAlcyIsIChpZF9jZWx1KSkNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIlVQREFURSBzcHJ6ZXQgU0VUIHN0YW5fc3ByemV0dSA9ICdaYXRhbmtvd2FueScgV0hFUkUgaWQgPSAlcyIsIChpZF96cm9kbGEpKQ0KICAgICAgICBjb25uLmNvbW1pdCgpDQogICAgICAgIGJyb2FkY2FzdF9kYXNoYm9hcmRfdXBkYXRlKCkNCg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J3N1Y2Nlc3MnOiBUcnVlLCAnbWVzc2FnZSc6IGYnT3BlcmFjamEge2lkX29wZXJhY2ppfSB6b3N0YcWCYSBhbnVsb3dhbmEuJ30pDQoNCiAgICBleGNlcHQgbXlzcWwuY29ubmVjdG9yLkVycm9yIGFzIGVycjoNCiAgICAgICAgaWYgY29ubiBhbmQgY29ubi5pc19jb25uZWN0ZWQoKTogY29ubi5yb2xsYmFjaygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ0LFgsSFZCBiYXp5IGRhbnljaDoge2Vycn0nfSksIDUwMA0KICAgIGZpbmFsbHk6DQogICAgICAgIGlmICdjdXJzb3InIGluIGxvY2FscygpIGFuZCBjdXJzb3I6IGN1cnNvci5jbG9zZSgpDQogICAgICAgIGlmICd3cml0ZV9jdXJzb3InIGluIGxvY2FscygpIGFuZCB3cml0ZV9jdXJzb3I6IHdyaXRlX2N1cnNvci5jbG9zZSgpDQogICAgICAgIGlmIGNvbm4gYW5kIGNvbm4uaXNfY29ubmVjdGVkKCk6IGNvbm4uY2xvc2UoKSANCg0KQGJwLnJvdXRlKCcvcm96dGFua3VqLWN5c3Rlcm5lL3N0YXJ0JywgbWV0aG9kcz1bJ1BPU1QnXSkNCmRlZiBzdGFydF9jeXN0ZXJuYV90cmFuc2ZlcigpOg0KICAgICIiIg0KICAgIFJvenBvY3p5bmEgb3BlcmFjasSZIHJvenRhbmtvd2FuaWEgY3lzdGVybnkuDQogICAgKFdlcnNqYSB6bW9keWZpa293YW5hLCBhYnkgZHppYcWCYcSHIGphayBvcnlnaW5hbG5hICdzdGFydF9hcG9sbG9fdHJhbnNmZXInKQ0KICAgICIiIg0KICAgIGRhdGEgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICByZXF1aXJlZF9maWVsZHMgPSBbJ2lkX2N5c3Rlcm55JywgJ2lkX2NlbHUnXQ0KICAgIGlmIG5vdCBkYXRhIG9yIG5vdCBhbGwoayBpbiBkYXRhIGZvciBrIGluIHJlcXVpcmVkX2ZpZWxkcyk6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6ICdCcmFrIHd5bWFnYW55Y2ggZGFueWNoOiBpZF9jeXN0ZXJueSwgaWRfY2VsdSd9KSwgNDAwDQoNCiAgICBpZF9jeXN0ZXJueSA9IGRhdGFbJ2lkX2N5c3Rlcm55J10NCiAgICBpZF9jZWx1ID0gZGF0YVsnaWRfY2VsdSddDQogICAgb3BlcmF0b3IgPSBkYXRhLmdldCgnb3BlcmF0b3InLCAnU1lTVEVNJykNCiAgICAjIFpNSUFOQSAxOiBQcnp5d3LDs2Nvbm8gcG9iaWVyYW5pZSBmbGFnaSAnZm9yY2UnIChjaG9jaWHFvCB3IHRlaiBsb2dpY2UgbmllIGplc3QgdcW8eXdhbmEgZG8gc3RhbnUgY2VsdSkNCiAgICBmb3JjZSA9IGRhdGEuZ2V0KCdmb3JjZScsIEZhbHNlKQ0KDQogICAgY29ubiA9IE5vbmUNCiAgICB0cnk6DQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCg0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiU0VMRUNUIGlkLCBuYXp3YV91bmlrYWxuYSwgdHlwX3NwcnpldHUsIHN0YW5fc3ByemV0dSBGUk9NIHNwcnpldCBXSEVSRSBpZCBJTiAoJXMsICVzKSIsIChpZF9jeXN0ZXJueSwgaWRfY2VsdSkpDQogICAgICAgIHNwcnpldHkgPSB7c1snaWQnXTogcyBmb3IgcyBpbiBjdXJzb3IuZmV0Y2hhbGwoKX0NCiAgICAgICAgenJvZGxvID0gc3ByemV0eS5nZXQoaW50KGlkX2N5c3Rlcm55KSkNCiAgICAgICAgY2VsID0gc3ByemV0eS5nZXQoaW50KGlkX2NlbHUpKQ0KDQogICAgICAgICMgV2FsaWRhY2phIHNwZWN5Zmljem5hIGRsYSBDeXN0ZXJueQ0KICAgICAgICBpZiBub3QgenJvZGxvIG9yIHpyb2Rsb1sndHlwX3NwcnpldHUnXS5sb3dlcigpICE9ICdjeXN0ZXJuYSc6DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiAnTmllcHJhd2lkxYJvd2Ugxbpyw7NkxYJvLiBPY3pla2l3YW5vIHVyesSFZHplbmlhIHR5cHUgImN5c3Rlcm5hIi4nfSksIDQwMA0KICAgICAgICBpZiBub3QgY2VsIG9yIGNlbFsndHlwX3NwcnpldHUnXS5sb3dlcigpIG5vdCBpbiBbJ3JlYWt0b3InLCAnYmVjemthX2JydWRuYScsICd6Ymlvcm5paycsICdiZWN6a2FfY3p5c3RhJ106DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiAnTmllcHJhd2lkxYJvd3kgY2VsLiBPY3pla2l3YW5vIHJlYWt0b3JhLCBiZWN6a2kgYnJ1ZG5laiwgYmVjemtpIGN6eXN0ZWogbHViIHpiaW9ybmlrYS4nfSksIDQwMA0KICAgICAgICANCiAgICAgICAgIyBaTUlBTkEgMjogWmFtaWFzdCBibG9rb3dhxIcsIHR5bGtvIGRydWt1amVteSBvc3RyemXFvGVuaWUgKHRhayBqYWsgdyBvcnlnaW5hbG55bSBzdGFydF9hcG9sbG9fdHJhbnNmZXIpDQogICAgICAgIGlmIGNlbFsnc3Rhbl9zcHJ6ZXR1J10gIT0gJ1B1c3R5JzoNCiAgICAgICAgICAgIHByaW50KGYiT1NUUlpFxbtFTklFOiBDZWwgb3BlcmFjamkge2NlbFsnbmF6d2FfdW5pa2FsbmEnXX0gbmllIGplc3QgcHVzdHkgKHN0YW46IHtjZWxbJ3N0YW5fc3ByemV0dSddfSkuIE9wZXJhY2phIGLEmWR6aWUga29udHludW93YW5hLiIpDQogICAgICAgICAgICAjIE5pZSB6d3JhY2FteSBixYLEmWR1LCBwb3p3YWxhbXkgbmEgZGFsc3plIHd5a29uYW5pZSBrb2R1Lg0KDQogICAgICAgIHBhdGhmaW5kZXIgPSBnZXRfcGF0aGZpbmRlcigpDQogICAgICAgIHB1bmt0X3N0YXJ0b3d5ID0gZiJ7enJvZGxvWyduYXp3YV91bmlrYWxuYSddfV9PVVQiDQogICAgICAgIHB1bmt0X2RvY2Vsb3d5ID0gZiJ7Y2VsWyduYXp3YV91bmlrYWxuYSddfV9JTiINCiAgICAgICAgDQogICAgICAgIHdzenlzdGtpZV96YXdvcnkgPSBbZWRnZV9kYXRhWyd2YWx2ZV9uYW1lJ10gZm9yIF8sIF8sIGVkZ2VfZGF0YSBpbiBwYXRoZmluZGVyLmdyYXBoLmVkZ2VzKGRhdGE9VHJ1ZSkgaWYgJ3ZhbHZlX25hbWUnIGluIGVkZ2VfZGF0YV0NCiAgICAgICAgdHJhc2Ffc2VnbWVudG93X25hend5ID0gcGF0aGZpbmRlci5maW5kX3BhdGgocHVua3Rfc3RhcnRvd3ksIHB1bmt0X2RvY2Vsb3d5LCB3c3p5c3RraWVfemF3b3J5KQ0KDQogICAgICAgIGlmIG5vdCB0cmFzYV9zZWdtZW50b3dfbmF6d3k6DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiBmJ05pZSBtb8W8bmEgem5hbGXFusSHIHRyYXN5IHoge3B1bmt0X3N0YXJ0b3d5fSBkbyB7cHVua3RfZG9jZWxvd3l9J30pLCA0MDQNCg0KICAgICAgICBwbGFjZWhvbGRlcnNfa29uZmxpa3QgPSAnLCAnLmpvaW4oWyclcyddICogbGVuKHRyYXNhX3NlZ21lbnRvd19uYXp3eSkpDQogICAgICAgIHNxbF9rb25mbGlrdCA9IGYiU0VMRUNUIHMubmF6d2Ffc2VnbWVudHUgRlJPTSBsb2dfdXp5dGVfc2VnbWVudHkgbHVzIEpPSU4gb3BlcmFjamVfbG9nIG9sIE9OIGx1cy5pZF9vcGVyYWNqaV9sb2cgPSBvbC5pZCBKT0lOIHNlZ21lbnR5IHMgT04gbHVzLmlkX3NlZ21lbnR1ID0gcy5pZCBXSEVSRSBvbC5zdGF0dXNfb3BlcmFjamkgPSAnYWt0eXduYScgQU5EIHMubmF6d2Ffc2VnbWVudHUgSU4gKHtwbGFjZWhvbGRlcnNfa29uZmxpa3R9KSINCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoc3FsX2tvbmZsaWt0LCB0cmFzYV9zZWdtZW50b3dfbmF6d3kpDQogICAgICAgIGtvbmZsaWt0eSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgIA0KICAgICAgICAjIFpNSUFOQSAzOiBMb2dpa2Ega29uZmxpa3R1LCBrdMOzcmEgYnnFgmEgb3J5Z2luYWxuaWUgdyBzdGFydF9hcG9sbG9fdHJhbnNmZXINCiAgICAgICAgIyBVd2FnYTogdGEgbG9naWthIGplc3QgdHJvY2jEmSBkeml3bmEsIGJvICdmb3JjZScgbmllIGplc3QgdHV0YWogdcW8eXdhbmUNCiAgICAgICAgaWYga29uZmxpa3R5Og0KICAgICAgICAgICAgbmF6d3lfemFqZXR5Y2ggPSBba1snbmF6d2Ffc2VnbWVudHUnXSBmb3IgayBpbiBrb25mbGlrdHldDQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiAnS29uZmxpa3QgemFzb2LDs3cgLSBuaWVrdMOzcmUgc2VnbWVudHkgc8SFIHXFvHl3YW5lLicsDQogICAgICAgICAgICAgICAgJ3phamV0ZV9zZWdtZW50eSc6IG5hend5X3phamV0eWNoDQogICAgICAgICAgICB9KSwgNDA5DQoNCiAgICAgICAgd3JpdGVfY3Vyc29yID0gY29ubi5jdXJzb3IoKQ0KDQogICAgICAgIHphd29yeV9kb19vdHdhcmNpYSA9IHNldCgpDQogICAgICAgIGZvciBzZWdtZW50X25hbWUgaW4gdHJhc2Ffc2VnbWVudG93X25hend5Og0KICAgICAgICAgICAgZm9yIHUsIHYsIGQgaW4gcGF0aGZpbmRlci5ncmFwaC5lZGdlcyhkYXRhPVRydWUpOg0KICAgICAgICAgICAgICAgIGlmIGQuZ2V0KCdzZWdtZW50X25hbWUnKSA9PSBzZWdtZW50X25hbWUgYW5kICd2YWx2ZV9uYW1lJyBpbiBkOg0KICAgICAgICAgICAgICAgICAgICB6YXdvcnlfZG9fb3R3YXJjaWEuYWRkKGRbJ3ZhbHZlX25hbWUnXSkNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgaWYgemF3b3J5X2RvX290d2FyY2lhOg0KICAgICAgICAgICAgcGxhY2Vob2xkZXJzX3phd29yeSA9ICcsICcuam9pbihbJyVzJ10gKiBsZW4oemF3b3J5X2RvX290d2FyY2lhKSkNCiAgICAgICAgICAgIHNxbF96YXdvcnkgPSBmIlVQREFURSB6YXdvcnkgU0VUIHN0YW4gPSAnT1RXQVJUWScgV0hFUkUgbmF6d2FfemF3b3J1IElOICh7cGxhY2Vob2xkZXJzX3phd29yeX0pIg0KICAgICAgICAgICAgd3JpdGVfY3Vyc29yLmV4ZWN1dGUoc3FsX3phd29yeSwgbGlzdCh6YXdvcnlfZG9fb3R3YXJjaWEpKQ0KDQogICAgICAgIHR5cF9vcGVyYWNqaSA9ICdST1pUQU5LT1dBTklFX0NZU1RFUk5ZJw0KICAgICAgICBvcGlzX29wZXJhY2ppID0gZiJUcmFuc2ZlciB6IHt6cm9kbG9bJ25hendhX3VuaWthbG5hJ119IGRvIHtjZWxbJ25hendhX3VuaWthbG5hJ119Ig0KDQogICAgICAgIHNxbF9sb2cgPSAiSU5TRVJUIElOVE8gb3BlcmFjamVfbG9nICh0eXBfb3BlcmFjamksIGlkX3NwcnpldHVfenJvZGxvd2VnbywgaWRfc3ByemV0dV9kb2NlbG93ZWdvLCBzdGF0dXNfb3BlcmFjamksIGN6YXNfcm96cG9jemVjaWEsIG9waXMsIHB1bmt0X3N0YXJ0b3d5LCBwdW5rdF9kb2NlbG93eSwgem1vZHlmaWtvd2FuZV9wcnpleikgVkFMVUVTICglcywgJXMsICVzLCAnYWt0eXduYScsIE5PVygpLCAlcywgJXMsICVzLCAlcykiDQogICAgICAgIHdyaXRlX2N1cnNvci5leGVjdXRlKHNxbF9sb2csICh0eXBfb3BlcmFjamksIGlkX2N5c3Rlcm55LCBpZF9jZWx1LCBvcGlzX29wZXJhY2ppLCBwdW5rdF9zdGFydG93eSwgcHVua3RfZG9jZWxvd3ksIG9wZXJhdG9yKSkNCiAgICAgICAgb3BlcmFjamFfaWQgPSB3cml0ZV9jdXJzb3IubGFzdHJvd2lkDQoNCiAgICAgICAgcGxhY2Vob2xkZXJzX3NlZ21lbnR5ID0gJywgJy5qb2luKFsnJXMnXSAqIGxlbih0cmFzYV9zZWdtZW50b3dfbmF6d3kpKQ0KICAgICAgICBzcWxfaWRfc2VnbWVudG93ID0gZiJTRUxFQ1QgaWQgRlJPTSBzZWdtZW50eSBXSEVSRSBuYXp3YV9zZWdtZW50dSBJTiAoe3BsYWNlaG9sZGVyc19zZWdtZW50eX0pIg0KICAgICAgICBjdXJzb3IuZXhlY3V0ZShzcWxfaWRfc2VnbWVudG93LCB0cmFzYV9zZWdtZW50b3dfbmF6d3kpDQogICAgICAgIGlkX3NlZ21lbnRvdyA9IFtyb3dbJ2lkJ10gZm9yIHJvdyBpbiBjdXJzb3IuZmV0Y2hhbGwoKV0NCiAgICAgICAgc3FsX2Jsb2thZGEgPSAiSU5TRVJUIElOVE8gbG9nX3V6eXRlX3NlZ21lbnR5IChpZF9vcGVyYWNqaV9sb2csIGlkX3NlZ21lbnR1KSBWQUxVRVMgKCVzLCAlcykiDQogICAgICAgIGRhbmVfZG9fYmxva2FkeSA9IFsob3BlcmFjamFfaWQsIGlkX3NlZykgZm9yIGlkX3NlZyBpbiBpZF9zZWdtZW50b3ddDQogICAgICAgIHdyaXRlX2N1cnNvci5leGVjdXRlbWFueShzcWxfYmxva2FkYSwgZGFuZV9kb19ibG9rYWR5KQ0KDQogICAgICAgIHdyaXRlX2N1cnNvci5leGVjdXRlKCJVUERBVEUgc3ByemV0IFNFVCBzdGFuX3NwcnpldHUgPSAnVyB0cmFuc2ZlcnplJyBXSEVSRSBpZCA9ICVzIiwgKGlkX2N5c3Rlcm55LCkpDQogICAgICAgIHdyaXRlX2N1cnNvci5leGVjdXRlKCJVUERBVEUgc3ByemV0IFNFVCBzdGFuX3NwcnpldHUgPSAnVyB0cmFuc2ZlcnplJyBXSEVSRSBpZCA9ICVzIiwgKGlkX2NlbHUsKSkNCiAgICAgICAgDQogICAgICAgIGNvbm4uY29tbWl0KCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogJ1JvenRhbmtvd2FuaWUgY3lzdGVybnkgcm96cG9jesSZdGUgcG9tecWbbG5pZS4nLCAnaWRfb3BlcmFjamknOiBvcGVyYWNqYV9pZH0pLCAyMDENCg0KICAgIGV4Y2VwdCBteXNxbC5jb25uZWN0b3IuRXJyb3IgYXMgZXJyOg0KICAgICAgICBpZiBjb25uOiBjb25uLnJvbGxiYWNrKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogZidCxYLEhWQgYmF6eSBkYW55Y2g6IHtzdHIoZXJyKX0nfSksIDUwMA0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgaWYgY29ubjogY29ubi5yb2xsYmFjaygpDQogICAgICAgIHRyYWNlYmFjay5wcmludF9leGMoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiBmJ0LFgsSFZCBhcGxpa2Fjamk6IHtzdHIoZSl9J30pLCA1MDANCiAgICBmaW5hbGx5Og0KICAgICAgICBpZiAnY3Vyc29yJyBpbiBsb2NhbHMoKSBhbmQgY3Vyc29yOiBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBpZiAnd3JpdGVfY3Vyc29yJyBpbiBsb2NhbHMoKSBhbmQgd3JpdGVfY3Vyc29yOiB3cml0ZV9jdXJzb3IuY2xvc2UoKQ0KICAgICAgICBpZiBjb25uIGFuZCBjb25uLmlzX2Nvbm5lY3RlZCgpOiBjb25uLmNsb3NlKCkNCg0KQGJwLnJvdXRlKCcvcm96dGFua3VqLWN5c3Rlcm5lL3pha29uY3onLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIGVuZF9jeXN0ZXJuYV90cmFuc2ZlcigpOg0KICAgICIiIg0KICAgIEtvxYRjenkgb3BlcmFjasSZIHJvenRhbmtvd2FuaWEgY3lzdGVybnkgaSB6YXJ6xIVkemEgcGFydGlhbWkgc3Vyb3djYS4NCiAgICBXeW1hZ2E6IGlkX29wZXJhY2ppLCB3YWdhX25ldHRvX2tnLCB0eXBfc3Vyb3djYSwgbnJfcmVqZXN0cmFjeWpueSwgbnJfZG9rdW1lbnR1X2Rvc3Rhd3ksIG5hendhX2Rvc3Rhd2N5Lg0KICAgICIiIg0KICAgIGRhdGEgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICByZXF1aXJlZF9maWVsZHMgPSBbJ2lkX29wZXJhY2ppJywgJ3dhZ2FfbmV0dG9fa2cnLCAndHlwX3N1cm93Y2EnLCAnbnJfcmVqZXN0cmFjeWpueScsICducl9kb2t1bWVudHVfZG9zdGF3eScsICduYXp3YV9kb3N0YXdjeSddDQogICAgaWYgbm90IGRhdGEgb3Igbm90IGFsbChrIGluIGRhdGEgZm9yIGsgaW4gcmVxdWlyZWRfZmllbGRzKToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogJ0JyYWsgd3N6eXN0a2ljaCB3eW1hZ2FueWNoIGRhbnljaC4nfSksIDQwMA0KDQogICAgdHJ5Og0KICAgICAgICBpZF9vcGVyYWNqaSA9IGludChkYXRhWydpZF9vcGVyYWNqaSddKQ0KICAgICAgICB3YWdhX2tnID0gZmxvYXQoZGF0YVsnd2FnYV9uZXR0b19rZyddKQ0KICAgICAgICB0eXBfc3Vyb3djYV9kb3N0YXd5ID0gZGF0YVsndHlwX3N1cm93Y2EnXQ0KICAgIGV4Y2VwdCAoVmFsdWVFcnJvciwgVHlwZUVycm9yKToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogJ05pZXByYXdpZMWCb3d5IGZvcm1hdCBkYW55Y2guJ30pLCA0MDANCg0KICAgIGNvbm4gPSBOb25lDQogICAgdHJ5Og0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQoNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIlNFTEVDVCAqIEZST00gb3BlcmFjamVfbG9nIFdIRVJFIGlkID0gJXMgQU5EIHN0YXR1c19vcGVyYWNqaSA9ICdha3R5d25hJyIsIChpZF9vcGVyYWNqaSwpKQ0KICAgICAgICBvcGVyYWNqYSA9IGN1cnNvci5mZXRjaG9uZSgpDQogICAgICAgIGlmIG5vdCBvcGVyYWNqYToNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6ICdOaWUgem5hbGV6aW9ubyBha3R5d25laiBvcGVyYWNqaSBvIHBvZGFueW0gSUQuJ30pLCA0MDQNCg0KICAgICAgICBpZF9jeXN0ZXJueSA9IG9wZXJhY2phWydpZF9zcHJ6ZXR1X3pyb2Rsb3dlZ28nXQ0KICAgICAgICBpZF9jZWx1ID0gb3BlcmFjamFbJ2lkX3NwcnpldHVfZG9jZWxvd2VnbyddDQogICAgICAgIA0KICAgICAgICAjIEFrdHVhbGl6YWNqYSBsb2d1IG9wZXJhY2ppDQogICAgICAgIG9waXNfb3BlcmFjamkgPSAoZiJEb3N0YXdjYToge2RhdGFbJ25hendhX2Rvc3Rhd2N5J119LCAiDQogICAgICAgICAgICAgICAgICAgICAgICAgZiJQb2phemQ6IHtkYXRhWyducl9yZWplc3RyYWN5am55J119LCAiDQogICAgICAgICAgICAgICAgICAgICAgICAgZiJEb2t1bWVudDoge2RhdGFbJ25yX2Rva3VtZW50dV9kb3N0YXd5J119LCAiDQogICAgICAgICAgICAgICAgICAgICAgICAgZiJTdXJvd2llYzoge3R5cF9zdXJvd2NhX2Rvc3Rhd3l9LCAiDQogICAgICAgICAgICAgICAgICAgICAgICAgZiJXYWdhOiB7d2FnYV9rZ30ga2ciKQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiVVBEQVRFIG9wZXJhY2plX2xvZyBTRVQgc3RhdHVzX29wZXJhY2ppID0gJ3pha29uY3pvbmEnLCBjemFzX3pha29uY3plbmlhID0gTk9XKCksIGlsb3NjX2tnID0gJXMsIG9waXMgPSAlcyBXSEVSRSBpZCA9ICVzIiwgKHdhZ2Ffa2csIG9waXNfb3BlcmFjamksIGlkX29wZXJhY2ppKSkNCg0KICAgICAgICAjIFp3b2xuaWVuaWUgemFzb2LDs3cgKHphd29yeSkNCiAgICAgICAgc3FsX3puYWpkel96YXdvcnkgPSAiU0VMRUNUIERJU1RJTkNUIHoubmF6d2FfemF3b3J1IEZST00gemF3b3J5IHogSk9JTiBzZWdtZW50eSBzIE9OIHouaWQgPSBzLmlkX3phd29ydSBKT0lOIGxvZ191enl0ZV9zZWdtZW50eSBsdXMgT04gcy5pZCA9IGx1cy5pZF9zZWdtZW50dSBXSEVSRSBsdXMuaWRfb3BlcmFjamlfbG9nID0gJXMiDQogICAgICAgIGN1cnNvci5leGVjdXRlKHNxbF96bmFqZHpfemF3b3J5LCAoaWRfb3BlcmFjamksKSkNCiAgICAgICAgemF3b3J5X2RvX3phbWtuaWVjaWEgPSBbcm93WyduYXp3YV96YXdvcnUnXSBmb3Igcm93IGluIGN1cnNvci5mZXRjaGFsbCgpXQ0KICAgICAgICBpZiB6YXdvcnlfZG9femFta25pZWNpYToNCiAgICAgICAgICAgIHBsYWNlaG9sZGVycyA9ICcsICcuam9pbihbJyVzJ10gKiBsZW4oemF3b3J5X2RvX3phbWtuaWVjaWEpKQ0KICAgICAgICAgICAgc3FsX3phbWtuaWpfemF3b3J5ID0gZiJVUERBVEUgemF3b3J5IFNFVCBzdGFuID0gJ1pBTUtOSUVUWScgV0hFUkUgbmF6d2FfemF3b3J1IElOICh7cGxhY2Vob2xkZXJzfSkiDQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZShzcWxfemFta25pal96YXdvcnksIHphd29yeV9kb196YW1rbmllY2lhKQ0KICAgICAgICANCiAgICAgICAgIyBaQVJaxIREWkFOSUUgUEFSVElBTUkgLSBhbmFsb2dpY3puaWUgZG8gL2Fwb2xsby10cmFuc2Zlci9lbmQNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIlNFTEVDVCAqIEZST00gcGFydGllX3N1cm93Y2EgV0hFUkUgaWRfc3ByemV0dSA9ICVzIExJTUlUIDEiLCAoaWRfY2VsdSwpKQ0KICAgICAgICBwYXJ0aWFfd19jZWx1ID0gY3Vyc29yLmZldGNob25lKCkNCg0KICAgICAgICAjIFN0d29yemVuaWUgIndpcnR1YWxuZWoiIHBhcnRpaSBkbGEgZG9zdGF3eQ0KICAgICAgICB1bmlrYWxueV9rb2RfZG9zdGF3eSA9IGYie3R5cF9zdXJvd2NhX2Rvc3Rhd3kucmVwbGFjZSgnICcsICdfJyl9LXtkdC5ub3codGltZXpvbmUudXRjKS5zdHJmdGltZSgnJVklbSVkXyVIJU0lUycpfS1ET1NUQVdBIg0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIElOU0VSVCBJTlRPIHBhcnRpZV9zdXJvd2NhICh1bmlrYWxueV9rb2QsIG5hendhX3BhcnRpaSwgdHlwX3N1cm93Y2EsIHdhZ2FfYWt0dWFsbmFfa2csIHdhZ2FfcG9jemF0a293YV9rZywgaWRfc3ByemV0dSwgenJvZGxvX3BvY2hvZHplbmlhLCBwb2Nob2R6ZW5pZV9vcGlzLCBzdGF0dXNfcGFydGlpLCBkYXRhX3V0d29yemVuaWEpDQogICAgICAgICAgICBWQUxVRVMgKCVzLCAlcywgJXMsICVzLCAlcywgTlVMTCwgJ2N5c3Rlcm5hJywgJXMsICdBcmNoaXdhbG5hJywgTk9XKCkpDQogICAgICAgICIiIiwgKHVuaWthbG55X2tvZF9kb3N0YXd5LCB1bmlrYWxueV9rb2RfZG9zdGF3eSwgdHlwX3N1cm93Y2FfZG9zdGF3eSwgd2FnYV9rZywgd2FnYV9rZywgb3Bpc19vcGVyYWNqaSkpDQogICAgICAgIGlkX3BhcnRpaV96X2Rvc3Rhd3kgPSBjdXJzb3IubGFzdHJvd2lkDQoNCiAgICAgICAgaWYgcGFydGlhX3dfY2VsdToNCiAgICAgICAgICAgICMgTWllc3phbmllIHogaXN0bmllasSFY8SFIHBhcnRpxIUNCiAgICAgICAgICAgICMgMS4gQXJjaGl3aXp1aiBzdGFyxIUgcGFydGnEmSB3IGNlbHUNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCJVUERBVEUgcGFydGllX3N1cm93Y2EgU0VUIGlkX3NwcnpldHUgPSBOVUxMLCBzdGF0dXNfcGFydGlpID0gJ0FyY2hpd2FsbmEnIFdIRVJFIGlkID0gJXMiLCAocGFydGlhX3dfY2VsdVsnaWQnXSwpKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIDIuIFV0d8Ozcnogbm93eSB0eXAgbWllc3phbmlueQ0KICAgICAgICAgICAgdHlwX3N1cm93Y2Ffd19jZWx1ID0gcGFydGlhX3dfY2VsdVsndHlwX3N1cm93Y2EnXQ0KICAgICAgICAgICAgc2tsYWRuaWtpX3R5cG93ID0gc2V0KCkNCiAgICAgICAgICAgIGlmIHR5cF9zdXJvd2NhX3dfY2VsdS5zdGFydHN3aXRoKCdNSVgoJyk6DQogICAgICAgICAgICAgICAgaXN0bmllamFjZV90eXB5ID0gdHlwX3N1cm93Y2Ffd19jZWx1WzQ6LTFdLnNwbGl0KCcsJykNCiAgICAgICAgICAgICAgICBza2xhZG5pa2lfdHlwb3cudXBkYXRlKHQuc3RyaXAoKSBmb3IgdCBpbiBpc3RuaWVqYWNlX3R5cHkpDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHNrbGFkbmlraV90eXBvdy5hZGQodHlwX3N1cm93Y2Ffd19jZWx1KQ0KICAgICAgICAgICAgc2tsYWRuaWtpX3R5cG93LmFkZCh0eXBfc3Vyb3djYV9kb3N0YXd5KQ0KICAgICAgICAgICAgbm93eV90eXBfbWllc3phbmlueSA9IGYiTUlYKHsnLCAnLmpvaW4oc29ydGVkKGxpc3Qoc2tsYWRuaWtpX3R5cG93KSkpfSkiDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgMy4gVXR3w7NyeiBub3fEhSBwYXJ0acSZIHd5bmlrb3fEhSAobWllc3phbmluxJkpDQogICAgICAgICAgICBub3dhX3dhZ2EgPSBmbG9hdChwYXJ0aWFfd19jZWx1Wyd3YWdhX2FrdHVhbG5hX2tnJ10pICsgd2FnYV9rZw0KICAgICAgICAgICAgdW5pa2Fsbnlfa29kX21peCA9IGYiTUlYLXtkdC5ub3codGltZXpvbmUudXRjKS5zdHJmdGltZSgnJVklbSVkXyVIJU0lUycpfSINCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgIElOU0VSVCBJTlRPIHBhcnRpZV9zdXJvd2NhICh1bmlrYWxueV9rb2QsIG5hendhX3BhcnRpaSwgdHlwX3N1cm93Y2EsIHdhZ2FfYWt0dWFsbmFfa2csIHdhZ2FfcG9jemF0a293YV9rZywgaWRfc3ByemV0dSwgc3RhdHVzX3BhcnRpaSwgdHlwX3RyYW5zZm9ybWFjamkpDQogICAgICAgICAgICAgICAgVkFMVUVTICglcywgJXMsICVzLCAlcywgJXMsICVzLCAnU3Vyb3d5IHcgcmVha3RvcnplJywgJ01JRVNaQU5JRScpDQogICAgICAgICAgICAiIiIsICh1bmlrYWxueV9rb2RfbWl4LCB1bmlrYWxueV9rb2RfbWl4LCBub3d5X3R5cF9taWVzemFuaW55LCBub3dhX3dhZ2EsIG5vd2Ffd2FnYSwgaWRfY2VsdSkpDQogICAgICAgICAgICBpZF9ub3dlal9wYXJ0aWkgPSBjdXJzb3IubGFzdHJvd2lkDQoNCiAgICAgICAgICAgICMgNC4gWmFwaXN6IHNrxYJhZG5pa2kgdyBgcGFydGllX3NrbGFkbmlraWANCiAgICAgICAgICAgIHNrbGFkbmlraSA9IFsNCiAgICAgICAgICAgICAgICAoaWRfbm93ZWpfcGFydGlpLCBwYXJ0aWFfd19jZWx1WydpZCddLCBwYXJ0aWFfd19jZWx1Wyd3YWdhX2FrdHVhbG5hX2tnJ10pLA0KICAgICAgICAgICAgICAgIChpZF9ub3dlal9wYXJ0aWksIGlkX3BhcnRpaV96X2Rvc3Rhd3ksIHdhZ2Ffa2cpDQogICAgICAgICAgICBdDQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZW1hbnkoIklOU0VSVCBJTlRPIHBhcnRpZV9za2xhZG5pa2kgKGlkX3BhcnRpaV93eW5pa293ZWosIGlkX3BhcnRpaV9za2xhZG93ZWosIHdhZ2Ffc2tsYWRvd2Ffa2cpIFZBTFVFUyAoJXMsICVzLCAlcykiLCBza2xhZG5pa2kpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICAjIENlbCBqZXN0IHB1c3R5LCB3acSZYyBwbyBwcm9zdHUgInByemVub3NpbXkiIHBhcnRpxJkgeiBkb3N0YXd5IGRvIGNlbHUNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCJVUERBVEUgcGFydGllX3N1cm93Y2EgU0VUIGlkX3NwcnpldHUgPSAlcywgc3RhdHVzX3BhcnRpaSA9ICdTdXJvd3kgdyByZWFrdG9yemUnIFdIRVJFIGlkID0gJXMiLCAoaWRfY2VsdSwgaWRfcGFydGlpX3pfZG9zdGF3eSkpDQoNCiAgICAgICAgIyBBa3R1YWxpemFjamEgc3RhbnUgc3ByesSZdHUNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIlVQREFURSBzcHJ6ZXQgU0VUIHN0YW5fc3ByemV0dSA9ICdQdXN0eScgV0hFUkUgaWQgPSAlcyIsIChpZF9jeXN0ZXJueSwpKQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiVVBEQVRFIHNwcnpldCBTRVQgc3Rhbl9zcHJ6ZXR1ID0gJ1phdGFua293YW55JyBXSEVSRSBpZCA9ICVzIiwgKGlkX2NlbHUsKSkNCiAgICAgICAgDQogICAgICAgIGNvbm4uY29tbWl0KCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogJ09wZXJhY2phIHpha2/FhGN6b25hIHBvbXnFm2xuaWUuIFV0d29yem9ubyBpIHByemV0d29yem9ubyBub3fEhSBwYXJ0acSZIHN1cm93Y2EuJ30pLCAyMDANCg0KICAgIGV4Y2VwdCBteXNxbC5jb25uZWN0b3IuRXJyb3IgYXMgZXJyOg0KICAgICAgICBpZiBjb25uOiBjb25uLnJvbGxiYWNrKCkNCiAgICAgICAgIyBEb2RhaiB3acSZY2VqIHN6Y3plZ8OzxYLDs3cgZG8gbG9ndSBixYLEmWR1DQogICAgICAgIHRyYWNlYmFjay5wcmludF9leGMoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiBmJ0LFgsSFZCBiYXp5IGRhbnljaDoge3N0cihlcnIpfSd9KSwgNTAwDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBpZiBjb25uOiBjb25uLnJvbGxiYWNrKCkNCiAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6IGYnV3lzdMSFcGnFgiBuaWVvY3pla2l3YW55IGLFgsSFZDoge3N0cihlKX0nfSksIDUwMA0KICAgIGZpbmFsbHk6DQogICAgICAgIGlmICdjdXJzb3InIGluIGxvY2FscygpIGFuZCBjdXJzb3I6IGN1cnNvci5jbG9zZSgpDQogICAgICAgIGlmIGNvbm4gYW5kIGNvbm4uaXNfY29ubmVjdGVkKCk6IGNvbm4uY2xvc2UoKQ0KDQpAYnAucm91dGUoJy9yb3p0YW5rdWotY3lzdGVybmUvYW51bHVqJywgbWV0aG9kcz1bJ1BPU1QnXSkNCg0KZGVmIGFudWx1al9jeXN0ZXJuYV90cmFuc2ZlcigpOg0KICAgICIiIg0KICAgIEFudWx1amUgYWt0eXduxIUgb3BlcmFjasSZIHJvenRhbmtvd2FuaWEgY3lzdGVybnkuDQogICAgV3ltYWdhOiBpZF9vcGVyYWNqaS4NCiAgICAiIiINCiAgICBkYXRhID0gcmVxdWVzdC5nZXRfanNvbigpDQogICAgaWYgbm90IGRhdGEgb3IgJ2lkX29wZXJhY2ppJyBub3QgaW4gZGF0YToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6ICdCcmFrIHd5bWFnYW5lZ28gcG9sYTogaWRfb3BlcmFjamknfSksIDQwMA0KDQogICAgaWRfb3BlcmFjamkgPSBkYXRhWydpZF9vcGVyYWNqaSddDQogICAgY29ubiA9IE5vbmUNCiAgICB0cnk6DQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCg0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiU0VMRUNUICogRlJPTSBvcGVyYWNqZV9sb2cgV0hFUkUgaWQgPSAlcyBBTkQgc3RhdHVzX29wZXJhY2ppID0gJ2FrdHl3bmEnIiwgKGlkX29wZXJhY2ppLCkpDQogICAgICAgIG9wZXJhY2phID0gY3Vyc29yLmZldGNob25lKCkNCiAgICAgICAgaWYgbm90IG9wZXJhY2phOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6ICdOaWUgem5hbGV6aW9ubyBha3R5d25laiBvcGVyYWNqaSBvIHBvZGFueW0gSUQuJ30pLCA0MDQNCg0KICAgICAgICB3cml0ZV9jdXJzb3IgPSBjb25uLmN1cnNvcigpDQogICAgICAgIHdyaXRlX2N1cnNvci5leGVjdXRlKCJVUERBVEUgb3BlcmFjamVfbG9nIFNFVCBzdGF0dXNfb3BlcmFjamkgPSAnYW51bG93YW5hJywgY3phc196YWtvbmN6ZW5pYSA9IE5PVygpIFdIRVJFIGlkID0gJXMiLCAoaWRfb3BlcmFjamksKSkNCg0KICAgICAgICAjIFp3b2xuaWogemFzb2J5ICh6YW1rbmlqIHphd29yeSkNCiAgICAgICAgc3FsX3puYWpkel96YXdvcnkgPSAiIiINCiAgICAgICAgICAgIFNFTEVDVCBESVNUSU5DVCB6Lm5hendhX3phd29ydSBGUk9NIHphd29yeSB6DQogICAgICAgICAgICBKT0lOIHNlZ21lbnR5IHMgT04gei5pZCA9IHMuaWRfemF3b3J1DQogICAgICAgICAgICBKT0lOIGxvZ191enl0ZV9zZWdtZW50eSBsdXMgT04gcy5pZCA9IGx1cy5pZF9zZWdtZW50dQ0KICAgICAgICAgICAgV0hFUkUgbHVzLmlkX29wZXJhY2ppX2xvZyA9ICVzDQogICAgICAgICIiIg0KICAgICAgICBjdXJzb3IuZXhlY3V0ZShzcWxfem5hamR6X3phd29yeSwgKGlkX29wZXJhY2ppLCkpDQogICAgICAgIHphd29yeV9kb196YW1rbmllY2lhID0gW3Jvd1snbmF6d2FfemF3b3J1J10gZm9yIHJvdyBpbiBjdXJzb3IuZmV0Y2hhbGwoKV0NCiAgICAgICAgaWYgemF3b3J5X2RvX3phbWtuaWVjaWE6DQogICAgICAgICAgICBwbGFjZWhvbGRlcnMgPSAnLCAnLmpvaW4oWyclcyddICogbGVuKHphd29yeV9kb196YW1rbmllY2lhKSkNCiAgICAgICAgICAgIHNxbF96YW1rbmlqX3phd29yeSA9IGYiVVBEQVRFIHphd29yeSBTRVQgc3RhbiA9ICdaQU1LTklFVFknIFdIRVJFIG5hendhX3phd29ydSBJTiAoe3BsYWNlaG9sZGVyc30pIg0KICAgICAgICAgICAgd3JpdGVfY3Vyc29yLmV4ZWN1dGUoc3FsX3phbWtuaWpfemF3b3J5LCB6YXdvcnlfZG9femFta25pZWNpYSkNCg0KICAgICAgICAjIFByenl3csOzxIcgc3RhbiBzcHJ6xJl0dSBkbyAnUHVzdHknDQogICAgICAgIGlkX3pyb2RsYSA9IG9wZXJhY2phWydpZF9zcHJ6ZXR1X3pyb2Rsb3dlZ28nXQ0KICAgICAgICBpZF9jZWx1ID0gb3BlcmFjamFbJ2lkX3NwcnpldHVfZG9jZWxvd2VnbyddDQogICAgICAgIHdyaXRlX2N1cnNvci5leGVjdXRlKCJVUERBVEUgc3ByemV0IFNFVCBzdGFuX3NwcnpldHUgPSAnUHVzdHknIFdIRVJFIGlkID0gJXMiLCAoaWRfenJvZGxhLCkpDQogICAgICAgIHdyaXRlX2N1cnNvci5leGVjdXRlKCJVUERBVEUgc3ByemV0IFNFVCBzdGFuX3NwcnpldHUgPSAnUHVzdHknIFdIRVJFIGlkID0gJXMiLCAoaWRfY2VsdSwpKQ0KDQogICAgICAgIGNvbm4uY29tbWl0KCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydzdWNjZXNzJzogVHJ1ZSwgJ21lc3NhZ2UnOiBmJ09wZXJhY2phIHtpZF9vcGVyYWNqaX0gem9zdGHFgmEgYW51bG93YW5hLid9KQ0KDQogICAgZXhjZXB0IG15c3FsLmNvbm5lY3Rvci5FcnJvciBhcyBlcnI6DQogICAgICAgIGlmIGNvbm46IGNvbm4ucm9sbGJhY2soKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogZidCxYLEhWQgYmF6eSBkYW55Y2g6IHtlcnJ9J30pLCA1MDANCiAgICBmaW5hbGx5Og0KICAgICAgICBpZiAnY3Vyc29yJyBpbiBsb2NhbHMoKSBhbmQgY3Vyc29yOiBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBpZiAnd3JpdGVfY3Vyc29yJyBpbiBsb2NhbHMoKSBhbmQgd3JpdGVfY3Vyc29yOiB3cml0ZV9jdXJzb3IuY2xvc2UoKQ0KICAgICAgICBpZiBjb25uIGFuZCBjb25uLmlzX2Nvbm5lY3RlZCgpOiBjb25uLmNsb3NlKCk=
  - path: app//pathfinder_service.py
    content: IyBhcHAvcGF0aGZpbmRlcl9zZXJ2aWNlLnB5DQpmcm9tIC5leHRlbnNpb25zIGltcG9ydCBkYg0KaW1wb3J0IG5ldHdvcmt4IGFzIG54DQojZnJvbSAuZGIgaW1wb3J0IGdldF9kYl9jb25uZWN0aW9uICAjIEltcG9ydHVqZW15IGZ1bmtjasSZIGRvIHBvxYLEhWN6ZW5pYSB6IGJhesSFIGRhbnljaA0KI2ltcG9ydCBteXNxbC5jb25uZWN0b3IgIyBBZGRlZCBmb3IgbXlzcWwuY29ubmVjdG9yLkVycm9yDQpmcm9tIC5tb2RlbHMgaW1wb3J0ICoNCg0KDQpjbGFzcyBQYXRoRmluZGVyOg0KICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhcHA9Tm9uZSk6DQogICAgICAgIHNlbGYuZ3JhcGggPSBueC5EaUdyYXBoKCkNCiAgICAgICAgaWYgYXBwIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgc2VsZi5pbml0X2FwcChhcHApDQoNCiAgICBkZWYgaW5pdF9hcHAoc2VsZiwgYXBwKToNCiAgICAgICAgIiIiTWV0b2RhIGRvIGluaWNqYWxpemFjamkgc2Vyd2lzdSB3IGtvbnRla8WbY2llIGFwbGlrYWNqaSBGbGFzay4iIiINCiAgICAgICAgaW1wb3J0IHN5cw0KICAgICAgICBwcmludCgiSU5GTzogSW5pY2phbGl6YWNqYSBQYXRoRmluZGVyLi4uIikNCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQogICAgICAgICMgUHJ6ZWNob3d1amVteSByZWZlcmVuY2rEmSBkbyBhcGxpa2FjamksIGFieSBtaWXEhyBkb3N0xJlwIGRvIGtvbmZpZ3VyYWNqaQ0KICAgICAgICBzZWxmLmFwcCA9IGFwcA0KICAgICAgICAjIFdjenl0dWplbXkgdG9wb2xvZ2nEmSB1xbx5d2FqxIVjIGtvbnRla3N0dSBhcGxpa2FjamkNCiAgICAgICAgd2l0aCBhcHAuYXBwX2NvbnRleHQoKToNCiAgICAgICAgICAgIHNlbGYuX2xvYWRfdG9wb2xvZ3koKQ0KDQogICAgIyBkZWYgX2dldF9kYl9jb25uZWN0aW9uKHNlbGYpOg0KICAgICMgICAgICIiIlByeXdhdG5hIG1ldG9kYSBkbyDFgsSFY3plbmlhIHNpxJkgeiBiYXrEhSwgdcW8eXdhasSFY2Ega29uZmlndXJhY2ppIHogYXBsaWthY2ppLiIiIg0KICAgICMgICAgIHJldHVybiBnZXRfZGJfY29ubmVjdGlvbigpDQoNCiAgICBkZWYgX2xvYWRfdG9wb2xvZ3koc2VsZik6DQogICAgICAgICIiIldjenl0dWplIG1hcMSZIGluc3RhbGFjamkgeiBiYXp5IGRhbnljaCBwcnp5IHXFvHljaXUgU1FMQWxjaGVteSBPUk0uIiIiDQogICAgICAgIHByaW50KCJJTkZPOiBSb3pwb2N6eW5hbmllIMWCYWRvd2FuaWEgdG9wb2xvZ2lpICh3ZXJzamEgT1JNKS4uLiIpDQogICAgICAgIA0KICAgICAgICAjIEN6eXN6Y3plbmllIGdyYWZ1IHByemVkIHBvbm93bnltIHphxYJhZG93YW5pZW0NCiAgICAgICAgc2VsZi5ncmFwaC5jbGVhcigpDQoNCiAgICAgICAgIyBQb2JpZXJhbmllIHBvcnTDs3cNCiAgICAgICAgcG9ydHlfcSA9IGRiLnNlbGVjdChQb3J0eVNwcnpldHUubmF6d2FfcG9ydHUpDQogICAgICAgIHBvcnR5ID0gZGIuc2Vzc2lvbi5leGVjdXRlKHBvcnR5X3EpLnNjYWxhcnMoKS5hbGwoKQ0KICAgICAgICBmb3IgbmF6d2FfcG9ydHUgaW4gcG9ydHk6DQogICAgICAgICAgICBzZWxmLmdyYXBoLmFkZF9ub2RlKG5hendhX3BvcnR1KQ0KDQogICAgICAgICMgUG9iaWVyYW5pZSB3xJl6xYLDs3cNCiAgICAgICAgd2V6bHlfcSA9IGRiLnNlbGVjdChXZXpseVJ1cm9jaWFndS5uYXp3YV93ZXpsYSkNCiAgICAgICAgd2V6bHkgPSBkYi5zZXNzaW9uLmV4ZWN1dGUod2V6bHlfcSkuc2NhbGFycygpLmFsbCgpDQogICAgICAgIGZvciBuYXp3YV93ZXpsYSBpbiB3ZXpseToNCiAgICAgICAgICAgIHNlbGYuZ3JhcGguYWRkX25vZGUobmF6d2Ffd2V6bGEpDQoNCiAgICAgICAgIyBQb2JpZXJhbmllIHNlZ21lbnTDs3cgeiByZWxhY2phbWkNCiAgICAgICAgc2VnbWVudHlfcSA9IGRiLnNlbGVjdChTZWdtZW50eSkNCiAgICAgICAgc2VnbWVudHkgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoc2VnbWVudHlfcSkuc2NhbGFycygpLmFsbCgpDQogICAgICAgIA0KICAgICAgICBmb3Igc2VnbWVudCBpbiBzZWdtZW50eToNCiAgICAgICAgICAgIHB1bmt0X3N0YXJ0b3d5ID0gc2VnbWVudC5wb3J0eV9zcHJ6ZXR1Xy5uYXp3YV9wb3J0dSBpZiBzZWdtZW50LnBvcnR5X3NwcnpldHVfIGVsc2UgKHNlZ21lbnQud2V6bHlfcnVyb2NpYWd1Xy5uYXp3YV93ZXpsYSBpZiBzZWdtZW50Lndlemx5X3J1cm9jaWFndV8gZWxzZSBOb25lKQ0KICAgICAgICAgICAgcHVua3Rfa29uY293eSA9IHNlZ21lbnQucG9ydHlfc3ByemV0dS5uYXp3YV9wb3J0dSBpZiBzZWdtZW50LnBvcnR5X3NwcnpldHUgZWxzZSAoc2VnbWVudC53ZXpseV9ydXJvY2lhZ3UubmF6d2Ffd2V6bGEgaWYgc2VnbWVudC53ZXpseV9ydXJvY2lhZ3UgZWxzZSBOb25lKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiBwdW5rdF9zdGFydG93eSBhbmQgcHVua3Rfa29uY293eToNCiAgICAgICAgICAgICAgICBzZWxmLmdyYXBoLmFkZF9lZGdlKA0KICAgICAgICAgICAgICAgICAgICBwdW5rdF9zdGFydG93eSwgDQogICAgICAgICAgICAgICAgICAgIHB1bmt0X2tvbmNvd3ksIA0KICAgICAgICAgICAgICAgICAgICBzZWdtZW50X25hbWU9c2VnbWVudC5uYXp3YV9zZWdtZW50dSwNCiAgICAgICAgICAgICAgICAgICAgdmFsdmVfbmFtZT1zZWdtZW50Lnphd29yeS5uYXp3YV96YXdvcnUNCiAgICAgICAgICAgICAgICApDQogICAgICAgIA0KICAgICAgICBwcmludCgiSU5GTzogVG9wb2xvZ2lhIGluc3RhbGFjamkgemHFgmFkb3dhbmEgKE9STSksIGdyYWYgemJ1ZG93YW55LiIpDQoNCg0KICAgIGRlZiBmaW5kX3BhdGgoc2VsZiwgc3RhcnRfbm9kZSwgZW5kX25vZGUsIG9wZW5fdmFsdmVzPU5vbmUpOg0KICAgICAgICAiIiJabmFqZHVqZSBuYWprcsOzdHN6xIUgxZtjaWXFvGvEmSBtacSZZHp5IHfEmXrFgmFtaSIiIg0KICAgICAgICBwcmludChmIkRFQlVHOiBQYXRoRmluZGVyLmZpbmRfcGF0aCBjYWxsZWQgd2l0aCBzdGFydD0ne3N0YXJ0X25vZGV9JywgZW5kPSd7ZW5kX25vZGV9JyIpDQogICAgICAgIA0KICAgICAgICAjIEplxZtsaSBuaWUgcG9kYW5vIHN0YW7Ds3cgemF3b3LDs3csIHBvYmllcnogeiBiYXp5IGx1YiB1xbx5aiB3c3p5c3RraWNoDQogICAgICAgIGlmIG9wZW5fdmFsdmVzIGlzIE5vbmU6DQogICAgICAgICAgICBvcGVuX3ZhbHZlcyA9IHNlbGYuX2dldF9vcGVuX3ZhbHZlcygpDQogICAgICAgIA0KICAgICAgICBwcmludChmIkRFQlVHOiBVc2luZyBvcGVuX3ZhbHZlczoge29wZW5fdmFsdmVzWzo1XX0uLi4gKHRvdGFsOiB7bGVuKG9wZW5fdmFsdmVzKX0pIikNCiAgICAgICAgDQogICAgICAgICMgU3ByYXdkxbogY3p5IHfEmXrFgnkgaXN0bmllasSFIHcgZ3JhZmllDQogICAgICAgIGlmIHN0YXJ0X25vZGUgbm90IGluIHNlbGYuZ3JhcGgubm9kZXMoKToNCiAgICAgICAgICAgIHByaW50KGYiRVJST1I6IFN0YXJ0IG5vZGUgJ3tzdGFydF9ub2RlfScgbm90IGZvdW5kIGluIGdyYXBoIikNCiAgICAgICAgICAgIHByaW50KGYiQXZhaWxhYmxlIG5vZGVzOiB7bGlzdChzZWxmLmdyYXBoLm5vZGVzKCkpWzoxMF19Li4uIikNCiAgICAgICAgICAgIHJldHVybiBOb25lDQogICAgICAgICAgICANCiAgICAgICAgaWYgZW5kX25vZGUgbm90IGluIHNlbGYuZ3JhcGgubm9kZXMoKToNCiAgICAgICAgICAgIHByaW50KGYiRVJST1I6IEVuZCBub2RlICd7ZW5kX25vZGV9JyBub3QgZm91bmQgaW4gZ3JhcGgiKQ0KICAgICAgICAgICAgcHJpbnQoZiJBdmFpbGFibGUgbm9kZXM6IHtsaXN0KHNlbGYuZ3JhcGgubm9kZXMoKSlbOjEwXX0uLi4iKQ0KICAgICAgICAgICAgcmV0dXJuIE5vbmUNCiAgICAgICAgDQogICAgICAgIHRlbXBfZ3JhcGggPSBzZWxmLmdyYXBoLmNvcHkoKQ0KICAgICAgICBwcmludChmIkRFQlVHOiBUZW1wIGdyYXBoIGhhcyB7bGVuKHRlbXBfZ3JhcGgubm9kZXMoKSl9IG5vZGVzIGFuZCB7bGVuKHRlbXBfZ3JhcGguZWRnZXMoKSl9IGVkZ2VzIikNCiAgICAgICAgDQogICAgICAgIGVkZ2VzX3RvX3JlbW92ZSA9IFtdDQogICAgICAgIGZvciB1LCB2LCBkYXRhIGluIHRlbXBfZ3JhcGguZWRnZXMoZGF0YT1UcnVlKToNCiAgICAgICAgICAgIGlmIGRhdGFbJ3ZhbHZlX25hbWUnXSBub3QgaW4gb3Blbl92YWx2ZXM6DQogICAgICAgICAgICAgICAgZWRnZXNfdG9fcmVtb3ZlLmFwcGVuZCgodSwgdikpDQogICAgICAgIA0KICAgICAgICBwcmludChmIkRFQlVHOiBSZW1vdmluZyB7bGVuKGVkZ2VzX3RvX3JlbW92ZSl9IGVkZ2VzIGR1ZSB0byBjbG9zZWQgdmFsdmVzIikNCiAgICAgICAgdGVtcF9ncmFwaC5yZW1vdmVfZWRnZXNfZnJvbShlZGdlc190b19yZW1vdmUpDQogICAgICAgIHByaW50KGYiREVCVUc6IEFmdGVyIHJlbW92YWw6IHtsZW4odGVtcF9ncmFwaC5lZGdlcygpKX0gZWRnZXMgcmVtYWluIikNCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBwYXRoX25vZGVzID0gbnguc2hvcnRlc3RfcGF0aCh0ZW1wX2dyYXBoLCBzb3VyY2U9c3RhcnRfbm9kZSwgdGFyZ2V0PWVuZF9ub2RlKQ0KICAgICAgICAgICAgcHJpbnQoZiJERUJVRzogRm91bmQgcGF0aCBub2Rlczoge3BhdGhfbm9kZXN9IikNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcGF0aF9zZWdtZW50cyA9IFtdDQogICAgICAgICAgICBmb3IgaSBpbiByYW5nZShsZW4ocGF0aF9ub2RlcykgLSAxKToNCiAgICAgICAgICAgICAgICBlZGdlX2RhdGEgPSBzZWxmLmdyYXBoLmdldF9lZGdlX2RhdGEocGF0aF9ub2Rlc1tpXSwgcGF0aF9ub2Rlc1tpKzFdKQ0KICAgICAgICAgICAgICAgIGlmIGVkZ2VfZGF0YToNCiAgICAgICAgICAgICAgICAgICAgcGF0aF9zZWdtZW50cy5hcHBlbmQoZWRnZV9kYXRhWydzZWdtZW50X25hbWUnXSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcHJpbnQoZiJERUJVRzogUGF0aCBzZWdtZW50czoge3BhdGhfc2VnbWVudHN9IikNCiAgICAgICAgICAgIHJldHVybiBwYXRoX3NlZ21lbnRzDQogICAgICAgIGV4Y2VwdCAobnguTmV0d29ya1hOb1BhdGgsIG54Lk5vZGVOb3RGb3VuZCkgYXMgZToNCiAgICAgICAgICAgIHByaW50KGYiREVCVUc6IE5vIHBhdGggZm91bmQgLSB7dHlwZShlKS5fX25hbWVfX306IHtlfSIpDQogICAgICAgICAgICByZXR1cm4gTm9uZQ0KICAgIA0KICAgIGRlZiBfZ2V0X29wZW5fdmFsdmVzKHNlbGYpOg0KICAgICAgICAiIiJQb2JpZXJhIGxpc3TEmSBvdHdhcnR5Y2ggemF3b3LDs3cgeiBiYXp5IGRhbnljaCAod2Vyc2phIE9STSkuIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgICMgVcW8eXdhbXkgc2VzamkgaSBtb2RlbHUgWmF3b3J5IGRvIHpidWRvd2FuaWEgemFweXRhbmlhDQogICAgICAgICAgICBxdWVyeSA9IGRiLnNlbGVjdChaYXdvcnkubmF6d2FfemF3b3J1KS53aGVyZShaYXdvcnkuc3RhbiA9PSAnT1RXQVJUWScpDQogICAgICAgICAgICBvcGVuX3ZhbHZlcyA9IGRiLnNlc3Npb24uZXhlY3V0ZShxdWVyeSkuc2NhbGFycygpLmFsbCgpDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgTG9naWthIGF3YXJ5am5hIHBvem9zdGFqZSBiZXogem1pYW4sIGFsZSByw7N3bmllxbwgdcW8eXdhIE9STQ0KICAgICAgICAgICAgaWYgbm90IG9wZW5fdmFsdmVzOg0KICAgICAgICAgICAgICAgIHByaW50KCJXQVJOSU5HOiBCcmFrIG90d2FydHljaCB6YXdvcsOzdyB3IGJhemllLiBVxbx5d2FtIHdzenlzdGtpY2ggemF3b3LDs3cgZGxhIHRlc3TDs3cgUGF0aEZpbmRlci4iKQ0KICAgICAgICAgICAgICAgIHF1ZXJ5X2FsbCA9IGRiLnNlbGVjdChaYXdvcnkubmF6d2FfemF3b3J1KQ0KICAgICAgICAgICAgICAgIG9wZW5fdmFsdmVzID0gZGIuc2Vzc2lvbi5leGVjdXRlKHF1ZXJ5X2FsbCkuc2NhbGFycygpLmFsbCgpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gb3Blbl92YWx2ZXMNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgcHJpbnQoZiJCxYLEhWQgcG9kY3phcyBwb2JpZXJhbmlhIHN0YW7Ds3cgemF3b3LDs3cgKE9STSk6IHtlfSIpDQogICAgICAgICAgICAjIFcgcHJ6eXBhZGt1IGLFgsSZZHUsIHphY2hvd2FuaWUgYXdhcnlqbmUgcsOzd25pZcW8IHXFvHl3YSBPUk0NCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBxdWVyeV9hbGwgPSBkYi5zZWxlY3QoWmF3b3J5Lm5hendhX3phd29ydSkNCiAgICAgICAgICAgICAgICByZXR1cm4gZGIuc2Vzc2lvbi5leGVjdXRlKHF1ZXJ5X2FsbCkuc2NhbGFycygpLmFsbCgpDQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4Og0KICAgICAgICAgICAgICAgIHByaW50KGYiQsWCxIVkIHBvZGN6YXMgcG9iaWVyYW5pYSB3c3p5c3RraWNoIHphd29yw7N3IChPUk0pOiB7ZXh9IikNCiAgICAgICAgICAgICAgICByZXR1cm4gW10NCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgcmVsZWFzZV9wYXRoKHphd29yeV9uYW1lcz1Ob25lLCBzZWdtZW50X25hbWVzPU5vbmUpOg0KICAgICAgICAiIiJad2FsbmlhIHphc29ieSBwbyB6YWtvxYRjemVuaXUgb3BlcmFjamkgLSB6YW15a2EgemF3b3J5ICh3ZXJzamEgT1JNKS4iIiINCiAgICAgICAgaWYgbm90IHphd29yeV9uYW1lczoNCiAgICAgICAgICAgIHByaW50KCJJTkZPOiBCcmFrIHphd29yw7N3IGRvIHp3b2xuaWVuaWEgdyByZWxlYXNlX3BhdGguIikNCiAgICAgICAgICAgIHJldHVybg0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2UoemF3b3J5X25hbWVzLCBzdHIpOg0KICAgICAgICAgICAgICAgIHphd29yeV9uYW1lcyA9IHphd29yeV9uYW1lcy5zcGxpdCgnLCcpDQoNCiAgICAgICAgICAgIGlmIHphd29yeV9uYW1lczoNCiAgICAgICAgICAgICAgICAjIFR3b3J6eW15IHphcHl0YW5pZSBVUERBVEUgemEgcG9tb2PEhSBza8WCYWRuaSBPUk0NCiAgICAgICAgICAgICAgICBzdG10ID0gZGIudXBkYXRlKFphd29yeSkud2hlcmUoDQogICAgICAgICAgICAgICAgICAgIFphd29yeS5uYXp3YV96YXdvcnUuaW5fKHphd29yeV9uYW1lcykNCiAgICAgICAgICAgICAgICApLnZhbHVlcyhzdGFuPSdaQU1LTklFVFknKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICMgV3lrb251amVteSB6YXB5dGFuaWUgaSBjb21taXR1amVteSB0cmFuc2FrY2rEmQ0KICAgICAgICAgICAgICAgIGRiLnNlc3Npb24uZXhlY3V0ZShzdG10KQ0KICAgICAgICAgICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcHJpbnQoZiJJTkZPOiBQb215xZtsbmllIHphbWtuacSZdG8gemF3b3J5IChPUk0pOiB7emF3b3J5X25hbWVzfSIpDQoNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpDQogICAgICAgICAgICBwcmludChmIkLFgsSFZCBiYXp5IGRhbnljaCBwb2RjemFzIHp3YWxuaWFuaWEgxZtjaWXFvGtpIChPUk0pOiB7ZX0iKQ0KICAgICAgICAgICAgcmFpc2UNCg0KIyBVU1VXQU1ZIGdsb2JhbG7EhSBpbnN0YW5jasSZLiBCxJlkemllbXkgasSFIHR3b3J6ecSHIHcgX19pbml0X18ucHkNCiMgcGF0aGZpbmRlcl9pbnN0YW5jZSA9IFBhdGhGaW5kZXIoKQ==
  - path: app//pathfinder_tester.py
    content: IyBhcHAvcGF0aGZpbmRlcl90ZXN0ZXIucHkNCiMgdHlwZTogaWdub3JlDQoNCmltcG9ydCBteXNxbC5jb25uZWN0b3INCmZyb20gZmxhc2sgaW1wb3J0IGN1cnJlbnRfYXBwLCBqc29uaWZ5DQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZSwgdGltZXpvbmUNCmZyb20gLmRiIGltcG9ydCBnZXRfZGJfY29ubmVjdGlvbg0KZnJvbSAucGF0aGZpbmRlcl9zZXJ2aWNlIGltcG9ydCBQYXRoRmluZGVyDQppbXBvcnQganNvbg0KDQpjbGFzcyBQYXRoRmluZGVyVGVzdGVyOg0KICAgICIiIlRlc3RlciBwb8WCxIVjemXFhCBQYXRoRmluZGVyIGRvIGFuYWxpenkgZG9zdMSZcG5vxZtjaSB0cmFzIGkgb3B0eW1hbGl6YWNqaSDFm2NpZcW8ZWsiIiINCiAgICANCiAgICBkZWYgX19pbml0X18oc2VsZik6DQogICAgICAgIHNlbGYucGF0aGZpbmRlciA9IE5vbmUNCiAgICANCiAgICBkZWYgZ2V0X3BhdGhmaW5kZXIoc2VsZik6DQogICAgICAgICIiIlBvYmllcmEgaW5zdGFuY2rEmSBQYXRoRmluZGVyIiIiDQogICAgICAgIGlmIG5vdCBzZWxmLnBhdGhmaW5kZXI6DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5wYXRoZmluZGVyID0gY3VycmVudF9hcHAuZXh0ZW5zaW9ucy5nZXQoJ3BhdGhmaW5kZXInKQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgICMgRmFsbGJhY2sgLSB0d29yemVuaWUgbm93ZWogaW5zdGFuY2ppDQogICAgICAgICAgICAgICAgc2VsZi5wYXRoZmluZGVyID0gUGF0aEZpbmRlcigpDQogICAgICAgIHJldHVybiBzZWxmLnBhdGhmaW5kZXINCiAgICANCiAgICBkZWYgdGVzdF9jb25uZWN0aW9uX2F2YWlsYWJpbGl0eShzZWxmLCBzdGFydF9wb2ludCwgZW5kX3BvaW50LCB2YWx2ZV9zdGF0ZXM9Tm9uZSk6DQogICAgICAgICIiIlRlc3R1amUgZG9zdMSZcG5vxZvEhyBwb8WCxIVjemVuaWEgbWnEmWR6eSBkd29tYSBwdW5rdGFtaSIiIg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBwYXRoZmluZGVyID0gc2VsZi5nZXRfcGF0aGZpbmRlcigpDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgSmXFm2xpIHBvZGFubyBzdGFueSB6YXdvcsOzdywgemFzdG9zdWogamUgdHltY3phc293bw0KICAgICAgICAgICAgb3JpZ2luYWxfc3RhdGVzID0ge30NCiAgICAgICAgICAgIGlmIHZhbHZlX3N0YXRlczoNCiAgICAgICAgICAgICAgICBvcmlnaW5hbF9zdGF0ZXMgPSBzZWxmLl9hcHBseV92YWx2ZV9zdGF0ZXModmFsdmVfc3RhdGVzKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIFpuYWpkxbogxZtjaWXFvGvEmQ0KICAgICAgICAgICAgcGF0aCA9IHBhdGhmaW5kZXIuZmluZF9wYXRoKHN0YXJ0X3BvaW50LCBlbmRfcG9pbnQpDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgUHJ6eXdyw7PEhyBvcnlnaW5hbG5lIHN0YW55IHphd29yw7N3DQogICAgICAgICAgICBpZiB2YWx2ZV9zdGF0ZXM6DQogICAgICAgICAgICAgICAgc2VsZi5fcmVzdG9yZV92YWx2ZV9zdGF0ZXMob3JpZ2luYWxfc3RhdGVzKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiBwYXRoOg0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgICdhdmFpbGFibGUnOiBUcnVlLA0KICAgICAgICAgICAgICAgICAgICAncGF0aCc6IHBhdGgsDQogICAgICAgICAgICAgICAgICAgICdwYXRoX2xlbmd0aCc6IGxlbihwYXRoKSwNCiAgICAgICAgICAgICAgICAgICAgJ3NlZ21lbnRzX3VzZWQnOiBzZWxmLl9nZXRfc2VnbWVudHNfZm9yX3BhdGgocGF0aCksDQogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZiJabmFsZXppb25vIMWbY2llxbxrxJkgeiB7c3RhcnRfcG9pbnR9IGRvIHtlbmRfcG9pbnR9Ig0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAgICAgJ2F2YWlsYWJsZSc6IEZhbHNlLA0KICAgICAgICAgICAgICAgICAgICAncGF0aCc6IE5vbmUsDQogICAgICAgICAgICAgICAgICAgICdwYXRoX2xlbmd0aCc6IDAsDQogICAgICAgICAgICAgICAgICAgICdzZWdtZW50c191c2VkJzogW10sDQogICAgICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZiJCcmFrIGRvc3TEmXBuZWogxZtjaWXFvGtpIHoge3N0YXJ0X3BvaW50fSBkbyB7ZW5kX3BvaW50fSINCiAgICAgICAgICAgICAgICB9DQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgJ2F2YWlsYWJsZSc6IEZhbHNlLA0KICAgICAgICAgICAgICAgICdwYXRoJzogTm9uZSwNCiAgICAgICAgICAgICAgICAnZXJyb3InOiBzdHIoZSksDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBmIkLFgsSFZCBwb2RjemFzIHRlc3Rvd2FuaWEgcG/FgsSFY3plbmlhOiB7c3RyKGUpfSINCiAgICAgICAgICAgIH0NCiAgICANCiAgICBkZWYgZmluZF9hbGxfcGF0aHMoc2VsZiwgc3RhcnRfcG9pbnQsIGVuZF9wb2ludCwgbWF4X3BhdGhzPTUpOg0KICAgICAgICAiIiJabmFqZHVqZSB3c3p5c3RraWUgbW/FvGxpd2UgxZtjaWXFvGtpIG1pxJlkenkgcHVua3RhbWkiIiINCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgcGF0aGZpbmRlciA9IHNlbGYuZ2V0X3BhdGhmaW5kZXIoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIFpuYWpkxbogZ8WCw7N3bsSFIMWbY2llxbxrxJkNCiAgICAgICAgICAgIG1haW5fcGF0aCA9IHBhdGhmaW5kZXIuZmluZF9wYXRoKHN0YXJ0X3BvaW50LCBlbmRfcG9pbnQpDQogICAgICAgICAgICBpZiBub3QgbWFpbl9wYXRoOg0KICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgICdwYXRocyc6IFtdLA0KICAgICAgICAgICAgICAgICAgICAnY291bnQnOiAwLA0KICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZSc6IGYiQnJhayBkb3N0xJlwbnljaCDFm2NpZcW8ZWsgeiB7c3RhcnRfcG9pbnR9IGRvIHtlbmRfcG9pbnR9Ig0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcGF0aHMgPSBbbWFpbl9wYXRoXQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIFNwcsOzYnVqIHpuYWxlxbrEhyBhbHRlcm5hdHl3bmUgxZtjaWXFvGtpIHBvcHJ6ZXogYmxva293YW5pZSBzZWdtZW50w7N3IGfFgsOzd25laiDFm2NpZcW8a2kNCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKDEsIG1heF9wYXRocyk6DQogICAgICAgICAgICAgICAgIyBUeW1jemFzb3dvIHphYmxva3VqIG5pZWt0w7NyZSBzZWdtZW50eSB6IHBvcHJ6ZWRuaWNoIMWbY2llxbxlaw0KICAgICAgICAgICAgICAgIGJsb2NrZWRfc2VnbWVudHMgPSBzZWxmLl9nZXRfc2VnbWVudHNfdG9fYmxvY2socGF0aHMpDQogICAgICAgICAgICAgICAgYWx0X3BhdGggPSBzZWxmLl9maW5kX2FsdGVybmF0aXZlX3BhdGgoc3RhcnRfcG9pbnQsIGVuZF9wb2ludCwgYmxvY2tlZF9zZWdtZW50cykNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBpZiBhbHRfcGF0aCBhbmQgYWx0X3BhdGggbm90IGluIHBhdGhzOg0KICAgICAgICAgICAgICAgICAgICBwYXRocy5hcHBlbmQoYWx0X3BhdGgpDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAncGF0aHMnOiBbDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdwYXRoJzogcGF0aCwNCiAgICAgICAgICAgICAgICAgICAgICAgICdsZW5ndGgnOiBsZW4ocGF0aCksDQogICAgICAgICAgICAgICAgICAgICAgICAnc2VnbWVudHMnOiBzZWxmLl9nZXRfc2VnbWVudHNfZm9yX3BhdGgocGF0aCksDQogICAgICAgICAgICAgICAgICAgICAgICAnZXN0aW1hdGVkX2Nvc3QnOiBzZWxmLl9jYWxjdWxhdGVfcGF0aF9jb3N0KHBhdGgpDQogICAgICAgICAgICAgICAgICAgIH0gZm9yIHBhdGggaW4gcGF0aHMNCiAgICAgICAgICAgICAgICBdLA0KICAgICAgICAgICAgICAgICdjb3VudCc6IGxlbihwYXRocyksDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBmIlpuYWxlemlvbm8ge2xlbihwYXRocyl9IMWbY2llxbxlayB6IHtzdGFydF9wb2ludH0gZG8ge2VuZF9wb2ludH0iDQogICAgICAgICAgICB9DQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgJ3BhdGhzJzogW10sDQogICAgICAgICAgICAgICAgJ2NvdW50JzogMCwNCiAgICAgICAgICAgICAgICAnZXJyb3InOiBzdHIoZSksDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBmIkLFgsSFZCBwb2RjemFzIHd5c3p1a2l3YW5pYSDFm2NpZcW8ZWs6IHtzdHIoZSl9Ig0KICAgICAgICAgICAgfQ0KICAgIA0KICAgIGRlZiBzaW11bGF0ZV92YWx2ZV9zdGF0ZXMoc2VsZiwgdmFsdmVfY2hhbmdlcyk6DQogICAgICAgICIiIlN5bXVsdWplIHptaWFueSBzdGFuw7N3IHphd29yw7N3IGkgdGVzdHVqZSB3cMWCeXcgbmEgZG9zdMSZcG5vxZvEhyB0cmFzIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJlc3VsdHMgPSBbXQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIFphcGlzeiBvcnlnaW5hbG5lIHN0YW55IHphd29yw7N3DQogICAgICAgICAgICBvcmlnaW5hbF9zdGF0ZXMgPSBzZWxmLl9nZXRfY3VycmVudF92YWx2ZV9zdGF0ZXMoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBmb3IgdGVzdF9jYXNlIGluIHZhbHZlX2NoYW5nZXM6DQogICAgICAgICAgICAgICAgdmFsdmVfbmFtZSA9IHRlc3RfY2FzZS5nZXQoJ3ZhbHZlX25hbWUnKQ0KICAgICAgICAgICAgICAgIG5ld19zdGF0ZSA9IHRlc3RfY2FzZS5nZXQoJ25ld19zdGF0ZScpDQogICAgICAgICAgICAgICAgdGVzdF9yb3V0ZXMgPSB0ZXN0X2Nhc2UuZ2V0KCd0ZXN0X3JvdXRlcycsIFtdKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICMgWmFzdG9zdWogem1pYW7EmSBzdGFudSB6YXdvcnUNCiAgICAgICAgICAgICAgICBzZWxmLl9zZXRfdmFsdmVfc3RhdGUodmFsdmVfbmFtZSwgbmV3X3N0YXRlKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICMgUHJ6ZXRlc3R1aiB3cMWCeXcgbmEgdHJhc3kNCiAgICAgICAgICAgICAgICByb3V0ZV9yZXN1bHRzID0gW10NCiAgICAgICAgICAgICAgICBmb3Igcm91dGUgaW4gdGVzdF9yb3V0ZXM6DQogICAgICAgICAgICAgICAgICAgIHN0YXJ0ID0gcm91dGUuZ2V0KCdzdGFydCcpDQogICAgICAgICAgICAgICAgICAgIGVuZCA9IHJvdXRlLmdldCgnZW5kJykNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IHNlbGYudGVzdF9jb25uZWN0aW9uX2F2YWlsYWJpbGl0eShzdGFydCwgZW5kKQ0KICAgICAgICAgICAgICAgICAgICByb3V0ZV9yZXN1bHRzLmFwcGVuZCh7DQogICAgICAgICAgICAgICAgICAgICAgICAncm91dGUnOiBmIntzdGFydH0gLT4ge2VuZH0iLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2F2YWlsYWJsZSc6IHJlc3VsdFsnYXZhaWxhYmxlJ10sDQogICAgICAgICAgICAgICAgICAgICAgICAncGF0aF9sZW5ndGgnOiByZXN1bHRbJ3BhdGhfbGVuZ3RoJ10sDQogICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZSc6IHJlc3VsdFsnbWVzc2FnZSddDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgcmVzdWx0cy5hcHBlbmQoew0KICAgICAgICAgICAgICAgICAgICAndmFsdmVfY2hhbmdlJzogZiJ7dmFsdmVfbmFtZX06IHtuZXdfc3RhdGV9IiwNCiAgICAgICAgICAgICAgICAgICAgJ3JvdXRlX3Jlc3VsdHMnOiByb3V0ZV9yZXN1bHRzLA0KICAgICAgICAgICAgICAgICAgICAnb3ZlcmFsbF9pbXBhY3QnOiBzZWxmLl9hc3Nlc3NfdmFsdmVfaW1wYWN0KHJvdXRlX3Jlc3VsdHMpDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBQcnp5d3LDs8SHIG9yeWdpbmFsbmUgc3RhbnkgemF3b3LDs3cNCiAgICAgICAgICAgIHNlbGYuX3Jlc3RvcmVfdmFsdmVfc3RhdGVzKG9yaWdpbmFsX3N0YXRlcykNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAnc2ltdWxhdGlvbl9yZXN1bHRzJzogcmVzdWx0cywNCiAgICAgICAgICAgICAgICAnbWVzc2FnZSc6IGYiV3lrb25hbm8gc3ltdWxhY2rEmSBkbGEge2xlbih2YWx2ZV9jaGFuZ2VzKX0gem1pYW4gemF3b3LDs3ciDQogICAgICAgICAgICB9DQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICMgVXBld25paiBzacSZLCDFvGUgc3RhbnkgemF3b3LDs3cgc8SFIHByenl3csOzY29uZSBuYXdldCB3IHByenlwYWRrdSBixYLEmWR1DQogICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgc2VsZi5fcmVzdG9yZV92YWx2ZV9zdGF0ZXMob3JpZ2luYWxfc3RhdGVzKQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIHBhc3MNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAnc2ltdWxhdGlvbl9yZXN1bHRzJzogW10sDQogICAgICAgICAgICAgICAgJ2Vycm9yJzogc3RyKGUpLA0KICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZiJCxYLEhWQgcG9kY3phcyBzeW11bGFjamk6IHtzdHIoZSl9Ig0KICAgICAgICAgICAgfQ0KICAgIA0KICAgIGRlZiBhbmFseXplX2NyaXRpY2FsX3ZhbHZlcyhzZWxmKToNCiAgICAgICAgIiIiQW5hbGl6dWplIGtyeXR5Y3puZSB6YXdvcnkgLSBrdMOzcnljaCB6YW1rbmnEmWNpZSBibG9rdWplIG5handpxJljZWogdHJhcyIiIg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIFBvYmllcnogd3N6eXN0a2llIHphd29yeSBpIG1vxbxsaXdlIHRyYXN5DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiU0VMRUNUICogRlJPTSB6YXdvcnkgT1JERVIgQlkgbmF6d2FfemF3b3J1IikNCiAgICAgICAgICAgIHphd29yeSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgUG9iaWVyeiB3c3p5c3RraWUgbW/FvGxpd2UgcHVua3R5IHBvY3rEhXRrb3dlIGkga2/FhGNvd2UNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgIFNFTEVDVCBESVNUSU5DVCBuYXp3YV9wb3J0dSBhcyBwdW5rdCBGUk9NIHBvcnR5X3NwcnpldHUNCiAgICAgICAgICAgICAgICBVTklPTg0KICAgICAgICAgICAgICAgIFNFTEVDVCBESVNUSU5DVCBuYXp3YV93ZXpsYSBhcyBwdW5rdCBGUk9NIHdlemx5X3J1cm9jaWFndQ0KICAgICAgICAgICAgICAgIE9SREVSIEJZIHB1bmt0DQogICAgICAgICAgICAiIiIpDQogICAgICAgICAgICBwdW5rdHkgPSBbcm93WydwdW5rdCddIGZvciByb3cgaW4gY3Vyc29yLmZldGNoYWxsKCldDQogICAgICAgICAgICANCiAgICAgICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgICAgICBjb25uLmNsb3NlKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBBbmFsaXp1aiBrYcW8ZHkgemF3w7NyDQogICAgICAgICAgICBjcml0aWNhbF9hbmFseXNpcyA9IFtdDQogICAgICAgICAgICANCiAgICAgICAgICAgIGZvciB6YXdvciBpbiB6YXdvcnk6DQogICAgICAgICAgICAgICAgaWYgemF3b3JbJ3N0YW4nXSA9PSAnT1RXQVJUWSc6DQogICAgICAgICAgICAgICAgICAgICMgU3ltdWx1aiB6YW1rbmnEmWNpZSB0ZWdvIHphd29ydQ0KICAgICAgICAgICAgICAgICAgICBibG9ja2VkX3JvdXRlcyA9IDANCiAgICAgICAgICAgICAgICAgICAgYWZmZWN0ZWRfcm91dGVzID0gW10NCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICMgVHltY3phc293byB6YW1rbmlqIHphd8Ozcg0KICAgICAgICAgICAgICAgICAgICBzZWxmLl9zZXRfdmFsdmVfc3RhdGUoemF3b3JbJ25hendhX3phd29ydSddLCAnWkFNS05JRVRZJykNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgICMgVGVzdHVqIGxvc293ZSBwYXJ5IHB1bmt0w7N3DQogICAgICAgICAgICAgICAgICAgIGZvciBpLCBzdGFydCBpbiBlbnVtZXJhdGUocHVua3R5WzoxMF0pOiAgIyBPZ3JhbmljemFteSBkbyAxMCBwdW5rdMOzdyBkbGEgd3lkYWpub8WbY2kNCiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBlbmQgaW4gcHVua3R5W2krMToxMV06ICAjIFRlc3R1aiB6IG5hc3TEmXBueW1pIHB1bmt0YW1pDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RhcnQgIT0gZW5kOg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBzZWxmLnRlc3RfY29ubmVjdGlvbl9hdmFpbGFiaWxpdHkoc3RhcnQsIGVuZCkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbm90IHJlc3VsdFsnYXZhaWxhYmxlJ106DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9ja2VkX3JvdXRlcyArPSAxDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhZmZlY3RlZF9yb3V0ZXMuYXBwZW5kKGYie3N0YXJ0fSAtPiB7ZW5kfSIpDQogICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAjIFByenl3csOzxIcgc3RhbiB6YXdvcnUNCiAgICAgICAgICAgICAgICAgICAgc2VsZi5fc2V0X3ZhbHZlX3N0YXRlKHphd29yWyduYXp3YV96YXdvcnUnXSwgJ09UV0FSVFknKQ0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgY3JpdGljYWxfYW5hbHlzaXMuYXBwZW5kKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx2ZV9uYW1lJzogemF3b3JbJ25hendhX3phd29ydSddLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2Jsb2NrZWRfcm91dGVzX2NvdW50JzogYmxvY2tlZF9yb3V0ZXMsDQogICAgICAgICAgICAgICAgICAgICAgICAnYWZmZWN0ZWRfcm91dGVzJzogYWZmZWN0ZWRfcm91dGVzWzo1XSwgICMgUG9rYcW8IHR5bGtvIHBpZXJ3c3plIDUNCiAgICAgICAgICAgICAgICAgICAgICAgICdjcml0aWNhbGl0eV9zY29yZSc6IGJsb2NrZWRfcm91dGVzLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ2lzX2NyaXRpY2FsJzogYmxvY2tlZF9yb3V0ZXMgPiAwDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgU29ydHVqIHdlZMWCdWcga3J5dHljem5vxZtjaQ0KICAgICAgICAgICAgY3JpdGljYWxfYW5hbHlzaXMuc29ydChrZXk9bGFtYmRhIHg6IHhbJ2NyaXRpY2FsaXR5X3Njb3JlJ10sIHJldmVyc2U9VHJ1ZSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAnY3JpdGljYWxfdmFsdmVzJzogY3JpdGljYWxfYW5hbHlzaXMsDQogICAgICAgICAgICAgICAgJ21vc3RfY3JpdGljYWwnOiBjcml0aWNhbF9hbmFseXNpc1swXSBpZiBjcml0aWNhbF9hbmFseXNpcyBlbHNlIE5vbmUsDQogICAgICAgICAgICAgICAgJ3RvdGFsX3ZhbHZlc19hbmFseXplZCc6IGxlbih6YXdvcnkpLA0KICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZiJQcnplYW5hbGl6b3dhbm8ge2xlbih6YXdvcnkpfSB6YXdvcsOzdyBwb2Qga8SFdGVtIGtyeXR5Y3pub8WbY2kiDQogICAgICAgICAgICB9DQogICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgJ2NyaXRpY2FsX3ZhbHZlcyc6IFtdLA0KICAgICAgICAgICAgICAgICdlcnJvcic6IHN0cihlKSwNCiAgICAgICAgICAgICAgICAnbWVzc2FnZSc6IGYiQsWCxIVkIHBvZGN6YXMgYW5hbGl6eSBrcnl0eWN6bnljaCB6YXdvcsOzdzoge3N0cihlKX0iDQogICAgICAgICAgICB9DQogICAgDQogICAgZGVmIGdldF90ZXN0X2hpc3Rvcnkoc2VsZiwgbGltaXQ9NTApOg0KICAgICAgICAiIiJQb2JpZXJhIGhpc3RvcmnEmSB0ZXN0w7N3IFBhdGhGaW5kZXIiIiINCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBTcHJhd2TFuiBjenkgaXN0bmllamUgdGFiZWxhIHogaGlzdG9yacSFIHRlc3TDs3cNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgIFNFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCANCiAgICAgICAgICAgICAgICBGUk9NIGluZm9ybWF0aW9uX3NjaGVtYS50YWJsZXMgDQogICAgICAgICAgICAgICAgV0hFUkUgdGFibGVfc2NoZW1hID0gJ21lc19wYXJhZmluYV9kYicgDQogICAgICAgICAgICAgICAgQU5EIHRhYmxlX25hbWUgPSAncGF0aGZpbmRlcl90ZXN0X2hpc3RvcnknDQogICAgICAgICAgICAiIiIpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIGN1cnNvci5mZXRjaG9uZSgpWydjb3VudCddID09IDA6DQogICAgICAgICAgICAgICAgIyBVdHfDs3J6IHRhYmVsxJkgamXFm2xpIG5pZSBpc3RuaWVqZQ0KICAgICAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgICAgICBDUkVBVEUgVEFCTEUgcGF0aGZpbmRlcl90ZXN0X2hpc3RvcnkgKA0KICAgICAgICAgICAgICAgICAgICAgICAgaWQgSU5UIEFVVE9fSU5DUkVNRU5UIFBSSU1BUlkgS0VZLA0KICAgICAgICAgICAgICAgICAgICAgICAgdGVzdF90eXBlIFZBUkNIQVIoNTApIE5PVCBOVUxMLA0KICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfcG9pbnQgVkFSQ0hBUigxMDApLA0KICAgICAgICAgICAgICAgICAgICAgICAgZW5kX3BvaW50IFZBUkNIQVIoMTAwKSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHRlc3RfcGFyYW1ldGVycyBKU09OLA0KICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0IEpTT04sDQogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzIEJPT0xFQU4sDQogICAgICAgICAgICAgICAgICAgICAgICBleGVjdXRpb25fdGltZV9tcyBJTlQsDQogICAgICAgICAgICAgICAgICAgICAgICBjcmVhdGVkX2F0IERBVEVUSU1FIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVANCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICIiIikNCiAgICAgICAgICAgICAgICBjb25uLmNvbW1pdCgpDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgUG9iaWVyeiBoaXN0b3JpxJkgdGVzdMOzdw0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgU0VMRUNUICogRlJPTSBwYXRoZmluZGVyX3Rlc3RfaGlzdG9yeSANCiAgICAgICAgICAgICAgICBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MgDQogICAgICAgICAgICAgICAgTElNSVQgJXMNCiAgICAgICAgICAgICIiIiwgKGxpbWl0LCkpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGhpc3RvcnkgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgJ3Rlc3RfaGlzdG9yeSc6IGhpc3RvcnksDQogICAgICAgICAgICAgICAgJ2NvdW50JzogbGVuKGhpc3RvcnkpLA0KICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZiJQb2JyYW5vIHtsZW4oaGlzdG9yeSl9IHphcGlzw7N3IHogaGlzdG9yaWkgdGVzdMOzdyINCiAgICAgICAgICAgIH0NCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAndGVzdF9oaXN0b3J5JzogW10sDQogICAgICAgICAgICAgICAgJ2Vycm9yJzogc3RyKGUpLA0KICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZiJCxYLEhWQgcG9kY3phcyBwb2JpZXJhbmlhIGhpc3RvcmlpIHRlc3TDs3c6IHtzdHIoZSl9Ig0KICAgICAgICAgICAgfQ0KICAgIA0KICAgIGRlZiBzYXZlX3Rlc3RfcmVzdWx0KHNlbGYsIHRlc3RfdHlwZSwgc3RhcnRfcG9pbnQsIGVuZF9wb2ludCwgdGVzdF9wYXJhbWV0ZXJzLCByZXN1bHQsIHN1Y2Nlc3MsIGV4ZWN1dGlvbl90aW1lX21zKToNCiAgICAgICAgIiIiWmFwaXN1amUgd3luaWsgdGVzdHUgZG8gaGlzdG9yaWkiIiINCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgSU5TRVJUIElOVE8gcGF0aGZpbmRlcl90ZXN0X2hpc3RvcnkgDQogICAgICAgICAgICAgICAgKHRlc3RfdHlwZSwgc3RhcnRfcG9pbnQsIGVuZF9wb2ludCwgdGVzdF9wYXJhbWV0ZXJzLCByZXN1bHQsIHN1Y2Nlc3MsIGV4ZWN1dGlvbl90aW1lX21zKQ0KICAgICAgICAgICAgICAgIFZBTFVFUyAoJXMsICVzLCAlcywgJXMsICVzLCAlcywgJXMpDQogICAgICAgICAgICAiIiIsICh0ZXN0X3R5cGUsIHN0YXJ0X3BvaW50LCBlbmRfcG9pbnQsIGpzb24uZHVtcHModGVzdF9wYXJhbWV0ZXJzKSwgDQogICAgICAgICAgICAgICAgICBqc29uLmR1bXBzKHJlc3VsdCksIHN1Y2Nlc3MsIGV4ZWN1dGlvbl90aW1lX21zKSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29ubi5jb21taXQoKQ0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gVHJ1ZQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICByZXR1cm4gRmFsc2UNCiAgICANCiAgICAjID09PT09PT09PT09PT09PT09PSBNRVRPRFkgUE9NT0NOSUNaRSA9PT09PT09PT09PT09PT09PT0NCiAgICANCiAgICBkZWYgX2FwcGx5X3ZhbHZlX3N0YXRlcyhzZWxmLCB2YWx2ZV9zdGF0ZXMpOg0KICAgICAgICAiIiJTdG9zdWplIHR5bWN6YXNvd2Ugc3RhbnkgemF3b3LDs3cgaSB6d3JhY2Egb3J5Z2luYWxuZSBzdGFueSIiIg0KICAgICAgICBvcmlnaW5hbF9zdGF0ZXMgPSB7fQ0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgICAgIA0KICAgICAgICB0cnk6DQogICAgICAgICAgICBmb3IgdmFsdmVfbmFtZSwgbmV3X3N0YXRlIGluIHZhbHZlX3N0YXRlcy5pdGVtcygpOg0KICAgICAgICAgICAgICAgICMgUG9iaWVyeiBvcnlnaW5hbG55IHN0YW4NCiAgICAgICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiU0VMRUNUIHN0YW4gRlJPTSB6YXdvcnkgV0hFUkUgbmF6d2FfemF3b3J1ID0gJXMiLCAodmFsdmVfbmFtZSwpKQ0KICAgICAgICAgICAgICAgIHJlc3VsdCA9IGN1cnNvci5mZXRjaG9uZSgpDQogICAgICAgICAgICAgICAgaWYgcmVzdWx0Og0KICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbF9zdGF0ZXNbdmFsdmVfbmFtZV0gPSByZXN1bHRbJ3N0YW4nXQ0KICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgIyBVc3RhdyBub3d5IHN0YW4NCiAgICAgICAgICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgICAgICAgICBVUERBVEUgemF3b3J5IFNFVCBzdGFuID0gJXMgV0hFUkUgbmF6d2FfemF3b3J1ID0gJXMNCiAgICAgICAgICAgICAgICAgICAgIiIiLCAobmV3X3N0YXRlLCB2YWx2ZV9uYW1lKSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29ubi5jb21taXQoKQ0KICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsX3N0YXRlcw0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgIA0KICAgIGRlZiBfcmVzdG9yZV92YWx2ZV9zdGF0ZXMoc2VsZiwgb3JpZ2luYWxfc3RhdGVzKToNCiAgICAgICAgIiIiUHJ6eXdyYWNhIG9yeWdpbmFsbmUgc3RhbnkgemF3b3LDs3ciIiINCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoKQ0KICAgICAgICANCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgZm9yIHZhbHZlX25hbWUsIG9yaWdpbmFsX3N0YXRlIGluIG9yaWdpbmFsX3N0YXRlcy5pdGVtcygpOg0KICAgICAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgICAgICBVUERBVEUgemF3b3J5IFNFVCBzdGFuID0gJXMgV0hFUkUgbmF6d2FfemF3b3J1ID0gJXMNCiAgICAgICAgICAgICAgICAiIiIsIChvcmlnaW5hbF9zdGF0ZSwgdmFsdmVfbmFtZSkpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGNvbm4uY29tbWl0KCkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgICAgICBjb25uLmNsb3NlKCkNCiAgICANCiAgICBkZWYgX2dldF9jdXJyZW50X3ZhbHZlX3N0YXRlcyhzZWxmKToNCiAgICAgICAgIiIiUG9iaWVyYSBha3R1YWxuZSBzdGFueSB3c3p5c3RraWNoIHphd29yw7N3IiIiDQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICAgICAgDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCJTRUxFQ1QgbmF6d2FfemF3b3J1LCBzdGFuIEZST00gemF3b3J5IikNCiAgICAgICAgICAgIHJlc3VsdHMgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICAgICAgcmV0dXJuIHtyb3dbJ25hendhX3phd29ydSddOiByb3dbJ3N0YW4nXSBmb3Igcm93IGluIHJlc3VsdHN9DQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQogICAgDQogICAgZGVmIF9zZXRfdmFsdmVfc3RhdGUoc2VsZiwgdmFsdmVfbmFtZSwgbmV3X3N0YXRlKToNCiAgICAgICAgIiIiVXN0YXdpYSBzdGFuIHphd29ydSIiIg0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcigpDQogICAgICAgIA0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICBVUERBVEUgemF3b3J5IFNFVCBzdGFuID0gJXMgV0hFUkUgbmF6d2FfemF3b3J1ID0gJXMNCiAgICAgICAgICAgICIiIiwgKG5ld19zdGF0ZSwgdmFsdmVfbmFtZSkpDQogICAgICAgICAgICBjb25uLmNvbW1pdCgpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQogICAgDQogICAgZGVmIF9nZXRfc2VnbWVudHNfZm9yX3BhdGgoc2VsZiwgcGF0aCk6DQogICAgICAgICIiIlBvYmllcmEgc2VnbWVudHkgZGxhIGRhbmVqIMWbY2llxbxraSIiIg0KICAgICAgICBpZiBub3QgcGF0aCBvciBsZW4ocGF0aCkgPCAyOg0KICAgICAgICAgICAgcmV0dXJuIFtdDQogICAgICAgIA0KICAgICAgICBzZWdtZW50cyA9IFtdDQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICAgICAgDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGZvciBpIGluIHJhbmdlKGxlbihwYXRoKSAtIDEpOg0KICAgICAgICAgICAgICAgIHN0YXJ0X3BvaW50ID0gcGF0aFtpXQ0KICAgICAgICAgICAgICAgIGVuZF9wb2ludCA9IHBhdGhbaSArIDFdDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgIyBabmFqZMW6IHNlZ21lbnQgxYLEhWN6xIVjeSB0ZSBwdW5rdHkNCiAgICAgICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICAgICAgU0VMRUNUIHMubmF6d2Ffc2VnbWVudHUsIHoubmF6d2FfemF3b3J1LCB6LnN0YW4NCiAgICAgICAgICAgICAgICAgICAgRlJPTSBzZWdtZW50eSBzDQogICAgICAgICAgICAgICAgICAgIEpPSU4gemF3b3J5IHogT04gcy5pZF96YXdvcnUgPSB6LmlkDQogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBwb3J0eV9zcHJ6ZXR1IHBzX3N0YXJ0IE9OIHMuaWRfcG9ydHVfc3RhcnRvd2VnbyA9IHBzX3N0YXJ0LmlkDQogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiBwb3J0eV9zcHJ6ZXR1IHBzX2VuZCBPTiBzLmlkX3BvcnR1X2tvbmNvd2VnbyA9IHBzX2VuZC5pZA0KICAgICAgICAgICAgICAgICAgICBMRUZUIEpPSU4gd2V6bHlfcnVyb2NpYWd1IHdzX3N0YXJ0IE9OIHMuaWRfd2V6bGFfc3RhcnRvd2VnbyA9IHdzX3N0YXJ0LmlkDQogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiB3ZXpseV9ydXJvY2lhZ3Ugd3NfZW5kIE9OIHMuaWRfd2V6bGFfa29uY293ZWdvID0gd3NfZW5kLmlkDQogICAgICAgICAgICAgICAgICAgIFdIRVJFICgNCiAgICAgICAgICAgICAgICAgICAgICAgIChwc19zdGFydC5uYXp3YV9wb3J0dSA9ICVzIEFORCBwc19lbmQubmF6d2FfcG9ydHUgPSAlcykgT1INCiAgICAgICAgICAgICAgICAgICAgICAgIChwc19zdGFydC5uYXp3YV9wb3J0dSA9ICVzIEFORCBwc19lbmQubmF6d2FfcG9ydHUgPSAlcykgT1INCiAgICAgICAgICAgICAgICAgICAgICAgIChwc19zdGFydC5uYXp3YV9wb3J0dSA9ICVzIEFORCB3c19lbmQubmF6d2Ffd2V6bGEgPSAlcykgT1INCiAgICAgICAgICAgICAgICAgICAgICAgICh3c19zdGFydC5uYXp3YV93ZXpsYSA9ICVzIEFORCBwc19lbmQubmF6d2FfcG9ydHUgPSAlcykgT1INCiAgICAgICAgICAgICAgICAgICAgICAgICh3c19zdGFydC5uYXp3YV93ZXpsYSA9ICVzIEFORCB3c19lbmQubmF6d2Ffd2V6bGEgPSAlcykgT1INCiAgICAgICAgICAgICAgICAgICAgICAgICh3c19zdGFydC5uYXp3YV93ZXpsYSA9ICVzIEFORCB3c19lbmQubmF6d2Ffd2V6bGEgPSAlcykNCiAgICAgICAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICAgICIiIiwgKHN0YXJ0X3BvaW50LCBlbmRfcG9pbnQsIGVuZF9wb2ludCwgc3RhcnRfcG9pbnQsDQogICAgICAgICAgICAgICAgICAgICAgc3RhcnRfcG9pbnQsIGVuZF9wb2ludCwgc3RhcnRfcG9pbnQsIGVuZF9wb2ludCwNCiAgICAgICAgICAgICAgICAgICAgICBzdGFydF9wb2ludCwgZW5kX3BvaW50LCBlbmRfcG9pbnQsIHN0YXJ0X3BvaW50KSkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBzZWdtZW50ID0gY3Vyc29yLmZldGNob25lKCkNCiAgICAgICAgICAgICAgICBpZiBzZWdtZW50Og0KICAgICAgICAgICAgICAgICAgICBzZWdtZW50cy5hcHBlbmQoew0KICAgICAgICAgICAgICAgICAgICAgICAgJ3NlZ21lbnRfbmFtZSc6IHNlZ21lbnRbJ25hendhX3NlZ21lbnR1J10sDQogICAgICAgICAgICAgICAgICAgICAgICAndmFsdmVfbmFtZSc6IHNlZ21lbnRbJ25hendhX3phd29ydSddLA0KICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHZlX3N0YXRlJzogc2VnbWVudFsnc3RhbiddDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiBzZWdtZW50cw0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgIA0KICAgIGRlZiBfZ2V0X3NlZ21lbnRzX3RvX2Jsb2NrKHNlbGYsIGV4aXN0aW5nX3BhdGhzKToNCiAgICAgICAgIiIiT2tyZcWbbGEgc2VnbWVudHkgZG8gemFibG9rb3dhbmlhIGRsYSB6bmFqZG93YW5pYSBhbHRlcm5hdHl3bnljaCDFm2NpZcW8ZWsiIiINCiAgICAgICAgc2VnbWVudHNfdG9fYmxvY2sgPSBbXQ0KICAgICAgICBmb3IgcGF0aCBpbiBleGlzdGluZ19wYXRoczoNCiAgICAgICAgICAgIHBhdGhfc2VnbWVudHMgPSBzZWxmLl9nZXRfc2VnbWVudHNfZm9yX3BhdGgocGF0aCkNCiAgICAgICAgICAgIGZvciBzZWdtZW50IGluIHBhdGhfc2VnbWVudHM6DQogICAgICAgICAgICAgICAgaWYgc2VnbWVudFsnc2VnbWVudF9uYW1lJ10gbm90IGluIHNlZ21lbnRzX3RvX2Jsb2NrOg0KICAgICAgICAgICAgICAgICAgICBzZWdtZW50c190b19ibG9jay5hcHBlbmQoc2VnbWVudFsnc2VnbWVudF9uYW1lJ10pDQogICAgICAgIHJldHVybiBzZWdtZW50c190b19ibG9ja1s6Ml0gICMgQmxva3VqIG1ha3N5bWFsbmllIDIgc2VnbWVudHkNCiAgICANCiAgICBkZWYgX2ZpbmRfYWx0ZXJuYXRpdmVfcGF0aChzZWxmLCBzdGFydF9wb2ludCwgZW5kX3BvaW50LCBibG9ja2VkX3NlZ21lbnRzKToNCiAgICAgICAgIiIiWm5hamR1amUgYWx0ZXJuYXR5d27EhSDFm2NpZcW8a8SZIHogcG9taW5pxJljaWVtIHphYmxva293YW55Y2ggc2VnbWVudMOzdyIiIg0KICAgICAgICAjIFR5bWN6YXNvd28gemFta25paiB6YXdvcnkgdyBibG9rb3dhbnljaCBzZWdtZW50YWNoDQogICAgICAgIG9yaWdpbmFsX3N0YXRlcyA9IHt9DQogICAgICAgIA0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBmb3Igc2VnbWVudF9uYW1lIGluIGJsb2NrZWRfc2VnbWVudHM6DQogICAgICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgICAgIFNFTEVDVCB6Lm5hendhX3phd29ydSwgei5zdGFuIA0KICAgICAgICAgICAgICAgICAgICBGUk9NIHNlZ21lbnR5IHMNCiAgICAgICAgICAgICAgICAgICAgSk9JTiB6YXdvcnkgeiBPTiBzLmlkX3phd29ydSA9IHouaWQNCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgcy5uYXp3YV9zZWdtZW50dSA9ICVzDQogICAgICAgICAgICAgICAgIiIiLCAoc2VnbWVudF9uYW1lLCkpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgcmVzdWx0ID0gY3Vyc29yLmZldGNob25lKCkNCiAgICAgICAgICAgICAgICBpZiByZXN1bHQ6DQogICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsX3N0YXRlc1tyZXN1bHRbJ25hendhX3phd29ydSddXSA9IHJlc3VsdFsnc3RhbiddDQogICAgICAgICAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgICAgICAgICAgVVBEQVRFIHphd29yeSBTRVQgc3RhbiA9ICdaQU1LTklFVFknIFdIRVJFIG5hendhX3phd29ydSA9ICVzDQogICAgICAgICAgICAgICAgICAgICIiIiwgKHJlc3VsdFsnbmF6d2FfemF3b3J1J10sKSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY29ubi5jb21taXQoKQ0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIFpuYWpkxbogYWx0ZXJuYXR5d27EhSDFm2NpZcW8a8SZDQogICAgICAgICAgICBwYXRoZmluZGVyID0gc2VsZi5nZXRfcGF0aGZpbmRlcigpDQogICAgICAgICAgICBhbHRlcm5hdGl2ZV9wYXRoID0gcGF0aGZpbmRlci5maW5kX3BhdGgoc3RhcnRfcG9pbnQsIGVuZF9wb2ludCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIGFsdGVybmF0aXZlX3BhdGgNCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgcmV0dXJuIE5vbmUNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgICMgUHJ6eXdyw7PEhyBvcnlnaW5hbG5lIHN0YW55IHphd29yw7N3DQogICAgICAgICAgICBzZWxmLl9yZXN0b3JlX3ZhbHZlX3N0YXRlcyhvcmlnaW5hbF9zdGF0ZXMpDQogICAgDQogICAgZGVmIF9jYWxjdWxhdGVfcGF0aF9jb3N0KHNlbGYsIHBhdGgpOg0KICAgICAgICAiIiJPYmxpY3phIHN6YWN1bmtvd3kga29zenQgxZtjaWXFvGtpIChpbSBrcsOzdHN6ZSwgdHltIGxlcHN6ZSkiIiINCiAgICAgICAgaWYgbm90IHBhdGg6DQogICAgICAgICAgICByZXR1cm4gZmxvYXQoJ2luZicpDQogICAgICAgIA0KICAgICAgICAjIFByb3N0eSBrb3N6dCBiYXpvd2FueSBuYSBkxYJ1Z2/Fm2NpIMWbY2llxbxraQ0KICAgICAgICBiYXNlX2Nvc3QgPSBsZW4ocGF0aCkgLSAxDQogICAgICAgIA0KICAgICAgICAjIERvZGFqIGtvc3p0IHphIHd5a29yenlzdGFuaWUga3J5dHljem55Y2ggc2VnbWVudMOzdw0KICAgICAgICBzZWdtZW50cyA9IHNlbGYuX2dldF9zZWdtZW50c19mb3JfcGF0aChwYXRoKQ0KICAgICAgICBjcml0aWNhbF9wZW5hbHR5ID0gc3VtKDEgZm9yIHNlZyBpbiBzZWdtZW50cyBpZiBzZWdbJ3ZhbHZlX3N0YXRlJ10gPT0gJ1pBTUtOSUVUWScpDQogICAgICAgIA0KICAgICAgICByZXR1cm4gYmFzZV9jb3N0ICsgY3JpdGljYWxfcGVuYWx0eSAqIDEwDQogICAgDQogICAgZGVmIF9hc3Nlc3NfdmFsdmVfaW1wYWN0KHNlbGYsIHJvdXRlX3Jlc3VsdHMpOg0KICAgICAgICAiIiJPY2VuaWEgb2fDs2xueSB3cMWCeXcgem1pYW55IHN0YW51IHphd29ydSIiIg0KICAgICAgICBpZiBub3Qgcm91dGVfcmVzdWx0czoNCiAgICAgICAgICAgIHJldHVybiAnYnJha19kYW55Y2gnDQogICAgICAgIA0KICAgICAgICB0b3RhbF9yb3V0ZXMgPSBsZW4ocm91dGVfcmVzdWx0cykNCiAgICAgICAgYmxvY2tlZF9yb3V0ZXMgPSBzdW0oMSBmb3IgcmVzdWx0IGluIHJvdXRlX3Jlc3VsdHMgaWYgbm90IHJlc3VsdFsnYXZhaWxhYmxlJ10pDQogICAgICAgIA0KICAgICAgICBpZiBibG9ja2VkX3JvdXRlcyA9PSAwOg0KICAgICAgICAgICAgcmV0dXJuICdicmFrX3dwxYJ5d3UnDQogICAgICAgIGVsaWYgYmxvY2tlZF9yb3V0ZXMgPCB0b3RhbF9yb3V0ZXMgLyAyOg0KICAgICAgICAgICAgcmV0dXJuICd1bWlhcmtvd2FueV93cMWCeXcnDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXR1cm4gJ2R1xbx5X3dwxYJ5dycNCg==
  - path: app//routes.py
    content: IyBhcHAvcm91dGVzLnB5DQoNCmZyb20gZmxhc2sgaW1wb3J0IEJsdWVwcmludCwganNvbmlmeSwgcmVxdWVzdCwgY3VycmVudF9hcHAsIHJlbmRlcl90ZW1wbGF0ZSwgZw0KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWVkZWx0YSwgdGltZXpvbmUNCmZyb20gLnNlbnNvcnMgaW1wb3J0IFNlbnNvclNlcnZpY2UgICMgSW1wb3J0dWplbXkgc2Vyd2lzIGN6dWpuaWvDs3cNCmltcG9ydCBteXNxbC5jb25uZWN0b3INCmltcG9ydCB0aW1lDQpmcm9tIC5kYiBpbXBvcnQgZ2V0X2RiX2Nvbm5lY3Rpb24gICMgSW1wb3J0dWplbXkgZnVua2NqxJkgZG8gcG/FgsSFY3plbmlhIHogYmF6xIUgZGFueWNoDQpmcm9tIC5wYXRoZmluZGVyX3NlcnZpY2UgaW1wb3J0IFBhdGhGaW5kZXINCmZyb20gLmFwb2xsb19zZXJ2aWNlIGltcG9ydCBBcG9sbG9TZXJ2aWNlICAjIEltcG9ydHVqZW15IHNlcndpcyBBcG9sbG8NCmZyb20gbXlzcWwuY29ubmVjdG9yLmVycm9ycyBpbXBvcnQgT3BlcmF0aW9uYWxFcnJvcg0KZnJvbSBkZWNpbWFsIGltcG9ydCBEZWNpbWFsDQpmcm9tIGFwcC5zb2NrZXRzIGltcG9ydCBicm9hZGNhc3RfYXBvbGxvX3VwZGF0ZQ0KZnJvbSBhcHAuZGFzaGJvYXJkX3NlcnZpY2UgaW1wb3J0IERhc2hib2FyZFNlcnZpY2UNCmZyb20gLm1vZGVscyBpbXBvcnQgU3ByemV0DQpmcm9tIC5leHRlbnNpb25zIGltcG9ydCBkYg0KDQpkZWYgZ2V0X3BhdGhmaW5kZXIoKToNCiAgICBpZiAncGF0aGZpbmRlcicgbm90IGluIGc6DQogICAgICAgIGcucGF0aGZpbmRlciA9IFBhdGhGaW5kZXIoZ2V0X2RiX2Nvbm5lY3Rpb24oKSkNCiAgICByZXR1cm4gZy5wYXRoZmluZGVyDQoNCmRlZiBnZXRfc2Vuc29yX3NlcnZpY2UoKToNCiAgICAiIiJQb2JpZXJhIGluc3RhbmNqxJkgc2Vyd2lzdSBTZW5zb3JTZXJ2aWNlIHoga29udGVrc3R1IGFwbGlrYWNqaS4iIiINCiAgICByZXR1cm4gY3VycmVudF9hcHAuZXh0ZW5zaW9uc1snc2Vuc29yX3NlcnZpY2UnXQ0KDQojIDEuIFN0d29yemVuaWUgb2JpZWt0dSBCbHVlcHJpbnQNCiMgUGllcndzenkgYXJndW1lbnQgdG8gbmF6d2EgYmx1ZXByaW50dSwgZHJ1Z2kgdG8gbmF6d2EgbW9kdcWCdSAoc3RhbmRhcmRvd28gX19uYW1lX18pDQojICd1cmxfcHJlZml4JyBzcHJhd2ksIMW8ZSB3c3p5c3RraWUgZW5kcG9pbnR5IHcgdHltIHBsaWt1IGLEmWTEhSB6YWN6eW5hxIcgc2nEmSBvZCAvYXBpDQpicCA9IEJsdWVwcmludCgnYXBpJywgX19uYW1lX18sIHVybF9wcmVmaXg9Jy8nKQ0KIyBzZW5zb3Jfc2VydmljZSA9IFNlbnNvclNlcnZpY2UoKQ0KDQoNCg0KQGJwLnJvdXRlKCcvJykNCmRlZiBpbmRleCgpOg0KICAgICIiIlNlcnd1amUgZ8WCw7N3bsSFIHN0cm9uxJkgYXBsaWthY2ppIChmcm9udGVuZCkuIiIiDQogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnaW5kZXguaHRtbCcpDQoNCkBicC5yb3V0ZSgnL3NwcnpldC88aW50OnNwcnpldF9pZD4vZGV0YWlscycpDQpkZWYgc3ByemV0X2RldGFpbHNfdmlldyhzcHJ6ZXRfaWQpOg0KICAgIHNwcnpldCA9IGRiLnNlc3Npb24uZ2V0KFNwcnpldCwgc3ByemV0X2lkKQ0KICAgIGlmIG5vdCBzcHJ6ZXQ6DQogICAgICAgIHJldHVybiAiTmllIHpuYWxlemlvbm8gc3ByesSZdHUiLCA0MDQNCiAgICByZXR1cm4gcmVuZGVyX3RlbXBsYXRlKCdzcHJ6ZXRfZGV0YWlscy5odG1sJywgc3ByemV0PXNwcnpldCkNCg0KDQpAYnAucm91dGUoJy9hZG1pbi1jb25zb2xlJykNCmRlZiBjb25zb2xlKCk6DQogICAgIiIiU2Vyd3VqZSBzdHJvbsSZIGtvbnNvbGkgYWRtaW5pc3RyYWN5am5lai4iIiINCiAgICByZXR1cm4gcmVuZGVyX3RlbXBsYXRlKCdjb25zb2xlLmh0bWwnKQ0KDQpAYnAucm91dGUoJy9iYXRjaC10ZXN0ZXInKQ0KZGVmIGJhdGNoX3Rlc3Rlcl9wYWdlKCk6DQogICAgIiIiU2Vyd3VqZSBzdHJvbsSZIGRvIHRlc3Rvd2FuaWEgbm93ZWdvIHN5c3RlbXUgcGFydGlpLiIiIg0KICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ2JhdGNoX3Rlc3Rlci5odG1sJykNCg0KDQpAYnAucm91dGUoJy9hbGFybXMnKQ0KZGVmIHNob3dfYWxhcm1zKCk6DQogICAgIiIiV3nFm3dpZXRsYSBzdHJvbsSZIHogaGlzdG9yacSFIHdzenlzdGtpY2ggYWxhcm3Ds3cuIiIiDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgdHJ5Og0KICAgICAgICAjIFBvYmllcnogd3N6eXN0a2llIGFsYXJteSwgc29ydHVqxIVjIG9kIG5ham5vd3N6eWNoDQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgU0VMRUNUICogRlJPTSBhbGFybXkgDQogICAgICAgICAgICBPUkRFUiBCWSBjemFzX3d5c3RhcGllbmlhIERFU0MNCiAgICAgICAgIiIiKQ0KICAgICAgICBhbGxfYWxhcm1zID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnYWxhcm1zLmh0bWwnLCBhbGFybXM9YWxsX2FsYXJtcykNCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCiMgLS0tIEtPTklFQyBOT1dFSiBGVU5LQ0pJIC0tLQ0KDQojIC0tLSBET0RBSiBUxJggTk9XxIQgRlVOS0NKxJggLS0tDQpAYnAucm91dGUoJy9vcGVyYWNqZScpDQpkZWYgc2hvd19vcGVyYWNqZSgpOg0KICAgICIiIld5xZt3aWV0bGEgc3Ryb27EmSB6IG9wZXJhY2phbWkgdGFua293YW5pYS4iIiINCiAgICByZXR1cm4gcmVuZGVyX3RlbXBsYXRlKCdvcGVyYWNqZS5odG1sJykNCg0KQGJwLnJvdXRlKCcvb3BlcmFjamUtYXBvbGxvJykNCmRlZiBzaG93X29wZXJhY2plX2Fwb2xsbygpOg0KICAgICIiIld5xZt3aWV0bGEgc3Ryb27EmSBkbyB6YXJ6xIVkemFuaWEgdHJhbnNmZXJhbWkgeiBBcG9sbG8uIiIiDQogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnb3BlcmFjamVfYXBvbGxvLmh0bWwnKQ0KDQpAYnAucm91dGUoJy9vcGVyYWNqZS1jeXN0ZXJueScpDQpkZWYgb3BlcmFjamVfY3lzdGVybnkoKToNCiAgICAiIiJTdHJvbmEgZG8gemFyesSFZHphbmlhIG9wZXJhY2phbWkgcm96dGFua293YW5pYSBjeXN0ZXJuLiIiIg0KICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ29wZXJhY2plX2N5c3Rlcm55Lmh0bWwnKQ0KDQpAYnAucm91dGUoJy9iZWN6a2knKQ0KZGVmIGJlY3praSgpOg0KICAgICIiIlN0cm9uYSBkbyB6YXJ6xIVkemFuaWEgb3BlcmFjamFtaSByb3p0YW5rb3dhbmlhIGN5c3Rlcm4uIiIiDQogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnYmVjemtpLmh0bWwnKQ0KIyAtLS0gS09OSUVDIE5PV0VKIEZVTktDSkkgLS0tDQoNCiMgMi4gU3R3b3J6ZW5pZSBwaWVyd3N6ZWdvLCBwcmF3ZHppd2VnbyBlbmRwb2ludHUgQVBJDQoNCg0KQGJwLnJvdXRlKCcvYXBpL3phd29yeScsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBnZXRfd3N6eXN0a2llX3phd29yeSgpOg0KICAgICIiIlp3cmFjYSBsaXN0xJkgd3N6eXN0a2ljaCB6YXdvcsOzdyBpIGljaCBha3R1YWxueSBzdGFuLiIiIg0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgIGN1cnNvci5leGVjdXRlKCJTRUxFQ1QgaWQsIG5hendhX3phd29ydSwgc3RhbiBGUk9NIHphd29yeSBPUkRFUiBCWSBuYXp3YV96YXdvcnUiKQ0KICAgIHphd29yeSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgY3Vyc29yLmNsb3NlKCkNCiAgICBjb25uLmNsb3NlKCkNCiAgICByZXR1cm4ganNvbmlmeSh6YXdvcnkpDQoNCkBicC5yb3V0ZSgnL2FwaS96YXdvcnkvem1pZW5fc3RhbicsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYgem1pZW5fc3Rhbl96YXdvcnUoKToNCiAgICAiIiJabWllbmlhIHN0YW4gcG9qZWR5bmN6ZWdvIHphd29ydS4iIiINCiAgICBkYW5lID0gcmVxdWVzdC5nZXRfanNvbigpDQogICAgaWYgbm90IGRhbmUgb3IgJ2lkX3phd29ydScgbm90IGluIGRhbmUgb3IgJ3N0YW4nIG5vdCBpbiBkYW5lOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7InN0YXR1cyI6ICJlcnJvciIsICJtZXNzYWdlIjogIkJyYWsgd3ltYWdhbnljaCBww7NsOiBpZF96YXdvcnUsIHN0YW4uIn0pLCA0MDANCiAgICANCiAgICBpZF96YXdvcnUgPSBkYW5lWydpZF96YXdvcnUnXQ0KICAgIG5vd3lfc3RhbiA9IGRhbmVbJ3N0YW4nXSAjIE9jemVrdWplbXkgJ09UV0FSVFknIGx1YiAnWkFNS05JRVRZJw0KDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcigpDQogICAgY3Vyc29yLmV4ZWN1dGUoIlVQREFURSB6YXdvcnkgU0VUIHN0YW4gPSAlcyBXSEVSRSBpZCA9ICVzIiwgKG5vd3lfc3RhbiwgaWRfemF3b3J1KSkNCiAgICBjb25uLmNvbW1pdCgpDQogICAgY3Vyc29yLmNsb3NlKCkNCiAgICBjb25uLmNsb3NlKCkNCg0KICAgIHJldHVybiBqc29uaWZ5KHsic3RhdHVzIjogInN1Y2Nlc3MiLCAibWVzc2FnZSI6IGYiWm1pZW5pb25vIHN0YW4gemF3b3J1IHtpZF96YXdvcnV9IG5hIHtub3d5X3N0YW59LiJ9KQ0KDQpAYnAucm91dGUoJy9hcGkvcHVua3R5X3N0YXJ0b3dlJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9wdW5rdHlfc3RhcnRvd2UoKToNCiAgICAiIiJad3JhY2EgbGlzdMSZIHdzenlzdGtpY2ggcG9ydMOzdyB3eWrFm2Npb3d5Y2ggKE9VVCkuIiIiDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgIyBXeWJpZXJhbXkgcG9ydHkgemUgc3ByesSZdHUsIGt0w7NyeSBtb8W8ZSBiecSHIMW6csOzZMWCZW0gKG5wLiBuaWUgYmVjemtpIGN6eXN0ZSkNCiAgICBxdWVyeSA9ICIiIg0KICAgICAgICBTRUxFQ1QgcC5uYXp3YV9wb3J0dSwgcy5uYXp3YV91bmlrYWxuYSBhcyBuYXp3YV9zcHJ6ZXR1IA0KICAgICAgICBGUk9NIHBvcnR5X3NwcnpldHUgcA0KICAgICAgICBKT0lOIHNwcnpldCBzIE9OIHAuaWRfc3ByemV0dSA9IHMuaWQNCiAgICAgICAgV0hFUkUgcC50eXBfcG9ydHUgPSAnT1VUJyBBTkQgcy50eXBfc3ByemV0dSAhPSAnYmVjemthX2N6eXN0YScNCiAgICAgICAgT1JERVIgQlkgcy5uYXp3YV91bmlrYWxuYQ0KICAgICIiIg0KICAgIGN1cnNvci5leGVjdXRlKHF1ZXJ5KQ0KICAgIHBvcnR5ID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICBjdXJzb3IuY2xvc2UoKQ0KICAgIGNvbm4uY2xvc2UoKQ0KICAgIHJldHVybiBqc29uaWZ5KHBvcnR5KQ0KDQpAYnAucm91dGUoJy9hcGkvcHVua3R5X2RvY2Vsb3dlJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9wdW5rdHlfZG9jZWxvd2UoKToNCiAgICAiIiJad3JhY2EgbGlzdMSZIHdzenlzdGtpY2ggcG9ydMOzdyB3ZWrFm2Npb3d5Y2ggKElOKS4iIiINCiAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICAjIFd5YmllcmFteSBwb3J0eSB6ZSBzcHJ6xJl0dSwga3TDs3J5IG1vxbxlIGJ5xIcgY2VsZW0gKG5wLiBuaWUgYmVjemtpIGJydWRuZSkNCiAgICBxdWVyeSA9ICIiIg0KICAgICAgICBTRUxFQ1QgcC5uYXp3YV9wb3J0dSwgcy5uYXp3YV91bmlrYWxuYSBhcyBuYXp3YV9zcHJ6ZXR1IA0KICAgICAgICBGUk9NIHBvcnR5X3NwcnpldHUgcA0KICAgICAgICBKT0lOIHNwcnpldCBzIE9OIHAuaWRfc3ByemV0dSA9IHMuaWQNCiAgICAgICAgV0hFUkUgcC50eXBfcG9ydHUgPSAnSU4nIEFORCBzLnR5cF9zcHJ6ZXR1IE5PVCBJTiAoJ2JlY3prYV9icnVkbmEnLCAnYXBvbGxvJykNCiAgICAgICAgT1JERVIgQlkgcy5uYXp3YV91bmlrYWxuYQ0KICAgICIiIg0KICAgIGN1cnNvci5leGVjdXRlKHF1ZXJ5KQ0KICAgIHBvcnR5ID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICBjdXJzb3IuY2xvc2UoKQ0KICAgIGNvbm4uY2xvc2UoKQ0KICAgIHJldHVybiBqc29uaWZ5KHBvcnR5KQ0KDQoNCg0KQGJwLnJvdXRlKCcvYXBpL3RvcG9sb2dpYScsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBnZXRfdG9wb2xvZ2lhKCk6DQogICAgIiIiWndyYWNhIHBlxYJuxIUgbGlzdMSZIHBvxYLEhWN6ZcWEIChzZWdtZW50w7N3KSBkbyB3aXp1YWxpemFjamkuIiIiDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgDQogICAgIyBUbyBzYW1vIHphcHl0YW5pZSwga3TDs3JlZ28gdcW8eXdhIFBhdGhGaW5kZXIgZG8gYnVkb3d5IGdyYWZ1DQogICAgcXVlcnkgPSAiIiINCiAgICAgICAgU0VMRUNUIA0KICAgICAgICAgICAgcy5pZCBhcyBpZF9zZWdtZW50dSwNCiAgICAgICAgICAgIHMubmF6d2Ffc2VnbWVudHUsIA0KICAgICAgICAgICAgei5uYXp3YV96YXdvcnUsDQogICAgICAgICAgICB6LnN0YW4gYXMgc3Rhbl96YXdvcnUsDQogICAgICAgICAgICAtLSBEb2RhamVteSBJRCBkbGEgZGVidWdvd2FuaWENCiAgICAgICAgICAgIHMuaWRfcG9ydHVfc3RhcnRvd2Vnbywgcy5pZF93ZXpsYV9zdGFydG93ZWdvLA0KICAgICAgICAgICAgcy5pZF9wb3J0dV9rb25jb3dlZ28sIHMuaWRfd2V6bGFfa29uY293ZWdvLA0KICAgICAgICAgICAgQ09BTEVTQ0UocF9zdGFydC5uYXp3YV9wb3J0dSwgd19zdGFydC5uYXp3YV93ZXpsYSkgQVMgcHVua3Rfc3RhcnRvd3ksDQogICAgICAgICAgICBDT0FMRVNDRShwX2tvbmllYy5uYXp3YV9wb3J0dSwgd19rb25pZWMubmF6d2Ffd2V6bGEpIEFTIHB1bmt0X2tvbmNvd3kNCiAgICAgICAgRlJPTSBzZWdtZW50eSBzDQogICAgICAgIEpPSU4gemF3b3J5IHogT04gcy5pZF96YXdvcnUgPSB6LmlkDQogICAgICAgIExFRlQgSk9JTiBwb3J0eV9zcHJ6ZXR1IHBfc3RhcnQgT04gcy5pZF9wb3J0dV9zdGFydG93ZWdvID0gcF9zdGFydC5pZA0KICAgICAgICBMRUZUIEpPSU4gd2V6bHlfcnVyb2NpYWd1IHdfc3RhcnQgT04gcy5pZF93ZXpsYV9zdGFydG93ZWdvID0gd19zdGFydC5pZA0KICAgICAgICBMRUZUIEpPSU4gcG9ydHlfc3ByemV0dSBwX2tvbmllYyBPTiBzLmlkX3BvcnR1X2tvbmNvd2VnbyA9IHBfa29uaWVjLmlkDQogICAgICAgIExFRlQgSk9JTiB3ZXpseV9ydXJvY2lhZ3Ugd19rb25pZWMgT04gcy5pZF93ZXpsYV9rb25jb3dlZ28gPSB3X2tvbmllYy5pZA0KICAgICIiIg0KICAgIGN1cnNvci5leGVjdXRlKHF1ZXJ5KQ0KICAgIHNlZ21lbnR5ID0gY3Vyc29yLmZldGNoYWxsKCkNCg0KICAgICMgRG9kYXRrb3dvLCBwb2JpZXJ6bXkgbGlzdMSZIGFrdHVhbG5pZSB6YWrEmXR5Y2ggc2VnbWVudMOzdw0KICAgIHNxbF96YWpldGUgPSAiIiINCiAgICAgICAgU0VMRUNUIHMuaWQgYXMgaWRfc2VnbWVudHUgRlJPTSBsb2dfdXp5dGVfc2VnbWVudHkgbHVzDQogICAgICAgIEpPSU4gb3BlcmFjamVfbG9nIG9sIE9OIGx1cy5pZF9vcGVyYWNqaV9sb2cgPSBvbC5pZA0KICAgICAgICBKT0lOIHNlZ21lbnR5IHMgT04gbHVzLmlkX3NlZ21lbnR1ID0gcy5pZA0KICAgICAgICBXSEVSRSBvbC5zdGF0dXNfb3BlcmFjamkgPSAnYWt0eXduYScNCiAgICAiIiINCiAgICBjdXJzb3IuZXhlY3V0ZShzcWxfemFqZXRlKQ0KICAgIHphamV0ZV9pZHMgPSB7cm93WydpZF9zZWdtZW50dSddIGZvciByb3cgaW4gY3Vyc29yLmZldGNoYWxsKCl9DQoNCiAgICAjIERvZGFqIGluZm9ybWFjasSZIG8gemFqxJl0b8WbY2kgZG8ga2HFvGRlZ28gc2VnbWVudHUNCiAgICBmb3Igc2VnIGluIHNlZ21lbnR5Og0KICAgICAgICBzZWdbJ3phamV0eSddID0gc2VnLmdldCgnaWRfc2VnbWVudHUnKSBpbiB6YWpldGVfaWRzDQoNCiAgICBjdXJzb3IuY2xvc2UoKQ0KICAgIGNvbm4uY2xvc2UoKQ0KICAgIHJldHVybiBqc29uaWZ5KHNlZ21lbnR5KQ0KDQoNCg0KQGJwLnJvdXRlKCcvYXBpL3RyYXN5L3N1Z2VydWonLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIHN1Z2VydWpfdHJhc2UoKToNCiAgICAiIiINCiAgICBOYSBwb2RzdGF3aWUgcHVua3R1IHN0YXJ0b3dlZ28sIGtvxYRjb3dlZ28gaSBwb8WbcmVkbmllZ28sIHpuYWpkdWplDQogICAgbmFqa3LDs3RzesSFIG1vxbxsaXfEhSB0cmFzxJkgaSB6d3JhY2EgbGlzdMSZIHNlZ21lbnTDs3cgb3JheiB6YXdvcsOzdw0KICAgIHBvdHJ6ZWJueWNoIGRvIGplaiBvdHdhcmNpYS4gSWdub3J1amUgYWt0dWFsbnkgc3RhbiB6YXdvcsOzdy4NCiAgICAiIiINCiAgICBkYW5lID0gcmVxdWVzdC5nZXRfanNvbigpDQogICAgaWYgbm90IGRhbmUgb3IgJ3N0YXJ0JyBub3QgaW4gZGFuZSBvciAnY2VsJyBub3QgaW4gZGFuZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeyJzdGF0dXMiOiAiZXJyb3IiLCAibWVzc2FnZSI6ICJCcmFrIHd5bWFnYW55Y2ggcMOzbDogc3RhcnQsIGNlbC4ifSksIDQwMA0KDQogICAgc3RhcnRfcG9pbnQgPSBkYW5lWydzdGFydCddDQogICAgZW5kX3BvaW50ID0gZGFuZVsnY2VsJ10NCiAgICBzcHJ6ZXRfcG9zcmVkbmkgPSBkYW5lLmdldCgnc3ByemV0X3Bvc3JlZG5pJykNCiAgICANCiAgICBwYXRoZmluZGVyID0gZ2V0X3BhdGhmaW5kZXIoKQ0KICAgIA0KICAgICMgV0HFu05FOiBEbyBzenVrYW5pYSAiaWRlYWxuZWoiIHRyYXN5IHByemVrYXp1amVteSBXU1pZU1RLSUUgemF3b3J5IGpha28gb3R3YXJ0ZS4NCiAgICAjIFcgdHltIGNlbHUgcG9iaWVyYW15IGljaCBuYXp3eSB6IGdyYWZ1IFBhdGhmaW5kZXJhLg0KICAgIHdzenlzdGtpZV96YXdvcnkgPSBbZGF0YVsndmFsdmVfbmFtZSddIGZvciB1LCB2LCBkYXRhIGluIHBhdGhmaW5kZXIuZ3JhcGguZWRnZXMoZGF0YT1UcnVlKV0NCiAgICANCiAgICBzY2llemthX3NlZ21lbnRvdyA9IFtdDQogICAgc2NpZXprYV96YXdvcm93ID0gc2V0KCkgIyBVxbx5d2FteSBzZXRhLCBhYnkgdW5pa27EhcSHIGR1cGxpa2F0w7N3IHphd29yw7N3DQoNCiAgICB0cnkgOg0KICAgICAgICBpZiBzcHJ6ZXRfcG9zcmVkbmk6DQogICAgICAgICAgICBwb3NyZWRuaV9pbiA9IGYie3NwcnpldF9wb3NyZWRuaX1fSU4iDQogICAgICAgICAgICBwb3NyZWRuaV9vdXQgPSBmIntzcHJ6ZXRfcG9zcmVkbml9X09VVCINCg0KICAgICAgICAgICAgIyBUcmFzYSBkbyBzcHJ6xJl0dSBwb8WbcmVkbmllZ28NCiAgICAgICAgICAgIHNjaWV6a2FfMSA9IHBhdGhmaW5kZXIuZmluZF9wYXRoKHN0YXJ0X3BvaW50LCBwb3NyZWRuaV9pbiwgd3N6eXN0a2llX3phd29yeSkNCiAgICAgICAgICAgICMgVHJhc2Egd2V3bsSFdHJ6IHNwcnrEmXR1IHBvxZtyZWRuaWVnbw0KICAgICAgICAgICAgc2NpZXprYV93ZXduZXRyem5hID0gcGF0aGZpbmRlci5maW5kX3BhdGgocG9zcmVkbmlfaW4sIHBvc3JlZG5pX291dCwgd3N6eXN0a2llX3phd29yeSkNCiAgICAgICAgICAgICMgVHJhc2Egb2Qgc3ByesSZdHUgcG/Fm3JlZG5pZWdvIGRvIGNlbHUNCiAgICAgICAgICAgIHNjaWV6a2FfMiA9IHBhdGhmaW5kZXIuZmluZF9wYXRoKHBvc3JlZG5pX291dCwgZW5kX3BvaW50LCB3c3p5c3RraWVfemF3b3J5KQ0KDQogICAgICAgICAgICBpZiBub3QgYWxsKFtzY2llemthXzEsIHNjaWV6a2Ffd2V3bmV0cnpuYSwgc2NpZXprYV8yXSk6DQogICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKCJOaWUgbW/FvG5hIHpidWRvd2HEhyBwZcWCbmVqIHRyYXN5IHByemV6IHB1bmt0IHBvxZtyZWRuaS4iKQ0KDQogICAgICAgICAgICBzY2llemthX3NlZ21lbnRvdyA9IHNjaWV6a2FfMSArIHNjaWV6a2Ffd2V3bmV0cnpuYSArIHNjaWV6a2FfMg0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc2NpZXprYV9zZWdtZW50b3cgPSBwYXRoZmluZGVyLmZpbmRfcGF0aChzdGFydF9wb2ludCwgZW5kX3BvaW50LCB3c3p5c3RraWVfemF3b3J5KQ0KDQogICAgICAgIGlmIG5vdCBzY2llemthX3NlZ21lbnRvdzoNCiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigiTmllIHpuYWxlemlvbm8gxZtjaWXFvGtpLiIpDQoNCiAgICAgICAgIyBOYSBwb2RzdGF3aWUgbmF6dyBzZWdtZW50w7N3LCB6bmFqZMW6IG5hend5IHByenlwaXNhbnljaCBkbyBuaWNoIHphd29yw7N3DQogICAgICAgIGZvciBzZWdtZW50X25hbWUgaW4gc2NpZXprYV9zZWdtZW50b3c6DQogICAgICAgICAgICAjIFByemVzenVrdWplbXkga3Jhd8SZZHppZSBncmFmdSwgYWJ5IHpuYWxlxbrEhyB6YXfDs3IgZGxhIGRhbmVnbyBzZWdtZW50dQ0KICAgICAgICAgICAgZm9yIHUsIHYsIGRhdGEgaW4gcGF0aGZpbmRlci5ncmFwaC5lZGdlcyhkYXRhPVRydWUpOg0KICAgICAgICAgICAgICAgIGlmIGRhdGFbJ3NlZ21lbnRfbmFtZSddID09IHNlZ21lbnRfbmFtZToNCiAgICAgICAgICAgICAgICAgICAgc2NpZXprYV96YXdvcm93LmFkZChkYXRhWyd2YWx2ZV9uYW1lJ10pDQogICAgICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgIA0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAic3RhdHVzIjogInN1Y2Nlc3MiLA0KICAgICAgICAgICAgInN1Z2Vyb3dhbmVfemF3b3J5Ijogc29ydGVkKGxpc3Qoc2NpZXprYV96YXdvcm93KSksDQogICAgICAgICAgICAic2VnbWVudHlfdHJhc3kiOiBzY2llemthX3NlZ21lbnRvdw0KICAgICAgICB9KQ0KDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAic3RhdHVzIjogImVycm9yIiwNCiAgICAgICAgICAgICJtZXNzYWdlIjogZiJOaWUgbW/FvG5hIGJ5xYJvIHd5dHljennEhyB0cmFzeToge2V9Ig0KICAgICAgICB9KSwgNDA0DQoNCkBicC5yb3V0ZSgnL2FwaS9hbGFybXkvYWt0eXduZScsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBnZXRfYWt0eXduZV9hbGFybXkoKToNCiAgICAiIiJad3JhY2EgbGlzdMSZIGFrdHl3bnljaCBhbGFybcOzdyIiIg0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgIA0KICAgIHRyeToNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICBTRUxFQ1QgaWQsIHR5cF9hbGFybXUsIG5hendhX3NwcnpldHUsIHdhcnRvc2MsIGxpbWl0X3ByemVrcm9jemVuaWEsIA0KICAgICAgICAgICAgICAgICAgIGN6YXNfd3lzdGFwaWVuaWEsIHN0YXR1c19hbGFybXUgDQogICAgICAgICAgICBGUk9NIGFsYXJteSANCiAgICAgICAgICAgIFdIRVJFIHN0YXR1c19hbGFybXUgPSAnQUtUWVdOWScNCiAgICAgICAgICAgIE9SREVSIEJZIGN6YXNfd3lzdGFwaWVuaWEgREVTQw0KICAgICAgICAiIiIpDQogICAgICAgIGFsYXJteSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgIA0KICAgICAgICAjIEtvbndlcnR1aiBkYXRldGltZSBuYSBzdHJpbmcNCiAgICAgICAgZm9yIGFsYXJtIGluIGFsYXJteToNCiAgICAgICAgICAgIGFsYXJtWydjemFzX3d5c3RhcGllbmlhJ10gPSBhbGFybS5nZXQoJ2N6YXNfd3lzdGFwaWVuaWEnKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoYWxhcm15KQ0KICAgIGZpbmFsbHk6DQogICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgIGNvbm4uY2xvc2UoKQ0KDQpAYnAucm91dGUoJy9hcGkvdGVzdC9zZW5zb3JzJywgbWV0aG9kcz1bJ1BPU1QnXSkNCmRlZiB0ZXN0X3NlbnNvcnMoKToNCiAgICAiIiJFbmRwb2ludCB0ZXN0b3d5IGRvIHd5bXVzemVuaWEgb2Rjenl0dSBjenVqbmlrw7N3IiIiDQogICAgdHJ5Og0KICAgICAgICBzZW5zb3Jfc2VydmljZSA9IGdldF9zZW5zb3Jfc2VydmljZSgpICMgPC0tLSBaTUlFxYMgVMSYIExJTknEmA0KICAgICAgICBzZW5zb3Jfc2VydmljZS5yZWFkX3NlbnNvcnMoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiAnT2Rjenl0IGN6dWpuaWvDs3cgd3lrb25hbnkgcG9tecWbbG5pZSd9KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IHN0cihlKX0pLCA1MDANCg0KQGJwLnJvdXRlKCcvYXBpL3BvbWlhcnkvaGlzdG9yaWEnLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgZ2V0X2hpc3RvcmlhX3BvbWlhcm93KCk6DQogICAgIiIiUG9iaWVyYSBoaXN0b3JpxJkgcG9taWFyw7N3IHogb3N0YXRuaWNoIDI0IGdvZHppbiIiIg0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgIA0KICAgIHRyeToNCiAgICAgICAgIyBQb2JpZXJ6IGRhbmUgeiBvc3RhdG5pY2ggMjRoDQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgU0VMRUNUIGguKiwgcy5uYXp3YV91bmlrYWxuYSwgcy50eXBfc3ByemV0dQ0KICAgICAgICAgICAgRlJPTSBoaXN0b3JpYV9wb21pYXJvdyBoDQogICAgICAgICAgICBKT0lOIHNwcnpldCBzIE9OIGguaWRfc3ByemV0dSA9IHMuaWQNCiAgICAgICAgICAgIFdIRVJFIGguY3phc19wb21pYXJ1ID4gJXMNCiAgICAgICAgICAgIE9SREVSIEJZIGguY3phc19wb21pYXJ1IERFU0MNCiAgICAgICAgIiIiLCAoZGF0ZXRpbWUubm93KHRpbWV6b25lLnV0YykgLSB0aW1lZGVsdGEoaG91cnM9MjQpLCkpDQogICAgICAgIA0KICAgICAgICBwb21pYXJ5ID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgDQogICAgICAgICMgRm9ybWF0dWogZGF0eSBkbyBKU09ODQogICAgICAgIGZvciBwb21pYXIgaW4gcG9taWFyeToNCiAgICAgICAgICAgIHBvbWlhclsnY3phc19wb21pYXJ1J10gPSBwb21pYXIuZ2V0KCdjemFzX3BvbWlhcnUnKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKQ0KICAgICAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KHBvbWlhcnkpDQogICAgICAgIA0KICAgIGZpbmFsbHk6DQogICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgIGNvbm4uY2xvc2UoKQ0KDQpAYnAucm91dGUoJy9hcGkvYWxhcm15L3BvdHdpZXJkeicsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYgcG90d2llcmR6X2FsYXJtKCk6DQogICAgIiIiRW5kcG9pbnQgZG8gcG90d2llcmR6YW5pYSBhbGFybcOzdyIiIg0KICAgIGRhbmUgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICBpZF9hbGFybXUgPSBkYW5lLmdldCgnaWRfYWxhcm11JykNCiAgICANCiAgICBpZiBub3QgaWRfYWxhcm11Og0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiAnQnJhayBJRCBhbGFybXUnfSksIDQwMA0KICAgICAgICANCiAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKCkNCiAgICANCiAgICB0cnk6DQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgVVBEQVRFIGFsYXJteSANCiAgICAgICAgICAgIFNFVCBzdGF0dXNfYWxhcm11ID0gJ1BPVFdJRVJEWk9OWScsDQogICAgICAgICAgICAgICAgY3phc19wb3R3aWVyZHplbmlhID0gJXMNCiAgICAgICAgICAgIFdIRVJFIGlkID0gJXMgQU5EIHN0YXR1c19hbGFybXUgPSAnQUtUWVdOWScNCiAgICAgICAgIiIiLCAoZGF0ZXRpbWUubm93KHRpbWV6b25lLnV0YyksIGlkX2FsYXJtdSkpDQogICAgICAgIA0KICAgICAgICBjb25uLmNvbW1pdCgpDQogICAgICAgIA0KICAgICAgICBpZiBjdXJzb3Iucm93Y291bnQgPT0gMDoNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6ICdBbGFybSBuaWUgem5hbGV6aW9ueSBsdWIganXFvCBwb3R3aWVyZHpvbnknfSksIDQwNA0KICAgICAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6ICdBbGFybSBwb3R3aWVyZHpvbnkgcG9tecWbbG5pZSd9KQ0KICAgICAgICANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGNvbm4ucm9sbGJhY2soKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiBmJ0LFgsSFZCBiYXp5IGRhbnljaDoge3N0cihlKX0nfSksIDUwMA0KICAgICAgICANCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCg0KQGJwLnJvdXRlKCcvYXBpL3Rlc3QvYWxhcm0nLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIHRlc3RfYWxhcm0oKToNCiAgICAiIiJFbmRwb2ludCBkbyB0ZXN0b3dhbmlhIGFsYXJtw7N3IiIiDQogICAgdHJ5Og0KICAgICAgICBkYW5lID0gcmVxdWVzdC5nZXRfanNvbigpDQogICAgICAgIGlmIG5vdCBkYW5lOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogJ0JyYWsgZGFueWNoIHcgxbzEhWRhbml1J30pLCA0MDANCiAgICAgICAgICAgIA0KICAgICAgICBzcHJ6ZXRfaWQgPSBkYW5lLmdldCgnc3ByemV0X2lkJykNCiAgICAgICAgdHlwX2FsYXJtdSA9IGRhbmUuZ2V0KCd0eXBfYWxhcm11JywgJ3RlbXBlcmF0dXJhJykNCiAgICAgICAgDQogICAgICAgIGlmIG5vdCBzcHJ6ZXRfaWQ6DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiAnQnJhayBJRCBzcHJ6xJl0dSd9KSwgNDAwDQogICAgICAgICAgICANCiAgICAgICAgaWYgdHlwX2FsYXJtdSBub3QgaW4gWyd0ZW1wZXJhdHVyYScsICdjaXNuaWVuaWUnXToNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6ICdOaWVwcmF3aWTFgm93eSB0eXAgYWxhcm11J30pLCA0MDANCiAgICAgICAgc2Vuc29yX3NlcnZpY2UgPSBnZXRfc2Vuc29yX3NlcnZpY2UoKSAjIDwtLS0gWk1JRcWDIFTEmCBMSU5JxJggICAgDQogICAgICAgIHNlbnNvcl9zZXJ2aWNlLmZvcmNlX2FsYXJtKHNwcnpldF9pZCwgdHlwX2FsYXJtdSkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogZidXeW11c3pvbm8gYWxhcm0ge3R5cF9hbGFybXV9IGRsYSBzcHJ6xJl0dSBJRD17c3ByemV0X2lkfSd9KQ0KICAgICAgICANCiAgICBleGNlcHQgVmFsdWVFcnJvciBhcyB2ZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogc3RyKHZlKX0pLCA0MDANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnbWVzc2FnZSc6IGYnQsWCxIVkIHNlcndlcmE6IHtzdHIoZSl9J30pLCA1MDANCg0KDQoNCkBicC5yb3V0ZSgnL2ZpbHRyeScpDQpkZWYgc2hvd19maWx0cnlfcGFuZWwoKToNCiAgICAiIiJSZW5kZXJ1amUgc3Ryb27EmSB6IHBhbmVsZW0gbW9uaXRvcmluZ3UgZmlsdHLDs3cuIiIiDQogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnZmlsdHJ5X3NjYWRhLmh0bWwnKQ0KDQojIE5PV1ksIFpBQVdBTlNPV0FOWSBFTkRQT0lOVCBETyBNT05JVE9SSU5HVSBGSUxUUsOTVw0KQGJwLnJvdXRlKCcvYXBpL2ZpbHRyeS9zdGF0dXMnKQ0KZGVmIGdldF9maWx0cnlfc3RhdHVzX3NjYWRhKCk6DQogICAgIiIiDQogICAgWndyYWNhIGtvbXBsZXRueSwgc3pjemVnw7PFgm93eSBzdGF0dXMgZGxhIGthxbxkZWdvIGZpbHRyYSAoRlogaSBGTikNCiAgICBuYSBwb3RyemVieSBpbnRlcmZlanN1IFNDQURBLiBaYXdpZXJhOg0KICAgIC0gUG9kc3Rhd293ZSBkYW5lIGkgcGFyYW1ldHJ5ICh0ZW1wZXJhdHVyYSwgY2nFm25pZW5pZSkuDQogICAgLSBJbmZvcm1hY2plIG8gYWt0eXduZWogb3BlcmFjamkgaSBwcnpldHdhcnphbmVqIHBhcnRpaS4NCiAgICAtIFBsYW5vd2FueSBjemFzIHpha2/FhGN6ZW5pYSBvcGVyYWNqaS4NCiAgICAtIExpc3TEmSBwYXJ0aWkgb2N6ZWt1asSFY3ljaCB3IGtvbGVqY2UgKGplxZtsaSBmaWx0ciBqZXN0IHdvbG55KS4NCiAgICAiIiINCiAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICANCiAgICB0cnk6DQogICAgICAgICMgMS4gUG9iaWVyeiBwb2RzdGF3b3dlIGRhbmUgbyBmaWx0cmFjaCwgdyB0eW0gaWNoIHBhcmFtZXRyeSBmaXp5Y3puZQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFNFTEVDVCANCiAgICAgICAgICAgICAgICBpZCwgbmF6d2FfdW5pa2FsbmEsIHN0YW5fc3ByemV0dSwgdHlwX3NwcnpldHUsDQogICAgICAgICAgICAgICAgdGVtcGVyYXR1cmFfYWt0dWFsbmEsIGNpc25pZW5pZV9ha3R1YWxuZSwgcG96aW9tX2FrdHVhbG55X3Byb2NlbnQsDQogICAgICAgICAgICAgICAgdGVtcGVyYXR1cmFfbWF4LCBjaXNuaWVuaWVfbWF4LCBvc3RhdG5pYV9ha3R1YWxpemFjamENCiAgICAgICAgICAgIEZST00gc3ByemV0IA0KICAgICAgICAgICAgV0hFUkUgdHlwX3NwcnpldHUgPSAnZmlsdHInDQogICAgICAgICAgICBPUkRFUiBCWSBuYXp3YV91bmlrYWxuYQ0KICAgICAgICAiIiIpDQogICAgICAgIGZpbHRyeSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgIA0KICAgICAgICAjIFPFgm93bmlrIHogZGVmaW5pY2phbWkgY3phc8OzdyB0cndhbmlhIG9wZXJhY2ppIHcgbWludXRhY2gNCiAgICAgICAgRFVSQVRJT05TID0gew0KICAgICAgICAgICAgJ0J1ZG93YW5pZSBwbGFja2EnOiAzMCwgJ0ZpbHRyb3dhbmllIHcga2/Fgm8nOiAxNSwgJ1ByemVkbXVjaGl3YW5pZSc6IDEwLA0KICAgICAgICAgICAgJ0RtdWNoYW5pZSBmaWx0cmEnOiA0NSwgJ0N6eXN6Y3plbmllJzogMjAsICdUUkFOU0ZFUic6IDMwLCAnRklMVFJBQ0pBJzogMzANCiAgICAgICAgfQ0KDQogICAgICAgICMgMi4gRGxhIGthxbxkZWdvIGZpbHRyYSwgd3pib2dhxIcgZ28gbyBkYW5lIG9wZXJhY3lqbmUNCiAgICAgICAgZm9yIGZpbHRyIGluIGZpbHRyeToNCiAgICAgICAgICAgIGZpbHRyWydha3R5d25hX29wZXJhY2phJ10gPSBOb25lDQogICAgICAgICAgICBmaWx0clsna29sZWprYV9vY3pla3VqYWN5Y2gnXSA9IFtdDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgMmEuIFNwcmF3ZMW6LCBjenkgZmlsdHIgamVzdCB1xbx5d2FueSB3IGpha2llasWbIGFrdHl3bmVqIG9wZXJhY2ppDQogICAgICAgICAgICAjIFXFvHl3YW15IHrFgsSFY3plbmlhIHogbG9nX3V6eXRlX3NlZ21lbnR5LCBhYnkgdG8gdXN0YWxpxIcNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgIFNFTEVDVA0KICAgICAgICAgICAgICAgICAgICBvbC5pZCBhcyBpZF9vcGVyYWNqaSwgb2wudHlwX29wZXJhY2ppLCBvbC5jemFzX3JvenBvY3plY2lhLCBvbC5zdGF0dXNfb3BlcmFjamksDQogICAgICAgICAgICAgICAgICAgIG9sLm9waXMgYXMgb3Bpc19vcGVyYWNqaSwNCiAgICAgICAgICAgICAgICAgICAgcHMuaWQgYXMgaWRfcGFydGlpLCBwcy51bmlrYWxueV9rb2QsIHBzLm5hendhX3BhcnRpaSwgcHMudHlwX3N1cm93Y2EsDQogICAgICAgICAgICAgICAgICAgIHpyb2Rsby5uYXp3YV91bmlrYWxuYSBBUyBzcHJ6ZXRfenJvZGxvd3ksDQogICAgICAgICAgICAgICAgICAgIGNlbC5uYXp3YV91bmlrYWxuYSBBUyBzcHJ6ZXRfZG9jZWxvd3kNCiAgICAgICAgICAgICAgICBGUk9NIHNwcnpldCBzDQogICAgICAgICAgICAgICAgSk9JTiBwb3J0eV9zcHJ6ZXR1IHBzX3BvcnQgT04gcy5pZCA9IHBzX3BvcnQuaWRfc3ByemV0dQ0KICAgICAgICAgICAgICAgIEpPSU4gc2VnbWVudHkgc2VnIE9OIHBzX3BvcnQuaWQgPSBzZWcuaWRfcG9ydHVfc3RhcnRvd2VnbyBPUiBwc19wb3J0LmlkID0gc2VnLmlkX3BvcnR1X2tvbmNvd2Vnbw0KICAgICAgICAgICAgICAgIEpPSU4gbG9nX3V6eXRlX3NlZ21lbnR5IGx1cyBPTiBzZWcuaWQgPSBsdXMuaWRfc2VnbWVudHUNCiAgICAgICAgICAgICAgICBKT0lOIG9wZXJhY2plX2xvZyBvbCBPTiBsdXMuaWRfb3BlcmFjamlfbG9nID0gb2wuaWQNCiAgICAgICAgICAgICAgICBMRUZUIEpPSU4gcGFydGllX3N1cm93Y2EgcHMgT04gb2wuaWRfcGFydGlpX3N1cm93Y2EgPSBwcy5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiBzcHJ6ZXQgenJvZGxvIE9OIG9sLmlkX3NwcnpldHVfenJvZGxvd2VnbyA9IHpyb2Rsby5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiBzcHJ6ZXQgY2VsIE9OIG9sLmlkX3NwcnpldHVfZG9jZWxvd2VnbyA9IGNlbC5pZA0KICAgICAgICAgICAgICAgIFdIRVJFIG9sLnN0YXR1c19vcGVyYWNqaSA9ICdha3R5d25hJyBBTkQgcy5pZCA9ICVzDQogICAgICAgICAgICAgICAgTElNSVQgMQ0KICAgICAgICAgICAgIiIiLCAoZmlsdHJbJ2lkJ10sKSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgYWt0eXduYV9vcGVyYWNqYSA9IGN1cnNvci5mZXRjaG9uZSgpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIGFrdHl3bmFfb3BlcmFjamE6DQogICAgICAgICAgICAgICAgZmlsdHJbJ2FrdHl3bmFfb3BlcmFjamEnXSA9IGFrdHl3bmFfb3BlcmFjamENCiAgICAgICAgICAgICAgICAjIE9ibGljeiBpIGRvZGFqIHBsYW5vd2FueSBjemFzIHpha2/FhGN6ZW5pYQ0KICAgICAgICAgICAgICAgIHR5cF9vcCA9IGFrdHl3bmFfb3BlcmFjamEuZ2V0KCd0eXBfb3BlcmFjamknKQ0KICAgICAgICAgICAgICAgIGN6YXNfc3RhcnQgPSBha3R5d25hX29wZXJhY2phLmdldCgnY3phc19yb3pwb2N6ZWNpYScpDQogICAgICAgICAgICAgICAgaWYgdHlwX29wIGluIERVUkFUSU9OUyBhbmQgY3phc19zdGFydDoNCiAgICAgICAgICAgICAgICAgICAgZHVyYXRpb25fbWludXRlcyA9IERVUkFUSU9OU1t0eXBfb3BdDQogICAgICAgICAgICAgICAgICAgIGVuZF90aW1lID0gY3phc19zdGFydCArIHRpbWVkZWx0YShtaW51dGVzPWR1cmF0aW9uX21pbnV0ZXMpDQogICAgICAgICAgICAgICAgICAgIGZpbHRyWydha3R5d25hX29wZXJhY2phJ11bJ2N6YXNfemFrb25jemVuaWFfaXNvJ10gPSBlbmRfdGltZS5pc29mb3JtYXQoKQ0KICAgICAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgICAgIGZpbHRyWydha3R5d25hX29wZXJhY2phJ11bJ2N6YXNfemFrb25jemVuaWFfaXNvJ10gPSBOb25lDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICMgMmIuIEplxZtsaSBmaWx0ciBuaWUgamVzdCB6YWrEmXR5LCBzcHJhd2TFuiwgY3p5IGt0b8WbIG5hIG5pZWdvIGN6ZWthDQogICAgICAgICAgICAgICAgIyBUbyBzxIUgcGFydGllLCBrdMOzcmUgbWFqxIUgdyBwb2x1IGBpZF9ha3R1YWxuZWdvX2ZpbHRyYWAgbmF6d8SZIHRlZ28gZmlsdHJhDQogICAgICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgICAgIFNFTEVDVCANCiAgICAgICAgICAgICAgICAgICAgICAgIHBzLmlkIGFzIGlkX3BhcnRpaSwgcHMudW5pa2Fsbnlfa29kLCBwcy5uYXp3YV9wYXJ0aWksDQogICAgICAgICAgICAgICAgICAgICAgICBwcy5ha3R1YWxueV9ldGFwX3Byb2Nlc3UsIHMubmF6d2FfdW5pa2FsbmEgYXMgbmF6d2FfcmVha3RvcmENCiAgICAgICAgICAgICAgICAgICAgRlJPTSBwYXJ0aWVfc3Vyb3djYSBwcw0KICAgICAgICAgICAgICAgICAgICBKT0lOIHNwcnpldCBzIE9OIHBzLmlkX2FrdHVhbG5lZ29fc3ByemV0dSA9IHMuaWQNCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgcHMuaWRfYWt0dWFsbmVnb19maWx0cmEgPSAlcyBBTkQgcHMuc3RhdHVzX3BhcnRpaSBOT1QgSU4gKCdHb3Rvd3kgZG8gd3lzxYJhbmlhJywgJ1cgbWFnYXp5bmllIGN6eXN0eW0nKQ0KICAgICAgICAgICAgICAgICAgICBPUkRFUiBCWSBwcy5jemFzX3JvenBvY3plY2lhX2V0YXB1IEFTQw0KICAgICAgICAgICAgICAgICIiIiwgKGZpbHRyWyduYXp3YV91bmlrYWxuYSddLCkpDQogICAgICAgICAgICAgICAgZmlsdHJbJ2tvbGVqa2Ffb2N6ZWt1amFjeWNoJ10gPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KDQogICAgICAgIHJldHVybiBqc29uaWZ5KGZpbHRyeSkNCiAgICAgICAgDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAjIFp3csOzxIcgYsWCxIVkIHcgZm9ybWFjaWUgSlNPTiBkbGEgxYJhdHdpZWpzemVnbyBkZWJ1Z293YW5pYSBuYSBmcm9uY2llDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ0LFgsSFZCBwbyBzdHJvbmllIHNlcndlcmE6IHtzdHIoZSl9J30pLCA1MDANCiAgICBmaW5hbGx5Og0KICAgICAgICBpZiBjb25uIGFuZCBjb25uLmlzX2Nvbm5lY3RlZCgpOg0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KDQojID09PSBOT1dFIEFQSSBETEEgWkFSWsSERFpBTklBIENZS0xBTUkgRklMVFJBQ1lKTllNSSA9PT0NCg0KQGJwLnJvdXRlKCcvYXBpL2N5a2xlLWZpbHRyYWN5am5lLzxpbnQ6aWRfcGFydGlpPicpDQpkZWYgZ2V0X2N5a2xlX3BhcnRpaShpZF9wYXJ0aWkpOg0KICAgICIiIlBvYmllcmEgaGlzdG9yacSZIHdzenlzdGtpY2ggY3lrbGkgZmlsdHJhY3lqbnljaCBkbGEgZGFuZWogcGFydGlpLiIiIg0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgIA0KICAgIHRyeToNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICBTRUxFQ1QgY2YuKiwgDQogICAgICAgICAgICAgICAgICAgcHMudW5pa2Fsbnlfa29kLCBwcy50eXBfc3Vyb3djYSwgcHMubmF6d2FfcGFydGlpLA0KICAgICAgICAgICAgICAgICAgIFRJTUVTVEFNUERJRkYoTUlOVVRFLCBjZi5jemFzX3JvenBvY3plY2lhLCBjZi5jemFzX3pha29uY3plbmlhKSBhcyByemVjenl3aXN0eV9jemFzX21pbnV0DQogICAgICAgICAgICBGUk9NIGN5a2xlX2ZpbHRyYWN5am5lIGNmDQogICAgICAgICAgICBKT0lOIHBhcnRpZV9zdXJvd2NhIHBzIE9OIGNmLmlkX3BhcnRpaSA9IHBzLmlkDQogICAgICAgICAgICBXSEVSRSBjZi5pZF9wYXJ0aWkgPSAlcw0KICAgICAgICAgICAgT1JERVIgQlkgY2YubnVtZXJfY3lrbHUsIGNmLmN6YXNfcm96cG9jemVjaWENCiAgICAgICAgIiIiLCAoaWRfcGFydGlpLCkpDQogICAgICAgIA0KICAgICAgICBjeWtsZSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgIHJldHVybiBqc29uaWZ5KGN5a2xlKQ0KICAgICAgICANCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCg0KQGJwLnJvdXRlKCcvYXBpL3BhcnRpZS9ha3R1YWxueS1zdGFuJykNCmRlZiBnZXRfcGFydGllX2FrdHVhbG55X3N0YW4oKToNCiAgICAiIiJQb2JpZXJhIGFrdHVhbG55IHN0YW4gd3N6eXN0a2ljaCBwYXJ0aWkgdyBzeXN0ZW1pZSB6IHN6Y3plZ8OzxYJhbWkgcHJvY2VzdS4iIiINCiAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICANCiAgICB0cnk6DQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgU0VMRUNUIHBzLiosDQogICAgICAgICAgICAgICAgICAgcy5uYXp3YV91bmlrYWxuYSBhcyBuYXp3YV9yZWFrdG9yYSwNCiAgICAgICAgICAgICAgICAgICBzLnR5cF9zcHJ6ZXR1LA0KICAgICAgICAgICAgICAgICAgIENBU0UgDQogICAgICAgICAgICAgICAgICAgICAgIFdIRU4gcHMucGxhbm93YW55X2N6YXNfemFrb25jemVuaWEgSVMgTk9UIE5VTEwgDQogICAgICAgICAgICAgICAgICAgICAgIFRIRU4gVElNRVNUQU1QRElGRihNSU5VVEUsIE5PVygpLCBwcy5wbGFub3dhbnlfY3phc196YWtvbmN6ZW5pYSkNCiAgICAgICAgICAgICAgICAgICAgICAgRUxTRSBOVUxMDQogICAgICAgICAgICAgICAgICAgRU5EIGFzIHBvem9zdGFsZV9taW51dHksDQogICAgICAgICAgICAgICAgICAgQ0FTRSANCiAgICAgICAgICAgICAgICAgICAgICAgV0hFTiBwcy5wbGFub3dhbnlfY3phc196YWtvbmN6ZW5pYSBJUyBOT1QgTlVMTCBBTkQgTk9XKCkgPiBwcy5wbGFub3dhbnlfY3phc196YWtvbmN6ZW5pYQ0KICAgICAgICAgICAgICAgICAgICAgICBUSEVOIFRSVUUNCiAgICAgICAgICAgICAgICAgICAgICAgRUxTRSBGQUxTRQ0KICAgICAgICAgICAgICAgICAgIEVORCBhcyBwcnpla3JvY3pvbnlfY3phcw0KICAgICAgICAgICAgRlJPTSBwYXJ0aWVfc3Vyb3djYSBwcw0KICAgICAgICAgICAgTEVGVCBKT0lOIHNwcnpldCBzIE9OIHBzLmlkX2FrdHVhbG5lZ29fc3ByemV0dSA9IHMuaWQNCiAgICAgICAgICAgIFdIRVJFIHBzLnN0YXR1c19wYXJ0aWkgTk9UIElOICgnVyBtYWdhenluaWUgY3p5c3R5bScsICdHb3Rvd3kgZG8gd3lzxYJhbmlhJykNCiAgICAgICAgICAgIE9SREVSIEJZIHBzLmN6YXNfcm96cG9jemVjaWFfZXRhcHUgREVTQw0KICAgICAgICAiIiIpDQogICAgICAgIA0KICAgICAgICBwYXJ0aWUgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeShwYXJ0aWUpDQogICAgICAgIA0KICAgIGZpbmFsbHk6DQogICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgIGNvbm4uY2xvc2UoKQ0KDQpAYnAucm91dGUoJy9hcGkvZmlsdHJ5L3N6Y3plZ29sb3d5LXN0YXR1cycpDQpkZWYgZ2V0X2ZpbHRyeV9zemN6ZWdvbG93eV9zdGF0dXMoKToNCiAgICAiIiJQb2JpZXJhIHN6Y3plZ8OzxYJvd3kgc3RhdHVzIGZpbHRyw7N3IHogaW5mb3JtYWNqYW1pIG8gcGFydGlhY2ggaSBjeWtsYWNoLiIiIg0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgIA0KICAgIHRyeToNCiAgICAgICAgIyBQb2RzdGF3b3dlIGluZm9ybWFjamUgbyBmaWx0cmFjaA0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFNFTEVDVCBpZCwgbmF6d2FfdW5pa2FsbmEgYXMgbmF6d2FfZmlsdHJhLCBzdGFuX3NwcnpldHUsIHR5cF9zcHJ6ZXR1DQogICAgICAgICAgICBGUk9NIHNwcnpldCANCiAgICAgICAgICAgIFdIRVJFIHR5cF9zcHJ6ZXR1ID0gJ2ZpbHRyJw0KICAgICAgICAgICAgT1JERVIgQlkgbmF6d2FfdW5pa2FsbmENCiAgICAgICAgIiIiKQ0KICAgICAgICBmaWx0cnkgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICANCiAgICAgICAgZm9yIGZpbHRyIGluIGZpbHRyeToNCiAgICAgICAgICAgICMgU3ByYXdkxbogY3p5IGZpbHRyIG1hIGFrdHl3bsSFIG9wZXJhY2rEmQ0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgU0VMRUNUIG9sLiosIA0KICAgICAgICAgICAgICAgICAgICAgICBwcy51bmlrYWxueV9rb2QsIHBzLm5hendhX3BhcnRpaSwgcHMudHlwX3N1cm93Y2EsDQogICAgICAgICAgICAgICAgICAgICAgIHBzLmFrdHVhbG55X2V0YXBfcHJvY2VzdSwgcHMubnVtZXJfY3lrbHVfYWt0dWFsbmVnbywNCiAgICAgICAgICAgICAgICAgICAgICAgcHMuY3phc19yb3pwb2N6ZWNpYV9ldGFwdSwgcHMucGxhbm93YW55X2N6YXNfemFrb25jemVuaWEsDQogICAgICAgICAgICAgICAgICAgICAgIHNfc3RhcnQubmF6d2FfdW5pa2FsbmEgYXMgcmVha3Rvcl9zdGFydG93eSwNCiAgICAgICAgICAgICAgICAgICAgICAgc19jZWwubmF6d2FfdW5pa2FsbmEgYXMgcmVha3Rvcl9kb2NlbG93eSwNCiAgICAgICAgICAgICAgICAgICAgICAgQ0FTRSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgIFdIRU4gcHMucGxhbm93YW55X2N6YXNfemFrb25jemVuaWEgSVMgTk9UIE5VTEwgDQogICAgICAgICAgICAgICAgICAgICAgICAgICBUSEVOIFRJTUVTVEFNUERJRkYoTUlOVVRFLCBOT1coKSwgcHMucGxhbm93YW55X2N6YXNfemFrb25jemVuaWEpDQogICAgICAgICAgICAgICAgICAgICAgICAgICBFTFNFIE5VTEwNCiAgICAgICAgICAgICAgICAgICAgICAgRU5EIGFzIHBvem9zdGFsZV9taW51dHkNCiAgICAgICAgICAgICAgICBGUk9NIG9wZXJhY2plX2xvZyBvbA0KICAgICAgICAgICAgICAgIEpPSU4gcGFydGllX3N1cm93Y2EgcHMgT04gb2wuaWRfcGFydGlpX3N1cm93Y2EgPSBwcy5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiBzcHJ6ZXQgc19zdGFydCBPTiBvbC5pZF9zcHJ6ZXR1X3pyb2Rsb3dlZ28gPSBzX3N0YXJ0LmlkDQogICAgICAgICAgICAgICAgTEVGVCBKT0lOIHNwcnpldCBzX2NlbCBPTiBvbC5pZF9zcHJ6ZXR1X2RvY2Vsb3dlZ28gPSBzX2NlbC5pZA0KICAgICAgICAgICAgICAgIFdIRVJFIG9sLnN0YXR1c19vcGVyYWNqaSA9ICdha3R5d25hJyANCiAgICAgICAgICAgICAgICBBTkQgcHMuaWRfYWt0dWFsbmVnb19maWx0cmEgPSAlcw0KICAgICAgICAgICAgICAgIE9SREVSIEJZIG9sLmN6YXNfcm96cG9jemVjaWEgREVTQw0KICAgICAgICAgICAgICAgIExJTUlUIDENCiAgICAgICAgICAgICIiIiwgKGZpbHRyWyduYXp3YV9maWx0cmEnXSwpKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBha3R5d25hX29wZXJhY2phID0gY3Vyc29yLmZldGNob25lKCkNCiAgICAgICAgICAgIGZpbHRyWydha3R5d25hX29wZXJhY2phJ10gPSBha3R5d25hX29wZXJhY2phDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgSmXFm2xpIG5pZSBtYSBha3R5d25laiBvcGVyYWNqaSwgc3ByYXdkxbogY3p5IGt0b8WbIGN6ZWthIG5hIHRlbiBmaWx0cg0KICAgICAgICAgICAgaWYgbm90IGFrdHl3bmFfb3BlcmFjamE6DQogICAgICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgICAgIFNFTEVDVCBwcy4qLCBzLm5hendhX3VuaWthbG5hIGFzIG5hendhX3JlYWt0b3JhDQogICAgICAgICAgICAgICAgICAgIEZST00gcGFydGllX3N1cm93Y2EgcHMNCiAgICAgICAgICAgICAgICAgICAgSk9JTiBzcHJ6ZXQgcyBPTiBwcy5pZF9ha3R1YWxuZWdvX3NwcnpldHUgPSBzLmlkDQogICAgICAgICAgICAgICAgICAgIFdIRVJFIHBzLmlkX2FrdHVhbG5lZ29fZmlsdHJhID0gJXMgDQogICAgICAgICAgICAgICAgICAgIEFORCBwcy5ha3R1YWxueV9ldGFwX3Byb2Nlc3UgSU4gKCdzdXJvd3knLCAnZ290b3d5JykNCiAgICAgICAgICAgICAgICAgICAgT1JERVIgQlkgcHMuY3phc19yb3pwb2N6ZWNpYV9ldGFwdSBBU0MNCiAgICAgICAgICAgICAgICAgICAgTElNSVQgMw0KICAgICAgICAgICAgICAgICIiIiwgKGZpbHRyWyduYXp3YV9maWx0cmEnXSwpKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGZpbHRyWydrb2xlamthX29jemVrdWphY3ljaCddID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgZmlsdHJbJ2tvbGVqa2Ffb2N6ZWt1amFjeWNoJ10gPSBbXQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoZmlsdHJ5KQ0KICAgICAgICANCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCg0KQGJwLnJvdXRlKCcvYXBpL2N5a2xlL3JvenBvY3puaWonLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIHJvenBvY3puaWpfY3lrbF9maWx0cmFjeWpueSgpOg0KICAgICIiIlJvenBvY3p5bmEgbm93eSBjeWtsIGZpbHRyYWN5am55IGRsYSBwYXJ0aWkuIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIA0KICAgIHJlcXVpcmVkX2ZpZWxkcyA9IFsnaWRfcGFydGlpJywgJ3R5cF9jeWtsdScsICdpZF9maWx0cmEnLCAncmVha3Rvcl9zdGFydG93eSddDQogICAgaWYgbm90IGFsbChmaWVsZCBpbiBkYXRhIGZvciBmaWVsZCBpbiByZXF1aXJlZF9maWVsZHMpOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ0JyYWsgd3ltYWdhbnljaCBww7NsJ30pLCA0MDANCiAgICANCiAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKCkNCiAgICANCiAgICB0cnk6DQogICAgICAgICMgUG9iaWVyeiBha3R1YWxueSBudW1lciBjeWtsdSBwYXJ0aWkNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIlNFTEVDVCBudW1lcl9jeWtsdV9ha3R1YWxuZWdvIEZST00gcGFydGllX3N1cm93Y2EgV0hFUkUgaWQgPSAlcyIsIChkYXRhWydpZF9wYXJ0aWknXSwpKQ0KICAgICAgICByZXN1bHQgPSBjdXJzb3IuZmV0Y2hvbmUoKQ0KICAgICAgICBpZiBub3QgcmVzdWx0Og0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6ICdOaWUgem5hbGV6aW9ubyBwYXJ0aWknfSksIDQwNA0KICAgICAgICANCiAgICAgICAgbnVtZXJfY3lrbHUgPSByZXN1bHRbMF0gKyAxDQogICAgICAgIA0KICAgICAgICAjIE9ibGljeiBwbGFub3dhbnkgY3phcyB6YWtvxYRjemVuaWENCiAgICAgICAgZHVyYXRpb25zID0gew0KICAgICAgICAgICAgJ3BsYWNlayc6IDMwLA0KICAgICAgICAgICAgJ2ZpbHRyYWNqYSc6IDE1LA0KICAgICAgICAgICAgJ2RtdWNoYW5pZSc6IDQ1DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHBsYW5vd2FueV9jemFzID0gZGF0ZXRpbWUubm93KHRpbWV6b25lLnV0YykgKyB0aW1lZGVsdGEobWludXRlcz1kdXJhdGlvbnMuZ2V0KGRhdGFbJ3R5cF9jeWtsdSddLCAzMCkpDQogICAgICAgIA0KICAgICAgICAjIFdzdGF3IG5vd3kgY3lrbA0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIElOU0VSVCBJTlRPIGN5a2xlX2ZpbHRyYWN5am5lIA0KICAgICAgICAgICAgKGlkX3BhcnRpaSwgbnVtZXJfY3lrbHUsIHR5cF9jeWtsdSwgaWRfZmlsdHJhLCByZWFrdG9yX3N0YXJ0b3d5LCANCiAgICAgICAgICAgICByZWFrdG9yX2RvY2Vsb3d5LCBjemFzX3JvenBvY3plY2lhLCB3eW5pa19vY2VueSkNCiAgICAgICAgICAgIFZBTFVFUyAoJXMsICVzLCAlcywgJXMsICVzLCAlcywgTk9XKCksICdvY3pla3VqZScpDQogICAgICAgICIiIiwgKGRhdGFbJ2lkX3BhcnRpaSddLCBudW1lcl9jeWtsdSwgZGF0YVsndHlwX2N5a2x1J10sIGRhdGFbJ2lkX2ZpbHRyYSddLCANCiAgICAgICAgICAgICAgZGF0YVsncmVha3Rvcl9zdGFydG93eSddLCBkYXRhLmdldCgncmVha3Rvcl9kb2NlbG93eScpKSkNCiAgICAgICAgDQogICAgICAgIGN5a2xfaWQgPSBjdXJzb3IubGFzdHJvd2lkDQogICAgICAgIA0KICAgICAgICAjIEFrdHVhbGl6dWogcGFydGnEmQ0KICAgICAgICBldGFwX21hcHBpbmcgPSB7DQogICAgICAgICAgICAncGxhY2VrJzogJ3BsYWNlaycsDQogICAgICAgICAgICAnZmlsdHJhY2phJzogJ3dfa29sZScsIA0KICAgICAgICAgICAgJ2RtdWNoYW5pZSc6ICdkbXVjaGFuaWUnDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgVVBEQVRFIHBhcnRpZV9zdXJvd2NhIA0KICAgICAgICAgICAgU0VUIG51bWVyX2N5a2x1X2FrdHVhbG5lZ28gPSAlcywNCiAgICAgICAgICAgICAgICBha3R1YWxueV9ldGFwX3Byb2Nlc3UgPSAlcywNCiAgICAgICAgICAgICAgICBjemFzX3JvenBvY3plY2lhX2V0YXB1ID0gTk9XKCksDQogICAgICAgICAgICAgICAgcGxhbm93YW55X2N6YXNfemFrb25jemVuaWEgPSAlcywNCiAgICAgICAgICAgICAgICBpZF9ha3R1YWxuZWdvX2ZpbHRyYSA9ICVzLA0KICAgICAgICAgICAgICAgIHJlYWt0b3JfZG9jZWxvd3kgPSAlcw0KICAgICAgICAgICAgV0hFUkUgaWQgPSAlcw0KICAgICAgICAiIiIsIChudW1lcl9jeWtsdSwgZXRhcF9tYXBwaW5nW2RhdGFbJ3R5cF9jeWtsdSddXSwgcGxhbm93YW55X2N6YXMsDQogICAgICAgICAgICAgIGRhdGFbJ2lkX2ZpbHRyYSddLCBkYXRhLmdldCgncmVha3Rvcl9kb2NlbG93eScpLCBkYXRhWydpZF9wYXJ0aWknXSkpDQogICAgICAgIA0KICAgICAgICBjb25uLmNvbW1pdCgpDQogICAgICAgIA0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAnbWVzc2FnZSc6IGYnUm96cG9jesSZdG8gY3lrbCB7ZGF0YVsidHlwX2N5a2x1Il19IGRsYSBwYXJ0aWknLA0KICAgICAgICAgICAgJ2N5a2xfaWQnOiBjeWtsX2lkLA0KICAgICAgICAgICAgJ251bWVyX2N5a2x1JzogbnVtZXJfY3lrbHUNCiAgICAgICAgfSkNCiAgICAgICAgDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBjb25uLnJvbGxiYWNrKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIHJvenBvY3p5bmFuaWEgY3lrbHU6IHtzdHIoZSl9J30pLCA1MDANCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCg0KQGJwLnJvdXRlKCcvYXBpL2N5a2xlL3pha29uY3onLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIHpha29uY3pfY3lrbF9maWx0cmFjeWpueSgpOg0KICAgICIiIktvxYRjenkgYWt0dWFsbnkgY3lrbCBmaWx0cmFjeWpueSBpIHByemVjaG9kemkgZG8gbmFzdMSZcG5lZ28gZXRhcHUuIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIA0KICAgIGlmICdpZF9wYXJ0aWknIG5vdCBpbiBkYXRhOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ0JyYWsgSUQgcGFydGlpJ30pLCA0MDANCiAgICANCiAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICANCiAgICB0cnk6DQogICAgICAgICMgUG9iaWVyeiBha3R1YWxueSBzdGFuIHBhcnRpaQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFNFTEVDVCAqIEZST00gcGFydGllX3N1cm93Y2EgV0hFUkUgaWQgPSAlcw0KICAgICAgICAiIiIsIChkYXRhWydpZF9wYXJ0aWknXSwpKQ0KICAgICAgICANCiAgICAgICAgcGFydGlhID0gY3Vyc29yLmZldGNob25lKCkNCiAgICAgICAgaWYgbm90IHBhcnRpYToNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiAnTmllIHpuYWxlemlvbm8gcGFydGlpJ30pLCA0MDQNCiAgICAgICAgDQogICAgICAgICMgWmFrb8WEY3ogYWt0dWFsbnkgY3lrbA0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFVQREFURSBjeWtsZV9maWx0cmFjeWpuZSANCiAgICAgICAgICAgIFNFVCBjemFzX3pha29uY3plbmlhID0gTk9XKCksDQogICAgICAgICAgICAgICAgY3phc190cndhbmlhX21pbnV0ID0gVElNRVNUQU1QRElGRihNSU5VVEUsIGN6YXNfcm96cG9jemVjaWEsIE5PVygpKSwNCiAgICAgICAgICAgICAgICB3eW5pa19vY2VueSA9ICVzLA0KICAgICAgICAgICAgICAgIGtvbWVudGFyeiA9ICVzDQogICAgICAgICAgICBXSEVSRSBpZF9wYXJ0aWkgPSAlcyANCiAgICAgICAgICAgIEFORCBudW1lcl9jeWtsdSA9ICVzIA0KICAgICAgICAgICAgQU5EIGN6YXNfemFrb25jemVuaWEgSVMgTlVMTA0KICAgICAgICAiIiIsIChkYXRhLmdldCgnd3luaWtfb2NlbnknLCAnb2N6ZWt1amUnKSwgZGF0YS5nZXQoJ2tvbWVudGFyeicsICcnKSwNCiAgICAgICAgICAgICAgZGF0YVsnaWRfcGFydGlpJ10sIHBhcnRpYVsnbnVtZXJfY3lrbHVfYWt0dWFsbmVnbyddKSkNCiAgICAgICAgDQogICAgICAgICMgT2tyZcWbbCBuYXN0xJlwbnkgZXRhcCBuYSBwb2RzdGF3aWUgYWt0dWFsbmVnbw0KICAgICAgICBuZXh0X2V0YXAgPSAnZ290b3d5Jw0KICAgICAgICBuZXh0X2ZpbHRyID0gTm9uZQ0KICAgICAgICANCiAgICAgICAgaWYgcGFydGlhWydha3R1YWxueV9ldGFwX3Byb2Nlc3UnXSA9PSAncGxhY2VrJzoNCiAgICAgICAgICAgIG5leHRfZXRhcCA9ICdwcnplbGV3Jw0KICAgICAgICBlbGlmIHBhcnRpYVsnYWt0dWFsbnlfZXRhcF9wcm9jZXN1J10gPT0gJ3ByemVsZXcnOg0KICAgICAgICAgICAgbmV4dF9ldGFwID0gJ3dfa29sZScNCiAgICAgICAgZWxpZiBwYXJ0aWFbJ2FrdHVhbG55X2V0YXBfcHJvY2VzdSddID09ICd3X2tvbGUnOg0KICAgICAgICAgICAgbmV4dF9ldGFwID0gJ29jZW5hX3Byb2JraScNCiAgICAgICAgZWxpZiBwYXJ0aWFbJ2FrdHVhbG55X2V0YXBfcHJvY2VzdSddID09ICdkbXVjaGFuaWUnOg0KICAgICAgICAgICAgbmV4dF9ldGFwID0gJ2dvdG93eScNCiAgICAgICAgICAgIG5leHRfZmlsdHIgPSBOb25lDQogICAgICAgIA0KICAgICAgICAjIEFrdHVhbGl6dWogcGFydGnEmQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFVQREFURSBwYXJ0aWVfc3Vyb3djYSANCiAgICAgICAgICAgIFNFVCBha3R1YWxueV9ldGFwX3Byb2Nlc3UgPSAlcywNCiAgICAgICAgICAgICAgICBjemFzX3JvenBvY3plY2lhX2V0YXB1ID0gTk9XKCksDQogICAgICAgICAgICAgICAgcGxhbm93YW55X2N6YXNfemFrb25jemVuaWEgPSBOVUxMLA0KICAgICAgICAgICAgICAgIGlkX2FrdHVhbG5lZ29fZmlsdHJhID0gJXMNCiAgICAgICAgICAgIFdIRVJFIGlkID0gJXMNCiAgICAgICAgIiIiLCAobmV4dF9ldGFwLCBuZXh0X2ZpbHRyLCBkYXRhWydpZF9wYXJ0aWknXSkpDQogICAgICAgIA0KICAgICAgICBjb25uLmNvbW1pdCgpDQogICAgICAgIA0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAnbWVzc2FnZSc6IGYnWmFrb8WEY3pvbm8gY3lrbC4gUGFydGlhIHByemVzesWCYSBkbyBldGFwdToge25leHRfZXRhcH0nLA0KICAgICAgICAgICAgJ25leHRfZXRhcCc6IG5leHRfZXRhcA0KICAgICAgICB9KQ0KICAgICAgICANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGNvbm4ucm9sbGJhY2soKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogZidCxYLEhWQga2/FhGN6ZW5pYSBjeWtsdToge3N0cihlKX0nfSksIDUwMA0KICAgIGZpbmFsbHk6DQogICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgIGNvbm4uY2xvc2UoKQ0KDQpAYnAucm91dGUoJy9jeWtsZS1tb25pdG9yJykNCmRlZiBjeWtsZV9tb25pdG9yKCk6DQogICAgIiIiU2Vyd3VqZSBzdHJvbsSZIG1vbml0b3Jpbmd1IGN5a2xpIGZpbHRyYWN5am55Y2guIiIiDQogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnY3lrbGVfbW9uaXRvci5odG1sJykNCg0KIyA9PT0gRU5EUE9JTlRZIEFQSSBETEEgQUtUWVdOWUNIIFBBUlRJSSA9PT0NCg0KQGJwLnJvdXRlKCcvYXBpL3BhcnRpZS9ha3R5d25lJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9ha3R5d25lX3BhcnRpZSgpOg0KICAgICIiIg0KICAgIFBvYmllcmEgbGlzdMSZIHdzenlzdGtpY2ggYWt0eXdueWNoIHBhcnRpaSB3IHN5c3RlbWllIHogcGXFgm55bWkgc3pjemVnw7PFgmFtaToNCiAgICAtIExva2FsaXphY2phIGkgc3RhdHVzDQogICAgLSBBa3R1YWxueSBldGFwIHByb2Nlc3UNCiAgICAtIEN6YXN5IHJvenBvY3rEmWNpYSBpIHBsYW5vd2FuZWdvIHpha2/FhGN6ZW5pYQ0KICAgIC0gSW5mb3JtYWNqZSBvIG9wZXJhY2phY2gNCiAgICAiIiINCiAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICANCiAgICB0cnk6DQogICAgICAgICMgR8WCw7N3bmUgemFweXRhbmllIHBvYmllcmFqxIVjZSBha3R5d25lIHBhcnRpZQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFNFTEVDVCANCiAgICAgICAgICAgICAgICBwcy5pZCwNCiAgICAgICAgICAgICAgICBwcy51bmlrYWxueV9rb2QsDQogICAgICAgICAgICAgICAgcHMubmF6d2FfcGFydGlpLA0KICAgICAgICAgICAgICAgIHBzLnR5cF9zdXJvd2NhLA0KICAgICAgICAgICAgICAgIHBzLnpyb2Rsb19wb2Nob2R6ZW5pYSwNCiAgICAgICAgICAgICAgICBwcy53YWdhX3BvY3phdGtvd2Ffa2csDQogICAgICAgICAgICAgICAgcHMud2FnYV9ha3R1YWxuYV9rZywNCiAgICAgICAgICAgICAgICBwcy5kYXRhX3V0d29yemVuaWEsDQogICAgICAgICAgICAgICAgcHMuc3RhdHVzX3BhcnRpaSwNCiAgICAgICAgICAgICAgICBwcy5pbG9zY19jeWtsaV9maWx0cmFjeWpueWNoLA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC0tIEluZm9ybWFjamUgbyBha3R1YWxueW0gc3ByesSZY2llDQogICAgICAgICAgICAgICAgcy5pZCBhcyBpZF9zcHJ6ZXR1LA0KICAgICAgICAgICAgICAgIHMubmF6d2FfdW5pa2FsbmEgYXMgbmF6d2Ffc3ByemV0dSwNCiAgICAgICAgICAgICAgICBzLnR5cF9zcHJ6ZXR1LA0KICAgICAgICAgICAgICAgIHMuc3Rhbl9zcHJ6ZXR1LA0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIC0tIEluZm9ybWFjamUgbyBha3R5d25laiBvcGVyYWNqaSAoamXFm2xpIGlzdG5pZWplKQ0KICAgICAgICAgICAgICAgIG9sLmlkIGFzIGlkX29wZXJhY2ppLA0KICAgICAgICAgICAgICAgIG9sLnR5cF9vcGVyYWNqaSwNCiAgICAgICAgICAgICAgICBvbC5zdGF0dXNfb3BlcmFjamksDQogICAgICAgICAgICAgICAgb2wuY3phc19yb3pwb2N6ZWNpYSBhcyBjemFzX3JvenBvY3plY2lhX29wZXJhY2ppLA0KICAgICAgICAgICAgICAgIG9sLm9waXMgYXMgb3Bpc19vcGVyYWNqaSwNCiAgICAgICAgICAgICAgICBvbC5wdW5rdF9zdGFydG93eSwNCiAgICAgICAgICAgICAgICBvbC5wdW5rdF9kb2NlbG93eSwNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAtLSBPYmxpY3plbmlhIGN6YXNvd2UNCiAgICAgICAgICAgICAgICBUSU1FU1RBTVBESUZGKE1JTlVURSwgcHMuZGF0YV91dHdvcnplbmlhLCBOT1coKSkgYXMgd2lla19wYXJ0aWlfbWludXR5LA0KICAgICAgICAgICAgICAgIENBU0UgDQogICAgICAgICAgICAgICAgICAgIFdIRU4gb2wuY3phc19yb3pwb2N6ZWNpYSBJUyBOT1QgTlVMTCANCiAgICAgICAgICAgICAgICAgICAgVEhFTiBUSU1FU1RBTVBESUZGKE1JTlVURSwgb2wuY3phc19yb3pwb2N6ZWNpYSwgTk9XKCkpDQogICAgICAgICAgICAgICAgICAgIEVMU0UgTlVMTA0KICAgICAgICAgICAgICAgIEVORCBhcyBjemFzX3Ryd2FuaWFfb3BlcmFjamlfbWludXR5DQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICBGUk9NIHBhcnRpZV9zdXJvd2NhIHBzDQogICAgICAgICAgICBMRUZUIEpPSU4gc3ByemV0IHMgT04gcHMuaWRfc3ByemV0dSA9IHMuaWQNCiAgICAgICAgICAgIExFRlQgSk9JTiBvcGVyYWNqZV9sb2cgb2wgT04gcHMuaWQgPSBvbC5pZF9wYXJ0aWlfc3Vyb3djYSBBTkQgb2wuc3RhdHVzX29wZXJhY2ppID0gJ2FrdHl3bmEnDQogICAgICAgICAgICBXSEVSRSBwcy5zdGF0dXNfcGFydGlpIE5PVCBJTiAoJ1cgbWFnYXp5bmllIGN6eXN0eW0nLCAnR290b3d5IGRvIHd5c8WCYW5pYScpDQogICAgICAgICAgICBPUkRFUiBCWSBwcy5kYXRhX3V0d29yemVuaWEgREVTQw0KICAgICAgICAiIiIpDQogICAgICAgIA0KICAgICAgICBwYXJ0aWUgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICANCiAgICAgICAgIyBXemJvZ2FjZW5pZSBkYW55Y2ggbyBkb2RhdGtvd2UgaW5mb3JtYWNqZQ0KICAgICAgICBmb3IgcGFydGlhIGluIHBhcnRpZToNCiAgICAgICAgICAgICMgRG9kYWogaW5mb3JtYWNqZSBvIHN0YXR1c2FjaCBwYXJ0aWkNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgIFNFTEVDVCBzdC5pZCwgc3QubmF6d2Ffc3RhdHVzdQ0KICAgICAgICAgICAgICAgIEZST00gcGFydGllX3N0YXR1c3kgcHMNCiAgICAgICAgICAgICAgICBKT0lOIHN0YXR1c3kgc3QgT04gcHMuaWRfc3RhdHVzdSA9IHN0LmlkDQogICAgICAgICAgICAgICAgV0hFUkUgcHMuaWRfcGFydGlpID0gJXMNCiAgICAgICAgICAgICIiIiwgKHBhcnRpYVsnaWQnXSwpKQ0KICAgICAgICAgICAgcGFydGlhWydzdGF0dXN5J10gPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIERvZGFqIGhpc3RvcmnEmSBvc3RhdG5pY2ggb3BlcmFjamkNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgIFNFTEVDVCANCiAgICAgICAgICAgICAgICAgICAgb2wuaWQsDQogICAgICAgICAgICAgICAgICAgIG9sLnR5cF9vcGVyYWNqaSwNCiAgICAgICAgICAgICAgICAgICAgb2wuc3RhdHVzX29wZXJhY2ppLA0KICAgICAgICAgICAgICAgICAgICBvbC5jemFzX3JvenBvY3plY2lhLA0KICAgICAgICAgICAgICAgICAgICBvbC5jemFzX3pha29uY3plbmlhLA0KICAgICAgICAgICAgICAgICAgICBvbC5vcGlzLA0KICAgICAgICAgICAgICAgICAgICBvbC5wdW5rdF9zdGFydG93eSwNCiAgICAgICAgICAgICAgICAgICAgb2wucHVua3RfZG9jZWxvd3ksDQogICAgICAgICAgICAgICAgICAgIFRJTUVTVEFNUERJRkYoTUlOVVRFLCBvbC5jemFzX3JvenBvY3plY2lhLCANCiAgICAgICAgICAgICAgICAgICAgICAgIENPQUxFU0NFKG9sLmN6YXNfemFrb25jemVuaWEsIE5PVygpKSkgYXMgY3phc190cndhbmlhX21pbg0KICAgICAgICAgICAgICAgIEZST00gb3BlcmFjamVfbG9nIG9sDQogICAgICAgICAgICAgICAgV0hFUkUgb2wuaWRfcGFydGlpX3N1cm93Y2EgPSAlcw0KICAgICAgICAgICAgICAgIE9SREVSIEJZIG9sLmN6YXNfcm96cG9jemVjaWEgREVTQw0KICAgICAgICAgICAgICAgIExJTUlUIDUNCiAgICAgICAgICAgICIiIiwgKHBhcnRpYVsnaWQnXSwpKQ0KICAgICAgICAgICAgcGFydGlhWydoaXN0b3JpYV9vcGVyYWNqaSddID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBGb3JtYXR1aiBkYXR5IGRsYSBKU09ODQogICAgICAgICAgICBpZiBwYXJ0aWFbJ2RhdGFfdXR3b3J6ZW5pYSddOg0KICAgICAgICAgICAgICAgIHBhcnRpYVsnZGF0YV91dHdvcnplbmlhJ10gPSBwYXJ0aWFbJ2RhdGFfdXR3b3J6ZW5pYSddLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpDQogICAgICAgICAgICBpZiBwYXJ0aWFbJ2N6YXNfcm96cG9jemVjaWFfb3BlcmFjamknXToNCiAgICAgICAgICAgICAgICBwYXJ0aWFbJ2N6YXNfcm96cG9jemVjaWFfb3BlcmFjamknXSA9IHBhcnRpYVsnY3phc19yb3pwb2N6ZWNpYV9vcGVyYWNqaSddLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgRm9ybWF0dWogZGF0eSB3IGhpc3RvcmlpIG9wZXJhY2ppDQogICAgICAgICAgICBmb3Igb3BlcmFjamEgaW4gcGFydGlhWydoaXN0b3JpYV9vcGVyYWNqaSddOg0KICAgICAgICAgICAgICAgIGlmIG9wZXJhY2phWydjemFzX3JvenBvY3plY2lhJ106DQogICAgICAgICAgICAgICAgICAgIG9wZXJhY2phWydjemFzX3JvenBvY3plY2lhJ10gPSBvcGVyYWNqYVsnY3phc19yb3pwb2N6ZWNpYSddLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpDQogICAgICAgICAgICAgICAgaWYgb3BlcmFjamFbJ2N6YXNfemFrb25jemVuaWEnXToNCiAgICAgICAgICAgICAgICAgICAgb3BlcmFjamFbJ2N6YXNfemFrb25jemVuaWEnXSA9IG9wZXJhY2phWydjemFzX3pha29uY3plbmlhJ10uc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykNCiAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KHBhcnRpZSkNCiAgICAgICAgDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogZidCxYLEhWQgcG9iaWVyYW5pYSBha3R5d255Y2ggcGFydGlpOiB7c3RyKGUpfSd9KSwgNTAwDQogICAgZmluYWxseToNCiAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgY29ubi5jbG9zZSgpDQoNCkBicC5yb3V0ZSgnL2FwaS9wYXJ0aWUvc3pjemVnb2x5LzxpbnQ6cGFydGlhX2lkPicsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBnZXRfc3pjemVnb2x5X3BhcnRpaShwYXJ0aWFfaWQpOg0KICAgICIiIlBvYmllcmEgc3pjemVnw7PFgm93ZSBpbmZvcm1hY2plIG8ga29ua3JldG5laiBwYXJ0aWkiIiINCiAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICANCiAgICB0cnk6DQogICAgICAgICMgUG9kc3Rhd293ZSBpbmZvcm1hY2plIG8gcGFydGlpDQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgU0VMRUNUIA0KICAgICAgICAgICAgICAgIHBzLiosDQogICAgICAgICAgICAgICAgcy5uYXp3YV91bmlrYWxuYSBhcyBuYXp3YV9zcHJ6ZXR1LA0KICAgICAgICAgICAgICAgIHMudHlwX3NwcnpldHUsDQogICAgICAgICAgICAgICAgcy5zdGFuX3NwcnpldHUNCiAgICAgICAgICAgIEZST00gcGFydGllX3N1cm93Y2EgcHMNCiAgICAgICAgICAgIExFRlQgSk9JTiBzcHJ6ZXQgcyBPTiBwcy5pZF9zcHJ6ZXR1ID0gcy5pZA0KICAgICAgICAgICAgV0hFUkUgcHMuaWQgPSAlcw0KICAgICAgICAiIiIsIChwYXJ0aWFfaWQsKSkNCiAgICAgICAgDQogICAgICAgIHBhcnRpYSA9IGN1cnNvci5mZXRjaG9uZSgpDQogICAgICAgIGlmIG5vdCBwYXJ0aWE6DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ1BhcnRpYSBuaWUgem5hbGV6aW9uYSd9KSwgNDA0DQogICAgICAgIA0KICAgICAgICAjIFBlxYJuYSBoaXN0b3JpYSBvcGVyYWNqaQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFNFTEVDVCANCiAgICAgICAgICAgICAgICBvbC4qLA0KICAgICAgICAgICAgICAgIHNfc3RhcnQubmF6d2FfdW5pa2FsbmEgYXMgbmF6d2Ffc3ByemV0dV9zdGFydG93ZWdvLA0KICAgICAgICAgICAgICAgIHNfZW5kLm5hendhX3VuaWthbG5hIGFzIG5hendhX3NwcnpldHVfZG9jZWxvd2VnbywNCiAgICAgICAgICAgICAgICBUSU1FU1RBTVBESUZGKE1JTlVURSwgb2wuY3phc19yb3pwb2N6ZWNpYSwgDQogICAgICAgICAgICAgICAgICAgIENPQUxFU0NFKG9sLmN6YXNfemFrb25jemVuaWEsIE5PVygpKSkgYXMgY3phc190cndhbmlhX21pbg0KICAgICAgICAgICAgRlJPTSBvcGVyYWNqZV9sb2cgb2wNCiAgICAgICAgICAgIExFRlQgSk9JTiBzcHJ6ZXQgc19zdGFydCBPTiBvbC5pZF9zcHJ6ZXR1X3pyb2Rsb3dlZ28gPSBzX3N0YXJ0LmlkDQogICAgICAgICAgICBMRUZUIEpPSU4gc3ByemV0IHNfZW5kIE9OIG9sLmlkX3NwcnpldHVfZG9jZWxvd2VnbyA9IHNfZW5kLmlkDQogICAgICAgICAgICBXSEVSRSBvbC5pZF9wYXJ0aWlfc3Vyb3djYSA9ICVzDQogICAgICAgICAgICBPUkRFUiBCWSBvbC5jemFzX3JvenBvY3plY2lhIERFU0MNCiAgICAgICAgIiIiLCAocGFydGlhX2lkLCkpDQogICAgICAgIA0KICAgICAgICBwYXJ0aWFbJ2hpc3RvcmlhX29wZXJhY2ppJ10gPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICANCiAgICAgICAgIyBTdGF0dXN5IHBhcnRpaQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFNFTEVDVCBzdC5pZCwgc3QubmF6d2Ffc3RhdHVzdQ0KICAgICAgICAgICAgRlJPTSBwYXJ0aWVfc3RhdHVzeSBwcw0KICAgICAgICAgICAgSk9JTiBzdGF0dXN5IHN0IE9OIHBzLmlkX3N0YXR1c3UgPSBzdC5pZA0KICAgICAgICAgICAgV0hFUkUgcHMuaWRfcGFydGlpID0gJXMNCiAgICAgICAgIiIiLCAocGFydGlhX2lkLCkpDQogICAgICAgIHBhcnRpYVsnc3RhdHVzeSddID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgDQogICAgICAgICMgQ3lrbGUgZmlsdHJhY3lqbmUgKGplxZtsaSBpc3RuaWVqxIUpDQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgU0VMRUNUIGNmLiosDQogICAgICAgICAgICAgICAgICAgVElNRVNUQU1QRElGRihNSU5VVEUsIGNmLmN6YXNfcm96cG9jemVjaWEsIGNmLmN6YXNfemFrb25jemVuaWEpIGFzIHJ6ZWN6eXdpc3R5X2N6YXNfbWludXQNCiAgICAgICAgICAgIEZST00gY3lrbGVfZmlsdHJhY3lqbmUgY2YNCiAgICAgICAgICAgIFdIRVJFIGNmLmlkX3BhcnRpaSA9ICVzDQogICAgICAgICAgICBPUkRFUiBCWSBjZi5udW1lcl9jeWtsdSBERVNDDQogICAgICAgICIiIiwgKHBhcnRpYV9pZCwpKQ0KICAgICAgICBwYXJ0aWFbJ2N5a2xlX2ZpbHRyYWN5am5lJ10gPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICANCiAgICAgICAgIyBGb3JtYXR1aiBkYXR5DQogICAgICAgIGlmIHBhcnRpYVsnZGF0YV91dHdvcnplbmlhJ106DQogICAgICAgICAgICBwYXJ0aWFbJ2RhdGFfdXR3b3J6ZW5pYSddID0gcGFydGlhWydkYXRhX3V0d29yemVuaWEnXS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKQ0KICAgICAgICANCiAgICAgICAgZm9yIG9wZXJhY2phIGluIHBhcnRpYVsnaGlzdG9yaWFfb3BlcmFjamknXToNCiAgICAgICAgICAgIGlmIG9wZXJhY2phWydjemFzX3JvenBvY3plY2lhJ106DQogICAgICAgICAgICAgICAgb3BlcmFjamFbJ2N6YXNfcm96cG9jemVjaWEnXSA9IG9wZXJhY2phWydjemFzX3JvenBvY3plY2lhJ10uc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykNCiAgICAgICAgICAgIGlmIG9wZXJhY2phWydjemFzX3pha29uY3plbmlhJ106DQogICAgICAgICAgICAgICAgb3BlcmFjamFbJ2N6YXNfemFrb25jemVuaWEnXSA9IG9wZXJhY2phWydjemFzX3pha29uY3plbmlhJ10uc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykNCiAgICAgICAgDQogICAgICAgIGZvciBjeWtsIGluIHBhcnRpYVsnY3lrbGVfZmlsdHJhY3lqbmUnXToNCiAgICAgICAgICAgIGlmIGN5a2xbJ2N6YXNfcm96cG9jemVjaWEnXToNCiAgICAgICAgICAgICAgICBjeWtsWydjemFzX3JvenBvY3plY2lhJ10gPSBjeWtsWydjemFzX3JvenBvY3plY2lhJ10uc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykNCiAgICAgICAgICAgIGlmIGN5a2xbJ2N6YXNfemFrb25jemVuaWEnXToNCiAgICAgICAgICAgICAgICBjeWtsWydjemFzX3pha29uY3plbmlhJ10gPSBjeWtsWydjemFzX3pha29uY3plbmlhJ10uc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykNCiAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KHBhcnRpYSkNCiAgICAgICAgDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogZidCxYLEhWQgcG9iaWVyYW5pYSBzemN6ZWfDs8WCw7N3IHBhcnRpaToge3N0cihlKX0nfSksIDUwMA0KICAgIGZpbmFsbHk6DQogICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgIGNvbm4uY2xvc2UoKQ0KDQpAYnAucm91dGUoJy9hcGkvcGFydGllL2FrdHVhbGl6dWotc3RhdHVzJywgbWV0aG9kcz1bJ1BPU1QnXSkNCmRlZiBha3R1YWxpenVqX3N0YXR1c19wYXJ0aWkoKToNCiAgICAiIiJBa3R1YWxpenVqZSBzdGF0dXMgcGFydGlpIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIA0KICAgIGlmIG5vdCBkYXRhIG9yICdpZF9wYXJ0aWknIG5vdCBpbiBkYXRhIG9yICdub3d5X3N0YXR1cycgbm90IGluIGRhdGE6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiAnQnJhayB3eW1hZ2FueWNoIHDDs2w6IGlkX3BhcnRpaSwgbm93eV9zdGF0dXMnfSksIDQwMA0KICAgIA0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoKQ0KICAgIA0KICAgIHRyeToNCiAgICAgICAgIyBTcHJhd2TFuiBjenkgcGFydGlhIGlzdG5pZWplDQogICAgICAgIGN1cnNvci5leGVjdXRlKCJTRUxFQ1QgaWQgRlJPTSBwYXJ0aWVfc3Vyb3djYSBXSEVSRSBpZCA9ICVzIiwgKGRhdGFbJ2lkX3BhcnRpaSddLCkpDQogICAgICAgIGlmIG5vdCBjdXJzb3IuZmV0Y2hvbmUoKToNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiAnUGFydGlhIG5pZSB6bmFsZXppb25hJ30pLCA0MDQNCiAgICAgICAgDQogICAgICAgICMgQWt0dWFsaXp1aiBzdGF0dXMNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICBVUERBVEUgcGFydGllX3N1cm93Y2EgDQogICAgICAgICAgICBTRVQgc3RhdHVzX3BhcnRpaSA9ICVzDQogICAgICAgICAgICBXSEVSRSBpZCA9ICVzDQogICAgICAgICIiIiwgKGRhdGFbJ25vd3lfc3RhdHVzJ10sIGRhdGFbJ2lkX3BhcnRpaSddKSkNCiAgICAgICAgDQogICAgICAgICMgRG9kYWogd3BpcyBkbyBoaXN0b3JpaSBvcGVyYWNqaQ0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIElOU0VSVCBJTlRPIG9wZXJhY2plX2xvZyANCiAgICAgICAgICAgICh0eXBfb3BlcmFjamksIGlkX3BhcnRpaV9zdXJvd2NhLCBzdGF0dXNfb3BlcmFjamksIGN6YXNfcm96cG9jemVjaWEsIGN6YXNfemFrb25jemVuaWEsIG9waXMpDQogICAgICAgICAgICBWQUxVRVMgKCdaTUlBTkFfU1RBVFVTVScsICVzLCAnemFrb25jem9uYScsIE5PVygpLCBOT1coKSwgJXMpDQogICAgICAgICIiIiwgKGRhdGFbJ2lkX3BhcnRpaSddLCBmIlptaWFuYSBzdGF0dXN1IG5hOiB7ZGF0YVsnbm93eV9zdGF0dXMnXX0iKSkNCiAgICAgICAgDQogICAgICAgIGNvbm4uY29tbWl0KCkNCiAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICdzdWNjZXNzJzogVHJ1ZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidTdGF0dXMgcGFydGlpIHpvc3RhxYIgemFrdHVhbGl6b3dhbnkgbmE6IHtkYXRhWyJub3d5X3N0YXR1cyJdfScNCiAgICAgICAgfSkNCiAgICAgICAgDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBjb25uLnJvbGxiYWNrKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIGFrdHVhbGl6YWNqaSBzdGF0dXN1OiB7c3RyKGUpfSd9KSwgNTAwDQogICAgZmluYWxseToNCiAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgY29ubi5jbG9zZSgpDQoNCiMgPT09IEtPTklFQyBFTkRQT0lOVMOTVyBBS1RZV05ZQ0ggUEFSVElJID09PQ0KDQpAYnAucm91dGUoJy9ha3R5d25lLXBhcnRpZScpDQpkZWYgc2hvd19ha3R5d25lX3BhcnRpZSgpOg0KICAgICIiIlNlcnd1amUgc3Ryb27EmSB6YXJ6xIVkemFuaWEgYWt0eXdueW1pIHBhcnRpYW1pLiIiIg0KICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ2FrdHl3bmVfcGFydGllLmh0bWwnKQ0KDQpAYnAucm91dGUoJy9hcGkvdHlweS1zdXJvd2NhJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF90eXB5X3N1cm93Y2EoKToNCiAgICAiIiJad3JhY2EgbGlzdMSZIGRvc3TEmXBueWNoIHR5cMOzdyBzdXJvd2NhIiIiDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgDQogICAgdHJ5Og0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiU0VMRUNUIGlkLCBuYXp3YSwgb3BpcyBGUk9NIHR5cHlfc3Vyb3djYSBPUkRFUiBCWSBuYXp3YSIpDQogICAgICAgIHR5cHkgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh0eXB5KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIHBvYmllcmFuaWEgdHlww7N3IHN1cm93Y2E6IHtzdHIoZSl9J30pLCA1MDANCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCg0KDQpAYnAucm91dGUoJy9hcGkvbW9uaXRvcmluZy9wYXJhbWV0cnknLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgZ2V0X3BhcmFtZXRyeV9zcHJ6ZXR1KCk6DQogICAgIiIiWndyYWNhIGFrdHVhbG5lIHRlbXBlcmF0dXJ5IGkgY2nFm25pZW5pYSBkbGEgd3N6eXN0a2llZ28gc3ByesSZdHUuIiIiDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgDQogICAgdHJ5Og0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFNFTEVDVCANCiAgICAgICAgICAgICAgICBpZCwNCiAgICAgICAgICAgICAgICBuYXp3YV91bmlrYWxuYSwNCiAgICAgICAgICAgICAgICB0eXBfc3ByemV0dSwNCiAgICAgICAgICAgICAgICBzdGFuX3NwcnpldHUsDQogICAgICAgICAgICAgICAgdGVtcGVyYXR1cmFfYWt0dWFsbmEsDQogICAgICAgICAgICAgICAgY2lzbmllbmllX2FrdHVhbG5lLA0KICAgICAgICAgICAgICAgIHBvemlvbV9ha3R1YWxueV9wcm9jZW50LA0KICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJhX2RvY2Vsb3dhLA0KICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJhX21heCwNCiAgICAgICAgICAgICAgICBjaXNuaWVuaWVfbWF4LA0KICAgICAgICAgICAgICAgIG9zdGF0bmlhX2FrdHVhbGl6YWNqYSwNCiAgICAgICAgICAgICAgICBDQVNFIA0KICAgICAgICAgICAgICAgICAgICBXSEVOIHRlbXBlcmF0dXJhX2FrdHVhbG5hID4gdGVtcGVyYXR1cmFfbWF4IFRIRU4gJ1BSWkVLUk9DWkVOSUVfVEVNUCcNCiAgICAgICAgICAgICAgICAgICAgV0hFTiBjaXNuaWVuaWVfYWt0dWFsbmUgPiBjaXNuaWVuaWVfbWF4IFRIRU4gJ1BSWkVLUk9DWkVOSUVfQ0lTTicNCiAgICAgICAgICAgICAgICAgICAgV0hFTiB0ZW1wZXJhdHVyYV9ha3R1YWxuYSBJUyBOVUxMIE9SIGNpc25pZW5pZV9ha3R1YWxuZSBJUyBOVUxMIFRIRU4gJ0JSQUtfREFOWUNIJw0KICAgICAgICAgICAgICAgICAgICBFTFNFICdPSycNCiAgICAgICAgICAgICAgICBFTkQgYXMgc3RhdHVzX3BhcmFtZXRyb3csDQogICAgICAgICAgICAgICAgQ0FTRSANCiAgICAgICAgICAgICAgICAgICAgV0hFTiBvc3RhdG5pYV9ha3R1YWxpemFjamEgSVMgTlVMTCBUSEVOIE5VTEwNCiAgICAgICAgICAgICAgICAgICAgV0hFTiBvc3RhdG5pYV9ha3R1YWxpemFjamEgPCBOT1coKSAtIElOVEVSVkFMIDUgTUlOVVRFIFRIRU4gJ05JRUFLVFVBTE5FJw0KICAgICAgICAgICAgICAgICAgICBFTFNFICdBS1RVQUxORScNCiAgICAgICAgICAgICAgICBFTkQgYXMgc3RhdHVzX2RhbnljaA0KICAgICAgICAgICAgRlJPTSBzcHJ6ZXQgDQogICAgICAgICAgICBPUkRFUiBCWSB0eXBfc3ByemV0dSwgbmF6d2FfdW5pa2FsbmENCiAgICAgICAgIiIiKQ0KICAgICAgICANCiAgICAgICAgc3ByemV0X2xpc3QgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICANCiAgICAgICAgIyBGb3JtYXR1aiBkYXR5IGRvIEpTT04NCiAgICAgICAgZm9yIHNwcnpldCBpbiBzcHJ6ZXRfbGlzdDoNCiAgICAgICAgICAgIGlmIHNwcnpldC5nZXQoJ29zdGF0bmlhX2FrdHVhbGl6YWNqYScpOg0KICAgICAgICAgICAgICAgIHNwcnpldFsnb3N0YXRuaWFfYWt0dWFsaXphY2phJ10gPSBzcHJ6ZXQuZ2V0KCdvc3RhdG5pYV9ha3R1YWxpemFjamEnKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoc3ByemV0X2xpc3QpDQogICAgICAgIA0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIHBvYmllcmFuaWEgcGFyYW1ldHLDs3cgc3ByesSZdHU6IHtzdHIoZSl9J30pLCA1MDANCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCg0KDQojIEVORFBPSU5UIERPIFBPQklFUkFOSUEgUEFSQU1FVFLDk1cgU1BSWsSYVFUgDQpAYnAucm91dGUoJy9hcGkvbW9uaXRvcmluZy9wYXJhbWV0cnkvPGludDpzcHJ6ZXRfaWQ+JywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9wYXJhbWV0cnlfa29ua3JldG5lZ29fc3ByemV0dShzcHJ6ZXRfaWQpOg0KICAgICIiIlp3cmFjYSBzemN6ZWfDs8WCb3dlIHBhcmFtZXRyeSBkbGEga29ua3JldG5lZ28gc3ByesSZdHUuIiIiDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgDQogICAgdHJ5Og0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFNFTEVDVCANCiAgICAgICAgICAgICAgICBpZCwNCiAgICAgICAgICAgICAgICBuYXp3YV91bmlrYWxuYSwNCiAgICAgICAgICAgICAgICB0eXBfc3ByemV0dSwNCiAgICAgICAgICAgICAgICBzdGFuX3NwcnpldHUsDQogICAgICAgICAgICAgICAgdGVtcGVyYXR1cmFfYWt0dWFsbmEsDQogICAgICAgICAgICAgICAgY2lzbmllbmllX2FrdHVhbG5lLA0KICAgICAgICAgICAgICAgIHBvemlvbV9ha3R1YWxueV9wcm9jZW50LA0KICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJhX2RvY2Vsb3dhLA0KICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJhX21heCwNCiAgICAgICAgICAgICAgICBjaXNuaWVuaWVfbWF4LA0KICAgICAgICAgICAgICAgIG9zdGF0bmlhX2FrdHVhbGl6YWNqYSwNCiAgICAgICAgICAgICAgICBwb2plbW5vc2Nfa2csDQogICAgICAgICAgICAgICAgaWRfcGFydGlpX3N1cm93Y2EsDQogICAgICAgICAgICAgICAgQ0FTRSANCiAgICAgICAgICAgICAgICAgICAgV0hFTiB0ZW1wZXJhdHVyYV9ha3R1YWxuYSA+IHRlbXBlcmF0dXJhX21heCBUSEVOICdQUlpFS1JPQ1pFTklFX1RFTVAnDQogICAgICAgICAgICAgICAgICAgIFdIRU4gY2lzbmllbmllX2FrdHVhbG5lID4gY2lzbmllbmllX21heCBUSEVOICdQUlpFS1JPQ1pFTklFX0NJU04nDQogICAgICAgICAgICAgICAgICAgIFdIRU4gdGVtcGVyYXR1cmFfYWt0dWFsbmEgSVMgTlVMTCBPUiBjaXNuaWVuaWVfYWt0dWFsbmUgSVMgTlVMTCBUSEVOICdCUkFLX0RBTllDSCcNCiAgICAgICAgICAgICAgICAgICAgRUxTRSAnT0snDQogICAgICAgICAgICAgICAgRU5EIGFzIHN0YXR1c19wYXJhbWV0cm93LA0KICAgICAgICAgICAgICAgIENBU0UgDQogICAgICAgICAgICAgICAgICAgIFdIRU4gb3N0YXRuaWFfYWt0dWFsaXphY2phIElTIE5VTEwgVEhFTiBOVUxMDQogICAgICAgICAgICAgICAgICAgIFdIRU4gb3N0YXRuaWFfYWt0dWFsaXphY2phIDwgTk9XKCkgLSBJTlRFUlZBTCA1IE1JTlVURSBUSEVOICdOSUVBS1RVQUxORScNCiAgICAgICAgICAgICAgICAgICAgRUxTRSAnQUtUVUFMTkUnDQogICAgICAgICAgICAgICAgRU5EIGFzIHN0YXR1c19kYW55Y2gsDQogICAgICAgICAgICAgICAgVElNRVNUQU1QRElGRihNSU5VVEUsIG9zdGF0bmlhX2FrdHVhbGl6YWNqYSwgTk9XKCkpIGFzIG1pbnV0eV9vZF9ha3R1YWxpemFjamkNCiAgICAgICAgICAgIEZST00gc3ByemV0IA0KICAgICAgICAgICAgV0hFUkUgaWQgPSAlcw0KICAgICAgICAiIiIsIChzcHJ6ZXRfaWQsKSkNCiAgICAgICAgDQogICAgICAgIHNwcnpldCA9IGN1cnNvci5mZXRjaG9uZSgpDQogICAgICAgIA0KICAgICAgICBpZiBub3Qgc3ByemV0Og0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6ICdTcHJ6xJl0IG5pZSB6bmFsZXppb255J30pLCA0MDQNCiAgICAgICAgDQogICAgICAgICMgRm9ybWF0dWogZGF0xJkgZG8gSlNPTg0KICAgICAgICBpZiBzcHJ6ZXQuZ2V0KCdvc3RhdG5pYV9ha3R1YWxpemFjamEnKToNCiAgICAgICAgICAgIHNwcnpldFsnb3N0YXRuaWFfYWt0dWFsaXphY2phJ10gPSBzcHJ6ZXQuZ2V0KCdvc3RhdG5pYV9ha3R1YWxpemFjamEnKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKQ0KICAgICAgICANCiAgICAgICAgIyBKZcWbbGkgc3ByesSZdCBtYSBwYXJ0acSZLCBkb2RhaiBpbmZvcm1hY2plIG8gbmllag0KICAgICAgICBpZF9wYXJ0aWlfc3Vyb3djYSA9IHNwcnpldC5nZXQoJ2lkX3BhcnRpaV9zdXJvd2NhJykNCiAgICAgICAgaWYgaWRfcGFydGlpX3N1cm93Y2E6DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICBTRUxFQ1QgdW5pa2Fsbnlfa29kLCB0eXBfc3Vyb3djYSwgd2FnYV9ha3R1YWxuYV9rZywgc3RhdHVzX3BhcnRpaQ0KICAgICAgICAgICAgICAgIEZST00gcGFydGllX3N1cm93Y2EgDQogICAgICAgICAgICAgICAgV0hFUkUgaWQgPSAlcw0KICAgICAgICAgICAgIiIiLCAoaWRfcGFydGlpX3N1cm93Y2EsKSkNCiAgICAgICAgICAgIHBhcnRpYSA9IGN1cnNvci5mZXRjaG9uZSgpDQogICAgICAgICAgICBzcHJ6ZXRbJ3BhcnRpYSddID0gcGFydGlhDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBzcHJ6ZXRbJ3BhcnRpYSddID0gTm9uZQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoc3ByemV0KQ0KICAgICAgICANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ0LFgsSFZCBwb2JpZXJhbmlhIHBhcmFtZXRyw7N3IHNwcnrEmXR1OiB7c3RyKGUpfSd9KSwgNTAwDQogICAgZmluYWxseToNCiAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgY29ubi5jbG9zZSgpDQoNCkBicC5yb3V0ZSgnL2FwaS9tb25pdG9yaW5nL2FsYXJteS1wYXJhbWV0cnljem5lJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9hbGFybXlfcGFyYW1ldHJ5Y3puZSgpOg0KICAgICIiIlp3cmFjYSBsaXN0xJkgc3ByesSZdHUgeiBwcnpla3JvY3pvbnltaSBwYXJhbWV0cmFtaSAodGVtcGVyYXR1cmEvY2nFm25pZW5pZSkuIiIiDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgDQogICAgdHJ5Og0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFNFTEVDVCANCiAgICAgICAgICAgICAgICBpZCwNCiAgICAgICAgICAgICAgICBuYXp3YV91bmlrYWxuYSwNCiAgICAgICAgICAgICAgICB0eXBfc3ByemV0dSwNCiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyYV9ha3R1YWxuYSwNCiAgICAgICAgICAgICAgICBjaXNuaWVuaWVfYWt0dWFsbmUsDQogICAgICAgICAgICAgICAgdGVtcGVyYXR1cmFfbWF4LA0KICAgICAgICAgICAgICAgIGNpc25pZW5pZV9tYXgsDQogICAgICAgICAgICAgICAgb3N0YXRuaWFfYWt0dWFsaXphY2phLA0KICAgICAgICAgICAgICAgIENBU0UgDQogICAgICAgICAgICAgICAgICAgIFdIRU4gdGVtcGVyYXR1cmFfYWt0dWFsbmEgPiB0ZW1wZXJhdHVyYV9tYXggVEhFTiAnVEVNUEVSQVRVUkFfUFJaRUtST0NaT05BJw0KICAgICAgICAgICAgICAgICAgICBXSEVOIGNpc25pZW5pZV9ha3R1YWxuZSA+IGNpc25pZW5pZV9tYXggVEhFTiAnQ0lTTklFTklFX1BSWkVLUk9DWk9ORScNCiAgICAgICAgICAgICAgICAgICAgRUxTRSAnSU5ORScNCiAgICAgICAgICAgICAgICBFTkQgYXMgdHlwX2FsYXJtdSwNCiAgICAgICAgICAgICAgICBDQVNFIA0KICAgICAgICAgICAgICAgICAgICBXSEVOIHRlbXBlcmF0dXJhX2FrdHVhbG5hID4gdGVtcGVyYXR1cmFfbWF4IFRIRU4gdGVtcGVyYXR1cmFfYWt0dWFsbmEgLSB0ZW1wZXJhdHVyYV9tYXgNCiAgICAgICAgICAgICAgICAgICAgV0hFTiBjaXNuaWVuaWVfYWt0dWFsbmUgPiBjaXNuaWVuaWVfbWF4IFRIRU4gY2lzbmllbmllX2FrdHVhbG5lIC0gY2lzbmllbmllX21heA0KICAgICAgICAgICAgICAgICAgICBFTFNFIDANCiAgICAgICAgICAgICAgICBFTkQgYXMgcHJ6ZWtyb2N6ZW5pZV93YXJ0b3NjaQ0KICAgICAgICAgICAgRlJPTSBzcHJ6ZXQgDQogICAgICAgICAgICBXSEVSRSANCiAgICAgICAgICAgICAgICAodGVtcGVyYXR1cmFfYWt0dWFsbmEgPiB0ZW1wZXJhdHVyYV9tYXggQU5EIHRlbXBlcmF0dXJhX2FrdHVhbG5hIElTIE5PVCBOVUxMKQ0KICAgICAgICAgICAgICAgIE9SIA0KICAgICAgICAgICAgICAgIChjaXNuaWVuaWVfYWt0dWFsbmUgPiBjaXNuaWVuaWVfbWF4IEFORCBjaXNuaWVuaWVfYWt0dWFsbmUgSVMgTk9UIE5VTEwpDQogICAgICAgICAgICBPUkRFUiBCWSBwcnpla3JvY3plbmllX3dhcnRvc2NpIERFU0MNCiAgICAgICAgIiIiKQ0KICAgICAgICANCiAgICAgICAgYWxhcm15ID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgDQogICAgICAgICMgRm9ybWF0dWogZGF0eSBkbyBKU09ODQogICAgICAgIGZvciBhbGFybSBpbiBhbGFybXk6DQogICAgICAgICAgICBpZiBhbGFybS5nZXQoJ29zdGF0bmlhX2FrdHVhbGl6YWNqYScpOg0KICAgICAgICAgICAgICAgIGFsYXJtWydvc3RhdG5pYV9ha3R1YWxpemFjamEnXSA9IGFsYXJtLmdldCgnb3N0YXRuaWFfYWt0dWFsaXphY2phJykuc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJykNCiAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KGFsYXJteSkNCiAgICAgICAgDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogZidCxYLEhWQgcG9iaWVyYW5pYSBhbGFybcOzdyBwYXJhbWV0cnljem55Y2g6IHtzdHIoZSl9J30pLCA1MDANCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCg0KQGJwLnJvdXRlKCcvbW9uaXRvcmluZy1wYXJhbWV0cnknKQ0KZGVmIHNob3dfbW9uaXRvcmluZ19wYXJhbWV0cnkoKToNCiAgICAiIiJTZXJ3dWplIHN0cm9uxJkgbW9uaXRvcmluZ3UgcGFyYW1ldHLDs3cgc3ByesSZdHUuIiIiDQogICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgnbW9uaXRvcmluZ19wYXJhbWV0cnkuaHRtbCcpDQoNCg0KIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQojIEVORFBPSU5UWSBBUEkgRExBIFNZU1RFTVUgQVBPTExPDQojID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0NCg0KQGJwLnJvdXRlKCcvYXBpL2Fwb2xsby9zdGFuLzxpbnQ6aWRfc3ByemV0dT4nLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgZ2V0X3N0YW5fYXBvbGxvKGlkX3NwcnpldHUpOg0KICAgICIiIlBvYmllcmEgYWt0dWFsbnkgc3RhbiBBcG9sbG8geiBwcnpld2lkeXdhbmllbSBkb3N0xJlwbmVqIGlsb8WbY2kiIiINCiAgICB0cnk6DQogICAgICAgIHN0YW4gPSBBcG9sbG9TZXJ2aWNlLm9ibGljel9ha3R1YWxueV9zdGFuX2Fwb2xsbyhpZF9zcHJ6ZXR1KQ0KICAgICAgICByZXR1cm4ganNvbmlmeShzdGFuKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIHBvYmllcmFuaWEgc3RhbnUgQXBvbGxvOiB7c3RyKGUpfSd9KSwgNTAwDQoNCkBicC5yb3V0ZSgnL2FwaS9hcG9sbG8vcm96cG9jem5pai1zZXNqZScsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYgcm96cG9jem5pal9zZXNqZV9hcG9sbG8oKToNCiAgICAiIiJSb3pwb2N6eW5hIG5vd8SFIHNlc2rEmSB3eXRhcGlhbmlhIHcgQXBvbGxvIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIA0KICAgIHJlcXVpcmVkX2ZpZWxkcyA9IFsnaWRfc3ByemV0dScsICd0eXBfc3Vyb3djYScsICd3YWdhX2tnJ10NCiAgICBpZiBub3QgYWxsKGZpZWxkIGluIGRhdGEgZm9yIGZpZWxkIGluIHJlcXVpcmVkX2ZpZWxkcyk6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiAnQnJhayB3eW1hZ2FueWNoIHDDs2w6IGlkX3NwcnpldHUsIHR5cF9zdXJvd2NhLCB3YWdhX2tnJ30pLCA0MDANCiAgICANCiAgICB0cnk6DQogICAgICAgIGlkX3Nlc2ppID0gQXBvbGxvU2VydmljZS5yb3pwb2N6bmlqX3Nlc2plX2Fwb2xsbygNCiAgICAgICAgICAgIGRhdGFbJ2lkX3NwcnpldHUnXSwgDQogICAgICAgICAgICBkYXRhWyd0eXBfc3Vyb3djYSddLCANCiAgICAgICAgICAgIGRhdGFbJ3dhZ2Ffa2cnXSwNCiAgICAgICAgICAgIGRhdGEuZ2V0KCdvcGVyYXRvcicpDQogICAgICAgICkNCiAgICAgICAgYnJvYWRjYXN0X2Fwb2xsb191cGRhdGUoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAnbWVzc2FnZSc6IGYnUm96cG9jesSZdG8gbm93xIUgc2VzasSZIHd5dGFwaWFuaWEgdyBBcG9sbG8nLA0KICAgICAgICAgICAgJ2lkX3Nlc2ppJzogaWRfc2VzamkNCiAgICAgICAgfSkNCiAgICAgICAgDQogICAgZXhjZXB0IFZhbHVlRXJyb3IgYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IHN0cihlKX0pLCA0MDANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ0LFgsSFZCByb3pwb2N6eW5hbmlhIHNlc2ppOiB7c3RyKGUpfSd9KSwgNTAwDQoNCkBicC5yb3V0ZSgnL2FwaS9hcG9sbG8vZG9kYWotc3Vyb3dpZWMnLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIGRvZGFqX3N1cm93aWVjX2Fwb2xsbygpOg0KICAgICIiIkRvZGFqZSBrb2xlam7EhSBwb3JjasSZIHN1cm93Y2Egc3RhxYJlZ28gZG8gQXBvbGxvIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIA0KICAgIHJlcXVpcmVkX2ZpZWxkcyA9IFsnaWRfc3ByemV0dScsICd3YWdhX2tnJ10NCiAgICBpZiBub3QgYWxsKGZpZWxkIGluIGRhdGEgZm9yIGZpZWxkIGluIHJlcXVpcmVkX2ZpZWxkcyk6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiAnQnJhayB3eW1hZ2FueWNoIHDDs2w6IGlkX3NwcnpldHUsIHdhZ2Ffa2cnfSksIDQwMA0KICAgIA0KICAgIHRyeToNCiAgICAgICAgQXBvbGxvU2VydmljZS5kb2Rhal9zdXJvd2llY19kb19hcG9sbG8oDQogICAgICAgICAgICBkYXRhWydpZF9zcHJ6ZXR1J10sIA0KICAgICAgICAgICAgZGF0YVsnd2FnYV9rZyddLA0KICAgICAgICAgICAgZGF0YS5nZXQoJ29wZXJhdG9yJykNCiAgICAgICAgKQ0KICAgICAgICBicm9hZGNhc3RfYXBvbGxvX3VwZGF0ZSgpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICdzdWNjZXNzJzogVHJ1ZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidEb2Rhbm8ge2RhdGFbIndhZ2Ffa2ciXX1rZyBzdXJvd2NhIGRvIEFwb2xsbycNCiAgICAgICAgfSkNCiAgICAgICAgDQogICAgZXhjZXB0IFZhbHVlRXJyb3IgYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IHN0cihlKX0pLCA0MDANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ0LFgsSFZCBkb2Rhd2FuaWEgc3Vyb3djYToge3N0cihlKX0nfSksIDUwMA0KDQpAYnAucm91dGUoJy9hcGkvYXBvbGxvL2tvcnlndWotc3RhbicsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYga29yeWd1al9zdGFuX2Fwb2xsbygpOg0KICAgICIiIlLEmWN6bmEga29yZWt0YSBzdGFudSBBcG9sbG8gcHJ6ZXogb3BlcmF0b3JhIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIA0KICAgIHJlcXVpcmVkX2ZpZWxkcyA9IFsnaWRfc3ByemV0dScsICdyemVjenl3aXN0YV93YWdhX2tnJ10NCiAgICBpZiBub3QgYWxsKGZpZWxkIGluIGRhdGEgZm9yIGZpZWxkIGluIHJlcXVpcmVkX2ZpZWxkcyk6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiAnQnJhayB3eW1hZ2FueWNoIHDDs2w6IGlkX3NwcnpldHUsIHJ6ZWN6eXdpc3RhX3dhZ2Ffa2cnfSksIDQwMA0KICAgIA0KICAgIHRyeToNCiAgICAgICAgQXBvbGxvU2VydmljZS5rb3J5Z3VqX3N0YW5fYXBvbGxvKA0KICAgICAgICAgICAgZGF0YVsnaWRfc3ByemV0dSddLCANCiAgICAgICAgICAgIGRhdGFbJ3J6ZWN6eXdpc3RhX3dhZ2Ffa2cnXSwNCiAgICAgICAgICAgIGRhdGEuZ2V0KCdvcGVyYXRvcicpLA0KICAgICAgICAgICAgZGF0YS5nZXQoJ3V3YWdpJykNCiAgICAgICAgKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ1Nrb3J5Z293YW5vIHN0YW4gQXBvbGxvIG5hIHtkYXRhWyJyemVjenl3aXN0YV93YWdhX2tnIl19a2cnDQogICAgICAgIH0pDQogICAgICAgIA0KICAgIGV4Y2VwdCBWYWx1ZUVycm9yIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBzdHIoZSl9KSwgNDAwDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogZidCxYLEhWQga29yZWt0eSBzdGFudToge3N0cihlKX0nfSksIDUwMA0KDQpAYnAucm91dGUoJy9hcGkvYXBvbGxvL2xpc3RhLXN0YW5vdycsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBnZXRfbGlzdGFfc3Rhbm93X2Fwb2xsbygpOg0KICAgICIiIlBvYmllcmEgc3Rhbnkgd3N6eXN0a2ljaCBBcG9sbG8gdyBzeXN0ZW1pZSIiIg0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgIHRyeToNCiAgICAgICAgIyBVxbx5Y2llIExPV0VSKCkgYWJ5IHphcGV3bmnEhyBicmFrIHdyYcW8bGl3b8WbY2kgbmEgd2llbGtvxZvEhyBsaXRlcg0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiU0VMRUNUIGlkIEZST00gc3ByemV0IFdIRVJFIExPV0VSKHR5cF9zcHJ6ZXR1KSA9ICdhcG9sbG8nIikNCiAgICAgICAgYXBvbGxvX2lkcyA9IFtyb3dbJ2lkJ10gZm9yIHJvdyBpbiBjdXJzb3IuZmV0Y2hhbGwoKV0NCiAgICAgICAgDQogICAgICAgIGxpc3RhX3N0YW5vdyA9IFtdDQogICAgICAgIGZvciBhcG9sbG9faWQgaW4gYXBvbGxvX2lkczoNCiAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICBzdGFuID0gQXBvbGxvU2VydmljZS5nZXRfc3Rhbl9hcG9sbG8oYXBvbGxvX2lkKQ0KICAgICAgICAgICAgICAgIGlmIHN0YW46DQogICAgICAgICAgICAgICAgICAgIGxpc3RhX3N0YW5vdy5hcHBlbmQoc3RhbikNCiAgICAgICAgICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgICAgICAgICBwcmludChmIkLFgsSFZCBwcnp5IHBvYmllcmFuaXUgc3RhbnUgZGxhIEFwb2xsbyBJRCB7YXBvbGxvX2lkfToge2V9IikNCiAgICAgICAgICAgICAgICAjIE1vxbxuYSBkb2RhxIcgbG9nb3dhbmllIGLFgsSZZHUsIGFsZSBrb250eW51b3dhxIcgZGxhIGlubnljaA0KICAgICAgICAgICAgICAgIGNvbnRpbnVlDQogICAgICAgICAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KGxpc3RhX3N0YW5vdykNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBzdHIoZSl9KSwgNTAwDQogICAgZmluYWxseToNCiAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgY29ubi5jbG9zZSgpDQoNCg0KQGJwLnJvdXRlKCcvYXBpL2Fwb2xsby96YWtvbmN6LXNlc2plJywgbWV0aG9kcz1bJ1BPU1QnXSkNCmRlZiB6YWtvbmN6X3Nlc2plX2Fwb2xsbygpOg0KICAgICIiIktvxYRjenkgYWt0eXduxIUgc2VzasSZIHd5dGFwaWFuaWEgdyBBcG9sbG8iIiINCiAgICBkYXRhID0gcmVxdWVzdC5nZXRfanNvbigpDQogICAgDQogICAgaWYgbm90IGRhdGEgb3IgJ2lkX3NwcnpldHUnIG5vdCBpbiBkYXRhOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ0JyYWsgd3ltYWdhbmVnbyBwb2xhOiBpZF9zcHJ6ZXR1J30pLCA0MDANCiAgICANCiAgICB0cnk6DQogICAgICAgIEFwb2xsb1NlcnZpY2UuemFrb25jel9zZXNqZV9hcG9sbG8oDQogICAgICAgICAgICBkYXRhWydpZF9zcHJ6ZXR1J10sDQogICAgICAgICAgICBkYXRhLmdldCgnb3BlcmF0b3InKQ0KICAgICAgICApDQogICAgICAgIGJyb2FkY2FzdF9hcG9sbG9fdXBkYXRlKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ1Nlc2phIGRsYSBBcG9sbG8gSUQge2RhdGFbImlkX3NwcnpldHUiXX0gem9zdGHFgmEgemFrb8WEY3pvbmEuJw0KICAgICAgICB9KQ0KICAgICAgICANCiAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogc3RyKGUpfSksIDQwMA0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIGtvxYRjemVuaWEgc2Vzamk6IHtzdHIoZSl9J30pLCA1MDANCg0KQGJwLnJvdXRlKCcvYXBpL2Fwb2xsby9zZXNqYS88aW50OmlkX3Nlc2ppPi9oaXN0b3JpYScsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBnZXRfaGlzdG9yaWFfc2VzamlfYXBvbGxvKGlkX3Nlc2ppKToNCiAgICAiIiJQb2JpZXJhIGhpc3RvcmnEmSB0cmFuc2ZlcsOzdyBkbGEgZGFuZWogc2VzamkgQXBvbGxvLiIiIg0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgIHRyeToNCiAgICAgICAgc3FsID0gIiIiDQogICAgICAgICAgICBTRUxFQ1QgDQogICAgICAgICAgICAgICAgb2wuY3phc196YWtvbmN6ZW5pYSwgDQogICAgICAgICAgICAgICAgb2wuaWxvc2Nfa2csIA0KICAgICAgICAgICAgICAgIHMubmF6d2FfdW5pa2FsbmEgYXMgbmF6d2FfY2VsdQ0KICAgICAgICAgICAgRlJPTSBvcGVyYWNqZV9sb2cgb2wNCiAgICAgICAgICAgIExFRlQgSk9JTiBzcHJ6ZXQgcyBPTiBvbC5pZF9zcHJ6ZXR1X2RvY2Vsb3dlZ28gPSBzLmlkDQogICAgICAgICAgICBXSEVSRSBvbC5pZF9hcG9sbG9fc2VzamkgPSAlcw0KICAgICAgICAgICAgICBBTkQgb2wudHlwX29wZXJhY2ppID0gJ1JPWlRBTktPV0FOSUVfQVBPTExPJw0KICAgICAgICAgICAgICBBTkQgb2wuc3RhdHVzX29wZXJhY2ppID0gJ3pha29uY3pvbmEnDQogICAgICAgICAgICBPUkRFUiBCWSBvbC5jemFzX3pha29uY3plbmlhIERFU0MNCiAgICAgICAgIiIiDQogICAgICAgIGN1cnNvci5leGVjdXRlKHNxbCwgKGlkX3Nlc2ppLCkpDQogICAgICAgIGhpc3RvcmlhID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgDQogICAgICAgICMgRm9ybWF0b3dhbmllIGRhdHkgcHJ6ZWQgd3lzxYJhbmllbQ0KICAgICAgICBmb3Igcm93IGluIGhpc3RvcmlhOg0KICAgICAgICAgICAgaWYgcm93WydjemFzX3pha29uY3plbmlhJ106DQogICAgICAgICAgICAgICAgcm93WydjemFzX3pha29uY3plbmlhJ10gPSByb3dbJ2N6YXNfemFrb25jemVuaWEnXS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKQ0KDQogICAgICAgIHJldHVybiBqc29uaWZ5KGhpc3RvcmlhKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IHN0cihlKX0pLCA1MDANCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCg0KZGVmIGdldF9iYXNlX2NvbXBvbmVudHNfcmVjdXJzaXZlKHBhcnRpYV9pZCwgY3Vyc29yKToNCiAgICAiIiINCiAgICBSZWt1cmVuY3lqbmllIHpuYWpkdWplIGJhem93ZSBza8WCYWRuaWtpIGRsYSBkYW5laiBwYXJ0aWksIHp3cmFjYWrEhWMgc8WCb3duaWs6DQogICAgeydUWVBfU1VST1dDQSc6IHdhZ2EsIC4uLn0NCiAgICAiIiINCiAgICBjdXJzb3IuZXhlY3V0ZSgiU0VMRUNUIGlkLCB0eXBfc3Vyb3djYSwgd2FnYV9wb2N6YXRrb3dhX2tnIEZST00gcGFydGllX3N1cm93Y2EgV0hFUkUgaWQgPSAlcyIsIChwYXJ0aWFfaWQsKSkNCiAgICBwYXJ0aWFfaW5mbyA9IGN1cnNvci5mZXRjaG9uZSgpDQoNCiAgICBpZiBub3QgcGFydGlhX2luZm86DQogICAgICAgIHJldHVybiB7fQ0KDQogICAgIyBKZcWbbGkgcGFydGlhIG5pZSBqZXN0IG1pZXN6YW5pbsSFLCBqZXN0IHNrxYJhZG5pa2llbSBiYXpvd3ltLiBad3LDs8SHIGplaiB0eXAgaSB3YWfEmS4NCiAgICBpZiBub3QgcGFydGlhX2luZm9bJ3R5cF9zdXJvd2NhJ10uc3RhcnRzd2l0aCgnTUlYKCcpOg0KICAgICAgICByZXR1cm4geyBwYXJ0aWFfaW5mb1sndHlwX3N1cm93Y2EnXTogZmxvYXQocGFydGlhX2luZm9bJ3dhZ2FfcG9jemF0a293YV9rZyddKSB9DQoNCiAgICAjIFBhcnRpYSBqZXN0IG1pZXN6YW5pbsSFLCB6bmFqZMW6IGplaiBiZXpwb8WbcmVkbmllIHNrxYJhZG5pa2kuDQogICAgcXVlcnkgPSAiIiINCiAgICAgICAgU0VMRUNUIA0KICAgICAgICAgICAgcHMuaWRfcGFydGlpX3NrbGFkb3dlaiwNCiAgICAgICAgICAgIHBzLndhZ2Ffc2tsYWRvd2Ffa2csDQogICAgICAgICAgICBwLndhZ2FfcG9jemF0a293YV9rZyBBUyB3YWdhX2NhbGtvd2l0YV9za2xhZG93ZWoNCiAgICAgICAgRlJPTSBwYXJ0aWVfc2tsYWRuaWtpIHBzDQogICAgICAgIEpPSU4gcGFydGllX3N1cm93Y2EgcCBPTiBwcy5pZF9wYXJ0aWlfc2tsYWRvd2VqID0gcC5pZA0KICAgICAgICBXSEVSRSBwcy5pZF9wYXJ0aWlfd3luaWtvd2VqID0gJXM7DQogICAgIiIiDQogICAgY3Vyc29yLmV4ZWN1dGUocXVlcnksIChwYXJ0aWFfaWQsKSkNCiAgICBkaXJlY3RfY29tcG9uZW50cyA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgDQogICAgZmluYWxfY29tcG9zaXRpb25fYWdnID0ge30NCg0KICAgIGZvciBjb21wIGluIGRpcmVjdF9jb21wb25lbnRzOg0KICAgICAgICAjIFJla3VyZW5jeWpuaWUgcG9iaWVyeiBiYXpvd2Ugc2vFgmFkbmlraSBkbGEga2HFvGRlZ28gc2vFgmFkbmlrYQ0KICAgICAgICBjaGlsZF9iYXNlX2NvbXBvbmVudHMgPSBnZXRfYmFzZV9jb21wb25lbnRzX3JlY3Vyc2l2ZShjb21wWydpZF9wYXJ0aWlfc2tsYWRvd2VqJ10sIGN1cnNvcikNCiAgICAgICAgDQogICAgICAgIHdlaWdodF9vZl9jb21wX3VzZWRfaW5fbWl4ID0gZmxvYXQoY29tcFsnd2FnYV9za2xhZG93YV9rZyddKQ0KICAgICAgICB0b3RhbF9pbml0aWFsX3dlaWdodF9vZl9jaGlsZF9iYXRjaCA9IGZsb2F0KGNvbXBbJ3dhZ2FfY2Fsa293aXRhX3NrbGFkb3dlaiddKQ0KDQogICAgICAgIGlmIHRvdGFsX2luaXRpYWxfd2VpZ2h0X29mX2NoaWxkX2JhdGNoID09IDA6DQogICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICAgICAgDQogICAgICAgICMgUm96ZHppZWwgd2FnxJkgdcW8eXRlZ28gc2vFgmFkbmlrYSBwcm9wb3Jjam9uYWxuaWUgbmEgamVnbyBiYXpvd2Uga29tcG9uZW50eQ0KICAgICAgICBmb3IgYmFzZV90eXBlLCBiYXNlX3dlaWdodF9pbl9jaGlsZCBpbiBjaGlsZF9iYXNlX2NvbXBvbmVudHMuaXRlbXMoKToNCiAgICAgICAgICAgIHByb3BvcnRpb24gPSBiYXNlX3dlaWdodF9pbl9jaGlsZCAvIHRvdGFsX2luaXRpYWxfd2VpZ2h0X29mX2NoaWxkX2JhdGNoDQogICAgICAgICAgICB3ZWlnaHRfY29udHJpYnV0aW9uID0gcHJvcG9ydGlvbiAqIHdlaWdodF9vZl9jb21wX3VzZWRfaW5fbWl4DQogICAgICAgICAgICBmaW5hbF9jb21wb3NpdGlvbl9hZ2dbYmFzZV90eXBlXSA9IGZpbmFsX2NvbXBvc2l0aW9uX2FnZy5nZXQoYmFzZV90eXBlLCAwKSArIHdlaWdodF9jb250cmlidXRpb24NCiAgICAgICAgICAgIA0KICAgIHJldHVybiBmaW5hbF9jb21wb3NpdGlvbl9hZ2cNCg0KDQpAYnAucm91dGUoJy9hcGkvcGFydGllLzxpbnQ6cGFydGlhX2lkPi9za2xhZG5pa2knLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgZ2V0X3NrbGFkbmlraV9wYXJ0aWkocGFydGlhX2lkKToNCiAgICAiIiJad3JhY2EgbGlzdMSZIHNrxYJhZG5pa8OzdyBkbGEgZGFuZWogcGFydGlpIChtaWVzemFuaW55KS4iIiINCiAgICBjb25uID0gTm9uZQ0KICAgIHRyeToNCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KDQogICAgICAgIHF1ZXJ5ID0gIiIiDQogICAgICAgICAgICBTRUxFQ1QgDQogICAgICAgICAgICAgICAgcHMuaWRfcGFydGlpX3NrbGFkb3dlaiwNCiAgICAgICAgICAgICAgICBwLnVuaWthbG55X2tvZCBBUyB1bmlrYWxueV9rb2Rfc2tsYWRvd2VqLA0KICAgICAgICAgICAgICAgIHBzLndhZ2Ffc2tsYWRvd2Ffa2cNCiAgICAgICAgICAgIEZST00gcGFydGllX3NrbGFkbmlraSBwcw0KICAgICAgICAgICAgSk9JTiBwYXJ0aWVfc3Vyb3djYSBwIE9OIHBzLmlkX3BhcnRpaV9za2xhZG93ZWogPSBwLmlkDQogICAgICAgICAgICBXSEVSRSBwcy5pZF9wYXJ0aWlfd3luaWtvd2VqID0gJXMNCiAgICAgICAgICAgIE9SREVSIEJZIHBzLmRhdGFfZG9kYW5pYTsNCiAgICAgICAgIiIiDQogICAgICAgIGN1cnNvci5leGVjdXRlKHF1ZXJ5LCAocGFydGlhX2lkLCkpDQogICAgICAgIHNrbGFkbmlraSA9IGN1cnNvci5mZXRjaGFsbCgpDQoNCiAgICAgICAgIyBLb253ZXJzamEgRGVjaW1hbCBuYSBmbG9hdCBkbGEgSlNPTg0KICAgICAgICBmb3IgcyBpbiBza2xhZG5pa2k6DQogICAgICAgICAgICBzWyd3YWdhX3NrbGFkb3dhX2tnJ10gPSBmbG9hdChzWyd3YWdhX3NrbGFkb3dhX2tnJ10pDQoNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoc2tsYWRuaWtpKQ0KDQogICAgZXhjZXB0IG15c3FsLmNvbm5lY3Rvci5FcnJvciBhcyBlcnI6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ0LFgsSFZCBiYXp5IGRhbnljaDoge2Vycn0nfSksIDUwMA0KICAgIGZpbmFsbHk6DQogICAgICAgIGlmIGNvbm4gYW5kIGNvbm4uaXNfY29ubmVjdGVkKCk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQoNCkBicC5yb3V0ZSgnL2FwaS9hcG9sbG8vc2VzamEvPGludDpzZXNqYV9pZD4vaGlzdG9yaWEtemFsYWR1bmt1JywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9oaXN0b3JpYV96YWxhZHVua3Vfc2Vzamkoc2VzamFfaWQpOg0KICAgICIiIlp3cmFjYSBoaXN0b3JpxJkgemHFgmFkdW5rw7N3IGkga29yZWt0IGRsYSBkYW5laiBzZXNqaSBBcG9sbG8uIiIiDQogICAgY29ubiA9IE5vbmUNCiAgICB0cnk6DQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCg0KICAgICAgICBxdWVyeSA9ICIiIg0KICAgICAgICAgICAgU0VMRUNUIA0KICAgICAgICAgICAgICAgIHR5cF96ZGFyemVuaWEsDQogICAgICAgICAgICAgICAgd2FnYV9rZywNCiAgICAgICAgICAgICAgICBjemFzX3pkYXJ6ZW5pYSwNCiAgICAgICAgICAgICAgICBvcGVyYXRvciwNCiAgICAgICAgICAgICAgICB1d2FnaQ0KICAgICAgICAgICAgRlJPTSBhcG9sbG9fdHJhY2tpbmcNCiAgICAgICAgICAgIFdIRVJFIGlkX3Nlc2ppID0gJXMgQU5EIHR5cF96ZGFyemVuaWEgSU4gKCdET0RBTklFX1NVUk9XQ0EnLCAnS09SRUtUQV9SRUNaTkEnKQ0KICAgICAgICAgICAgT1JERVIgQlkgY3phc196ZGFyemVuaWEgREVTQzsNCiAgICAgICAgIiIiDQogICAgICAgIGN1cnNvci5leGVjdXRlKHF1ZXJ5LCAoc2VzamFfaWQsKSkNCiAgICAgICAgaGlzdG9yaWEgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KDQogICAgICAgICMgS29ud2Vyc2phIHR5cMOzdyBkbGEgSlNPTg0KICAgICAgICBmb3Igd3BpcyBpbiBoaXN0b3JpYToNCiAgICAgICAgICAgIGlmIGlzaW5zdGFuY2Uod3Bpcy5nZXQoJ2N6YXNfemRhcnplbmlhJyksIGRhdGV0aW1lKToNCiAgICAgICAgICAgICAgICB3cGlzWydjemFzX3pkYXJ6ZW5pYSddID0gd3Bpc1snY3phc196ZGFyemVuaWEnXS5pc29mb3JtYXQoKQ0KICAgICAgICAgICAgaWYgaXNpbnN0YW5jZSh3cGlzLmdldCgnd2FnYV9rZycpLCBEZWNpbWFsKToNCiAgICAgICAgICAgICAgICB3cGlzWyd3YWdhX2tnJ10gPSBmbG9hdCh3cGlzWyd3YWdhX2tnJ10pDQoNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoaGlzdG9yaWEpDQoNCiAgICBleGNlcHQgbXlzcWwuY29ubmVjdG9yLkVycm9yIGFzIGVycjoNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIGJhenkgZGFueWNoOiB7ZXJyfSd9KSwgNTAwDQogICAgZmluYWxseToNCiAgICAgICAgaWYgY29ubiBhbmQgY29ubi5pc19jb25uZWN0ZWQoKToNCiAgICAgICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgICAgICBjb25uLmNsb3NlKCkNCg0KQGJwLnJvdXRlKCcvZGFzaGJvYXJkJykNCmRlZiBkYXNoYm9hcmRfdmlldygpOg0KICAgICIiIlNlcnd1amUgZ8WCw7N3bsSFIHN0cm9uxJkgZGFzaGJvYXJkdS4iIiINCiAgICByZXR1cm4gcmVuZGVyX3RlbXBsYXRlKCdkYXNoYm9hcmQuaHRtbCcpDQoNCkBicC5yb3V0ZSgnL2FwaS9kYXNoYm9hcmQvbWFpbi1zdGF0dXMnKQ0KZGVmIGFwaV9kYXNoYm9hcmRfc3RhdHVzKCk6DQogICAgIiIiWndyYWNhIHphZ3JlZ293YW5lIGRhbmUgZGxhIGfFgsOzd25lZ28gZGFzaGJvYXJkdS4iIiINCiAgICB0cnk6DQogICAgICAgIGRhdGEgPSBEYXNoYm9hcmRTZXJ2aWNlLmdldF9tYWluX2Rhc2hib2FyZF9kYXRhKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoZGF0YSkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGltcG9ydCB0cmFjZWJhY2sNCiAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBzdHIoZSl9KSwgNTAw
  - path: app//scheduler_routes.py
    content: IyBhcHAvc2NoZWR1bGVyX3JvdXRlcy5weQ0KZnJvbSBmbGFzayBpbXBvcnQgQmx1ZXByaW50LCBqc29uaWZ5LCByZXF1ZXN0DQpmcm9tIGFwcC5leHRlbnNpb25zIGltcG9ydCBkYg0KaW1wb3J0IHN5cw0KaW1wb3J0IG9zDQpzeXMucGF0aC5pbnNlcnQoMCwgb3MucGF0aC5qb2luKG9zLnBhdGguZGlybmFtZShvcy5wYXRoLmRpcm5hbWUoX19maWxlX18pKSwgJ2xvY2FsX2xpYnMnKSkNCmZyb20gY2VsZXJ5X3NxbGFsY2hlbXlfc2NoZWR1bGVyIGltcG9ydCBtb2RlbHMNCmZyb20gY2VsZXJ5X3NxbGFsY2hlbXlfc2NoZWR1bGVyLm1vZGVscyBpbXBvcnQgUGVyaW9kaWNUYXNrLCBJbnRlcnZhbFNjaGVkdWxlDQoNCg0Kc2NoZWR1bGVyX2JwID0gQmx1ZXByaW50KCdzY2hlZHVsZXInLCBfX25hbWVfXywgdXJsX3ByZWZpeD0nL3NjaGVkdWxlcicpDQoNCkBzY2hlZHVsZXJfYnAucm91dGUoJy90YXNrcycsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBnZXRfYWxsX3Rhc2tzKCk6DQogICAgdGFza3MgPSBkYi5zZXNzaW9uLnF1ZXJ5KFBlcmlvZGljVGFzaykuYWxsKCkNCiAgICByZXN1bHQgPSBbXQ0KICAgIGZvciB0YXNrIGluIHRhc2tzOg0KICAgICAgICByZXN1bHQuYXBwZW5kKHsNCiAgICAgICAgICAgICdpZCc6IHRhc2suaWQsDQogICAgICAgICAgICAnbmFtZSc6IHRhc2submFtZSwNCiAgICAgICAgICAgICd0YXNrJzogdGFzay50YXNrLA0KICAgICAgICAgICAgJ2VuYWJsZWQnOiB0YXNrLmVuYWJsZWQsDQogICAgICAgICAgICAnaW50ZXJ2YWwnOiBzdHIodGFzay5pbnRlcnZhbCksDQogICAgICAgICAgICAnbGFzdF9ydW5fYXQnOiB0YXNrLmxhc3RfcnVuX2F0DQogICAgICAgIH0pDQogICAgcmV0dXJuIGpzb25pZnkocmVzdWx0KQ0KDQpAc2NoZWR1bGVyX2JwLnJvdXRlKCcvdGFza3MvPGludDp0YXNrX2lkPi90b2dnbGUnLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIHRvZ2dsZV90YXNrKHRhc2tfaWQpOg0KICAgICIiIlfFgsSFY3phIGx1YiB3ecWCxIVjemEgemFkYW5pZS4iIiINCiAgICB0YXNrID0gZGIuc2Vzc2lvbi5xdWVyeShQZXJpb2RpY1Rhc2spLmdldCh0YXNrX2lkKQ0KICAgIGlmIG5vdCB0YXNrOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ1Rhc2sgbm90IGZvdW5kJ30pLCA0MDQNCiAgICAgICAgDQogICAgdGFzay5lbmFibGVkID0gbm90IHRhc2suZW5hYmxlZA0KICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCiAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiBmIlRhc2sgJ3t0YXNrLm5hbWV9JyBpcyBub3cgeydlbmFibGVkJyBpZiB0YXNrLmVuYWJsZWQgZWxzZSAnZGlzYWJsZWQnfSJ9KQ0KDQpAc2NoZWR1bGVyX2JwLnJvdXRlKCcvdGFza3MvPGludDp0YXNrX2lkPi9pbnRlcnZhbCcsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYgc2V0X3Rhc2tfaW50ZXJ2YWwodGFza19pZCk6DQogICAgIiIiWm1pZW5pYSBpbnRlcndhxYIgemFkYW5pYS4gT2N6ZWt1amUgSlNPTjogeyJldmVyeSI6IDMwLCAicGVyaW9kIjogInNlY29uZHMifSIiIg0KICAgIHRhc2sgPSBkYi5zZXNzaW9uLnF1ZXJ5KFBlcmlvZGljVGFzaykuZ2V0KHRhc2tfaWQpDQogICAgaWYgbm90IHRhc2s6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiAnVGFzayBub3QgZm91bmQnfSksIDQwNA0KDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIGV2ZXJ5ID0gZGF0YS5nZXQoJ2V2ZXJ5JykNCiAgICBwZXJpb2QgPSBkYXRhLmdldCgncGVyaW9kJywgJ3NlY29uZHMnKQ0KDQogICAgaWYgbm90IGV2ZXJ5Og0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ01pc3NpbmcgImV2ZXJ5IiBwYXJhbWV0ZXInfSksIDQwMA0KDQogICAgIyBabmFqZMW6IGx1YiBzdHfDs3J6IG5vd3kgaW50ZXJ3YcWCDQogICAgaW50ZXJ2YWwgPSBkYi5zZXNzaW9uLnF1ZXJ5KEludGVydmFsU2NoZWR1bGUpLmZpbHRlcl9ieShldmVyeT1ldmVyeSwgcGVyaW9kPXBlcmlvZCkuZmlyc3QoKQ0KICAgIGlmIG5vdCBpbnRlcnZhbDoNCiAgICAgICAgaW50ZXJ2YWwgPSBJbnRlcnZhbFNjaGVkdWxlKGV2ZXJ5PWV2ZXJ5LCBwZXJpb2Q9cGVyaW9kKQ0KICAgICAgICBkYi5zZXNzaW9uLmFkZChpbnRlcnZhbCkNCiAgICAgICAgZGIuc2Vzc2lvbi5jb21taXQoKQ0KICAgIA0KICAgIHRhc2suaW50ZXJ2YWxfaWQgPSBpbnRlcnZhbC5pZA0KICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCiAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiBmIlRhc2sgJ3t0YXNrLm5hbWV9JyBpbnRlcnZhbCBzZXQgdG8gZXZlcnkge2V2ZXJ5fSB7cGVyaW9kfSJ9KQ0KDQojIFBhbWnEmXRhaiwgYWJ5IHphcmVqZXN0cm93YcSHIHRlbiBibHVlcHJpbnQgdyBhcHAvX19pbml0X18ucHk6DQojIGZyb20gLnNjaGVkdWxlcl9yb3V0ZXMgaW1wb3J0IHNjaGVkdWxlcl9icA0KIyBhcHAucmVnaXN0ZXJfYmx1ZXByaW50KHNjaGVkdWxlcl9icCk=
  - path: app//sensors.py
    content: aW1wb3J0IHJhbmRvbQ0KaW1wb3J0IHRpbWUNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lem9uZQ0KZnJvbSBmbGFzayBpbXBvcnQgY3VycmVudF9hcHANCmZyb20gbXlzcWwuY29ubmVjdG9yLmVycm9ycyBpbXBvcnQgT3BlcmF0aW9uYWxFcnJvcg0KZnJvbSAuZGIgaW1wb3J0IGdldF9kYl9jb25uZWN0aW9uDQpmcm9tIC5leHRlbnNpb25zIGltcG9ydCBkYg0KZnJvbSAubW9kZWxzIGltcG9ydCBTcHJ6ZXQsIE9wZXJhdG9yVGVtcGVyYXR1cmVzLCBIaXN0b3JpYVBvbWlhcm93DQpmcm9tIGRlY2ltYWwgaW1wb3J0IERlY2ltYWwNCg0KY2xhc3MgU2Vuc29yU2VydmljZToNCiAgICBkZWYgX19pbml0X18oc2VsZiwgYXBwPU5vbmUpOg0KICAgICAgICBzZWxmLmFwcCA9IGFwcA0KICAgICAgICANCiAgICAgICANCiAgICAgICAgaWYgYXBwIGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgc2VsZi5pbml0X2FwcChhcHApDQoNCiAgICBkZWYgaW5pdF9hcHAoc2VsZiwgYXBwKToNCiAgICAgICAgc2VsZi5hcHAgPSBhcHANCiAgICAgICAgIyBEb24ndCBsb2FkIHRlbXBlcmF0dXJlcyBoZXJlIC0gd2lsbCBkbyBpdCBpbiBjb250ZXh0DQogICAgICAgIA0KICAgICAgICAgICAgDQogICAgQHN0YXRpY21ldGhvZA0KICAgIGRlZiBzZXRfY3VycmVudF90ZW1wZXJhdHVyZShlcXVpcG1lbnRfbmFtZXMsIHRlbXBlcmF0dXJhKToNCiAgICAgICAgIiIiDQogICAgICAgIFVzdGF3aWEgVFlMS08gYWt0dWFsbsSFIHRlbXBlcmF0dXLEmSBkbGEgbGlzdHkgc3ByesSZdMOzdywgbnAuIHBvIHphdGFua293YW5pdS4NCiAgICAgICAgTmllIHptaWVuaWEgdGVtcGVyYXR1cnkgZG9jZWxvd2VqLg0KICAgICAgICAiIiINCiAgICAgICAgaWYgbm90IGVxdWlwbWVudF9uYW1lczoNCiAgICAgICAgICAgIHJldHVybiBbXQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgICMgVcW8eXdhbXkgVVBEQVRFLCBhYnkgem1pZW5pxIcgdHlsa28gdGUgZHdhIHBvbGENCiAgICAgICAgICAgIHN0bXQgPSBkYi51cGRhdGUoU3ByemV0KS53aGVyZSgNCiAgICAgICAgICAgICAgICBTcHJ6ZXQubmF6d2FfdW5pa2FsbmEuaW5fKGVxdWlwbWVudF9uYW1lcykNCiAgICAgICAgICAgICkudmFsdWVzKA0KICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJhX2FrdHVhbG5hPXRlbXBlcmF0dXJhLA0KICAgICAgICAgICAgICAgIG9zdGF0bmlhX2FrdHVhbGl6YWNqYT1kYXRldGltZS5ub3codGltZXpvbmUudXRjKQ0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIGBleGVjdXRlYCB6d3JhY2Egb2JpZWt0IHJlc3VsdCwgeiBrdMOzcmVnbyBtb8W8ZW15IG9kY3p5dGHEhywgaWxlIHdpZXJzenkgem1pZW5pb25vDQogICAgICAgICAgICByZXN1bHQgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoc3RtdCkNCiAgICAgICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcHJpbnQoZiJaYWt0dWFsaXpvd2FubyBgdGVtcGVyYXR1cmFfYWt0dWFsbmFgIGRsYSB7cmVzdWx0LnJvd2NvdW50fSB1cnrEhWR6ZcWELiIpDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgWndyYWNhbXkgbGlzdMSZIHBvZGFueWNoIG5hencsIGFieSBwb3R3aWVyZHppxIcsIMW8ZSBwb2xlY2VuaWUgem9zdGHFgm8gcHJ6eWrEmXRlDQogICAgICAgICAgICAjIChuYXdldCBqZcWbbGkgbmlla3TDs3JlIG5hend5IG5pZSBpc3RuaWHFgnkgdyBiYXppZSkNCiAgICAgICAgICAgIHJldHVybiBlcXVpcG1lbnRfbmFtZXMNCg0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBkYi5zZXNzaW9uLnJvbGxiYWNrKCkNCiAgICAgICAgICAgIHByaW50KGYiV3lzdMSFcGnFgiBixYLEhWQgcG9kY3phcyB1c3Rhd2lhbmlhIHRlbXBlcmF0dXJ5IGFrdHVhbG5lajoge2V9IikNCiAgICAgICAgICAgIHJhaXNlDQogICAgDQogICAgDQoNCiAgICBkZWYgX2NhbGN1bGF0ZV9uZXdfdGVtcGVyYXR1cmUoc2VsZiwgcmVha3RvcjogU3ByemV0KSAtPiBEZWNpbWFsOg0KICAgICAgICAiIiJDenlzdGEgZnVua2NqYSBvYmxpY3plbmlvd2EgeiBkb2RhdGtvd3ltIGxvZ293YW5pZW0uIiIiDQogICAgICAgICNwcmludChmIiAgICBbQ0FMQ10gLS0tIFJvenBvY3p5bmFtIG9ibGljemVuaWEgZGxhOiB7cmVha3Rvci5uYXp3YV91bmlrYWxuYX0gLS0tIikNCiAgICAgICAgDQogICAgICAgIGJhc2VfdGVtcGVyYXR1cmUgPSByZWFrdG9yLnRlbXBlcmF0dXJhX2FrdHVhbG5hIG9yIERlY2ltYWwoJzIwLjAnKQ0KICAgICAgICAjcHJpbnQoZiIgICAgW0NBTENdIFRlbXBlcmF0dXJhIGJhem93YSAoYWt0dWFsbmEpOiB7YmFzZV90ZW1wZXJhdHVyZX3CsEMiKQ0KICAgICAgICANCiAgICAgICAgbGFzdF91cGRhdGVfdGltZSA9IHJlYWt0b3Iub3N0YXRuaWFfYWt0dWFsaXphY2phIG9yIGRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpDQogICAgICAgIGlmIGxhc3RfdXBkYXRlX3RpbWUudHppbmZvIGlzIE5vbmU6DQogICAgICAgICAgICBsYXN0X3VwZGF0ZV90aW1lID0gbGFzdF91cGRhdGVfdGltZS5yZXBsYWNlKHR6aW5mbz10aW1lem9uZS51dGMpDQogICAgICAgICNwcmludChmIiAgICBbQ0FMQ10gQ3phcyBvc3RhdG5pZWogYWt0dWFsaXphY2ppOiB7bGFzdF91cGRhdGVfdGltZX0iKQ0KDQogICAgICAgIGN1cnJlbnRfdGltZSA9IGRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpDQogICAgICAgICNwcmludChmIiAgICBbQ0FMQ10gT2JlY255IGN6YXM6IHtjdXJyZW50X3RpbWV9IikNCiAgICAgICAgDQogICAgICAgIG1pbnV0ZXNfcGFzc2VkID0gRGVjaW1hbCgoY3VycmVudF90aW1lIC0gbGFzdF91cGRhdGVfdGltZSkudG90YWxfc2Vjb25kcygpKSAvIERlY2ltYWwoNjApDQogICAgICAgICNwcmludChmIiAgICBbQ0FMQ10gTWludXQgb2Qgb3N0YXRuaWVqIGFrdHVhbGl6YWNqaToge21pbnV0ZXNfcGFzc2VkOi40Zn0iKQ0KICAgICAgICANCiAgICAgICAgaWYgbWludXRlc19wYXNzZWQgPD0gMDoNCiAgICAgICAgICAgICNwcmludChmIiAgICBbQ0FMQ10gQ3phcyA8IDAuIFp3cmFjYW0gdGVtcGVyYXR1csSZIGJhem93xIU6IHtiYXNlX3RlbXBlcmF0dXJlfcKwQyIpDQogICAgICAgICAgICByZXR1cm4gYmFzZV90ZW1wZXJhdHVyZQ0KDQogICAgICAgIGlmIHJlYWt0b3Iuc3Rhbl9wYWxuaWthID09ICdXTEFDWk9OWSc6DQogICAgICAgICAgICAjcHJpbnQoIiAgICBbQ0FMQ10gU3RhbiBwYWxuaWthOiBXTEFDWk9OWS4gT2JsaWN6YW0gZ3J6YW5pZS4iKQ0KICAgICAgICAgICAgc3p5Ymtvc2NfZ3J6YW5pYSA9IHJlYWt0b3Iuc3p5Ymtvc2NfZ3J6YW5pYV9jX25hX21pbnV0ZSBvciBEZWNpbWFsKCcwLjUnKQ0KICAgICAgICAgICAgdGVtcF9kb2NlbG93YSA9IHJlYWt0b3IudGVtcGVyYXR1cmFfZG9jZWxvd2Egb3IgRGVjaW1hbCgnMTIwLjAnKQ0KICAgICAgICAgICAgcHJ6eXJvc3QgPSBtaW51dGVzX3Bhc3NlZCAqIHN6eWJrb3NjX2dyemFuaWENCiAgICAgICAgICAgIG5ld190ZW1wZXJhdHVyZSA9IG1pbih0ZW1wX2RvY2Vsb3dhLCBiYXNlX3RlbXBlcmF0dXJlICsgcHJ6eXJvc3QpDQogICAgICAgICAgICAjcHJpbnQoZiIgICAgW0NBTENdIFN6eWJrb8WbxIcgZ3J6YW5pYToge3N6eWJrb3NjX2dyemFuaWF9wrBDL21pbiwgUHJ6eXJvc3Q6IHtwcnp5cm9zdDouNGZ9wrBDLCBOb3dhIHRlbXA6IHtuZXdfdGVtcGVyYXR1cmU6LjRmfcKwQyIpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICAjcHJpbnQoZiIgICAgW0NBTENdIFN0YW4gcGFsbmlrYToge3JlYWt0b3Iuc3Rhbl9wYWxuaWthfS4gT2JsaWN6YW0gY2jFgm9kemVuaWUuIikNCiAgICAgICAgICAgIHN6eWJrb3NjX2NobG9kemVuaWEgPSByZWFrdG9yLnN6eWJrb3NjX2NobG9kemVuaWFfY19uYV9taW51dGUgb3IgRGVjaW1hbCgnMC4xJykNCiAgICAgICAgICAgIHNwYWRlayA9IG1pbnV0ZXNfcGFzc2VkICogc3p5Ymtvc2NfY2hsb2R6ZW5pYQ0KICAgICAgICAgICAgbmV3X3RlbXBlcmF0dXJlID0gbWF4KERlY2ltYWwoJzIwLjAnKSwgYmFzZV90ZW1wZXJhdHVyZSAtIHNwYWRlaykNCiAgICAgICAgICAgICNwcmludChmIiAgICBbQ0FMQ10gU3p5YmtvxZvEhyBjaMWCb2R6ZW5pYToge3N6eWJrb3NjX2NobG9kemVuaWF9wrBDL21pbiwgU3BhZGVrOiB7c3BhZGVrOi40Zn3CsEMsIE5vd2EgdGVtcDoge25ld190ZW1wZXJhdHVyZTouNGZ9wrBDIikNCg0KICAgICAgICAjcHJpbnQoZiIgICAgW0NBTENdIC0tLSBLb25pZWMgb2JsaWN6ZcWEIGRsYSB7cmVha3Rvci5uYXp3YV91bmlrYWxuYX0uIFp3cmFjYW06IHtuZXdfdGVtcGVyYXR1cmV9IC0tLSIpDQogICAgICAgIHJldHVybiBuZXdfdGVtcGVyYXR1cmUNCg0KICAgIGRlZiByZWFkX3NlbnNvcnMoc2VsZik6DQogICAgICAgICIiIk9kY3p5dHVqZSBpIGFrdHVhbGl6dWplIGRhbmUgeiBjenVqbmlrw7N3ICh3ZXJzamEgT1JNIHogb2TFm3dpZcW8YW5pZW0pLiIiIg0KICAgICAgICBjdXJyZW50X3RpbWUgPSBkYXRldGltZS5ub3codGltZXpvbmUudXRjKQ0KICAgICAgICBwcmludChmIlxuLS0tIFNDSEVEVUxFUjogVXJ1Y2hhbWlhbSByZWFkX3NlbnNvcnMgbyB7Y3VycmVudF90aW1lfSAtLS0iKQ0KDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGFrdHl3bnlfc3ByemV0X3EgPSBkYi5zZWxlY3QoU3ByemV0KS53aGVyZShTcHJ6ZXQuc3Rhbl9zcHJ6ZXR1ICE9ICdXecWCxIVjem9ueScpDQogICAgICAgICAgICBlcXVpcG1lbnRfbGlzdCA9IGRiLnNlc3Npb24uZXhlY3V0ZShha3R5d255X3NwcnpldF9xKS5zY2FsYXJzKCkuYWxsKCkNCiAgICAgICAgICAgIHByaW50KGYiWm5hbGV6aW9ubyB7bGVuKGVxdWlwbWVudF9saXN0KX0gYWt0eXdueWNoIHVyesSFZHplxYQuIikNCiAgICAgICAgICAgIHByaW50KGVxdWlwbWVudF9saXN0KQ0KICAgICAgICAgICAgcG9taWFyeV9kb19kb2RhbmlhID0gW10NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBLUk9LIDE6IE9ibGljeiB3c3p5c3RraWUgbm93ZSB3YXJ0b8WbY2kgdyBwxJl0bGkNCiAgICAgICAgICAgIGZvciBpdGVtIGluIGVxdWlwbWVudF9saXN0Og0KICAgICAgICAgICAgICAgIG5vd2FfdGVtcGVyYXR1cmEgPSBpdGVtLnRlbXBlcmF0dXJhX2FrdHVhbG5hDQogICAgICAgICAgICAgICAgaWYgaXRlbS50eXBfc3ByemV0dSA9PSAncmVha3Rvcic6DQogICAgICAgICAgICAgICAgICAgICMgT2JsaWN6ZW5pYSBiYXp1asSFIG5hIHN0YW5pZSBvYmlla3R1IHogcG9wcnplZG5pZWogaXRlcmFjamkgdyBwYW1pxJljaQ0KICAgICAgICAgICAgICAgICAgICBub3dhX3RlbXBlcmF0dXJhID0gc2VsZi5fY2FsY3VsYXRlX25ld190ZW1wZXJhdHVyZShpdGVtKQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIG5vd2VfY2lzbmllbmllID0gc2VsZi5fc2ltdWxhdGVfcHJlc3N1cmUoaXRlbS50eXBfc3ByemV0dSkNCg0KICAgICAgICAgICAgICAgICMgWmFrdHVhbGl6dWogc3RhbiBvYmlla3R1IHcgcGFtacSZY2kgc2VzamkNCiAgICAgICAgICAgICAgICBpdGVtLnRlbXBlcmF0dXJhX2FrdHVhbG5hID0gbm93YV90ZW1wZXJhdHVyYQ0KICAgICAgICAgICAgICAgIGl0ZW0uY2lzbmllbmllX2FrdHVhbG5lID0gbm93ZV9jaXNuaWVuaWUNCiAgICAgICAgICAgICAgICBpdGVtLm9zdGF0bmlhX2FrdHVhbGl6YWNqYSA9IGN1cnJlbnRfdGltZQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIHBvbWlhcnlfZG9fZG9kYW5pYS5hcHBlbmQoDQogICAgICAgICAgICAgICAgICAgIEhpc3RvcmlhUG9taWFyb3coaWRfc3ByemV0dT1pdGVtLmlkLCB0ZW1wZXJhdHVyYT1ub3dhX3RlbXBlcmF0dXJhLCBjaXNuaWVuaWU9bm93ZV9jaXNuaWVuaWUsIGN6YXNfcG9taWFydT1jdXJyZW50X3RpbWUpDQogICAgICAgICAgICAgICAgKQ0KDQogICAgICAgICAgICAjIEtST0sgMjogWmFwaXN6IHdzenlzdGtpZSB6bWlhbnkgZG8gYmF6eSB3IGplZG5laiB0cmFuc2FrY2ppDQogICAgICAgICAgICBpZiBwb21pYXJ5X2RvX2RvZGFuaWE6DQogICAgICAgICAgICAgICAgZGIuc2Vzc2lvbi5hZGRfYWxsKHBvbWlhcnlfZG9fZG9kYW5pYSkNCg0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5jb21taXQoKQ0KICAgICAgICAgICAgcHJpbnQoZiJcblt7Y3VycmVudF90aW1lfV0gUG9taWFyeSB6YXBpc2FuZSBkbyBiYXp5LiIpDQogICAgICAgICAgICANCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpDQogICAgICAgICAgICBwcmludChmIkLFgcSERCBwb2RjemFzIG9kY3p5dHUgY3p1am5pa8Ozdzoge2V9IikNCiAgICAgICAgICAgIGltcG9ydCB0cmFjZWJhY2sNCiAgICAgICAgICAgIHRyYWNlYmFjay5wcmludF9leGMoKQ0KICAgICAgICAgICAgcmFpc2UNCg0KICAgIGRlZiBfc2ltdWxhdGVfcHJlc3N1cmUoc2VsZiwgdHlwX3NwcnpldHUpOg0KICAgICAgICBpZiB0eXBfc3ByemV0dSA9PSAnZmlsdHInOiByZXR1cm4gRGVjaW1hbChzdHIocm91bmQocmFuZG9tLnVuaWZvcm0oNC4wLCA1LjApLCAyKSkpDQogICAgICAgIGVsaWYgdHlwX3NwcnpldHUgPT0gJ3JlYWt0b3InOiByZXR1cm4gRGVjaW1hbChzdHIocm91bmQocmFuZG9tLnVuaWZvcm0oMC4wLCAyLjApLCAyKSkpDQogICAgICAgIHJldHVybiBEZWNpbWFsKCcwLjAnKQ0KDQogICAgQHN0YXRpY21ldGhvZA0KICAgIGRlZiBzZXRfdGVtcGVyYXR1cmVfZm9yX211bHRpcGxlKGVxdWlwbWVudF9uYW1lcywgdGVtcGVyYXR1cmEpOg0KICAgICAgICAiIiINCiAgICAgICAgVXN0YXdpYSBodXJ0b3dvIHRlbXBlcmF0dXLEmSBkb2NlbG93xIUgZGxhIGxpc3R5IHNwcnrEmXTDs3cuDQogICAgICAgIA0KICAgICAgICA6cGFyYW0gZXF1aXBtZW50X25hbWVzOiBMaXN0YSBzdHJpbmfDs3cgeiBuYXp3YW1pIHVuaWthbG55bWkgc3ByesSZdMOzdy4NCiAgICAgICAgOnBhcmFtIHRlbXBlcmF0dXJhOiBOb3dhIHRlbXBlcmF0dXJhIGRvY2Vsb3dhLg0KICAgICAgICA6cmV0dXJuOiBMaXN0YSBuYXp3IHNwcnrEmXTDs3csIGt0w7NyZSB1ZGHFgm8gc2nEmSB6YWt0dWFsaXpvd2HEhy4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIG5vdCBlcXVpcG1lbnRfbmFtZXM6DQogICAgICAgICAgICByZXR1cm4gW10NCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICAjIEtyb2sgMTogWm5hamTFuiBJRCBzcHJ6xJl0w7N3IG5hIHBvZHN0YXdpZSBpY2ggbmF6dw0KICAgICAgICAgICAgc3ByemV0eV9xID0gZGIuc2VsZWN0KFNwcnpldCkud2hlcmUoU3ByemV0Lm5hendhX3VuaWthbG5hLmluXyhlcXVpcG1lbnRfbmFtZXMpKQ0KICAgICAgICAgICAgc3ByemV0eV9kb19ha3R1YWxpemFjamkgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoc3ByemV0eV9xKS5zY2FsYXJzKCkuYWxsKCkNCg0KICAgICAgICAgICAgaWYgbm90IHNwcnpldHlfZG9fYWt0dWFsaXphY2ppOg0KICAgICAgICAgICAgICAgIHByaW50KCJOaWUgem5hbGV6aW9ubyDFvGFkbmVnbyBzcHJ6xJl0dSBvIHBvZGFueWNoIG5hendhY2guIikNCiAgICAgICAgICAgICAgICByZXR1cm4gW10NCg0KICAgICAgICAgICAgaWRzX2RvX2FrdHVhbGl6YWNqaSA9IFtzLmlkIGZvciBzIGluIHNwcnpldHlfZG9fYWt0dWFsaXphY2ppXQ0KICAgICAgICAgICAgbmF6d3lfemFrdHVhbGl6b3dhbmUgPSBbcy5uYXp3YV91bmlrYWxuYSBmb3IgcyBpbiBzcHJ6ZXR5X2RvX2FrdHVhbGl6YWNqaV0NCiAgICAgICAgICAgIGN1cnJlbnRfdGltZSA9IGRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpDQoNCiAgICAgICAgICAgICMgS3JvayAyOiBVxbx5aiBgdXBkYXRlYCBkbyBtYXNvd2VqIGFrdHVhbGl6YWNqaSB3IHRhYmVsaSBgc3ByemV0YA0KICAgICAgICAgICAgc3RtdF9zcHJ6ZXQgPSBkYi51cGRhdGUoU3ByemV0KS53aGVyZSgNCiAgICAgICAgICAgICAgICBTcHJ6ZXQuaWQuaW5fKGlkc19kb19ha3R1YWxpemFjamkpDQogICAgICAgICAgICApLnZhbHVlcygNCiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyYV9ha3R1YWxuYT10ZW1wZXJhdHVyYSwNCiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyYV9kb2NlbG93YT10ZW1wZXJhdHVyYSwNCiAgICAgICAgICAgICAgICBvc3RhdG5pYV9ha3R1YWxpemFjamE9Y3VycmVudF90aW1lDQogICAgICAgICAgICApDQogICAgICAgICAgICBkYi5zZXNzaW9uLmV4ZWN1dGUoc3RtdF9zcHJ6ZXQpDQoNCiAgICAgICAgICAgICMgS3JvayAzOiBEb2RhaiB3cGlzeSBkbyBoaXN0b3JpaSBgb3BlcmF0b3JfdGVtcGVyYXR1cmVzYA0KICAgICAgICAgICAgIyBSb2JpbXkgdG8gdyBwxJl0bGksIHBvbmlld2HFvCBtdXNpbXkgZG9kYcSHIG9zb2JuZSB3aWVyc3plDQogICAgICAgICAgICBub3dlX3dwaXN5X2hpc3RvcmlpID0gW10NCiAgICAgICAgICAgIGZvciBzcHJ6ZXRfaWQgaW4gaWRzX2RvX2FrdHVhbGl6YWNqaToNCiAgICAgICAgICAgICAgICBub3dlX3dwaXN5X2hpc3RvcmlpLmFwcGVuZCgNCiAgICAgICAgICAgICAgICAgICAgT3BlcmF0b3JUZW1wZXJhdHVyZXMoaWRfc3ByemV0dT1zcHJ6ZXRfaWQsIHRlbXBlcmF0dXJhPXRlbXBlcmF0dXJhLCBjemFzX3VzdGF3aWVuaWE9Y3VycmVudF90aW1lKQ0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgIGRiLnNlc3Npb24uYWRkX2FsbChub3dlX3dwaXN5X2hpc3RvcmlpKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpDQogICAgICAgICAgICByZXR1cm4gbmF6d3lfemFrdHVhbGl6b3dhbmUNCg0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBkYi5zZXNzaW9uLnJvbGxiYWNrKCkNCiAgICAgICAgICAgIHByaW50KGYiV3lzdMSFcGnFgiBixYLEhWQgcG9kY3phcyBtYXNvd2VqIGFrdHVhbGl6YWNqaSB0ZW1wZXJhdHVyeToge2V9IikNCiAgICAgICAgICAgIHJhaXNlDQoNCiAgICBAc3RhdGljbWV0aG9kDQogICAgZGVmIGdldF90ZW1wZXJhdHVyZXNfZm9yX211bHRpcGxlKGVxdWlwbWVudF9uYW1lcyk6DQogICAgICAgICIiIg0KICAgICAgICBQb2JpZXJhIGFrdHVhbG5lIGkgZG9jZWxvd2UgdGVtcGVyYXR1cnkgZGxhIGxpc3R5IHNwcnrEmXTDs3cuDQogICAgICAgIA0KICAgICAgICA6cGFyYW0gZXF1aXBtZW50X25hbWVzOiBMaXN0YSBzdHJpbmfDs3cgeiBuYXp3YW1pIHVuaWthbG55bWkgc3ByesSZdMOzdy4NCiAgICAgICAgOnJldHVybjogTGlzdGEgc8WCb3duaWvDs3cgeiBkYW55bWkgbyB0ZW1wZXJhdHVyemUgZGxhIGthxbxkZWdvIHpuYWxlemlvbmVnbyBzcHJ6xJl0dS4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIG5vdCBlcXVpcG1lbnRfbmFtZXM6DQogICAgICAgICAgICByZXR1cm4gW10NCg0KICAgICAgICB0cnk6DQogICAgICAgICAgICAjIFXFvHl3YW15IHNlbGVjdCgpIGRvIHd5YnJhbmlhIGtvbmtyZXRueWNoIGtvbHVtbiwgY28gamVzdCBiYXJkemllaiB3eWRham5lDQogICAgICAgICAgICBzcHJ6ZXR5X3EgPSBkYi5zZWxlY3QoDQogICAgICAgICAgICAgICAgU3ByemV0Lm5hendhX3VuaWthbG5hLA0KICAgICAgICAgICAgICAgIFNwcnpldC50ZW1wZXJhdHVyYV9ha3R1YWxuYSwNCiAgICAgICAgICAgICAgICBTcHJ6ZXQudGVtcGVyYXR1cmFfZG9jZWxvd2ENCiAgICAgICAgICAgICkud2hlcmUoDQogICAgICAgICAgICAgICAgU3ByemV0Lm5hendhX3VuaWthbG5hLmluXyhlcXVpcG1lbnRfbmFtZXMpDQogICAgICAgICAgICApDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgLmFsbCgpIHp3csOzY2kgbGlzdMSZIG9iaWVrdMOzdyBSb3csIGt0w7NyZSBkemlhxYJhasSFIHBvZG9ibmllIGRvIHPFgm93bmlrw7N3DQogICAgICAgICAgICByZXN1bHRzID0gZGIuc2Vzc2lvbi5leGVjdXRlKHNwcnpldHlfcSkuYWxsKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBLb253ZXJ0dWplbXkgbGlzdMSZIFJvdyBuYSBsaXN0xJkgc8WCb3duaWvDs3cgZGxhIMWCYXR3aWVqc3plZ28gdcW8eWNpYQ0KICAgICAgICAgICAgcmV0dXJuIFsNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICJuYXp3YSI6IHJvdy5uYXp3YV91bmlrYWxuYSwNCiAgICAgICAgICAgICAgICAgICAgImFrdHVhbG5hIjogcm93LnRlbXBlcmF0dXJhX2FrdHVhbG5hLA0KICAgICAgICAgICAgICAgICAgICAiZG9jZWxvd2EiOiByb3cudGVtcGVyYXR1cmFfZG9jZWxvd2ENCiAgICAgICAgICAgICAgICB9IA0KICAgICAgICAgICAgICAgIGZvciByb3cgaW4gcmVzdWx0cw0KICAgICAgICAgICAgXQ0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBwcmludChmIld5c3TEhXBpxYIgYsWCxIVkIHBvZGN6YXMgcG9iaWVyYW5pYSB0ZW1wZXJhdHVyOiB7ZX0iKQ0KICAgICAgICAgICAgcmFpc2U=
  - path: app//sockets.py
    content: IyBhcHAvc29ja2V0cy5weQ0KDQpmcm9tIGFwcCBpbXBvcnQgc29ja2V0aW8NCmZyb20gZmxhc2tfc29ja2V0aW8gaW1wb3J0IGVtaXQNCmZyb20gdGFidWxhdGUgaW1wb3J0IHRhYnVsYXRlDQpmcm9tIGRlY2ltYWwgaW1wb3J0IERlY2ltYWwsIEludmFsaWRPcGVyYXRpb24NCg0KZnJvbSAuZXh0ZW5zaW9ucyBpbXBvcnQgZGINCmZyb20gLm1vZGVscyBpbXBvcnQgU3ByemV0LCBPcGVyYWNqZUxvZywgSGlzdG9yaWFQb21pYXJvdywgQXBvbGxvU2VzamUsIEFwb2xsb1RyYWNraW5nDQpmcm9tIC5zZW5zb3JzIGltcG9ydCBTZW5zb3JTZXJ2aWNlDQpmcm9tIC5hcG9sbG9fc2VydmljZSBpbXBvcnQgQXBvbGxvU2VydmljZQ0KZnJvbSAuZGFzaGJvYXJkX3NlcnZpY2UgaW1wb3J0IERhc2hib2FyZFNlcnZpY2UNCiMgaW1wb3J0IHJlZGlzICMgSnXFvCBuaWVwb3RyemVibmUNCg0KIyBDQcWBQSBGVU5LQ0pBIHJlZGlzX2xpc3RlbmVyIEpFU1QgVVNVV0FOQQ0KDQpAc29ja2V0aW8ub24oJ2Nvbm5lY3QnKQ0KZGVmIGhhbmRsZV9jb25uZWN0KCk6DQogICAgIiIiV3lrb255d2FuZSwgZ2R5IGtsaWVudCAocHJ6ZWdsxIVkYXJrYSkgbmF3acSFenVqZSBwb8WCxIVjemVuaWUuIiIiDQogICAgcHJpbnQoJ0tsaWVudCBwb8WCxIVjem9ueSEnKQ0KICAgIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogJ1BvxYLEhWN6b25vIHogc2Vyd2VyZW0uIFdpdGFqIHcga29uc29saSBhZG1pbmlzdHJhY3lqbmVqISd9KQ0KICAgIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogJ1dwaXN6ICJoZWxwIiwgYWJ5IHpvYmFjennEhyBkb3N0xJlwbmUga29tZW5keS4nfSkNCg0KQHNvY2tldGlvLm9uKCdyZXF1ZXN0X2Rhc2hib2FyZF91cGRhdGUnKQ0KZGVmIGhhbmRsZV9yZXF1ZXN0X2Rhc2hib2FyZF91cGRhdGUoKToNCiAgICAiIiINCiAgICBUbyB6ZGFyemVuaWUgamVzdCB3eXdvxYJ5d2FuZSBwcnpleiBuYXN6IHdld27EmXRyem55IHJlZGlzX2xpc3RlbmVyLg0KICAgIER6acSZa2kgdGVtdSBgYnJvYWRjYXN0X2Rhc2hib2FyZF91cGRhdGVgIGplc3Qgd3lrb255d2FuZSB3IGfFgsOzd255bQ0KICAgIHfEhXRrdSBzZXJ3ZXJhLCB6IHBvcHJhd255bSBrb250ZWtzdGVtLg0KICAgICIiIg0KICAgIHByaW50KCItLS0gU29ja2V0SU8gU2VydmVyOiBPdHJ6eW1hbm8gxbzEhWRhbmllIG9kxZt3aWXFvGVuaWEgb2QgUmVkaXMgTGlzdGVuZXIuIFd5d2/FgnVqxJkgYnJvYWRjYXN0LiAtLS0iKQ0KICAgIGJyb2FkY2FzdF9kYXNoYm9hcmRfdXBkYXRlKCkNCg0KQHNvY2tldGlvLm9uKCdjb21tYW5kX2Zyb21fY2xpZW50JykNCmRlZiBoYW5kbGVfY29tbWFuZChqc29uX2RhdGEpOg0KICAgICIiIk9kYmllcmEgaSBwcnpldHdhcnphIGtvbWVuZHkgb2Qga2xpZW50YS4iIiINCiAgICBjb21tYW5kX3N0cmluZyA9IGpzb25fZGF0YS5nZXQoJ2RhdGEnLCAnJykuc3RyaXAoKQ0KICAgIGlmIG5vdCBjb21tYW5kX3N0cmluZzoNCiAgICAgICAgcmV0dXJuDQoNCiAgICBwYXJ0cyA9IGNvbW1hbmRfc3RyaW5nLnNwbGl0KCkNCiAgICBjb21tYW5kID0gcGFydHNbMF0ubG93ZXIoKQ0KICAgIGFyZ3MgPSBwYXJ0c1sxOl0NCg0KICAgIHByaW50KGYiT3RyenltYW5vIGtvbWVuZMSZOiAne2NvbW1hbmR9JyB6IGFyZ3VtZW50YW1pOiB7YXJnc30iKQ0KDQogICAgaWYgY29tbWFuZCA9PSAnc2hvdy10ZW1wJzoNCiAgICAgICAgaGFuZGxlX3Nob3dfdGVtcChhcmdzKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAnc2V0LXRlbXAnOg0KICAgICAgICBoYW5kbGVfc2V0X3RlbXAoYXJncykNCiAgICBlbGlmIGNvbW1hbmQgPT0gJ3NldC1jdXJyZW50LXRlbXAnOg0KICAgICAgICBoYW5kbGVfc2V0X2N1cnJlbnRfdGVtcChhcmdzKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAnY2xlYXItbWVhc3VyZW1lbnRzJzoNCiAgICAgICAgaGFuZGxlX2NsZWFyX21lYXN1cmVtZW50cyhhcmdzKQ0KICAgIGVsaWYgY29tbWFuZCA9PSAnaGVscCc6DQogICAgICAgIGhhbmRsZV9oZWxwKCkNCiAgICBlbHNlOg0KICAgICAgICBlbWl0KCdyZXNwb25zZScsIHsnZGF0YSc6IGYiQsWCxIVkOiBOaWV6bmFuYSBrb21lbmRhICd7Y29tbWFuZH0nLiIsICdpc19lcnJvcic6IFRydWV9KQ0KDQpkZWYgaGFuZGxlX2hlbHAoKToNCiAgICAiIiJXeXN5xYJhIGRvIGtsaWVudGEgbGlzdMSZIGRvc3TEmXBueWNoIGtvbWVuZC4iIiINCiAgICBoZWxwX3RleHQgPSAiIiINCkRvc3TEmXBuZSBrb21lbmR5Og0KLS0tLS0tLS0tLS0tLS0tLS0NCiAgc2hvdy10ZW1wIFtzcHJ6ZXQxXSBbc3ByemV0Ml0gLi4uDQogICAgT3BpczogV3nFm3dpZXRsYSB0ZW1wZXJhdHVyeSBkbGEgcG9kYW5lZ28gc3ByesSZdHUuDQogICAgRmxhZ2k6DQogICAgICAtLXJlYWt0b3J5ICAgIDogUG9rYcW8IHR5bGtvIHJlYWt0b3J5Lg0KICAgICAgKGJyYWsgZmxhZykgICA6IFBva2HFvCByZWFrdG9yeSwgYXBvbGxvIGkgYmVjemtpLg0KDQogIHNldC10ZW1wIDx0ZW1wPiA8c3ByemV0MT4gLi4uDQogICAgT3BpczogVXN0YXdpYSB0ZW1wLiBBS1RVQUxOxIQgaSBET0NFTE9XxIQuDQogICAgRmxhZ2k6DQogICAgICAtLXJlYWt0b3J5ICAgIDogWmFzdG9zdWogZG8gd3N6eXN0a2ljaCByZWFrdG9yw7N3Lg0KICAgICAgLS1hbGwgICAgICAgICA6IFphc3Rvc3VqIGRvIHdzenlzdGtpY2ggcmVha3RvcsOzdywgYXBvbGxvIGkgYmVjemVrLg0KICAgICAgDQogIHNldC1jdXJyZW50LXRlbXAgPHRlbXA+IDxzcHJ6ZXQxPiAuLi4NCiAgICBPcGlzOiBVc3Rhd2lhIFRZTEtPIHRlbXAuIEFLVFVBTE7EhCAobnAuIHBvIHRhbmtvd2FuaXUpLg0KICAgIEZsYWdpOg0KICAgICAgLS1yZWFrdG9yeSAgICA6IFphc3Rvc3VqIGRvIHdzenlzdGtpY2ggcmVha3RvcsOzdy4NCiAgICAgIC0tYWxsICAgICAgICAgOiBaYXN0b3N1aiBkbyB3c3p5c3RraWNoIHJlYWt0b3LDs3csIGFwb2xsbyBpIGJlY3play4NCg0KICBjbGVhci1tZWFzdXJlbWVudHMgLS1jb25maXJtDQogICAgT3BpczogQ3p5xZtjaSBjYcWCxIUgaGlzdG9yacSZIHBvbWlhcsOzdy4gV3ltYWdhIHBvdHdpZXJkemVuaWEgZmxhZ8SFLg0KIiIiDQogICAgZW1pdCgncmVzcG9uc2UnLCB7J2RhdGEnOiBoZWxwX3RleHR9KQ0KDQpkZWYgaGFuZGxlX3Nob3dfdGVtcChhcmdzKToNCiAgICAiIiJMb2dpa2EgZGxhIGtvbWVuZHkgc2hvdy10ZW1wLiIiIg0KICAgIHRyeToNCiAgICAgICAgZXF1aXBtZW50X3RvX3Nob3cgPSBhcmdzDQogICAgICAgIGlmIG5vdCBlcXVpcG1lbnRfdG9fc2hvdzoNCiAgICAgICAgICAgIGVxdWlwbWVudF90b19zaG93ID0gZGIuc2Vzc2lvbi5leGVjdXRlKGRiLnNlbGVjdChTcHJ6ZXQubmF6d2FfdW5pa2FsbmEpLndoZXJlKFNwcnpldC50eXBfc3ByemV0dS5pbl8oWydyZWFrdG9yJywgJ2Fwb2xsbycsICdiZWN6a2FfYnJ1ZG5hJywgJ2JlY3prYV9jenlzdGEnXSkpKS5zY2FsYXJzKCkuYWxsKCkNCiAgICAgICAgZWxpZiAiLS1yZWFrdG9yeSIgaW4gZXF1aXBtZW50X3RvX3Nob3c6DQogICAgICAgICAgICBlcXVpcG1lbnRfdG9fc2hvdyA9IGRiLnNlc3Npb24uZXhlY3V0ZShkYi5zZWxlY3QoU3ByemV0Lm5hendhX3VuaWthbG5hKS53aGVyZShTcHJ6ZXQudHlwX3NwcnpldHUgPT0gJ3JlYWt0b3InKSkuc2NhbGFycygpLmFsbCgpDQoNCiAgICAgICAgaWYgbm90IGVxdWlwbWVudF90b19zaG93OiByZXR1cm4gZW1pdCgncmVzcG9uc2UnLCB7J2RhdGEnOiAiTmllIHpuYWxlemlvbm8gc3ByesSZdHUgZG8gd3nFm3dpZXRsZW5pYS4ifSkNCg0KICAgICAgICB0ZW1wZXJhdHVyZXNfZGF0YSA9IFNlbnNvclNlcnZpY2UuZ2V0X3RlbXBlcmF0dXJlc19mb3JfbXVsdGlwbGUoZXF1aXBtZW50X3RvX3Nob3cpDQogICAgICAgIGlmIG5vdCB0ZW1wZXJhdHVyZXNfZGF0YTogcmV0dXJuIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogIk5pZSB6bmFsZXppb25vIGRhbnljaCBkbGEgcG9kYW5lZ28gc3ByesSZdHUuIn0pDQoNCiAgICAgICAgaGVhZGVycyA9IFsiTmF6d2EgU3ByesSZdHUiLCAiQWt0dWFsbmEiLCAiRG9jZWxvd2EiXQ0KICAgICAgICB0YWJsZV9kYXRhID0gW1tpdGVtWyduYXp3YSddLCBmIntpdGVtWydha3R1YWxuYSddfcKwQyIgaWYgaXRlbVsnYWt0dWFsbmEnXSBpcyBub3QgTm9uZSBlbHNlICJCL0QiLCBmIntpdGVtWydkb2NlbG93YSddfcKwQyIgaWYgaXRlbVsnZG9jZWxvd2EnXSBpcyBub3QgTm9uZSBlbHNlICJCL0QiXSBmb3IgaXRlbSBpbiB0ZW1wZXJhdHVyZXNfZGF0YV0NCiAgICAgICAgZm9ybWF0dGVkX3RhYmxlID0gdGFidWxhdGUodGFibGVfZGF0YSwgaGVhZGVycz1oZWFkZXJzLCB0YWJsZWZtdD0icHJlc3RvIikNCiAgICAgICAgZW1pdCgncmVzcG9uc2UnLCB7J2RhdGEnOiBmb3JtYXR0ZWRfdGFibGV9KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgZW1pdCgncmVzcG9uc2UnLCB7J2RhdGEnOiBmIld5c3TEhXBpxYIgYsWCxIVkIHNlcndlcmE6IHtlfSIsICdpc19lcnJvcic6IFRydWV9KQ0KDQpkZWYgaGFuZGxlX3NldF90ZW1wKGFyZ3MpOg0KICAgICIiIkxvZ2lrYSBkbGEga29tZW5keSBzZXQtdGVtcC4iIiINCiAgICB0cnk6DQogICAgICAgIGlmIGxlbihhcmdzKSA8IDI6IHJldHVybiBlbWl0KCdyZXNwb25zZScsIHsnZGF0YSc6ICdVxbx5Y2llOiBzZXQtdGVtcCA8dGVtcGVyYXR1cmE+IDxzcHJ6ZXQxPiAuLi4gbHViIC0tcmVha3RvcnkvLS1hbGwnLCAnaXNfZXJyb3InOiBUcnVlfSkNCiAgICAgICAgdHJ5OiB0ZW1wZXJhdHVyYSA9IERlY2ltYWwoYXJnc1swXSkNCiAgICAgICAgZXhjZXB0IEludmFsaWRPcGVyYXRpb246IHJldHVybiBlbWl0KCdyZXNwb25zZScsIHsnZGF0YSc6IGYiQsWCxIVkOiBOaWVwcmF3aWTFgm93YSB3YXJ0b8WbxIcgdGVtcGVyYXR1cnk6ICd7YXJnc1swXX0nLiIsICdpc19lcnJvcic6IFRydWV9KQ0KDQogICAgICAgIGVxdWlwbWVudF90b191cGRhdGUgPSBhcmdzWzE6XQ0KICAgICAgICBpZiAiLS1yZWFrdG9yeSIgaW4gZXF1aXBtZW50X3RvX3VwZGF0ZToNCiAgICAgICAgICAgIGVxdWlwbWVudF90b191cGRhdGUgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoZGIuc2VsZWN0KFNwcnpldC5uYXp3YV91bmlrYWxuYSkud2hlcmUoU3ByemV0LnR5cF9zcHJ6ZXR1ID09ICdyZWFrdG9yJykpLnNjYWxhcnMoKS5hbGwoKQ0KICAgICAgICBlbGlmICItLWFsbCIgaW4gZXF1aXBtZW50X3RvX3VwZGF0ZToNCiAgICAgICAgICAgIGVxdWlwbWVudF90b191cGRhdGUgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoZGIuc2VsZWN0KFNwcnpldC5uYXp3YV91bmlrYWxuYSkud2hlcmUoU3ByemV0LnR5cF9zcHJ6ZXR1LmluXyhbJ3JlYWt0b3InLCAnYXBvbGxvJywgJ2JlY3prYV9icnVkbmEnLCAnYmVjemthX2N6eXN0YSddKSkpLnNjYWxhcnMoKS5hbGwoKQ0KDQogICAgICAgIGlmIG5vdCBlcXVpcG1lbnRfdG9fdXBkYXRlOiByZXR1cm4gZW1pdCgncmVzcG9uc2UnLCB7J2RhdGEnOiAiQsWCxIVkOiBOaWUgcG9kYW5vIHNwcnrEmXR1IGRvIGFrdHVhbGl6YWNqaS4iLCAnaXNfZXJyb3InOiBUcnVlfSkNCg0KICAgICAgICBlbWl0KCdyZXNwb25zZScsIHsnZGF0YSc6IGYiUHLDs2JhIHVzdGF3aWVuaWEgdGVtcGVyYXR1cnkgKGFrdC4gaSBkb2NlbC4pIHt0ZW1wZXJhdHVyYX3CsEMgZGxhOiB7JywgJy5qb2luKGVxdWlwbWVudF90b191cGRhdGUpfS4uLiJ9KQ0KICAgICAgICB1cGRhdGVkID0gU2Vuc29yU2VydmljZS5zZXRfdGVtcGVyYXR1cmVfZm9yX211bHRpcGxlKGVxdWlwbWVudF90b191cGRhdGUsIHRlbXBlcmF0dXJhKQ0KDQogICAgICAgIGlmIHVwZGF0ZWQ6DQogICAgICAgICAgICBlbWl0KCdyZXNwb25zZScsIHsnZGF0YSc6IGYiU3VrY2VzIVxuWmFrdHVhbGl6b3dhbm8gdGVtcGVyYXR1csSZIGRsYTogeycsICcuam9pbih1cGRhdGVkKX0ifSkNCiAgICAgICAgICAgIGJyb2FkY2FzdF9kYXNoYm9hcmRfdXBkYXRlKCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogIk5pZSB1ZGHFgm8gc2nEmSB6YWt0dWFsaXpvd2HEhyDFvGFkbmVnbyBzcHJ6xJl0dS4iLCAnaXNfZXJyb3InOiBUcnVlfSkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogZiJXeXN0xIVwacWCIGLFgsSFZCBzZXJ3ZXJhOiB7ZX0iLCAnaXNfZXJyb3InOiBUcnVlfSkNCg0KZGVmIGhhbmRsZV9zZXRfY3VycmVudF90ZW1wKGFyZ3MpOg0KICAgICIiIkxvZ2lrYSBkbGEga29tZW5keSBzZXQtY3VycmVudC10ZW1wLiIiIg0KICAgIHRyeToNCiAgICAgICAgaWYgbGVuKGFyZ3MpIDwgMjogcmV0dXJuIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogJ1XFvHljaWU6IHNldC1jdXJyZW50LXRlbXAgPHRlbXBlcmF0dXJhPiA8c3ByemV0MT4gLi4uIGx1YiAtLXJlYWt0b3J5Ly0tYWxsJywgJ2lzX2Vycm9yJzogVHJ1ZX0pDQogICAgICAgIHRyeTogdGVtcGVyYXR1cmEgPSBEZWNpbWFsKGFyZ3NbMF0pDQogICAgICAgIGV4Y2VwdCBJbnZhbGlkT3BlcmF0aW9uOiByZXR1cm4gZW1pdCgncmVzcG9uc2UnLCB7J2RhdGEnOiBmIkLFgsSFZDogTmllcHJhd2lkxYJvd2Egd2FydG/Fm8SHIHRlbXBlcmF0dXJ5OiAne2FyZ3NbMF19Jy4iLCAnaXNfZXJyb3InOiBUcnVlfSkNCiAgICAgICAgDQogICAgICAgIGVxdWlwbWVudF90b191cGRhdGUgPSBhcmdzWzE6XQ0KICAgICAgICBpZiAiLS1yZWFrdG9yeSIgaW4gZXF1aXBtZW50X3RvX3VwZGF0ZToNCiAgICAgICAgICAgIGVxdWlwbWVudF90b191cGRhdGUgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoZGIuc2VsZWN0KFNwcnpldC5uYXp3YV91bmlrYWxuYSkud2hlcmUoU3ByemV0LnR5cF9zcHJ6ZXR1ID09ICdyZWFrdG9yJykpLnNjYWxhcnMoKS5hbGwoKQ0KICAgICAgICBlbGlmICItLWFsbCIgaW4gZXF1aXBtZW50X3RvX3VwZGF0ZToNCiAgICAgICAgICAgIGVxdWlwbWVudF90b191cGRhdGUgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoZGIuc2VsZWN0KFNwcnpldC5uYXp3YV91bmlrYWxuYSkud2hlcmUoU3ByemV0LnR5cF9zcHJ6ZXR1LmluXyhbJ3JlYWt0b3InLCAnYXBvbGxvJywgJ2JlY3prYV9icnVkbmEnLCAnYmVjemthX2N6eXN0YSddKSkpLnNjYWxhcnMoKS5hbGwoKQ0KICAgICAgICAgICAgDQogICAgICAgIGlmIG5vdCBlcXVpcG1lbnRfdG9fdXBkYXRlOiByZXR1cm4gZW1pdCgncmVzcG9uc2UnLCB7J2RhdGEnOiAiQsWCxIVkOiBOaWUgcG9kYW5vIHNwcnrEmXR1IGRvIGFrdHVhbGl6YWNqaS4iLCAnaXNfZXJyb3InOiBUcnVlfSkNCiAgICAgICAgDQogICAgICAgIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogZiJQcsOzYmEgdXN0YXdpZW5pYSBUWUxLTyB0ZW1wLiBha3R1YWxuZWogbmEge3RlbXBlcmF0dXJhfcKwQyBkbGE6IHsnLCAnLmpvaW4oZXF1aXBtZW50X3RvX3VwZGF0ZSl9Li4uIn0pDQogICAgICAgIHVwZGF0ZWQgPSBTZW5zb3JTZXJ2aWNlLnNldF9jdXJyZW50X3RlbXBlcmF0dXJlKGVxdWlwbWVudF90b191cGRhdGUsIHRlbXBlcmF0dXJhKQ0KICAgICAgICANCiAgICAgICAgaWYgdXBkYXRlZDoNCiAgICAgICAgICAgIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogZiJTdWtjZXMhXG5Vc3Rhd2lvbm8gYHRlbXBlcmF0dXJhX2FrdHVhbG5hYCBuYSB7dGVtcGVyYXR1cmF9wrBDIGRsYTogeycsICcuam9pbih1cGRhdGVkKX0ifSkNCiAgICAgICAgICAgIGJyb2FkY2FzdF9kYXNoYm9hcmRfdXBkYXRlKCkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogIk5pZSB1ZGHFgm8gc2nEmSB6YWt0dWFsaXpvd2HEhyDFvGFkbmVnbyBzcHJ6xJl0dS4iLCAnaXNfZXJyb3InOiBUcnVlfSkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogZiJXeXN0xIVwacWCIGLFgsSFZCBzZXJ3ZXJhOiB7ZX0iLCAnaXNfZXJyb3InOiBUcnVlfSkNCg0KZGVmIGhhbmRsZV9jbGVhcl9tZWFzdXJlbWVudHMoYXJncyk6DQogICAgIiIiTG9naWthIGRsYSBrb21lbmR5IGNsZWFyLW1lYXN1cmVtZW50cy4iIiINCiAgICB0cnk6DQogICAgICAgIGlmIG5vdCBhcmdzIG9yIGFyZ3NbMF0gIT0gJy0tY29uZmlybSc6DQogICAgICAgICAgICByZXR1cm4gZW1pdCgncmVzcG9uc2UnLCB7J2RhdGEnOiAnQsWBxIREOiBXeW1hZ2FuZSBwb3R3aWVyZHplbmllIGZsYWfEhSAtLWNvbmZpcm0nLCAnaXNfZXJyb3InOiBUcnVlfSkNCiAgICAgICAgDQogICAgICAgIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogJ1JvenBvY3p5bmFtIGN6eXN6Y3plbmllIGBoaXN0b3JpYV9wb21pYXJvd2AuLi4nfSkNCiAgICAgICAgZGIuc2Vzc2lvbi5xdWVyeShIaXN0b3JpYVBvbWlhcm93KS5kZWxldGUoKQ0KICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpDQogICAgICAgIGVtaXQoJ3Jlc3BvbnNlJywgeydkYXRhJzogJ1N1a2NlcyEgVGFiZWxhIGBoaXN0b3JpYV9wb21pYXJvd2Agem9zdGHFgmEgd3ljenlzemN6b25hLid9KQ0KICAgICAgICBicm9hZGNhc3RfZGFzaGJvYXJkX3VwZGF0ZSgpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBkYi5zZXNzaW9uLnJvbGxiYWNrKCkNCiAgICAgICAgZW1pdCgncmVzcG9uc2UnLCB7J2RhdGEnOiBmJ0LFgsSFZCBwb2RjemFzIGN6eXN6Y3plbmlhIHRhYmVsaToge3N0cihlKX0nLCAnaXNfZXJyb3InOiBUcnVlfSkNCg0KIyAtLS0gRlVOS0NKRSBCUk9BRENBU1QgLS0tDQoNCmRlZiBicm9hZGNhc3RfZGFzaGJvYXJkX3VwZGF0ZSgpOg0KICAgICIiIlBvYmllcmEgbmFqbm93c3p5IHN0YW4gZGFzaGJvYXJkdSBpIHJvemfFgmFzemEgZ28gZG8gd3N6eXN0a2ljaCBwb2TFgsSFY3pvbnljaCBrbGllbnTDs3cuIiIiDQogICAgcHJpbnQoIkJyb2FkY2FzdGluZyBkYXNoYm9hcmQgdXBkYXRlIHRvIGFsbCBjbGllbnRzLi4uIikNCiAgICB0cnk6DQogICAgICAgIGRhc2hib2FyZF9kYXRhID0gRGFzaGJvYXJkU2VydmljZS5nZXRfbWFpbl9kYXNoYm9hcmRfZGF0YSgpDQogICAgICAgIHNvY2tldGlvLmVtaXQoJ2Rhc2hib2FyZF91cGRhdGUnLCBkYXNoYm9hcmRfZGF0YSkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHByaW50KGYiQsWCxIVkIHBvZGN6YXMgYnJvYWRjYXN0dSBha3R1YWxpemFjamkgZGFzaGJvYXJkdToge2V9IikNCg0KIyAtLS0gUFJaWVdSw5NDT05BIEZVTktDSkEgLS0tDQpkZWYgYnJvYWRjYXN0X2Fwb2xsb191cGRhdGUoKToNCiAgICAiIiINCiAgICBQb2JpZXJhIG5ham5vd3N6eSBzdGFuIHVyesSFZHplxYQgQXBvbGxvIG9yYXogYWt0eXdueWNoIHRyYW5zZmVyw7N3DQogICAgaSByb3pnxYJhc3phIGdvIGRvIGtsaWVudMOzdyBuYSBzdHJvbmllIC9vcGVyYWNqZS1hcG9sbG8uDQogICAgIiIiDQogICAgcHJpbnQoIkJyb2FkY2FzdGluZyBBcG9sbG8tb25seSB1cGRhdGUgdG8gYWxsIGNsaWVudHMuLi4iKQ0KICAgIHRyeToNCiAgICAgICAgc3ByemV0X2Fwb2xsb19xID0gZGIuc2VsZWN0KFNwcnpldCkuZmlsdGVyX2J5KHR5cF9zcHJ6ZXR1PSdhcG9sbG8nKQ0KICAgICAgICBhcG9sbG9fZGV2aWNlcyA9IGRiLnNlc3Npb24uZXhlY3V0ZShzcHJ6ZXRfYXBvbGxvX3EpLnNjYWxhcnMoKS5hbGwoKQ0KICAgICAgICANCiAgICAgICAgdXBkYXRlZF9hcG9sbG9fbGlzdCA9IFtdDQogICAgICAgIGZvciBhcG9sbG8gaW4gYXBvbGxvX2RldmljZXM6DQogICAgICAgICAgICBzdGFuID0gQXBvbGxvU2VydmljZS5nZXRfc3Rhbl9hcG9sbG8oYXBvbGxvLmlkKQ0KICAgICAgICAgICAgaWYgc3RhbjoNCiAgICAgICAgICAgICAgICB1cGRhdGVkX2Fwb2xsb19saXN0LmFwcGVuZChzdGFuKQ0KICAgICAgICANCiAgICAgICAgYWN0aXZlX3RyYW5zZmVyc19xID0gZGIuc2VsZWN0KE9wZXJhY2plTG9nKS5maWx0ZXJfYnkoDQogICAgICAgICAgICBzdGF0dXNfb3BlcmFjamk9J2FrdHl3bmEnLA0KICAgICAgICAgICAgdHlwX29wZXJhY2ppPSdST1pUQU5LT1dBTklFX0FQT0xMTycNCiAgICAgICAgKQ0KICAgICAgICBhY3RpdmVfdHJhbnNmZXJzID0gZGIuc2Vzc2lvbi5leGVjdXRlKGFjdGl2ZV90cmFuc2ZlcnNfcSkuc2NhbGFycygpLmFsbCgpDQogICAgICAgIA0KICAgICAgICB1cGRhdGVkX3RyYW5zZmVyc19saXN0ID0gW3sNCiAgICAgICAgICAgICdpZCc6IG9wLmlkLA0KICAgICAgICAgICAgJ29waXMnOiBvcC5vcGlzLA0KICAgICAgICAgICAgJ2N6YXNfcm96cG9jemVjaWEnOiBvcC5jemFzX3JvenBvY3plY2lhLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycpIGlmIG9wLmN6YXNfcm96cG9jemVjaWEgZWxzZSBOb25lDQogICAgICAgIH0gZm9yIG9wIGluIGFjdGl2ZV90cmFuc2ZlcnNdDQoNCiAgICAgICAgc29ja2V0aW8uZW1pdCgnYXBvbGxvX3VwZGF0ZScsIHsNCiAgICAgICAgICAgICdhcG9sbG9fbGlzdCc6IHVwZGF0ZWRfYXBvbGxvX2xpc3QsDQogICAgICAgICAgICAnYWN0aXZlX3RyYW5zZmVycyc6IHVwZGF0ZWRfdHJhbnNmZXJzX2xpc3QNCiAgICAgICAgfSkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHByaW50KGYiQsWCxIVkIHBvZGN6YXMgYnJvYWRjYXN0dSBha3R1YWxpemFjamkgQXBvbGxvOiB7ZX0iKQ==
  - path: app//sprzet_routes.py
    content: IyBhcHAvc3ByemV0X3JvdXRlcy5weQ0KDQpmcm9tIGZsYXNrIGltcG9ydCBCbHVlcHJpbnQsIGpzb25pZnksIHJlcXVlc3QsIGN1cnJlbnRfYXBwDQpmcm9tIC5zcHJ6ZXRfc2VydmljZSBpbXBvcnQgU3ByemV0U2VydmljZQ0KZnJvbSAuc29ja2V0cyBpbXBvcnQgYnJvYWRjYXN0X2Rhc2hib2FyZF91cGRhdGUgIyBCxJlkemllbXkgb2QgcmF6dSBvZMWbd2llxbxhxIcgZGFzaGJvYXJkDQpmcm9tIC5kYiBpbXBvcnQgZ2V0X2RiX2Nvbm5lY3Rpb24NCmZyb20gLmFwb2xsb19zZXJ2aWNlIGltcG9ydCBBcG9sbG9TZXJ2aWNlDQpmcm9tIC5zZW5zb3JzIGltcG9ydCBTZW5zb3JTZXJ2aWNlDQppbXBvcnQgbXlzcWwuY29ubmVjdG9yDQpmcm9tIGRlY2ltYWwgaW1wb3J0IERlY2ltYWwsIEludmFsaWRPcGVyYXRpb24NCg0KZGVmIGdldF9zZW5zb3Jfc2VydmljZSgpOg0KICAgICIiIlBvYmllcmEgaW5zdGFuY2rEmSBzZXJ3aXN1IFNlbnNvclNlcnZpY2UgeiBrb250ZWtzdHUgYXBsaWthY2ppLiIiIg0KICAgIHJldHVybiBjdXJyZW50X2FwcC5leHRlbnNpb25zWydzZW5zb3Jfc2VydmljZSddDQoNCnNwcnpldF9icCA9IEJsdWVwcmludCgnc3ByemV0JywgX19uYW1lX18sIHVybF9wcmVmaXg9Jy9hcGkvc3ByemV0JykNCg0KQHNwcnpldF9icC5yb3V0ZSgnLzxpbnQ6c3ByemV0X2lkPi9wYWxuaWsnLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIHNldF9idXJuZXJfc3RhdHVzX2VuZHBvaW50KHNwcnpldF9pZCk6DQogICAgIiIiDQogICAgRW5kcG9pbnQgQVBJIGRvIHptaWFueSBzdGF0dXN1IHBhbG5pa2EuDQogICAgT2N6ZWt1amUgSlNPTjogeyJzdGF0dXMiOiAiV0xBQ1pPTlkiIHwgIldZTEFDWk9OWSJ9DQogICAgIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIGlmIG5vdCBkYXRhIG9yICdzdGF0dXMnIG5vdCBpbiBkYXRhOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ0JyYWsgd3ltYWdhbmVnbyBwb2xhICJzdGF0dXMiIHcgY2llbGUgxbzEhWRhbmlhLid9KSwgNDAwDQoNCiAgICB0cnk6DQogICAgICAgIG5vd3lfc3RhdHVzID0gZGF0YVsnc3RhdHVzJ10udXBwZXIoKQ0KICAgICAgICANCiAgICAgICAgIyBXeXdvxYJhbmllIGxvZ2lraSB6IHNlcndpc3UNCiAgICAgICAgU3ByemV0U2VydmljZS5zZXRfYnVybmVyX3N0YXR1cyhzcHJ6ZXRfaWQsIG5vd3lfc3RhdHVzKQ0KICAgICAgICANCiAgICAgICAgIyBQbyB1ZGFuZWogem1pYW5pZSwgd3nFm2xpaiBha3R1YWxpemFjasSZIGRvIHdzenlzdGtpY2gga2xpZW50w7N3IG5hIGRhc2hib2FyZHppZQ0KICAgICAgICBicm9hZGNhc3RfZGFzaGJvYXJkX3VwZGF0ZSgpDQogICAgICAgIA0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J21lc3NhZ2UnOiBmJ1BvbXnFm2xuaWUgem1pZW5pb25vIHN0YXR1cyBwYWxuaWthIGRsYSBzcHJ6xJl0dSBJRCB7c3ByemV0X2lkfSBuYSB7bm93eV9zdGF0dXN9Lid9KSwgMjAwDQoNCiAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogc3RyKGUpfSksIDQwMCAjIELFgsSZZHkgd2FsaWRhY2ppIChucC4gesWCeSBzdGF0dXMpDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAjIE9nw7NsbmUgYsWCxJlkeSBzZXJ3ZXJhDQogICAgICAgIGltcG9ydCB0cmFjZWJhY2sNCiAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ1d5c3TEhXBpxYIgbmllb2N6ZWtpd2FueSBixYLEhWQgc2Vyd2VyYToge2V9J30pLCA1MDANCg0KQHNwcnpldF9icC5yb3V0ZSgnLycsIG1ldGhvZHM9WydHRVQnXSwgZW5kcG9pbnQ9J2FwaV9nZXRfc3ByemV0X3NwcnpldCcpDQpkZWYgZ2V0X3NwcnpldCgpOg0KICAgICIiIlp3cmFjYSBsaXN0xJkgY2HFgmVnbyBzcHJ6xJl0dSBXUkFaIHogaW5mb3JtYWNqxIUgbyB6bmFqZHVqxIVjZWogc2nEmSB3IG5pbSBwYXJ0aWkuIiIiDQogICAgDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgDQogICAgIyBVxbx5d2FteSBMRUZUIEpPSU4sIGFieSBwb2themHEhyBzcHJ6xJl0IG5hd2V0IGplxZtsaSBqZXN0IHB1c3R5DQogICAgcXVlcnkgPSAiIiINCiAgICAgICAgU0VMRUNUIA0KICAgICAgICAgICAgcy5pZCwgcy5uYXp3YV91bmlrYWxuYSwgcy50eXBfc3ByemV0dSwgcy5zdGFuX3NwcnpldHUsDQogICAgICAgICAgICAvKiBVxbx5d2FteSBBTllfVkFMVUUoKSBkbGEgd3N6eXN0a2ljaCBrb2x1bW4geiB0YWJlbGkgJ3AnLCANCiAgICAgICAgICAgICAgIGt0w7NyZSBuaWUgc8SFIHcgR1JPVVAgQlkgYW5pIHcgZnVua2NqaSBhZ3JlZ3VqxIVjZWogKi8NCiAgICAgICAgICAgIEFOWV9WQUxVRShwLmlkKSBhcyBpZF9wYXJ0aWksIA0KICAgICAgICAgICAgQU5ZX1ZBTFVFKHAudW5pa2Fsbnlfa29kKSBhcyB1bmlrYWxueV9rb2QsIA0KICAgICAgICAgICAgQU5ZX1ZBTFVFKHAudHlwX3N1cm93Y2EpIGFzIHR5cF9zdXJvd2NhLCANCiAgICAgICAgICAgIEFOWV9WQUxVRShwLndhZ2FfYWt0dWFsbmFfa2cpIGFzIHdhZ2FfYWt0dWFsbmFfa2csDQogICAgICAgICAgICANCiAgICAgICAgICAgIC8qIFRhIGtvbHVtbmEganXFvCBqZXN0IHphZ3JlZ293YW5hLCB3acSZYyBqZWogbmllIHJ1c3phbXkgKi8NCiAgICAgICAgICAgIEdST1VQX0NPTkNBVChzdC5uYXp3YV9zdGF0dXN1IFNFUEFSQVRPUiAnLCAnKSBBUyBzdGF0dXN5X3BhcnRpaQ0KICAgICAgICBGUk9NIHNwcnpldCBzDQogICAgICAgIExFRlQgSk9JTiBwYXJ0aWVfc3Vyb3djYSBwIE9OIHMuaWQgPSBwLmlkX3NwcnpldHUNCiAgICAgICAgTEVGVCBKT0lOIHBhcnRpZV9zdGF0dXN5IHBzIE9OIHAuaWQgPSBwcy5pZF9wYXJ0aWkNCiAgICAgICAgTEVGVCBKT0lOIHN0YXR1c3kgc3QgT04gcHMuaWRfc3RhdHVzdSA9IHN0LmlkDQogICAgICAgIEdST1VQIEJZIHMuaWQgIC8qIEdydXBvd2FuaWUgcG96b3N0YWplIGJleiB6bWlhbiAqLw0KICAgICAgICBPUkRFUiBCWSBzLnR5cF9zcHJ6ZXR1LCBzLm5hendhX3VuaWthbG5hOw0KICAgICIiIg0KICAgIGN1cnNvci5leGVjdXRlKHF1ZXJ5KQ0KICAgIHNwcnpldF9saXN0ID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICANCiAgICBjdXJzb3IuY2xvc2UoKQ0KICAgIGNvbm4uY2xvc2UoKQ0KICAgIA0KICAgIHJldHVybiBqc29uaWZ5KHNwcnpldF9saXN0KQ0KDQpAc3ByemV0X2JwLnJvdXRlKCcvZmlsdHJ5JywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9maWx0cnkoKToNCiAgICAiIiJad3JhY2EgbGlzdMSZIGZpbHRyw7N3LiIiIg0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgIGN1cnNvci5leGVjdXRlKCJTRUxFQ1QgaWQsIG5hendhX3VuaWthbG5hIEZST00gc3ByemV0IFdIRVJFIHR5cF9zcHJ6ZXR1ID0gJ2ZpbHRyJyIpDQogICAgZmlsdHJ5ID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICBjdXJzb3IuY2xvc2UoKQ0KICAgIGNvbm4uY2xvc2UoKQ0KICAgIHJldHVybiBqc29uaWZ5KGZpbHRyeSkNCg0KQHNwcnpldF9icC5yb3V0ZSgnL3BvbWlhcnknLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgZ2V0X2FrdHVhbG5lX3BvbWlhcnlfc3ByemV0dSgpOg0KICAgICIiIg0KICAgIFp3cmFjYSBsaXN0xJkgY2HFgmVnbyBzcHJ6xJl0dSB3cmF6IHogamVnbyBha3R1YWxueW1pIG9kY3p5dGFtaSB0ZW1wZXJhdHVyeSBpIGNpxZtuaWVuaWEsDQogICAgYmV6cG/Fm3JlZG5pbyB6IHRhYmVsaSBgc3ByemV0YC4NCiAgICAiIiINCiAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICANCiAgICAjIFphcHl0YW5pZSBqZXN0IHRlcmF6IGJhcmR6byBwcm9zdGUsIHBvbmlld2HFvCB3c3p5c3RraWUgcG90cnplYm5lIGRhbmUgc8SFIHcgamVkbmVqIHRhYmVsaS4NCiAgICBxdWVyeSA9ICIiIg0KICAgICAgICBTRUxFQ1QNCiAgICAgICAgICAgIGlkLA0KICAgICAgICAgICAgbmF6d2FfdW5pa2FsbmEsDQogICAgICAgICAgICB0eXBfc3ByemV0dSwNCiAgICAgICAgICAgIHN0YW5fc3ByemV0dSwNCiAgICAgICAgICAgIHRlbXBlcmF0dXJhX2FrdHVhbG5hLA0KICAgICAgICAgICAgY2lzbmllbmllX2FrdHVhbG5lLA0KICAgICAgICAgICAgdGVtcGVyYXR1cmFfZG9jZWxvd2EsDQogICAgICAgICAgICB0ZW1wZXJhdHVyYV9tYXgsDQogICAgICAgICAgICBjaXNuaWVuaWVfbWF4LA0KICAgICAgICAgICAgb3N0YXRuaWFfYWt0dWFsaXphY2phDQogICAgICAgIEZST00gc3ByemV0DQogICAgICAgIE9SREVSIEJZIHR5cF9zcHJ6ZXR1LCBuYXp3YV91bmlrYWxuYTsNCiAgICAiIiINCiAgICANCiAgICB0cnk6DQogICAgICAgIGN1cnNvci5leGVjdXRlKHF1ZXJ5KQ0KICAgICAgICBzcHJ6ZXRfcG9taWFyeSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgIA0KICAgICAgICAjIFNmb3JtYXR1aiBkYXTEmSBvc3RhdG5pZWogYWt0dWFsaXphY2ppLCBhYnkgYnnFgmEgcHJ6eWphem5hIGRsYSBmb3JtYXR1IEpTT04NCiAgICAgICAgZm9yIHNwcnpldCBpbiBzcHJ6ZXRfcG9taWFyeToNCiAgICAgICAgICAgIGlmIHNwcnpldC5nZXQoJ29zdGF0bmlhX2FrdHVhbGl6YWNqYScpOg0KICAgICAgICAgICAgICAgIHNwcnpldFsnb3N0YXRuaWFfYWt0dWFsaXphY2phJ10gPSBzcHJ6ZXQuZ2V0KCdvc3RhdG5pYV9ha3R1YWxpemFjamEnKS5zdHJmdGltZSgnJVktJW0tJWQgJUg6JU06JVMnKQ0KICAgICAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KHNwcnpldF9wb21pYXJ5KQ0KICAgICAgICANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ0LFgsSFZCBiYXp5IGRhbnljaDoge3N0cihlKX0nfSksIDUwMA0KICAgICAgICANCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCg0KQHNwcnpldF9icC5yb3V0ZSgnLzxpbnQ6c3ByemV0X2lkPi90ZW1wZXJhdHVyYScsIG1ldGhvZHM9WydQT1NUJ10pDQpkZWYgc2V0X3RlbXBlcmF0dXJhKHNwcnpldF9pZCk6DQogICAgIiIiVXN0YXdpYSBkb2NlbG93xIUgdGVtcGVyYXR1csSZIGRsYSBkYW5lZ28gc3ByesSZdHUuIiIiDQogICAgZGFuZSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIG5vd2FfdGVtcGVyYXR1cmEgPSBkYW5lWyd0ZW1wZXJhdHVyYSddDQogICAgDQogICAgdHJ5Og0KICAgICAgICAjIERlbGVndWplbXkgY2HFgsSFIHByYWPEmSBkbyBzZXJ3aXN1DQogICAgICAgIHNlbnNvcl9zZXJ2aWNlID0gZ2V0X3NlbnNvcl9zZXJ2aWNlKCkNCiAgICAgICAgc2Vuc29yX3NlcnZpY2Uuc2V0X3RlbXBlcmF0dXJlKHNwcnpldF9pZCwgbm93YV90ZW1wZXJhdHVyYSkNCiAgICAgICAgDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsic3RhdHVzIjogInN1Y2Nlc3MiLCAibWVzc2FnZSI6ICJUZW1wZXJhdHVyYSB1c3Rhd2lvbmEuIn0pDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7InN0YXR1cyI6ICJlcnJvciIsICJtZXNzYWdlIjogZiJCxYLEhWQgc2Vyd2VyYToge2V9In0pLCA1MDANCiAgICANCkBzcHJ6ZXRfYnAucm91dGUoJy9iZWN6a2ktYnJ1ZG5lJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9iZWN6a2lfYnJ1ZG5lKCk6DQogICAgIiIiWndyYWNhIGxpc3TEmSBiZWN6ZWsgYnJ1ZG55Y2ggZG9zdMSZcG55Y2ggZG8gdGFua293YW5pYSIiIg0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgIA0KICAgIHRyeToNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICBTRUxFQ1QgaWQsIG5hendhX3VuaWthbG5hLCBzdGFuX3NwcnpldHUNCiAgICAgICAgICAgIEZST00gc3ByemV0IA0KICAgICAgICAgICAgV0hFUkUgdHlwX3NwcnpldHUgPSAnYmVjemthX2JydWRuYScNCiAgICAgICAgICAgIE9SREVSIEJZIG5hendhX3VuaWthbG5hDQogICAgICAgICIiIikNCiAgICAgICAgYmVjemtpID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoYmVjemtpKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIHBvYmllcmFuaWEgYmVjemVrOiB7c3RyKGUpfSd9KSwgNTAwDQogICAgZmluYWxseToNCiAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgY29ubi5jbG9zZSgpDQoNCkBzcHJ6ZXRfYnAucm91dGUoJy9yZWFrdG9yeS1wdXN0ZScsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBnZXRfcmVha3RvcnlfcHVzdGUoKToNCiAgICAiIiJad3JhY2EgbGlzdMSZIHJlYWt0b3LDs3cgdyBzdGFuaWUgJ1B1c3R5JyBkb3N0xJlwbnljaCBkbyB0YW5rb3dhbmlhIiIiDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgDQogICAgdHJ5Og0KICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgIFNFTEVDVCBpZCwgbmF6d2FfdW5pa2FsbmEsIHN0YW5fc3ByemV0dQ0KICAgICAgICAgICAgRlJPTSBzcHJ6ZXQgDQogICAgICAgICAgICBXSEVSRSB0eXBfc3ByemV0dSA9ICdyZWFrdG9yJyBBTkQgc3Rhbl9zcHJ6ZXR1ID0gJ1B1c3R5Jw0KICAgICAgICAgICAgT1JERVIgQlkgbmF6d2FfdW5pa2FsbmENCiAgICAgICAgIiIiKQ0KICAgICAgICByZWFrdG9yeSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHJlYWt0b3J5KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIHBvYmllcmFuaWEgcmVha3RvcsOzdzoge3N0cihlKX0nfSksIDUwMA0KICAgIGZpbmFsbHk6DQogICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgIGNvbm4uY2xvc2UoKQ0KDQpAc3ByemV0X2JwLnJvdXRlKCcvcmVha3Rvcnktei1zdXJvd2NlbScsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBnZXRfcmVha3Rvcnlfel9zdXJvd2NlbSgpOg0KICAgICIiIlp3cmFjYSBsaXN0xJkgcmVha3RvcsOzdyB6ZSBzdGFuZW0gaW5ueW0gbmnFvCAnUHVzdHknICh6YXdpZXJhasSFY3ljaCBzdXJvd2llYykiIiINCiAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICANCiAgICB0cnk6DQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgU0VMRUNUIGlkLCBuYXp3YV91bmlrYWxuYSwgc3Rhbl9zcHJ6ZXR1DQogICAgICAgICAgICBGUk9NIHNwcnpldCANCiAgICAgICAgICAgIFdIRVJFIHR5cF9zcHJ6ZXR1ID0gJ3JlYWt0b3InIEFORCBzdGFuX3NwcnpldHUgIT0gJ1B1c3R5Jw0KICAgICAgICAgICAgT1JERVIgQlkgbmF6d2FfdW5pa2FsbmENCiAgICAgICAgIiIiKQ0KICAgICAgICByZWFrdG9yeSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHJlYWt0b3J5KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIHBvYmllcmFuaWEgcmVha3RvcsOzdyB6IHN1cm93Y2VtOiB7c3RyKGUpfSd9KSwgNTAwDQogICAgZmluYWxseToNCiAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgY29ubi5jbG9zZSgpDQoNCkBzcHJ6ZXRfYnAucm91dGUoJy9kb3N0ZXBuZS16cm9kbGEnLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgZ2V0X2Rvc3RlcG5lX3pyb2RsYSgpOg0KICAgICIiIlp3cmFjYSBsaXN0xJkgZG9zdMSZcG55Y2ggxbpyw7NkZcWCIGRvIHRyYW5zZmVydSAoQXBvbGxvICsgYmVjemtpIGJydWRuZSB6IHphd2FydG/Fm2NpxIUpIiIiDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgDQogICAgdHJ5Og0KICAgICAgICAjIEFwb2xsbyB6IGFrdHl3bnltaSBzZXNqYW1pDQogICAgICAgIGFwb2xsb19xdWVyeSA9ICIiIg0KICAgICAgICAgICAgU0VMRUNUIERJU1RJTkNUIHMuaWQsIHMubmF6d2FfdW5pa2FsbmEsIHMudHlwX3NwcnpldHUsIA0KICAgICAgICAgICAgICAgICAgICdhcG9sbG8nIGFzIGthdGVnb3JpYV96cm9kbGEsDQogICAgICAgICAgICAgICAgICAgYXBzLnR5cF9zdXJvd2NhLA0KICAgICAgICAgICAgICAgICAgICdBa3R5d25hIHNlc2phIHd5dGFwaWFuaWEnIGFzIG9waXNfc3RhbnUNCiAgICAgICAgICAgIEZST00gc3ByemV0IHMNCiAgICAgICAgICAgIEpPSU4gYXBvbGxvX3Nlc2plIGFwcyBPTiBzLmlkID0gYXBzLmlkX3NwcnpldHUNCiAgICAgICAgICAgIFdIRVJFIHMudHlwX3NwcnpldHUgPSAnYXBvbGxvJyBBTkQgYXBzLnN0YXR1c19zZXNqaSA9ICdha3R5d25hJw0KICAgICAgICAiIiINCiAgICAgICAgDQogICAgICAgICMgQmVjemtpIGJydWRuZSB6IHBhcnRpYW1pDQogICAgICAgIGJlY3praV9xdWVyeSA9ICIiIg0KICAgICAgICAgICAgU0VMRUNUIERJU1RJTkNUIHMuaWQsIHMubmF6d2FfdW5pa2FsbmEsIHMudHlwX3NwcnpldHUsDQogICAgICAgICAgICAgICAgICAgJ2JlY3prYV9icnVkbmEnIGFzIGthdGVnb3JpYV96cm9kbGEsDQogICAgICAgICAgICAgICAgICAgcHMudHlwX3N1cm93Y2EsDQogICAgICAgICAgICAgICAgICAgQ09OQ0FUKCdQYXJ0aWE6ICcsIHBzLnVuaWthbG55X2tvZCwgJyAoJywgcHMud2FnYV9ha3R1YWxuYV9rZywgJ2tnKScpIGFzIG9waXNfc3RhbnUNCiAgICAgICAgICAgIEZST00gc3ByemV0IHMNCiAgICAgICAgICAgIEpPSU4gcGFydGllX3N1cm93Y2EgcHMgT04gcy5pZCA9IHBzLmlkX3NwcnpldHUNCiAgICAgICAgICAgIFdIRVJFIHMudHlwX3NwcnpldHUgPSAnYmVjemthX2JydWRuYScgQU5EIHBzLnN0YXR1c19wYXJ0aWkgTk9UIElOICgnVyBtYWdhenluaWUgY3p5c3R5bScsICdHb3Rvd3kgZG8gd3lzxYJhbmlhJykNCiAgICAgICAgIiIiDQogICAgICAgIA0KICAgICAgICAjIFJlYWt0b3J5IHogcGFydGlhbWkNCiAgICAgICAgcmVha3RvcnlfcXVlcnkgPSAiIiINCiAgICAgICAgICAgIFNFTEVDVCBESVNUSU5DVCBzLmlkLCBzLm5hendhX3VuaWthbG5hLCBzLnR5cF9zcHJ6ZXR1LA0KICAgICAgICAgICAgICAgICAgICdyZWFrdG9yJyBhcyBrYXRlZ29yaWFfenJvZGxhLA0KICAgICAgICAgICAgICAgICAgIHBzLnR5cF9zdXJvd2NhLA0KICAgICAgICAgICAgICAgICAgIENPTkNBVCgnUGFydGlhOiAnLCBwcy51bmlrYWxueV9rb2QsICcgKCcsIHBzLndhZ2FfYWt0dWFsbmFfa2csICdrZyknKSBhcyBvcGlzX3N0YW51DQogICAgICAgICAgICBGUk9NIHNwcnpldCBzDQogICAgICAgICAgICBKT0lOIHBhcnRpZV9zdXJvd2NhIHBzIE9OIHMuaWQgPSBwcy5pZF9zcHJ6ZXR1DQogICAgICAgICAgICBXSEVSRSBzLnR5cF9zcHJ6ZXR1ID0gJ3JlYWt0b3InIEFORCBwcy5zdGF0dXNfcGFydGlpIE5PVCBJTiAoJ1cgbWFnYXp5bmllIGN6eXN0eW0nLCAnR290b3d5IGRvIHd5c8WCYW5pYScpDQogICAgICAgICIiIg0KICAgICAgICANCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoZiJ7YXBvbGxvX3F1ZXJ5fSBVTklPTiBBTEwge2JlY3praV9xdWVyeX0gVU5JT04gQUxMIHtyZWFrdG9yeV9xdWVyeX0gT1JERVIgQlkga2F0ZWdvcmlhX3pyb2RsYSwgbmF6d2FfdW5pa2FsbmEiKQ0KICAgICAgICB6cm9kbGEgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICANCiAgICAgICAgIyBEbGEgQXBvbGxvIGRvZGFqIGluZm9ybWFjamUgbyBkb3N0xJlwbmVqIGlsb8WbY2kNCiAgICAgICAgZm9yIHpyb2RsbyBpbiB6cm9kbGE6DQogICAgICAgICAgICBpZiB6cm9kbG8uZ2V0KCdrYXRlZ29yaWFfenJvZGxhJykgPT0gJ2Fwb2xsbyc6DQogICAgICAgICAgICAgICAgenJvZGxvX2lkID0genJvZGxvLmdldCgnaWQnKQ0KICAgICAgICAgICAgICAgIGlmIHpyb2Rsb19pZDoNCiAgICAgICAgICAgICAgICAgICAgc3RhbiA9IEFwb2xsb1NlcnZpY2Uub2JsaWN6X2FrdHVhbG55X3N0YW5fYXBvbGxvKHpyb2Rsb19pZCkNCiAgICAgICAgICAgICAgICAgICAgenJvZGxvWydkb3N0ZXBuZV9rZyddID0gc3Rhbi5nZXQoJ2Rvc3RlcG5lX2tnJykNCiAgICAgICAgICAgICAgICAgICAgenJvZGxvWydvcGlzX3N0YW51J10gPSBmIkRvc3TEmXBuZToge3N0YW4uZ2V0KCdkb3N0ZXBuZV9rZycpfWtnIHtzdGFuLmdldCgndHlwX3N1cm93Y2EnKX0iDQogICAgICAgIA0KICAgICAgICByZXR1cm4ganNvbmlmeSh6cm9kbGEpDQogICAgICAgIA0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnQsWCxIVkIHBvYmllcmFuaWEgxbpyw7NkZcWCOiB7c3RyKGUpfSd9KSwgNTAwDQogICAgZmluYWxseToNCiAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgY29ubi5jbG9zZSgpDQoNCkBzcHJ6ZXRfYnAucm91dGUoJy9kb3N0ZXBuZS1jZWxlJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9kb3N0ZXBuZV9jZWxlKCk6DQogICAgIiIiWndyYWNhIGxpc3TEmSB3c3p5c3RraWNoIHJlYWt0b3LDs3cgaSBiZWN6ZWsgYnJ1ZG55Y2ggamFrbyBwb3RlbmNqYWxueWNoIGNlbMOzdyB0cmFuc2ZlcnUuIiIiDQogICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgDQogICAgdHJ5Og0KICAgICAgICAjIExFRlQgSk9JTiB6IHBhcnRpYW1pLCBhYnkgdXp5c2thxIcgaW5mb3JtYWNqZSBvIHphd2FydG/Fm2NpDQogICAgICAgIHF1ZXJ5ID0gIiIiDQogICAgICAgICAgICBTRUxFQ1QgDQogICAgICAgICAgICAgICAgcy5pZCwgDQogICAgICAgICAgICAgICAgcy5uYXp3YV91bmlrYWxuYSwgDQogICAgICAgICAgICAgICAgcy50eXBfc3ByemV0dSwgDQogICAgICAgICAgICAgICAgcy5zdGFuX3NwcnpldHUsDQogICAgICAgICAgICAgICAgcy5wb2plbW5vc2Nfa2csDQogICAgICAgICAgICAgICAgcC53YWdhX2FrdHVhbG5hX2tnLA0KICAgICAgICAgICAgICAgIHAudHlwX3N1cm93Y2ENCiAgICAgICAgICAgIEZST00gc3ByemV0IHMNCiAgICAgICAgICAgIExFRlQgSk9JTiBwYXJ0aWVfc3Vyb3djYSBwIE9OIHMuaWQgPSBwLmlkX3NwcnpldHUNCiAgICAgICAgICAgIFdIRVJFIHMudHlwX3NwcnpldHUgSU4gKCdyZWFrdG9yJywgJ2JlY3prYV9icnVkbmEnLCAnYmVjemthX2N6eXN0YScpDQogICAgICAgICAgICBPUkRFUiBCWSBzLnR5cF9zcHJ6ZXR1LCBzLm5hendhX3VuaWthbG5hDQogICAgICAgICIiIg0KICAgICAgICBjdXJzb3IuZXhlY3V0ZShxdWVyeSkNCiAgICAgICAgDQogICAgICAgIGNlbGUgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeShjZWxlKQ0KICAgICAgICANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ0LFgsSFZCBwb2JpZXJhbmlhIGNlbMOzdzoge3N0cihlKX0nfSksIDUwMA0KICAgIGZpbmFsbHk6DQogICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgIGNvbm4uY2xvc2UoKQ0KQHNwcnpldF9icC5yb3V0ZSgnL3N0YW4tcGFydGlpJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGdldF9zdGFuX3BhcnRpaV93X3NwcnplY2llKCk6DQogICAgIiIiDQogICAgWndyYWNhIHN0YW4gY2HFgmVnbyBzcHJ6xJl0dSwga3TDs3J5IG1vxbxlIHByemVjaG93eXdhxIcgcGFydGllLCANCiAgICB3cmF6IHogaW5mb3JtYWNqYW1pIG8gYWt0dWFsbmllIHpuYWpkdWrEhWNlaiBzacSZIHcgbmltIHBhcnRpaS4NCiAgICAiIiINCiAgICBjb25uID0gTm9uZQ0KICAgIHRyeToNCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KDQogICAgICAgICMgUG9iaWVyeiBjYcWCeSBzcHJ6xJl0LCBrdMOzcnkgbmFzIGludGVyZXN1amUsIHdyYXogeiBkb8WCxIVjem9ueW1pIHBhcnRpYW1pDQogICAgICAgIHF1ZXJ5ID0gIiIiDQogICAgICAgICAgICBTRUxFQ1QNCiAgICAgICAgICAgICAgICBzLmlkLCBzLm5hendhX3VuaWthbG5hLCBzLnR5cF9zcHJ6ZXR1LCBzLnN0YW5fc3ByemV0dSwNCiAgICAgICAgICAgICAgICBwLmlkIEFTIHBhcnRpYV9pZCwgcC51bmlrYWxueV9rb2QsIHAudHlwX3N1cm93Y2EsIHAud2FnYV9ha3R1YWxuYV9rZw0KICAgICAgICAgICAgRlJPTSBzcHJ6ZXQgcw0KICAgICAgICAgICAgTEVGVCBKT0lOIHBhcnRpZV9zdXJvd2NhIHAgT04gcy5pZCA9IHAuaWRfc3ByemV0dQ0KICAgICAgICAgICAgV0hFUkUgcy50eXBfc3ByemV0dSBJTiAoJ3JlYWt0b3InLCAnYmVjemthX2JydWRuYScsICdiZWN6a2FfY3p5c3RhJykNCiAgICAgICAgICAgIE9SREVSIEJZIHMudHlwX3NwcnpldHUsIHMubmF6d2FfdW5pa2FsbmE7DQogICAgICAgICIiIg0KICAgICAgICBjdXJzb3IuZXhlY3V0ZShxdWVyeSkNCiAgICAgICAgd3luaWtpID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgDQogICAgICAgICMgUHJ6eWdvdHVqIHN0cnVrdHVyxJkgb2Rwb3dpZWR6aQ0KICAgICAgICBvZHBvd2llZHogPSB7DQogICAgICAgICAgICAncmVha3RvcnknOiBbXSwNCiAgICAgICAgICAgICdiZWN6a2lfYnJ1ZG5lJzogW10sDQogICAgICAgICAgICAnYmVjemtpX2N6eXN0ZSc6IFtdDQogICAgICAgIH0NCg0KICAgICAgICBmb3Igcm93IGluIHd5bmlraToNCiAgICAgICAgICAgIHNwcnpldF9pbmZvID0gew0KICAgICAgICAgICAgICAgICdpZCc6IHJvd1snaWQnXSwNCiAgICAgICAgICAgICAgICAnbmF6d2FfdW5pa2FsbmEnOiByb3dbJ25hendhX3VuaWthbG5hJ10sDQogICAgICAgICAgICAgICAgJ3R5cF9zcHJ6ZXR1Jzogcm93Wyd0eXBfc3ByemV0dSddLA0KICAgICAgICAgICAgICAgICdzdGFuX3NwcnpldHUnOiByb3dbJ3N0YW5fc3ByemV0dSddLA0KICAgICAgICAgICAgICAgICdwYXJ0aWEnOiBOb25lDQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiByb3dbJ3BhcnRpYV9pZCddOg0KICAgICAgICAgICAgICAgIHBhcnRpYV9pbmZvID0gew0KICAgICAgICAgICAgICAgICAgICAnaWQnOiByb3dbJ3BhcnRpYV9pZCddLA0KICAgICAgICAgICAgICAgICAgICAndW5pa2Fsbnlfa29kJzogcm93Wyd1bmlrYWxueV9rb2QnXSwNCiAgICAgICAgICAgICAgICAgICAgJ3R5cF9zdXJvd2NhJzogcm93Wyd0eXBfc3Vyb3djYSddLA0KICAgICAgICAgICAgICAgICAgICAnd2FnYV9ha3R1YWxuYV9rZyc6IGZsb2F0KHJvd1snd2FnYV9ha3R1YWxuYV9rZyddKSwNCiAgICAgICAgICAgICAgICAgICAgJ3NrbGFkJzogTm9uZSAgIyBEb215xZtsbmllIGJyYWsgc2vFgmFkdQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICMgSmXFm2xpIHBhcnRpYSBqZXN0IG1pZXN6YW5pbsSFLCBvYmxpY3ogamVqIHNrxYJhZA0KICAgICAgICAgICAgICAgIGlmIHBhcnRpYV9pbmZvWyd0eXBfc3Vyb3djYSddLnN0YXJ0c3dpdGgoJ01JWCgnKToNCiAgICAgICAgICAgICAgICAgICAgZnJvbSAucm91dGVzIGltcG9ydCBnZXRfYmFzZV9jb21wb25lbnRzX3JlY3Vyc2l2ZQ0KICAgICAgICAgICAgICAgICAgICBza2xhZF9kaWN0ID0gZ2V0X2Jhc2VfY29tcG9uZW50c19yZWN1cnNpdmUocGFydGlhX2luZm9bJ2lkJ10sIGN1cnNvcikNCiAgICAgICAgICAgICAgICAgICAgdG90YWxfd2FnYV9za2xhZHUgPSBzdW0oc2tsYWRfZGljdC52YWx1ZXMoKSkNCiAgICAgICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgICAgIGlmIHRvdGFsX3dhZ2Ffc2tsYWR1ID4gMDoNCiAgICAgICAgICAgICAgICAgICAgICAgIHNrbGFkX2xpc3QgPSBbXQ0KICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHR5cCwgd2FnYSBpbiBza2xhZF9kaWN0Lml0ZW1zKCk6DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2VudCA9ICh3YWdhIC8gdG90YWxfd2FnYV9za2xhZHUpICogMTAwDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tsYWRfbGlzdC5hcHBlbmQoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAndHlwX3N1cm93Y2EnOiB0eXAsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICd3YWdhX2tnJzogcm91bmQod2FnYSwgMiksDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwcm9jZW50Jzogcm91bmQocHJvY2VudCwgMikNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgICAgICAgICAgcGFydGlhX2luZm9bJ3NrbGFkJ10gPSBzb3J0ZWQoc2tsYWRfbGlzdCwga2V5PWxhbWJkYSB4OiB4Wyd0eXBfc3Vyb3djYSddKQ0KDQogICAgICAgICAgICAgICAgc3ByemV0X2luZm9bJ3BhcnRpYSddID0gcGFydGlhX2luZm8NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgcm93Wyd0eXBfc3ByemV0dSddID09ICdyZWFrdG9yJzoNCiAgICAgICAgICAgICAgICBvZHBvd2llZHpbJ3JlYWt0b3J5J10uYXBwZW5kKHNwcnpldF9pbmZvKQ0KICAgICAgICAgICAgZWxpZiByb3dbJ3R5cF9zcHJ6ZXR1J10gPT0gJ2JlY3prYV9icnVkbmEnOg0KICAgICAgICAgICAgICAgIG9kcG93aWVkelsnYmVjemtpX2JydWRuZSddLmFwcGVuZChzcHJ6ZXRfaW5mbykNCiAgICAgICAgICAgIGVsaWYgcm93Wyd0eXBfc3ByemV0dSddID09ICdiZWN6a2FfY3p5c3RhJzoNCiAgICAgICAgICAgICAgICBvZHBvd2llZHpbJ2JlY3praV9jenlzdGUnXS5hcHBlbmQoc3ByemV0X2luZm8pDQoNCiAgICAgICAgcmV0dXJuIGpzb25pZnkob2Rwb3dpZWR6KQ0KDQogICAgZXhjZXB0IG15c3FsLmNvbm5lY3Rvci5FcnJvciBhcyBlcnI6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ0LFgsSFZCBiYXp5IGRhbnljaDoge2Vycn0nfSksIDUwMA0KICAgIGZpbmFsbHk6DQogICAgICAgIGlmIGNvbm4gYW5kIGNvbm4uaXNfY29ubmVjdGVkKCk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQoNCkBzcHJ6ZXRfYnAucm91dGUoJy88aW50OnNwcnpldF9pZD4vcm96cG9jem5pai1wb2Rncnpld2FuaWUnLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIHN0YXJ0X2hlYXRpbmdfZW5kcG9pbnQoc3ByemV0X2lkKToNCiAgICAiIiINCiAgICBFbmRwb2ludCBBUEkgZG8gcm96cG9jenluYW5pYSBwcm9jZXN1IHBvZGdyemV3YW5pYS4NCiAgICBPY3pla3VqZSBKU09OOiB7InN0YXJ0X3RlbXBlcmF0dXJlIjogIjc1LjUifQ0KICAgICIiIg0KICAgIGRhdGEgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICBpZiBub3QgZGF0YSBvciAnc3RhcnRfdGVtcGVyYXR1cmUnIG5vdCBpbiBkYXRhOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ0JyYWsgd3ltYWdhbmVnbyBwb2xhICJzdGFydF90ZW1wZXJhdHVyZSIuJ30pLCA0MDANCg0KICAgIHRyeToNCiAgICAgICAgc3RhcnRfdGVtcCA9IERlY2ltYWwoZGF0YVsnc3RhcnRfdGVtcGVyYXR1cmUnXSkNCiAgICAgICAgDQogICAgICAgICMgV3l3b8WCYW5pZSBsb2dpa2kgeiBzZXJ3aXN1DQogICAgICAgIHJlc3VsdCA9IFNwcnpldFNlcnZpY2Uuc3RhcnRfaGVhdGluZ19wcm9jZXNzKHNwcnpldF9pZCwgc3RhcnRfdGVtcCkNCiAgICAgICAgDQogICAgICAgICMgUG8gdWRhbmVqIG9wZXJhY2ppLCB3ecWbbGlqIGFrdHVhbGl6YWNqxJkgZG8gd3N6eXN0a2ljaCBuYSBkYXNoYm9hcmR6aWUNCiAgICAgICAgYnJvYWRjYXN0X2Rhc2hib2FyZF91cGRhdGUoKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ1JvenBvY3rEmXRvIHBvZGdyemV3YW5pZSBkbGEgc3ByesSZdHUgSUQge3NwcnpldF9pZH0uJywNCiAgICAgICAgICAgICdkYXRhJzogcmVzdWx0DQogICAgICAgIH0pLCAyMDANCg0KICAgIGV4Y2VwdCBJbnZhbGlkT3BlcmF0aW9uOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ05pZXByYXdpZMWCb3d5IGZvcm1hdCB0ZW1wZXJhdHVyeS4nfSksIDQwMA0KICAgIGV4Y2VwdCBWYWx1ZUVycm9yIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBzdHIoZSl9KSwgNDAwICMgQsWCxJlkeSB3YWxpZGFjamkgeiBzZXJ3aXN1DQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICBpbXBvcnQgdHJhY2ViYWNrDQogICAgICAgIHRyYWNlYmFjay5wcmludF9leGMoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogZidXeXN0xIVwacWCIGLFgsSFZCBzZXJ3ZXJhOiB7ZX0nfSksIDUwMA0KDQpAc3ByemV0X2JwLnJvdXRlKCcvPGludDpzcHJ6ZXRfaWQ+L3NpbXVsYXRpb24tcGFyYW1zJywgbWV0aG9kcz1bJ1BPU1QnXSkNCmRlZiBzZXRfc2ltdWxhdGlvbl9wYXJhbXNfZW5kcG9pbnQoc3ByemV0X2lkKToNCiAgICAiIiINCiAgICBFbmRwb2ludCBBUEkgZG8gem1pYW55IHBhcmFtZXRyw7N3IHN5bXVsYWNqaSAocHLEmWRrb8WbY2kgZ3J6YW5pYS9jaMWCb2R6ZW5pYSkuDQogICAgT2N6ZWt1amUgSlNPTjogeyJzenlia29zY19ncnphbmlhIjogIjAuNSIsICJzenlia29zY19jaGxvZHplbmlhIjogIjAuMSJ9DQogICAgIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIGlmIG5vdCBkYXRhOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogJ0JyYWsgZGFueWNoIHcgY2llbGUgxbzEhWRhbmlhLid9KSwgNDAwDQoNCiAgICB0cnk6DQogICAgICAgICMgUG9iaWVyYW15IGkgd2FsaWR1amVteSBkYW5lIHdlasWbY2lvd2UNCiAgICAgICAgc3p5Ymtvc2NfZ3J6YW5pYSA9IERlY2ltYWwoZGF0YVsnc3p5Ymtvc2NfZ3J6YW5pYSddKSBpZiAnc3p5Ymtvc2NfZ3J6YW5pYScgaW4gZGF0YSBlbHNlIE5vbmUNCiAgICAgICAgc3p5Ymtvc2NfY2hsb2R6ZW5pYSA9IERlY2ltYWwoZGF0YVsnc3p5Ymtvc2NfY2hsb2R6ZW5pYSddKSBpZiAnc3p5Ymtvc2NfY2hsb2R6ZW5pYScgaW4gZGF0YSBlbHNlIE5vbmUNCg0KICAgICAgICBpZiBzenlia29zY19ncnphbmlhIGlzIE5vbmUgb3Igc3p5Ymtvc2NfY2hsb2R6ZW5pYSBpcyBOb25lOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6ICdXeW1hZ2FuZSBzxIUgcG9sYSAic3p5Ymtvc2NfZ3J6YW5pYSIgaSAic3p5Ymtvc2NfY2hsb2R6ZW5pYSIuJ30pLCA0MDANCg0KICAgICAgICAjIFd5d2/FgmFuaWUgbG9naWtpIHogc2Vyd2lzdQ0KICAgICAgICBTcHJ6ZXRTZXJ2aWNlLnNldF9zaW11bGF0aW9uX3BhcmFtcyhzcHJ6ZXRfaWQsIHN6eWJrb3NjX2dyemFuaWEsIHN6eWJrb3NjX2NobG9kemVuaWEpDQogICAgICAgIA0KICAgICAgICAjIE9kxZt3aWXFvCBkYXNoYm9hcmQNCiAgICAgICAgYnJvYWRjYXN0X2Rhc2hib2FyZF91cGRhdGUoKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydtZXNzYWdlJzogZidQb215xZtsbmllIHpha3R1YWxpem93YW5vIHBhcmFtZXRyeSBzeW11bGFjamkgZGxhIHNwcnrEmXR1IElEIHtzcHJ6ZXRfaWR9Lid9KSwgMjAwDQoNCiAgICBleGNlcHQgSW52YWxpZE9wZXJhdGlvbjoNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6ICdOaWVwcmF3aWTFgm93eSBmb3JtYXQgbGljemJ5Lid9KSwgNDAwDQogICAgZXhjZXB0IFZhbHVlRXJyb3IgYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IHN0cihlKX0pLCA0MDANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIGltcG9ydCB0cmFjZWJhY2sNCiAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsnZXJyb3InOiBmJ1d5c3TEhXBpxYIgYsWCxIVkIHNlcndlcmE6IHtlfSd9KSwgNTAwDQoNCkBzcHJ6ZXRfYnAucm91dGUoJy88aW50OnNwcnpldF9pZD4vc2ltdWxhdGlvbi1wYXJhbXMnLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgZ2V0X3NpbXVsYXRpb25fcGFyYW1zX2VuZHBvaW50KHNwcnpldF9pZCk6DQogICAgIiIiDQogICAgRW5kcG9pbnQgQVBJIGRvIHBvYmllcmFuaWEgcGFyYW1ldHLDs3cgc3ltdWxhY2ppIChwcsSZZGtvxZtjaSBncnphbmlhL2NoxYJvZHplbmlhKS4NCiAgICAiIiINCiAgICB0cnk6DQogICAgICAgIHBhcmFtcyA9IFNwcnpldFNlcnZpY2UuZ2V0X3NpbXVsYXRpb25fcGFyYW1zKHNwcnpldF9pZCkNCiAgICAgICAgIyBLb253ZXJ0dWogRGVjaW1hbCBuYSBzdHJpbmcsIGFieSB6YXBld25pxIcgc2VyaWFsaXphY2rEmSBkbyBKU09ODQogICAgICAgIHBhcmFtc1snc3p5Ymtvc2NfZ3J6YW5pYSddID0gc3RyKHBhcmFtc1snc3p5Ymtvc2NfZ3J6YW5pYSddKSBpZiBwYXJhbXNbJ3N6eWJrb3NjX2dyemFuaWEnXSBpcyBub3QgTm9uZSBlbHNlIE5vbmUNCiAgICAgICAgcGFyYW1zWydzenlia29zY19jaGxvZHplbmlhJ10gPSBzdHIocGFyYW1zWydzenlia29zY19jaGxvZHplbmlhJ10pIGlmIHBhcmFtc1snc3p5Ymtvc2NfY2hsb2R6ZW5pYSddIGlzIG5vdCBOb25lIGVsc2UgTm9uZQ0KICAgICAgICByZXR1cm4ganNvbmlmeShwYXJhbXMpLCAyMDANCiAgICBleGNlcHQgVmFsdWVFcnJvciBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7J2Vycm9yJzogc3RyKGUpfSksIDQwNA0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgaW1wb3J0IHRyYWNlYmFjaw0KICAgICAgICB0cmFjZWJhY2sucHJpbnRfZXhjKCkNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoeydlcnJvcic6IGYnV3lzdMSFcGnFgiBixYLEhWQgc2Vyd2VyYToge2V9J30pLCA1MDA=
  - path: app//sprzet_service.py
    content: IyBhcHAvc3ByemV0X3NlcnZpY2UucHkNCg0KZnJvbSAuZXh0ZW5zaW9ucyBpbXBvcnQgZGINCmZyb20gLm1vZGVscyBpbXBvcnQgU3ByemV0LCBUYW5rTWl4ZXMNCmZyb20gZGVjaW1hbCBpbXBvcnQgRGVjaW1hbA0KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWV6b25lDQoNCmNsYXNzIFNwcnpldFNlcnZpY2U6DQogICAgQHN0YXRpY21ldGhvZA0KICAgIGRlZiBzZXRfYnVybmVyX3N0YXR1cyhzcHJ6ZXRfaWQ6IGludCwgc3RhdHVzOiBzdHIsIG9wZXJhdG9yOiBzdHIgPSAnU1lTVEVNJyk6DQogICAgICAgICIiIg0KICAgICAgICBVc3Rhd2lhIHN0YW4gcGFsbmlrYSBkbGEgZGFuZWdvIHNwcnrEmXR1IGkgendyYWNhIHpha3R1YWxpem93YW55IG9iaWVrdC4NCiAgICAgICAgDQogICAgICAgIDpwYXJhbSBzcHJ6ZXRfaWQ6IElEIHNwcnrEmXR1IChyZWFrdG9yYSkuDQogICAgICAgIDpwYXJhbSBzdGF0dXM6IE5vd3kgc3RhdHVzLCBtdXNpIGJ5xIcgJ1dMQUNaT05ZJyBsdWIgJ1dZTEFDWk9OWScuDQogICAgICAgIDpwYXJhbSBvcGVyYXRvcjogT3BlcmF0b3Igd3lrb251asSFY3kgYWtjasSZLg0KICAgICAgICA6cmV0dXJuOiBaYWt0dWFsaXpvd2FueSBvYmlla3QgU3ByemV0Lg0KICAgICAgICA6cmFpc2VzIFZhbHVlRXJyb3I6IEplxZtsaSBwb2Rhbm8gbmllcHJhd2lkxYJvd3kgc3RhdHVzIGx1YiBzcHJ6xJl0IG5pZSBqZXN0IHJlYWt0b3JlbS4NCiAgICAgICAgIiIiDQogICAgICAgIGlmIHN0YXR1cyBub3QgaW4gWydXTEFDWk9OWScsICdXWUxBQ1pPTlknXToNCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoIk5pZXByYXdpZMWCb3d5IHN0YXR1cyBwYWxuaWthLiBEb3p3b2xvbmUgd2FydG/Fm2NpOiAnV0xBQ1pPTlknLCAnV1lMQUNaT05ZJy4iKQ0KICAgICAgICAgICAgDQogICAgICAgIHNwcnpldCA9IGRiLnNlc3Npb24uZ2V0KFNwcnpldCwgc3ByemV0X2lkKQ0KDQogICAgICAgIGlmIG5vdCBzcHJ6ZXQ6DQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiTmllIHpuYWxlemlvbm8gc3ByesSZdHUgbyBJRCB7c3ByemV0X2lkfS4iKQ0KICAgICAgICANCiAgICAgICAgaWYgc3ByemV0LnR5cF9zcHJ6ZXR1ICE9ICdyZWFrdG9yJzoNCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJTcHJ6xJl0ICd7c3ByemV0Lm5hendhX3VuaWthbG5hfScgbmllIGplc3QgcmVha3RvcmVtIGkgbmllIHBvc2lhZGEgcGFsbmlrYS4iKQ0KICAgICAgICAgICAgDQogICAgICAgICMgSmXFm2xpIHN0YW4gc2nEmSBuaWUgem1pZW5pYSwgbmljIG5pZSByw7NiDQogICAgICAgIGlmIHNwcnpldC5zdGFuX3BhbG5pa2EgPT0gc3RhdHVzOg0KICAgICAgICAgICAgcmV0dXJuIHNwcnpldA0KDQogICAgICAgIHNwcnpldC5zdGFuX3BhbG5pa2EgPSBzdGF0dXMNCg0KICAgICAgICBpZiBzdGF0dXMgPT0gJ1dMQUNaT05ZJzoNCiAgICAgICAgICAgIG1peCA9IGRiLnNlc3Npb24uZ2V0KFRhbmtNaXhlcywgc3ByemV0LmFjdGl2ZV9taXhfaWQpIGlmIHNwcnpldC5hY3RpdmVfbWl4X2lkIGVsc2UgTm9uZQ0KICAgICAgICAgICAgaWYgbWl4IGFuZCBtaXgucHJvY2Vzc19zdGF0dXMgPT0gJ1NVUk9XWSc6DQogICAgICAgICAgICAgICAgbWl4LnByb2Nlc3Nfc3RhdHVzID0gJ1BPREdSWkVXQU5ZJw0KICAgICAgICAgICAgICAgIHByaW50KGYiQXV0b21hdHljem5pZSB6bWllbmlvbm8gc3RhdHVzIG1pZXN6YW5pbnkgSUQge21peC5pZH0gbmEgUE9ER1JaRVdBTlkuIikNCiAgICAgICAgDQogICAgICAgICMgT3Bjam9uYWxuaWU6IE1vxbxlbXkgdHUgZG9kYcSHIGxvZ293YW5pZSBkbyBub3dlaiB0YWJlbGkgYGhpc3RvcmlhX3BhbG5pa2FgDQogICAgICAgICMgbnAuIGxvZ19idXJuZXJfYWN0aXZpdHkoc3ByemV0X2lkLCBzdGF0dXMsIG9wZXJhdG9yLCBkYXRldGltZS5ub3codGltZXpvbmUudXRjKSkNCiAgICAgICAgDQogICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCiAgICAgICAgDQogICAgICAgIHByaW50KGYiWm1pZW5pb25vIHN0YW4gcGFsbmlrYSBkbGEgJ3tzcHJ6ZXQubmF6d2FfdW5pa2FsbmF9JyBuYSB7c3RhdHVzfS4iKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHNwcnpldA0KDQogICAgQHN0YXRpY21ldGhvZA0KICAgIGRlZiBzdGFydF9oZWF0aW5nX3Byb2Nlc3Moc3ByemV0X2lkOiBpbnQsIHN0YXJ0X3RlbXBlcmF0dXJlOiBEZWNpbWFsKToNCiAgICAgICAgIiIiDQogICAgICAgIFJvenBvY3p5bmEgcHJvY2VzIHBvZGdyemV3YW5pYSBkbGEgbWllc3phbmlueSB3IHJlYWt0b3J6ZS4NCiAgICAgICAgDQogICAgICAgIC0gVXN0YXdpYSB0ZW1wZXJhdHVyxJkgc3RhcnRvd8SFLg0KICAgICAgICAtIFfFgsSFY3phIHBhbG5pay4NCiAgICAgICAgLSBabWllbmlhIHN0YXR1cyBtaWVzemFuaW55IG5hICdQT0RHUlpFV0FOWScuDQogICAgICAgIC0gT2JsaWN6YSBpIHp3cmFjYSBzemFjb3dhbnkgY3phcyBkbyBvc2nEhWduacSZY2lhIHRlbXBlcmF0dXJ5IGRvY2Vsb3dlai4NCiAgICAgICAgDQogICAgICAgIDpwYXJhbSBzcHJ6ZXRfaWQ6IElEIHJlYWt0b3JhLg0KICAgICAgICA6cGFyYW0gc3RhcnRfdGVtcGVyYXR1cmU6IFRlbXBlcmF0dXJhIHdzYWR1IHBvZGFuYSBwcnpleiBvcGVyYXRvcmEuDQogICAgICAgIDpyZXR1cm46IFPFgm93bmlrIHphd2llcmFqxIVjeSBvc3phY293YW55IGN6YXMgdyBtaW51dGFjaC4NCiAgICAgICAgOnJhaXNlcyBWYWx1ZUVycm9yOiBKZcWbbGkgc3ByesSZdCBuaWUgamVzdCByZWFrdG9yZW0sIGplc3QgcHVzdHkgbHViIG1hIG5pZXByYXdpZMWCb3d5IHN0YXR1cy4NCiAgICAgICAgIiIiDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHJlYWt0b3IgPSBkYi5zZXNzaW9uLmdldChTcHJ6ZXQsIHNwcnpldF9pZCkNCg0KICAgICAgICAgICAgaWYgbm90IHJlYWt0b3Igb3IgcmVha3Rvci50eXBfc3ByemV0dSAhPSAncmVha3Rvcic6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiUG9kYW55IHNwcnrEmXQgbmllIGplc3QgcmVha3RvcmVtLiIpDQoNCiAgICAgICAgICAgIG1peCA9IGRiLnNlc3Npb24uZ2V0KFRhbmtNaXhlcywgcmVha3Rvci5hY3RpdmVfbWl4X2lkKSBpZiByZWFrdG9yLmFjdGl2ZV9taXhfaWQgZWxzZSBOb25lDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIG5vdCBtaXg6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiUmVha3RvciBqZXN0IHB1c3R5LCBuaWUgbW/FvG5hIHJvenBvY3rEhcSHIHBvZGdyemV3YW5pYS4iKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiBtaXgucHJvY2Vzc19zdGF0dXMgIT0gJ1NVUk9XWSc6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIk5pZSBtb8W8bmEgcm96cG9jesSFxIcgcG9kZ3J6ZXdhbmlhLiBPYmVjbnkgc3RhdHVzIHByb2Nlc3UgdG8gJ3ttaXgucHJvY2Vzc19zdGF0dXN9Jy4iKQ0KDQogICAgICAgICAgICBzenlia29zY19ncnphbmlhID0gcmVha3Rvci5zenlia29zY19ncnphbmlhX2NfbmFfbWludXRlDQogICAgICAgICAgICB0ZW1wX2RvY2Vsb3dhID0gcmVha3Rvci50ZW1wZXJhdHVyYV9kb2NlbG93YQ0KDQogICAgICAgICAgICBpZiBub3Qgc3p5Ymtvc2NfZ3J6YW5pYSBvciBub3QgdGVtcF9kb2NlbG93YSBvciBzenlia29zY19ncnphbmlhIDw9IDA6DQogICAgICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcigiUHLEmWRrb8WbxIcgZ3J6YW5pYSBsdWIgdGVtcGVyYXR1cmEgZG9jZWxvd2EgbmllIHPEhSB6ZGVmaW5pb3dhbmUgZGxhIHRlZ28gcmVha3RvcmEuIikNCg0KICAgICAgICAgICAgIyBBa3R1YWxpemFjamEgc3RhbnUgcmVha3RvcmENCiAgICAgICAgICAgIHJlYWt0b3Iuc3Rhbl9wYWxuaWthID0gJ1dMQUNaT05ZJw0KICAgICAgICAgICAgcmVha3Rvci50ZW1wZXJhdHVyYV9ha3R1YWxuYSA9IHN0YXJ0X3RlbXBlcmF0dXJlDQogICAgICAgICAgICByZWFrdG9yLm9zdGF0bmlhX2FrdHVhbGl6YWNqYSA9IGRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgQWt0dWFsaXphY2phIHN0YW51IG1pZXN6YW5pbnkNCiAgICAgICAgICAgIG1peC5wcm9jZXNzX3N0YXR1cyA9ICdQT0RHUlpFV0FOWScNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBPYmxpY3plbmllIGN6YXN1DQogICAgICAgICAgICByb3puaWNhX3RlbXAgPSB0ZW1wX2RvY2Vsb3dhIC0gc3RhcnRfdGVtcGVyYXR1cmUNCiAgICAgICAgICAgIGlmIHJvem5pY2FfdGVtcCA8PSAwOg0KICAgICAgICAgICAgICAgIGVzdGltYXRlZF9taW51dGVzID0gMA0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBlc3RpbWF0ZWRfbWludXRlcyA9IGZsb2F0KHJvem5pY2FfdGVtcCAvIHN6eWJrb3NjX2dyemFuaWEpDQoNCiAgICAgICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCg0KICAgICAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgICAgICAiZXN0aW1hdGVkX21pbnV0ZXNfcmVtYWluaW5nIjogZXN0aW1hdGVkX21pbnV0ZXMNCiAgICAgICAgICAgIH0NCg0KICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgICAgICBkYi5zZXNzaW9uLnJvbGxiYWNrKCkNCiAgICAgICAgICAgIHJhaXNlIGUNCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgc2V0X3NpbXVsYXRpb25fcGFyYW1zKHNwcnpldF9pZDogaW50LCBzenlia29zY19ncnphbmlhOiBEZWNpbWFsLCBzenlia29zY19jaGxvZHplbmlhOiBEZWNpbWFsKToNCiAgICAgICAgIiIiDQogICAgICAgIFVzdGF3aWEgbm93ZSBwcsSZZGtvxZtjaSBzeW11bGFjamkgZGxhIGRhbmVnbyBzcHJ6xJl0dS4NCiAgICAgICAgIiIiDQogICAgICAgIHNwcnpldCA9IGRiLnNlc3Npb24uZ2V0KFNwcnpldCwgc3ByemV0X2lkKQ0KDQogICAgICAgIGlmIG5vdCBzcHJ6ZXQ6DQogICAgICAgICAgICByYWlzZSBWYWx1ZUVycm9yKGYiTmllIHpuYWxlemlvbm8gc3ByesSZdHUgbyBJRCB7c3ByemV0X2lkfS4iKQ0KICAgICAgICANCiAgICAgICAgaWYgc3ByemV0LnR5cF9zcHJ6ZXR1ICE9ICdyZWFrdG9yJzoNCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJTcHJ6xJl0ICd7c3ByemV0Lm5hendhX3VuaWthbG5hfScgbmllIGplc3QgcmVha3RvcmVtLiIpDQoNCiAgICAgICAgc3ByemV0LnN6eWJrb3NjX2dyemFuaWFfY19uYV9taW51dGUgPSBzenlia29zY19ncnphbmlhDQogICAgICAgIHNwcnpldC5zenlia29zY19jaGxvZHplbmlhX2NfbmFfbWludXRlID0gc3p5Ymtvc2NfY2hsb2R6ZW5pYQ0KICAgICAgICANCiAgICAgICAgZGIuc2Vzc2lvbi5jb21taXQoKQ0KICAgICAgICANCiAgICAgICAgcHJpbnQoZiJaYWt0dWFsaXpvd2FubyBwYXJhbWV0cnkgc3ltdWxhY2ppIGRsYSAne3NwcnpldC5uYXp3YV91bmlrYWxuYX0nOiBHcnphbmllPXtzenlia29zY19ncnphbmlhfSwgQ2jFgm9kemVuaWU9e3N6eWJrb3NjX2NobG9kemVuaWF9IikNCiAgICAgICAgDQogICAgICAgIHJldHVybiBzcHJ6ZXQNCg0KICAgIEBzdGF0aWNtZXRob2QNCiAgICBkZWYgZ2V0X3NpbXVsYXRpb25fcGFyYW1zKHNwcnpldF9pZDogaW50KToNCiAgICAgICAgIiIiDQogICAgICAgIFBvYmllcmEgYWt0dWFsbmUgcGFyYW1ldHJ5IHN5bXVsYWNqaSBkbGEgZGFuZWdvIHNwcnrEmXR1Lg0KICAgICAgICAiIiINCiAgICAgICAgc3ByemV0ID0gZGIuc2Vzc2lvbi5nZXQoU3ByemV0LCBzcHJ6ZXRfaWQpDQoNCiAgICAgICAgaWYgbm90IHNwcnpldDoNCiAgICAgICAgICAgIHJhaXNlIFZhbHVlRXJyb3IoZiJOaWUgem5hbGV6aW9ubyBzcHJ6xJl0dSBvIElEIHtzcHJ6ZXRfaWR9LiIpDQogICAgICAgIA0KICAgICAgICBpZiBzcHJ6ZXQudHlwX3NwcnpldHUgIT0gJ3JlYWt0b3InOg0KICAgICAgICAgICAgcmFpc2UgVmFsdWVFcnJvcihmIlNwcnrEmXQgJ3tzcHJ6ZXQubmF6d2FfdW5pa2FsbmF9JyBuaWUgamVzdCByZWFrdG9yZW0uIikNCg0KICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgInN6eWJrb3NjX2dyemFuaWEiOiBzcHJ6ZXQuc3p5Ymtvc2NfZ3J6YW5pYV9jX25hX21pbnV0ZSwNCiAgICAgICAgICAgICJzenlia29zY19jaGxvZHplbmlhIjogc3ByemV0LnN6eWJrb3NjX2NobG9kemVuaWFfY19uYV9taW51dGUNCiAgICAgICAgfQ==
  - path: app//tasks.py
    content: IyBhcHAvdGFza3MucHkNCg0KZnJvbSBjZWxlcnlfYXBwIGltcG9ydCBjZWxlcnksIGZsYXNrX2FwcA0KZnJvbSAuc2Vuc29ycyBpbXBvcnQgU2Vuc29yU2VydmljZQ0KZnJvbSAubW9uaXRvcmluZyBpbXBvcnQgTW9uaXRvcmluZ1NlcnZpY2UNCmZyb20gLnNvY2tldHMgaW1wb3J0IGJyb2FkY2FzdF9kYXNoYm9hcmRfdXBkYXRlDQpmcm9tIGRhdGV0aW1lIGltcG9ydCBkYXRldGltZQ0KaW1wb3J0IG9zDQpmcm9tIGZsYXNrX3NvY2tldGlvIGltcG9ydCBTb2NrZXRJTw0KZnJvbSBtZW1vcnlfcHJvZmlsZXIgaW1wb3J0IHByb2ZpbGUNCg0KIyBVc3RhbCBhZHJlcyBVUkwgYnJva2VyYSBSZWRpcw0KUkVESVNfVVJMID0gb3MuZW52aXJvbi5nZXQoJ1JFRElTX1VSTCcsICdyZWRpczovL2xvY2FsaG9zdDo2Mzc5LzAnKQ0KaWYgIlJFRElTX1VSTCIgbm90IGluIG9zLmVudmlyb246DQogICAgdHJ5Og0KICAgICAgICBpbXBvcnQgc29ja2V0DQogICAgICAgIHNvY2tldC5nZXRob3N0YnluYW1lKCdyZWRpcycpDQogICAgICAgIFJFRElTX1VSTCA9ICdyZWRpczovL3JlZGlzOjYzNzkvMCcNCiAgICBleGNlcHQgc29ja2V0LmVycm9yOg0KICAgICAgICBwYXNzDQoNCiMgVXR3w7NyeiBpbnN0YW5jasSZIFNvY2tldElPIGRlZHlrb3dhbsSFIGRsYSB3b3JrZXJhIENlbGVyeQ0KIyBVxbx5d2Egb25hIHRlZ28gc2FtZWdvIGJyb2tlcmEgUmVkaXMsIGNvIGfFgsOzd25hIGFwbGlrYWNqYQ0KY2VsZXJ5X3NvY2tldGlvID0gU29ja2V0SU8obWVzc2FnZV9xdWV1ZT1SRURJU19VUkwpDQoNCkBjZWxlcnkudGFzayhuYW1lPSdhcHAudGFza3MucmVhZF9zZW5zb3JzX3Rhc2snKQ0KZGVmIHJlYWRfc2Vuc29yc190YXNrKCk6DQogICAgIiIiDQogICAgWmFkYW5pZSBDZWxlcnkgZG8gb2Rjenl0dSBkYW55Y2ggeiBjenVqbmlrw7N3Lg0KICAgIFXFvHl3YSBtZW1vcnlfcHJvZmlsZXIgZG8gbG9nb3dhbmlhIHp1xbx5Y2lhIHBhbWnEmWNpLg0KICAgICIiIg0KICAgIHByaW50KGYiXG4tLS0gW1BJRDoge29zLmdldHBpZCgpfV0gQ0VMRVJZIFRBU0s6IFVydWNoYW1pYW0gcmVhZF9zZW5zb3JzX3Rhc2sgKHogcHJvZmlsb3dhbmllbSBwYW1pxJljaSkgbyB7ZGF0ZXRpbWUubm93KCl9IC0tLSIpDQogICAgdHJ5Og0KICAgICAgICAjIFNlcndpc3kgc8SFIGp1xbwgemFpbmljam93YW5lIHcgY2VsZXJ5X2FwcC5weSwgd2nEmWMgbW/FvGVteSBpY2ggdcW8eXdhxIcNCiAgICAgICAgc2Vuc29yX3NlcnZpY2UgPSBTZW5zb3JTZXJ2aWNlKCkNCiAgICAgICAgc2Vuc29yX3NlcnZpY2UucmVhZF9zZW5zb3JzKCkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHByaW50KGYiQsWCxIVkIHcgemFkYW5pdSBDZWxlcnkgJ3JlYWRfc2Vuc29yc190YXNrJzoge2V9IikNCiAgICAgICAgIyBNb8W8bmEgZG9kYcSHIGJhcmR6aWVqIHphYXdhbnNvd2FuZSBsb2dvd2FuaWUgbHViIHBvbmF3aWFuaWUgemFkYW5pYQ0KICAgICAgICANCkBjZWxlcnkudGFzayhuYW1lPSdhcHAudGFza3MuY2hlY2tfYWxhcm1zX3Rhc2snKQ0KZGVmIGNoZWNrX2FsYXJtc190YXNrKCk6DQogICAgIiIiDQogICAgWmFkYW5pZSBDZWxlcnkgZG8gc3ByYXdkemFuaWEgYWxhcm3Ds3cuDQogICAgUG8gemFrb8WEY3plbml1LCBlbWl0dWplIHpkYXJ6ZW5pZSBTb2NrZXQuSU8gcHJ6ZXogUmVkaXNhLg0KICAgICIiIg0KICAgIHByaW50KGYiXG4tLS0gW1BJRDoge29zLmdldHBpZCgpfV0gQ0VMRVJZIFRBU0s6IFVydWNoYW1pYW0gY2hlY2tfYWxhcm1zX3Rhc2sgbyB7ZGF0ZXRpbWUubm93KCl9IC0tLSIpDQogICAgdHJ5Og0KICAgICAgICAjIFXFvHl3YW15IGtvbnRla3N0dSBhcGxpa2FjamkgemFpbXBvcnRvd2FuZWdvIHogY2VsZXJ5X2FwcA0KICAgICAgICB3aXRoIGZsYXNrX2FwcC5hcHBfY29udGV4dCgpOg0KICAgICAgICAgICAgbW9uaXRvcmluZ19zZXJ2aWNlID0gTW9uaXRvcmluZ1NlcnZpY2UoKQ0KICAgICAgICAgICAgbW9uaXRvcmluZ19zZXJ2aWNlLmNoZWNrX2VxdWlwbWVudF9zdGF0dXMoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIFBvYmllcnogxZt3aWXFvGUgZGFuZQ0KICAgICAgICAgICAgZnJvbSAuZGFzaGJvYXJkX3NlcnZpY2UgaW1wb3J0IERhc2hib2FyZFNlcnZpY2UNCiAgICAgICAgICAgIGRhc2hib2FyZF9kYXRhID0gRGFzaGJvYXJkU2VydmljZS5nZXRfbWFpbl9kYXNoYm9hcmRfZGF0YSgpDQogICAgICAgICAgICANCiAgICAgICAgICAgICMgV3llbWl0dWogemRhcnplbmllIGRvIHdzenlzdGtpY2gga2xpZW50w7N3IHByemV6IFJlZGlzYQ0KICAgICAgICAgICAgY2VsZXJ5X3NvY2tldGlvLmVtaXQoJ2Rhc2hib2FyZF91cGRhdGUnLCBkYXNoYm9hcmRfZGF0YSkNCiAgICAgICAgICAgIHByaW50KGYiLS0tIFtQSUQ6IHtvcy5nZXRwaWQoKX1dIENFTEVSWSBUQVNLOiBXeWVtaXRvd2FubyAnZGFzaGJvYXJkX3VwZGF0ZScgcHJ6ZXogUmVkaXMuIC0tLSIpDQoNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHByaW50KGYiQsWCxIVkIHcgemFkYW5pdSBDZWxlcnkgJ2NoZWNrX2FsYXJtc190YXNrJzoge2V9IikNCg==
  - path: app//topology_manager.py
    content: IyBhcHAvdG9wb2xvZ3lfbWFuYWdlci5weQ0KIyB0eXBlOiBpZ25vcmUNCg0KaW1wb3J0IG15c3FsLmNvbm5lY3Rvcg0KZnJvbSBmbGFzayBpbXBvcnQgY3VycmVudF9hcHAsIGpzb25pZnkNCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lLCB0aW1lem9uZQ0KZnJvbSAuZGIgaW1wb3J0IGdldF9kYl9jb25uZWN0aW9uDQppbXBvcnQganNvbg0KDQpjbGFzcyBUb3BvbG9neU1hbmFnZXI6DQogICAgIiIiTWVuZWTFvGVyIGRvIHphcnrEhWR6YW5pYSBjeWZyb3fEhSBtYXDEhSBydXJvY2nEhWd1IHcgc3lzdGVtaWUgTUVTIFBhcmFmaW5hIiIiDQogICAgDQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBwYXNzDQogICAgDQogICAgIyA9PT09PT09PT09PT09PT09PT0gWkFXT1JZID09PT09PT09PT09PT09PT09PQ0KICAgIA0KICAgIGRlZiBnZXRfemF3b3J5KHNlbGYsIGluY2x1ZGVfc2VnbWVudHM9RmFsc2UpOg0KICAgICAgICAiIiJQb2JpZXJhIGxpc3TEmSB3c3p5c3RraWNoIHphd29yw7N3IiIiDQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgU0VMRUNUIHouKg0KICAgICAgICAgICAgICAgIEZST00gemF3b3J5IHoNCiAgICAgICAgICAgICAgICBPUkRFUiBCWSB6Lm5hendhX3phd29ydQ0KICAgICAgICAgICAgIiIiKQ0KICAgICAgICAgICAgemF3b3J5ID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgaW5jbHVkZV9zZWdtZW50czoNCiAgICAgICAgICAgICAgICBmb3IgemF3b3IgaW4gemF3b3J5Og0KICAgICAgICAgICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICAgICAgICAgIFNFTEVDVCBzLmlkLCBzLm5hendhX3NlZ21lbnR1IA0KICAgICAgICAgICAgICAgICAgICAgICAgRlJPTSBzZWdtZW50eSBzIA0KICAgICAgICAgICAgICAgICAgICAgICAgV0hFUkUgcy5pZF96YXdvcnUgPSAlcw0KICAgICAgICAgICAgICAgICAgICAiIiIsICh6YXdvclsnaWQnXSwpKQ0KICAgICAgICAgICAgICAgICAgICB6YXdvclsnc2VnbWVudHMnXSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgICAgICAgICAgICAgIHphd29yWydzZWdtZW50c19jb3VudCddID0gbGVuKHphd29yWydzZWdtZW50cyddKQ0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBmb3IgemF3b3IgaW4gemF3b3J5Og0KICAgICAgICAgICAgICAgICAgICB6YXdvclsnc2VnbWVudHNfY291bnQnXSA9IDANCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHphd29yeQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgIA0KICAgIGRlZiBnZXRfemF3b3Ioc2VsZiwgemF3b3JfaWQpOg0KICAgICAgICAiIiJQb2JpZXJhIHN6Y3plZ8OzxYJ5IGtvbmtyZXRuZWdvIHphd29ydSIiIg0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCJTRUxFQ1QgKiBGUk9NIHphd29yeSBXSEVSRSBpZCA9ICVzIiwgKHphd29yX2lkLCkpDQogICAgICAgICAgICB6YXdvciA9IGN1cnNvci5mZXRjaG9uZSgpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIHphd29yOg0KICAgICAgICAgICAgICAgICMgUG9iaWVyeiBzZWdtZW50eSB1xbx5d2FqxIVjZSB0ZWdvIHphd29ydQ0KICAgICAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgICAgICBTRUxFQ1Qgcy5pZCwgcy5uYXp3YV9zZWdtZW50dSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHBzX3N0YXJ0Lm5hendhX3BvcnR1IGFzIHBvcnRfc3RhcnRvd3ksDQogICAgICAgICAgICAgICAgICAgICAgICAgICBwc19lbmQubmF6d2FfcG9ydHUgYXMgcG9ydF9rb25jb3d5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgd3Nfc3RhcnQubmF6d2Ffd2V6bGEgYXMgd2V6ZWxfc3RhcnRvd3ksDQogICAgICAgICAgICAgICAgICAgICAgICAgICB3c19lbmQubmF6d2Ffd2V6bGEgYXMgd2V6ZWxfa29uY293eQ0KICAgICAgICAgICAgICAgICAgICBGUk9NIHNlZ21lbnR5IHMNCiAgICAgICAgICAgICAgICAgICAgTEVGVCBKT0lOIHBvcnR5X3NwcnpldHUgcHNfc3RhcnQgT04gcy5pZF9wb3J0dV9zdGFydG93ZWdvID0gcHNfc3RhcnQuaWQNCiAgICAgICAgICAgICAgICAgICAgTEVGVCBKT0lOIHBvcnR5X3NwcnpldHUgcHNfZW5kIE9OIHMuaWRfcG9ydHVfa29uY293ZWdvID0gcHNfZW5kLmlkDQogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiB3ZXpseV9ydXJvY2lhZ3Ugd3Nfc3RhcnQgT04gcy5pZF93ZXpsYV9zdGFydG93ZWdvID0gd3Nfc3RhcnQuaWQNCiAgICAgICAgICAgICAgICAgICAgTEVGVCBKT0lOIHdlemx5X3J1cm9jaWFndSB3c19lbmQgT04gcy5pZF93ZXpsYV9rb25jb3dlZ28gPSB3c19lbmQuaWQNCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgcy5pZF96YXdvcnUgPSAlcw0KICAgICAgICAgICAgICAgICIiIiwgKHphd29yX2lkLCkpDQogICAgICAgICAgICAgICAgemF3b3JbJ3NlZ21lbnRzJ10gPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gemF3b3INCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgICAgICBjb25uLmNsb3NlKCkNCiAgICANCiAgICBkZWYgY3JlYXRlX3phd29yKHNlbGYsIG5hendhX3phd29ydSwgc3Rhbj0nWkFNS05JRVRZJyk6DQogICAgICAgICIiIlR3b3J6eSBub3d5IHphd8OzciIiIg0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgIElOU0VSVCBJTlRPIHphd29yeSAobmF6d2FfemF3b3J1LCBzdGFuKQ0KICAgICAgICAgICAgICAgIFZBTFVFUyAoJXMsICVzKQ0KICAgICAgICAgICAgIiIiLCAobmF6d2FfemF3b3J1LCBzdGFuKSkNCiAgICAgICAgICAgIGNvbm4uY29tbWl0KCkNCiAgICAgICAgICAgIHJldHVybiBjdXJzb3IubGFzdHJvd2lkDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQogICAgDQogICAgZGVmIHVwZGF0ZV96YXdvcihzZWxmLCB6YXdvcl9pZCwgbmF6d2FfemF3b3J1PU5vbmUsIHN0YW49Tm9uZSk6DQogICAgICAgICIiIkFrdHVhbGl6dWplIHphd8OzciIiIg0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgIHVwZGF0ZXMgPSBbXQ0KICAgICAgICAgICAgcGFyYW1zID0gW10NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgbmF6d2FfemF3b3J1IGlzIG5vdCBOb25lOg0KICAgICAgICAgICAgICAgIHVwZGF0ZXMuYXBwZW5kKCJuYXp3YV96YXdvcnUgPSAlcyIpDQogICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChuYXp3YV96YXdvcnUpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIHN0YW4gaXMgbm90IE5vbmU6DQogICAgICAgICAgICAgICAgdXBkYXRlcy5hcHBlbmQoInN0YW4gPSAlcyIpDQogICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChzdGFuKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiB1cGRhdGVzOg0KICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQoemF3b3JfaWQpDQogICAgICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoZiIiIg0KICAgICAgICAgICAgICAgICAgICBVUERBVEUgemF3b3J5IA0KICAgICAgICAgICAgICAgICAgICBTRVQgeycsICcuam9pbih1cGRhdGVzKX0NCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgaWQgPSAlcw0KICAgICAgICAgICAgICAgICIiIiwgcGFyYW1zKQ0KICAgICAgICAgICAgICAgIGNvbm4uY29tbWl0KCkNCiAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yLnJvd2NvdW50ID4gMA0KICAgICAgICAgICAgcmV0dXJuIEZhbHNlDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQogICAgDQogICAgZGVmIGRlbGV0ZV96YXdvcihzZWxmLCB6YXdvcl9pZCk6DQogICAgICAgICIiIlVzdXdhIHphd8OzciAodHlsa28gamXFm2xpIG5pZSBqZXN0IHXFvHl3YW55IHcgc2VnbWVudGFjaCkiIiINCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICAjIFNwcmF3ZMW6IGN6eSB6YXfDs3IgamVzdCB1xbx5d2FueQ0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIlNFTEVDVCBDT1VOVCgqKSBhcyBjb3VudCBGUk9NIHNlZ21lbnR5IFdIRVJFIGlkX3phd29ydSA9ICVzIiwgKHphd29yX2lkLCkpDQogICAgICAgICAgICByZXN1bHQgPSBjdXJzb3IuZmV0Y2hvbmUoKQ0KICAgICAgICAgICAgaWYgcmVzdWx0IGFuZCByZXN1bHRbJ2NvdW50J10gPiAwOg0KICAgICAgICAgICAgICAgIHJldHVybiBGYWxzZSwgIlphd8OzciBqZXN0IHXFvHl3YW55IHcgc2VnbWVudGFjaCBpIG5pZSBtb8W8ZSBiecSHIHVzdW5pxJl0eSINCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIkRFTEVURSBGUk9NIHphd29yeSBXSEVSRSBpZCA9ICVzIiwgKHphd29yX2lkLCkpDQogICAgICAgICAgICBjb25uLmNvbW1pdCgpDQogICAgICAgICAgICByZXR1cm4gVHJ1ZSwgIlphd8OzciB6b3N0YcWCIHVzdW5pxJl0eSINCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgICAgICBjb25uLmNsb3NlKCkNCiAgICANCiAgICAjID09PT09PT09PT09PT09PT09PSBXxJhaxYFZID09PT09PT09PT09PT09PT09PQ0KICAgIA0KICAgIGRlZiBnZXRfd2V6bHkoc2VsZiwgaW5jbHVkZV9zZWdtZW50cz1GYWxzZSk6DQogICAgICAgICIiIlBvYmllcmEgbGlzdMSZIHdzenlzdGtpY2ggd8SZesWCw7N3IiIiDQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIlNFTEVDVCAqIEZST00gd2V6bHlfcnVyb2NpYWd1IE9SREVSIEJZIG5hendhX3dlemxhIikNCiAgICAgICAgICAgIHdlemx5ID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgaW5jbHVkZV9zZWdtZW50czoNCiAgICAgICAgICAgICAgICBmb3Igd2V6ZWwgaW4gd2V6bHk6DQogICAgICAgICAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgICAgICAgICAgICAgU0VMRUNUIHMuaWQsIHMubmF6d2Ffc2VnbWVudHUsIHoubmF6d2FfemF3b3J1LCB6LnN0YW4gYXMgc3Rhbl96YXdvcnUsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0FTRSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV0hFTiBzLmlkX3dlemxhX3N0YXJ0b3dlZ28gPSAlcyBUSEVOICdTVEFSVCcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV0hFTiBzLmlkX3dlemxhX2tvbmNvd2VnbyA9ICVzIFRIRU4gJ0VORCcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBFTkQgYXMgcG96eWNqYQ0KICAgICAgICAgICAgICAgICAgICAgICAgRlJPTSBzZWdtZW50eSBzIA0KICAgICAgICAgICAgICAgICAgICAgICAgSk9JTiB6YXdvcnkgeiBPTiBzLmlkX3phd29ydSA9IHouaWQNCiAgICAgICAgICAgICAgICAgICAgICAgIFdIRVJFIHMuaWRfd2V6bGFfc3RhcnRvd2VnbyA9ICVzIE9SIHMuaWRfd2V6bGFfa29uY293ZWdvID0gJXMNCiAgICAgICAgICAgICAgICAgICAgIiIiLCAod2V6ZWxbJ2lkJ10sIHdlemVsWydpZCddLCB3ZXplbFsnaWQnXSwgd2V6ZWxbJ2lkJ10pKQ0KICAgICAgICAgICAgICAgICAgICB3ZXplbFsnc2VnbWVudHMnXSA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiB3ZXpseQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgIA0KICAgIGRlZiBnZXRfd2V6ZWwoc2VsZiwgd2V6ZWxfaWQpOg0KICAgICAgICAiIiJQb2JpZXJhIHN6Y3plZ8OzxYJ5IGtvbmtyZXRuZWdvIHfEmXrFgmEiIiINCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiU0VMRUNUICogRlJPTSB3ZXpseV9ydXJvY2lhZ3UgV0hFUkUgaWQgPSAlcyIsICh3ZXplbF9pZCwpKQ0KICAgICAgICAgICAgd2V6ZWwgPSBjdXJzb3IuZmV0Y2hvbmUoKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiB3ZXplbDoNCiAgICAgICAgICAgICAgICAjIFBvYmllcnogc2VnbWVudHkgcG/FgsSFY3pvbmUgeiB0eW0gd8SZesWCZW0NCiAgICAgICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICAgICAgU0VMRUNUIHMuaWQsIHMubmF6d2Ffc2VnbWVudHUsIHouaWQgYXMgaWRfemF3b3J1LCB6Lm5hendhX3phd29ydSwgei5zdGFuIGFzIHN0YW5femF3b3J1LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgQ0FTRSANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXSEVOIHMuaWRfd2V6bGFfc3RhcnRvd2VnbyA9ICVzIFRIRU4gJ1NUQVJUJw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFdIRU4gcy5pZF93ZXpsYV9rb25jb3dlZ28gPSAlcyBUSEVOICdFTkQnDQogICAgICAgICAgICAgICAgICAgICAgICAgICBFTkQgYXMgcG96eWNqYSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgIENBU0UgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV0hFTiBzLmlkX3dlemxhX3N0YXJ0b3dlZ28gPSAlcyBUSEVOIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBDT0FMRVNDRShwc19lbmQubmF6d2FfcG9ydHUsIHdzX2VuZC5uYXp3YV93ZXpsYSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBXSEVOIHMuaWRfd2V6bGFfa29uY293ZWdvID0gJXMgVEhFTiANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ09BTEVTQ0UocHNfc3RhcnQubmF6d2FfcG9ydHUsIHdzX3N0YXJ0Lm5hendhX3dlemxhKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgRU5EIGFzIGRydWdpX2tvbmllYw0KICAgICAgICAgICAgICAgICAgICBGUk9NIHNlZ21lbnR5IHMNCiAgICAgICAgICAgICAgICAgICAgSk9JTiB6YXdvcnkgeiBPTiBzLmlkX3phd29ydSA9IHouaWQNCiAgICAgICAgICAgICAgICAgICAgTEVGVCBKT0lOIHBvcnR5X3NwcnpldHUgcHNfc3RhcnQgT04gcy5pZF9wb3J0dV9zdGFydG93ZWdvID0gcHNfc3RhcnQuaWQNCiAgICAgICAgICAgICAgICAgICAgTEVGVCBKT0lOIHBvcnR5X3NwcnpldHUgcHNfZW5kIE9OIHMuaWRfcG9ydHVfa29uY293ZWdvID0gcHNfZW5kLmlkDQogICAgICAgICAgICAgICAgICAgIExFRlQgSk9JTiB3ZXpseV9ydXJvY2lhZ3Ugd3Nfc3RhcnQgT04gcy5pZF93ZXpsYV9zdGFydG93ZWdvID0gd3Nfc3RhcnQuaWQNCiAgICAgICAgICAgICAgICAgICAgTEVGVCBKT0lOIHdlemx5X3J1cm9jaWFndSB3c19lbmQgT04gcy5pZF93ZXpsYV9rb25jb3dlZ28gPSB3c19lbmQuaWQNCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgcy5pZF93ZXpsYV9zdGFydG93ZWdvID0gJXMgT1Igcy5pZF93ZXpsYV9rb25jb3dlZ28gPSAlcw0KICAgICAgICAgICAgICAgICIiIiwgKHdlemVsX2lkLCB3ZXplbF9pZCwgd2V6ZWxfaWQsIHdlemVsX2lkLCB3ZXplbF9pZCwgd2V6ZWxfaWQpKQ0KICAgICAgICAgICAgICAgIHdlemVsWydzZWdtZW50cyddID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgcmV0dXJuIHdlemVsDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQogICAgDQogICAgZGVmIGNyZWF0ZV93ZXplbChzZWxmLCBuYXp3YV93ZXpsYSk6DQogICAgICAgICIiIlR3b3J6eSBub3d5IHfEmXplxYIiIiINCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICBJTlNFUlQgSU5UTyB3ZXpseV9ydXJvY2lhZ3UgKG5hendhX3dlemxhKQ0KICAgICAgICAgICAgICAgIFZBTFVFUyAoJXMpDQogICAgICAgICAgICAiIiIsIChuYXp3YV93ZXpsYSwpKQ0KICAgICAgICAgICAgY29ubi5jb21taXQoKQ0KICAgICAgICAgICAgcmV0dXJuIGN1cnNvci5sYXN0cm93aWQNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgICAgICBjb25uLmNsb3NlKCkNCiAgICANCiAgICBkZWYgdXBkYXRlX3dlemVsKHNlbGYsIHdlemVsX2lkLCBuYXp3YV93ZXpsYSk6DQogICAgICAgICIiIkFrdHVhbGl6dWplIHfEmXplxYIiIiINCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICBVUERBVEUgd2V6bHlfcnVyb2NpYWd1IA0KICAgICAgICAgICAgICAgIFNFVCBuYXp3YV93ZXpsYSA9ICVzDQogICAgICAgICAgICAgICAgV0hFUkUgaWQgPSAlcw0KICAgICAgICAgICAgIiIiLCAobmF6d2Ffd2V6bGEsIHdlemVsX2lkKSkNCiAgICAgICAgICAgIGNvbm4uY29tbWl0KCkNCiAgICAgICAgICAgIHJldHVybiBjdXJzb3Iucm93Y291bnQgPiAwDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQogICAgDQogICAgZGVmIGRlbGV0ZV93ZXplbChzZWxmLCB3ZXplbF9pZCk6DQogICAgICAgICIiIlVzdXdhIHfEmXplxYIgKHR5bGtvIGplxZtsaSBuaWUgamVzdCB1xbx5d2FueSB3IHNlZ21lbnRhY2gpIiIiDQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgIyBTcHJhd2TFuiBjenkgd8SZemXFgiBqZXN0IHXFvHl3YW55DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICBTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgDQogICAgICAgICAgICAgICAgRlJPTSBzZWdtZW50eSANCiAgICAgICAgICAgICAgICBXSEVSRSBpZF93ZXpsYV9zdGFydG93ZWdvID0gJXMgT1IgaWRfd2V6bGFfa29uY293ZWdvID0gJXMNCiAgICAgICAgICAgICIiIiwgKHdlemVsX2lkLCB3ZXplbF9pZCkpDQogICAgICAgICAgICBpZiBjdXJzb3IuZmV0Y2hvbmUoKVsnY291bnQnXSA+IDA6DQogICAgICAgICAgICAgICAgcmV0dXJuIEZhbHNlLCAiV8SZemXFgiBqZXN0IHXFvHl3YW55IHcgc2VnbWVudGFjaCBpIG5pZSBtb8W8ZSBiecSHIHVzdW5pxJl0eSINCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIkRFTEVURSBGUk9NIHdlemx5X3J1cm9jaWFndSBXSEVSRSBpZCA9ICVzIiwgKHdlemVsX2lkLCkpDQogICAgICAgICAgICBjb25uLmNvbW1pdCgpDQogICAgICAgICAgICByZXR1cm4gVHJ1ZSwgIlfEmXplxYIgem9zdGHFgiB1c3VuacSZdHkiDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQogICAgDQogICAgIyA9PT09PT09PT09PT09PT09PT0gU0VHTUVOVFkgPT09PT09PT09PT09PT09PT09DQogICAgDQogICAgZGVmIGdldF9zZWdtZW50eShzZWxmLCBpbmNsdWRlX2RldGFpbHM9RmFsc2UpOg0KICAgICAgICAiIiJQb2JpZXJhIGxpc3TEmSB3c3p5c3RraWNoIHNlZ21lbnTDs3ciIiINCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICBTRUxFQ1Qgcy4qLCB6Lm5hendhX3phd29ydSwgei5zdGFuIGFzIHN0YW5femF3b3J1LA0KICAgICAgICAgICAgICAgICAgICAgICBwc19zdGFydC5uYXp3YV9wb3J0dSBhcyBwb3J0X3N0YXJ0b3d5LA0KICAgICAgICAgICAgICAgICAgICAgICBwc19lbmQubmF6d2FfcG9ydHUgYXMgcG9ydF9rb25jb3d5LA0KICAgICAgICAgICAgICAgICAgICAgICB3c19zdGFydC5uYXp3YV93ZXpsYSBhcyB3ZXplbF9zdGFydG93eSwNCiAgICAgICAgICAgICAgICAgICAgICAgd3NfZW5kLm5hendhX3dlemxhIGFzIHdlemVsX2tvbmNvd3ksDQogICAgICAgICAgICAgICAgICAgICAgIHNwX3N0YXJ0Lm5hendhX3VuaWthbG5hIGFzIHNwcnpldF9zdGFydG93eSwNCiAgICAgICAgICAgICAgICAgICAgICAgc3BfZW5kLm5hendhX3VuaWthbG5hIGFzIHNwcnpldF9rb25jb3d5DQogICAgICAgICAgICAgICAgRlJPTSBzZWdtZW50eSBzDQogICAgICAgICAgICAgICAgSk9JTiB6YXdvcnkgeiBPTiBzLmlkX3phd29ydSA9IHouaWQNCiAgICAgICAgICAgICAgICBMRUZUIEpPSU4gcG9ydHlfc3ByemV0dSBwc19zdGFydCBPTiBzLmlkX3BvcnR1X3N0YXJ0b3dlZ28gPSBwc19zdGFydC5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiBwb3J0eV9zcHJ6ZXR1IHBzX2VuZCBPTiBzLmlkX3BvcnR1X2tvbmNvd2VnbyA9IHBzX2VuZC5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiB3ZXpseV9ydXJvY2lhZ3Ugd3Nfc3RhcnQgT04gcy5pZF93ZXpsYV9zdGFydG93ZWdvID0gd3Nfc3RhcnQuaWQNCiAgICAgICAgICAgICAgICBMRUZUIEpPSU4gd2V6bHlfcnVyb2NpYWd1IHdzX2VuZCBPTiBzLmlkX3dlemxhX2tvbmNvd2VnbyA9IHdzX2VuZC5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiBzcHJ6ZXQgc3Bfc3RhcnQgT04gcHNfc3RhcnQuaWRfc3ByemV0dSA9IHNwX3N0YXJ0LmlkDQogICAgICAgICAgICAgICAgTEVGVCBKT0lOIHNwcnpldCBzcF9lbmQgT04gcHNfZW5kLmlkX3NwcnpldHUgPSBzcF9lbmQuaWQNCiAgICAgICAgICAgICAgICBPUkRFUiBCWSBzLm5hendhX3NlZ21lbnR1DQogICAgICAgICAgICAiIiIpDQogICAgICAgICAgICByZXR1cm4gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgICAgICBjb25uLmNsb3NlKCkNCiAgICANCiAgICBkZWYgZ2V0X3NlZ21lbnQoc2VsZiwgc2VnbWVudF9pZCk6DQogICAgICAgICIiIlBvYmllcmEgc3pjemVnw7PFgnkga29ua3JldG5lZ28gc2VnbWVudHUiIiINCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICBTRUxFQ1Qgcy4qLCB6Lm5hendhX3phd29ydSwgei5zdGFuIGFzIHN0YW5femF3b3J1LA0KICAgICAgICAgICAgICAgICAgICAgICBwc19zdGFydC5uYXp3YV9wb3J0dSBhcyBwb3J0X3N0YXJ0b3d5LA0KICAgICAgICAgICAgICAgICAgICAgICBwc19lbmQubmF6d2FfcG9ydHUgYXMgcG9ydF9rb25jb3d5LA0KICAgICAgICAgICAgICAgICAgICAgICB3c19zdGFydC5uYXp3YV93ZXpsYSBhcyB3ZXplbF9zdGFydG93eSwNCiAgICAgICAgICAgICAgICAgICAgICAgd3NfZW5kLm5hendhX3dlemxhIGFzIHdlemVsX2tvbmNvd3ksDQogICAgICAgICAgICAgICAgICAgICAgIHNwX3N0YXJ0Lm5hendhX3VuaWthbG5hIGFzIHNwcnpldF9zdGFydG93eSwNCiAgICAgICAgICAgICAgICAgICAgICAgc3Bfc3RhcnQudHlwX3NwcnpldHUgYXMgdHlwX3NwcnpldHVfc3RhcnRvd2VnbywNCiAgICAgICAgICAgICAgICAgICAgICAgc3BfZW5kLm5hendhX3VuaWthbG5hIGFzIHNwcnpldF9rb25jb3d5LA0KICAgICAgICAgICAgICAgICAgICAgICBzcF9lbmQudHlwX3NwcnpldHUgYXMgdHlwX3NwcnpldHVfa29uY293ZWdvDQogICAgICAgICAgICAgICAgRlJPTSBzZWdtZW50eSBzDQogICAgICAgICAgICAgICAgSk9JTiB6YXdvcnkgeiBPTiBzLmlkX3phd29ydSA9IHouaWQNCiAgICAgICAgICAgICAgICBMRUZUIEpPSU4gcG9ydHlfc3ByemV0dSBwc19zdGFydCBPTiBzLmlkX3BvcnR1X3N0YXJ0b3dlZ28gPSBwc19zdGFydC5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiBwb3J0eV9zcHJ6ZXR1IHBzX2VuZCBPTiBzLmlkX3BvcnR1X2tvbmNvd2VnbyA9IHBzX2VuZC5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiB3ZXpseV9ydXJvY2lhZ3Ugd3Nfc3RhcnQgT04gcy5pZF93ZXpsYV9zdGFydG93ZWdvID0gd3Nfc3RhcnQuaWQNCiAgICAgICAgICAgICAgICBMRUZUIEpPSU4gd2V6bHlfcnVyb2NpYWd1IHdzX2VuZCBPTiBzLmlkX3dlemxhX2tvbmNvd2VnbyA9IHdzX2VuZC5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiBzcHJ6ZXQgc3Bfc3RhcnQgT04gcHNfc3RhcnQuaWRfc3ByemV0dSA9IHNwX3N0YXJ0LmlkDQogICAgICAgICAgICAgICAgTEVGVCBKT0lOIHNwcnpldCBzcF9lbmQgT04gcHNfZW5kLmlkX3NwcnpldHUgPSBzcF9lbmQuaWQNCiAgICAgICAgICAgICAgICBXSEVSRSBzLmlkID0gJXMNCiAgICAgICAgICAgICIiIiwgKHNlZ21lbnRfaWQsKSkNCiAgICAgICAgICAgIHJldHVybiBjdXJzb3IuZmV0Y2hvbmUoKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgIA0KICAgIGRlZiBjcmVhdGVfc2VnbWVudChzZWxmLCBuYXp3YV9zZWdtZW50dSwgaWRfemF3b3J1LCBpZF9wb3J0dV9zdGFydG93ZWdvPU5vbmUsIA0KICAgICAgICAgICAgICAgICAgICAgIGlkX3dlemxhX3N0YXJ0b3dlZ289Tm9uZSwgaWRfcG9ydHVfa29uY293ZWdvPU5vbmUsIGlkX3dlemxhX2tvbmNvd2Vnbz1Ob25lKToNCiAgICAgICAgIiIiVHdvcnp5IG5vd3kgc2VnbWVudCIiIg0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcigpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgICMgV2FsaWRhY2phIC0ga2HFvGR5IHNlZ21lbnQgbXVzaSBtaWXEhyBwdW5rdCBzdGFydG93eSBpIGtvxYRjb3d5DQogICAgICAgICAgICBpZiBub3QgKChpZF9wb3J0dV9zdGFydG93ZWdvIG9yIGlkX3dlemxhX3N0YXJ0b3dlZ28pIGFuZCANCiAgICAgICAgICAgICAgICAgICAgKGlkX3BvcnR1X2tvbmNvd2VnbyBvciBpZF93ZXpsYV9rb25jb3dlZ28pKToNCiAgICAgICAgICAgICAgICByZXR1cm4gTm9uZSwgIlNlZ21lbnQgbXVzaSBtaWXEhyB6ZGVmaW5pb3dhbnkgcHVua3Qgc3RhcnRvd3kgaSBrb8WEY293eSINCiAgICAgICAgICAgIA0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgSU5TRVJUIElOVE8gc2VnbWVudHkgDQogICAgICAgICAgICAgICAgKG5hendhX3NlZ21lbnR1LCBpZF9wb3J0dV9zdGFydG93ZWdvLCBpZF93ZXpsYV9zdGFydG93ZWdvLCANCiAgICAgICAgICAgICAgICAgaWRfcG9ydHVfa29uY293ZWdvLCBpZF93ZXpsYV9rb25jb3dlZ28sIGlkX3phd29ydSkNCiAgICAgICAgICAgICAgICBWQUxVRVMgKCVzLCAlcywgJXMsICVzLCAlcywgJXMpDQogICAgICAgICAgICAiIiIsIChuYXp3YV9zZWdtZW50dSwgaWRfcG9ydHVfc3RhcnRvd2VnbywgaWRfd2V6bGFfc3RhcnRvd2VnbywNCiAgICAgICAgICAgICAgICAgIGlkX3BvcnR1X2tvbmNvd2VnbywgaWRfd2V6bGFfa29uY293ZWdvLCBpZF96YXdvcnUpKQ0KICAgICAgICAgICAgY29ubi5jb21taXQoKQ0KICAgICAgICAgICAgcmV0dXJuIGN1cnNvci5sYXN0cm93aWQsICJTZWdtZW50IHpvc3RhxYIgdXR3b3J6b255Ig0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgIA0KICAgIGRlZiB1cGRhdGVfc2VnbWVudChzZWxmLCBzZWdtZW50X2lkLCAqKmt3YXJncyk6DQogICAgICAgICIiIkFrdHVhbGl6dWplIHNlZ21lbnQiIiINCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBhbGxvd2VkX2ZpZWxkcyA9IFsnbmF6d2Ffc2VnbWVudHUnLCAnaWRfcG9ydHVfc3RhcnRvd2VnbycsICdpZF93ZXpsYV9zdGFydG93ZWdvJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2lkX3BvcnR1X2tvbmNvd2VnbycsICdpZF93ZXpsYV9rb25jb3dlZ28nLCAnaWRfemF3b3J1J10NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdXBkYXRlcyA9IFtdDQogICAgICAgICAgICBwYXJhbXMgPSBbXQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBmb3IgZmllbGQsIHZhbHVlIGluIGt3YXJncy5pdGVtcygpOg0KICAgICAgICAgICAgICAgIGlmIGZpZWxkIGluIGFsbG93ZWRfZmllbGRzOg0KICAgICAgICAgICAgICAgICAgICB1cGRhdGVzLmFwcGVuZChmIntmaWVsZH0gPSAlcyIpDQogICAgICAgICAgICAgICAgICAgIHBhcmFtcy5hcHBlbmQodmFsdWUpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmIHVwZGF0ZXM6DQogICAgICAgICAgICAgICAgcGFyYW1zLmFwcGVuZChzZWdtZW50X2lkKQ0KICAgICAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKGYiIiINCiAgICAgICAgICAgICAgICAgICAgVVBEQVRFIHNlZ21lbnR5IA0KICAgICAgICAgICAgICAgICAgICBTRVQgeycsICcuam9pbih1cGRhdGVzKX0NCiAgICAgICAgICAgICAgICAgICAgV0hFUkUgaWQgPSAlcw0KICAgICAgICAgICAgICAgICIiIiwgcGFyYW1zKQ0KICAgICAgICAgICAgICAgIGNvbm4uY29tbWl0KCkNCiAgICAgICAgICAgICAgICByZXR1cm4gY3Vyc29yLnJvd2NvdW50ID4gMCwgIlNlZ21lbnQgem9zdGHFgiB6YWt0dWFsaXpvd2FueSINCiAgICAgICAgICAgIHJldHVybiBGYWxzZSwgIkJyYWsgZGFueWNoIGRvIGFrdHVhbGl6YWNqaSINCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgICAgICBjb25uLmNsb3NlKCkNCiAgICANCiAgICBkZWYgZGVsZXRlX3NlZ21lbnQoc2VsZiwgc2VnbWVudF9pZCk6DQogICAgICAgICIiIlVzdXdhIHNlZ21lbnQiIiINCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiREVMRVRFIEZST00gc2VnbWVudHkgV0hFUkUgaWQgPSAlcyIsIChzZWdtZW50X2lkLCkpDQogICAgICAgICAgICBjb25uLmNvbW1pdCgpDQogICAgICAgICAgICByZXR1cm4gY3Vyc29yLnJvd2NvdW50ID4gMCwgIlNlZ21lbnQgem9zdGHFgiB1c3VuacSZdHkiDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQogICAgDQogICAgIyA9PT09PT09PT09PT09PT09PT0gUE9SVFkgSSBTUFJaxJhUID09PT09PT09PT09PT09PT09PQ0KICAgIA0KICAgIGRlZiBnZXRfcG9ydHlfc3ByemV0dShzZWxmKToNCiAgICAgICAgIiIiUG9iaWVyYSBsaXN0xJkgd3N6eXN0a2ljaCBwb3J0w7N3IHNwcnrEmXR1IiIiDQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgU0VMRUNUIHAuKiwgcy5uYXp3YV91bmlrYWxuYSwgcy50eXBfc3ByemV0dQ0KICAgICAgICAgICAgICAgIEZST00gcG9ydHlfc3ByemV0dSBwDQogICAgICAgICAgICAgICAgSk9JTiBzcHJ6ZXQgcyBPTiBwLmlkX3NwcnpldHUgPSBzLmlkDQogICAgICAgICAgICAgICAgT1JERVIgQlkgcy5uYXp3YV91bmlrYWxuYSwgcC5uYXp3YV9wb3J0dQ0KICAgICAgICAgICAgIiIiKQ0KICAgICAgICAgICAgcmV0dXJuIGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgIGZpbmFsbHk6DQogICAgICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICAgICAgY29ubi5jbG9zZSgpDQogICAgDQogICAgZGVmIGdldF9zcHJ6ZXQoc2VsZik6DQogICAgICAgICIiIlBvYmllcmEgbGlzdMSZIGNhxYJlZ28gc3ByesSZdHUiIiINCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgICAgICB0cnk6DQogICAgICAgICAgICBjdXJzb3IuZXhlY3V0ZSgiIiINCiAgICAgICAgICAgICAgICBTRUxFQ1Qgcy4qLCANCiAgICAgICAgICAgICAgICAgICAgICAgQ09VTlQocC5pZCkgYXMgcG9ydHlfY291bnQNCiAgICAgICAgICAgICAgICBGUk9NIHNwcnpldCBzDQogICAgICAgICAgICAgICAgTEVGVCBKT0lOIHBvcnR5X3NwcnpldHUgcCBPTiBzLmlkID0gcC5pZF9zcHJ6ZXR1DQogICAgICAgICAgICAgICAgR1JPVVAgQlkgcy5pZA0KICAgICAgICAgICAgICAgIE9SREVSIEJZIHMubmF6d2FfdW5pa2FsbmENCiAgICAgICAgICAgICIiIikNCiAgICAgICAgICAgIHJldHVybiBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgIA0KICAgICMgPT09PT09PT09PT09PT09PT09IFdJWlVBTElaQUNKQSBUT1BPTE9HSUkgPT09PT09PT09PT09PT09PT09DQogICAgDQogICAgZGVmIGdldF90b3BvbG9neV9ncmFwaChzZWxmKToNCiAgICAgICAgIiIiWndyYWNhIGRhbmUgdG9wb2xvZ2lpIHcgZm9ybWFjaWUgZ3JhZnUgZGxhIHdpenVhbGl6YWNqaSIiIg0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgICAgIHRyeToNCiAgICAgICAgICAgICMgUG9iaWVyeiB3c3p5c3RraWUgd8SZesWCeSAoc3ByesSZdCArIHfEmXrFgnkgcnVyb2NpxIVndSkNCiAgICAgICAgICAgIG5vZGVzID0gW10NCiAgICAgICAgICAgIGVkZ2VzID0gW10NCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBEb2RhaiBzcHJ6xJl0IGpha28gd8SZesWCeQ0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgU0VMRUNUIGlkLCBuYXp3YV91bmlrYWxuYSBhcyBuYW1lLCB0eXBfc3ByemV0dSBhcyB0eXBlLCANCiAgICAgICAgICAgICAgICAgICAgICAgJ2VxdWlwbWVudCcgYXMgY2F0ZWdvcnksIHN0YW5fc3ByemV0dSBhcyBzdGF0dXMNCiAgICAgICAgICAgICAgICBGUk9NIHNwcnpldA0KICAgICAgICAgICAgIiIiKQ0KICAgICAgICAgICAgZXF1aXBtZW50ID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgICAgIGZvciBlcSBpbiBlcXVpcG1lbnQ6DQogICAgICAgICAgICAgICAgbm9kZXMuYXBwZW5kKHsNCiAgICAgICAgICAgICAgICAgICAgJ2lkJzogZiJlcV97ZXFbJ2lkJ119IiwNCiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiBlcVsnbmFtZSddLA0KICAgICAgICAgICAgICAgICAgICAndHlwZSc6IGVxWyd0eXBlJ10sDQogICAgICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6ICdlcXVpcG1lbnQnLA0KICAgICAgICAgICAgICAgICAgICAnc3RhdHVzJzogZXFbJ3N0YXR1cyddDQogICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgIyBEb2RhaiB3xJl6xYJ5IHJ1cm9jacSFZ3UNCiAgICAgICAgICAgIGN1cnNvci5leGVjdXRlKCJTRUxFQ1QgaWQsIG5hendhX3dlemxhIGFzIG5hbWUgRlJPTSB3ZXpseV9ydXJvY2lhZ3UiKQ0KICAgICAgICAgICAgd2V6bHkgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICAgICAgZm9yIHdlemVsIGluIHdlemx5Og0KICAgICAgICAgICAgICAgIG5vZGVzLmFwcGVuZCh7DQogICAgICAgICAgICAgICAgICAgICdpZCc6IGYibm9kZV97d2V6ZWxbJ2lkJ119IiwNCiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiB3ZXplbFsnbmFtZSddLA0KICAgICAgICAgICAgICAgICAgICAndHlwZSc6ICdqdW5jdGlvbicsDQogICAgICAgICAgICAgICAgICAgICdjYXRlZ29yeSc6ICdqdW5jdGlvbicNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgDQogICAgICAgICAgICAjIERvZGFqIGtyYXfEmWR6aWUgKHNlZ21lbnR5KQ0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgU0VMRUNUIHMuaWQsIHMubmF6d2Ffc2VnbWVudHUsIHouc3RhbiBhcyBzdGFuX3phd29ydSwNCiAgICAgICAgICAgICAgICAgICAgICAgcy5pZF9wb3J0dV9zdGFydG93ZWdvLCBzLmlkX3dlemxhX3N0YXJ0b3dlZ28sDQogICAgICAgICAgICAgICAgICAgICAgIHMuaWRfcG9ydHVfa29uY293ZWdvLCBzLmlkX3dlemxhX2tvbmNvd2VnbywNCiAgICAgICAgICAgICAgICAgICAgICAgcHNfc3RhcnQuaWRfc3ByemV0dSBhcyBzcHJ6ZXRfc3RhcnRfaWQsDQogICAgICAgICAgICAgICAgICAgICAgIHBzX2VuZC5pZF9zcHJ6ZXR1IGFzIHNwcnpldF9lbmRfaWQNCiAgICAgICAgICAgICAgICBGUk9NIHNlZ21lbnR5IHMNCiAgICAgICAgICAgICAgICBKT0lOIHphd29yeSB6IE9OIHMuaWRfemF3b3J1ID0gei5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiBwb3J0eV9zcHJ6ZXR1IHBzX3N0YXJ0IE9OIHMuaWRfcG9ydHVfc3RhcnRvd2VnbyA9IHBzX3N0YXJ0LmlkDQogICAgICAgICAgICAgICAgTEVGVCBKT0lOIHBvcnR5X3NwcnpldHUgcHNfZW5kIE9OIHMuaWRfcG9ydHVfa29uY293ZWdvID0gcHNfZW5kLmlkDQogICAgICAgICAgICAiIiIpDQogICAgICAgICAgICBzZWdtZW50cyA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgICAgICANCiAgICAgICAgICAgIGZvciBzZWdtZW50IGluIHNlZ21lbnRzOg0KICAgICAgICAgICAgICAgICMgT2tyZcWbbCB3xJl6ZcWCIHN0YXJ0b3d5DQogICAgICAgICAgICAgICAgaWYgc2VnbWVudFsnaWRfcG9ydHVfc3RhcnRvd2VnbyddOg0KICAgICAgICAgICAgICAgICAgICBzb3VyY2UgPSBmImVxX3tzZWdtZW50WydzcHJ6ZXRfc3RhcnRfaWQnXX0iDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgc291cmNlID0gZiJub2RlX3tzZWdtZW50WydpZF93ZXpsYV9zdGFydG93ZWdvJ119Ig0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICMgT2tyZcWbbCB3xJl6ZcWCIGtvxYRjb3d5DQogICAgICAgICAgICAgICAgaWYgc2VnbWVudFsnaWRfcG9ydHVfa29uY293ZWdvJ106DQogICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGYiZXFfe3NlZ21lbnRbJ3NwcnpldF9lbmRfaWQnXX0iDQogICAgICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gZiJub2RlX3tzZWdtZW50WydpZF93ZXpsYV9rb25jb3dlZ28nXX0iDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgZWRnZXMuYXBwZW5kKHsNCiAgICAgICAgICAgICAgICAgICAgJ2lkJzogZiJzZWdfe3NlZ21lbnRbJ2lkJ119IiwNCiAgICAgICAgICAgICAgICAgICAgJ3NvdXJjZSc6IHNvdXJjZSwNCiAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6IHRhcmdldCwNCiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiBzZWdtZW50WyduYXp3YV9zZWdtZW50dSddLA0KICAgICAgICAgICAgICAgICAgICAndmFsdmVfc3RhdGUnOiBzZWdtZW50WydzdGFuX3phd29ydSddLA0KICAgICAgICAgICAgICAgICAgICAnYWN0aXZlJzogc2VnbWVudFsnc3Rhbl96YXdvcnUnXSA9PSAnT1RXQVJUWScNCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgDQogICAgICAgICAgICByZXR1cm4gew0KICAgICAgICAgICAgICAgICdub2Rlcyc6IG5vZGVzLA0KICAgICAgICAgICAgICAgICdlZGdlcyc6IGVkZ2VzLA0KICAgICAgICAgICAgICAgICd0aW1lc3RhbXAnOiBkYXRldGltZS5ub3codGltZXpvbmUudXRjKS5pc29mb3JtYXQoKQ0KICAgICAgICAgICAgfQ0KICAgICAgICBmaW5hbGx5Og0KICAgICAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgIA0KICAgIGRlZiBnZXRfdG9wb2xvZ3lfdGV4dChzZWxmKToNCiAgICAgICAgIiIiWndyYWNhIHRla3N0b3d5IG9waXMgdG9wb2xvZ2lpIiIiDQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICAgICAgU0VMRUNUIHMubmF6d2Ffc2VnbWVudHUsIHoubmF6d2FfemF3b3J1LCB6LnN0YW4gYXMgc3Rhbl96YXdvcnUsDQogICAgICAgICAgICAgICAgICAgICAgIENPQUxFU0NFKHBzX3N0YXJ0Lm5hendhX3BvcnR1LCB3c19zdGFydC5uYXp3YV93ZXpsYSkgYXMgcHVua3Rfc3RhcnRvd3ksDQogICAgICAgICAgICAgICAgICAgICAgIENPQUxFU0NFKHBzX2VuZC5uYXp3YV9wb3J0dSwgd3NfZW5kLm5hendhX3dlemxhKSBhcyBwdW5rdF9rb25jb3d5LA0KICAgICAgICAgICAgICAgICAgICAgICBDT0FMRVNDRShzcF9zdGFydC5uYXp3YV91bmlrYWxuYSwgJycpIGFzIHNwcnpldF9zdGFydG93eSwNCiAgICAgICAgICAgICAgICAgICAgICAgQ09BTEVTQ0Uoc3BfZW5kLm5hendhX3VuaWthbG5hLCAnJykgYXMgc3ByemV0X2tvbmNvd3kNCiAgICAgICAgICAgICAgICBGUk9NIHNlZ21lbnR5IHMNCiAgICAgICAgICAgICAgICBKT0lOIHphd29yeSB6IE9OIHMuaWRfemF3b3J1ID0gei5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiBwb3J0eV9zcHJ6ZXR1IHBzX3N0YXJ0IE9OIHMuaWRfcG9ydHVfc3RhcnRvd2VnbyA9IHBzX3N0YXJ0LmlkDQogICAgICAgICAgICAgICAgTEVGVCBKT0lOIHBvcnR5X3NwcnpldHUgcHNfZW5kIE9OIHMuaWRfcG9ydHVfa29uY293ZWdvID0gcHNfZW5kLmlkDQogICAgICAgICAgICAgICAgTEVGVCBKT0lOIHdlemx5X3J1cm9jaWFndSB3c19zdGFydCBPTiBzLmlkX3dlemxhX3N0YXJ0b3dlZ28gPSB3c19zdGFydC5pZA0KICAgICAgICAgICAgICAgIExFRlQgSk9JTiB3ZXpseV9ydXJvY2lhZ3Ugd3NfZW5kIE9OIHMuaWRfd2V6bGFfa29uY293ZWdvID0gd3NfZW5kLmlkDQogICAgICAgICAgICAgICAgTEVGVCBKT0lOIHNwcnpldCBzcF9zdGFydCBPTiBwc19zdGFydC5pZF9zcHJ6ZXR1ID0gc3Bfc3RhcnQuaWQNCiAgICAgICAgICAgICAgICBMRUZUIEpPSU4gc3ByemV0IHNwX2VuZCBPTiBwc19lbmQuaWRfc3ByemV0dSA9IHNwX2VuZC5pZA0KICAgICAgICAgICAgICAgIE9SREVSIEJZIHMubmF6d2Ffc2VnbWVudHUNCiAgICAgICAgICAgICIiIikNCiAgICAgICAgICAgIHNlZ21lbnRzID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgdGV4dF9saW5lcyA9IFsiPT09IE1BUEEgVE9QT0xPR0lJIFJVUk9DScSER1UgPT09IiwgIiJdDQogICAgICAgICAgICANCiAgICAgICAgICAgIGZvciBzZWcgaW4gc2VnbWVudHM6DQogICAgICAgICAgICAgICAgc3RhcnRfZGVzYyA9IGYie3NlZ1snc3ByemV0X3N0YXJ0b3d5J119OntzZWdbJ3B1bmt0X3N0YXJ0b3d5J119IiBpZiBzZWdbJ3NwcnpldF9zdGFydG93eSddIGVsc2Ugc2VnWydwdW5rdF9zdGFydG93eSddDQogICAgICAgICAgICAgICAgZW5kX2Rlc2MgPSBmIntzZWdbJ3NwcnpldF9rb25jb3d5J119OntzZWdbJ3B1bmt0X2tvbmNvd3knXX0iIGlmIHNlZ1snc3ByemV0X2tvbmNvd3knXSBlbHNlIHNlZ1sncHVua3Rfa29uY293eSddDQogICAgICAgICAgICAgICAgdmFsdmVfc3RhdHVzID0gIvCfn6IgT1RXQVJUWSIgaWYgc2VnWydzdGFuX3phd29ydSddID09ICdPVFdBUlRZJyBlbHNlICLwn5S0IFpBTUtOScSYVFkiDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgdGV4dF9saW5lcy5hcHBlbmQoZiJ7c2VnWyduYXp3YV9zZWdtZW50dSddfToge3N0YXJ0X2Rlc2N9IOKGkOKGkiB7ZW5kX2Rlc2N9IikNCiAgICAgICAgICAgICAgICB0ZXh0X2xpbmVzLmFwcGVuZChmIiAgWmF3w7NyOiB7c2VnWyduYXp3YV96YXdvcnUnXX0gKHt2YWx2ZV9zdGF0dXN9KSIpDQogICAgICAgICAgICAgICAgdGV4dF9saW5lcy5hcHBlbmQoIiIpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiAiXG4iLmpvaW4odGV4dF9saW5lcykNCiAgICAgICAgZmluYWxseToNCiAgICAgICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgICAgICBjb25uLmNsb3NlKCkNCg==
  - path: app//topology_routes.py
    content: IyBhcHAvdG9wb2xvZ3lfcm91dGVzLnB5DQojIHR5cGU6IGlnbm9yZQ0KDQpmcm9tIGZsYXNrIGltcG9ydCBCbHVlcHJpbnQsIGpzb25pZnksIHJlcXVlc3QsIHJlbmRlcl90ZW1wbGF0ZQ0KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUsIHRpbWV6b25lDQpmcm9tIC50b3BvbG9neV9tYW5hZ2VyIGltcG9ydCBUb3BvbG9neU1hbmFnZXINCmZyb20gLnBhdGhmaW5kZXJfdGVzdGVyIGltcG9ydCBQYXRoRmluZGVyVGVzdGVyDQpmcm9tIC5kYiBpbXBvcnQgZ2V0X2RiX2Nvbm5lY3Rpb24NCmltcG9ydCB0aW1lDQppbXBvcnQganNvbg0KDQojIFR3b3J6ZW5pZSBibHVlcHJpbnQgZGxhIHRvcG9sb2dpaQ0KdG9wb2xvZ3lfYnAgPSBCbHVlcHJpbnQoJ3RvcG9sb2d5JywgX19uYW1lX18sIHVybF9wcmVmaXg9Jy90b3BvbG9neScpDQoNCiMgSW5pY2phbGl6YWNqYSBtZW5lZMW8ZXLDs3cNCnRvcG9sb2d5X21hbmFnZXIgPSBUb3BvbG9neU1hbmFnZXIoKQ0KcGF0aGZpbmRlcl90ZXN0ZXIgPSBQYXRoRmluZGVyVGVzdGVyKCkNCg0KIyA9PT09PT09PT09PT09PT09PT0gV0lET0tJIEhUTUwgPT09PT09PT09PT09PT09PT09DQoNCkB0b3BvbG9neV9icC5yb3V0ZSgnLycpDQpkZWYgdG9wb2xvZ3lfaW5kZXgoKToNCiAgICAiIiJHxYLDs3duYSBzdHJvbmEgemFyesSFZHphbmlhIHRvcG9sb2dpxIUiIiINCiAgICByZXR1cm4gcmVuZGVyX3RlbXBsYXRlKCd0b3BvbG9neS9pbmRleC5odG1sJykNCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvemF3b3J5JykNCmRlZiB6YXdvcnlfdmlldygpOg0KICAgICIiIlN0cm9uYSB6YXJ6xIVkemFuaWEgemF3b3JhbWkiIiINCiAgICB6YXdvcnkgPSB0b3BvbG9neV9tYW5hZ2VyLmdldF96YXdvcnkoaW5jbHVkZV9zZWdtZW50cz1UcnVlKQ0KICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ3RvcG9sb2d5L3phd29yeS5odG1sJywgemF3b3J5PXphd29yeSkNCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvd2V6bHknKQ0KZGVmIHdlemx5X3ZpZXcoKToNCiAgICAiIiJTdHJvbmEgemFyesSFZHphbmlhIHfEmXrFgmFtaSIiIg0KICAgIHdlemx5ID0gdG9wb2xvZ3lfbWFuYWdlci5nZXRfd2V6bHkoaW5jbHVkZV9zZWdtZW50cz1UcnVlKQ0KICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ3RvcG9sb2d5L3dlemx5Lmh0bWwnLCB3ZXpseT13ZXpseSkNCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvc2VnbWVudHknKQ0KZGVmIHNlZ21lbnR5X3ZpZXcoKToNCiAgICAiIiJTdHJvbmEgemFyesSFZHphbmlhIHNlZ21lbnRhbWkiIiINCiAgICBzZWdtZW50eSA9IHRvcG9sb2d5X21hbmFnZXIuZ2V0X3NlZ21lbnR5KGluY2x1ZGVfZGV0YWlscz1UcnVlKQ0KICAgIHJldHVybiByZW5kZXJfdGVtcGxhdGUoJ3RvcG9sb2d5L3NlZ21lbnR5Lmh0bWwnLCBzZWdtZW50eT1zZWdtZW50eSkNCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvdmlzdWFsaXphdGlvbicpDQpkZWYgdmlzdWFsaXphdGlvbl92aWV3KCk6DQogICAgIiIiU3Ryb25hIHdpenVhbGl6YWNqaSB0b3BvbG9naWkiIiINCiAgICByZXR1cm4gcmVuZGVyX3RlbXBsYXRlKCd0b3BvbG9neS92aXN1YWxpemF0aW9uLmh0bWwnKQ0KDQpAdG9wb2xvZ3lfYnAucm91dGUoJy9wYXRoZmluZGVyJykNCmRlZiBwYXRoZmluZGVyX3ZpZXcoKToNCiAgICAiIiJTdHJvbmEgdGVzdGVyYSBQYXRoRmluZGVyIiIiDQogICAgIyBQb2JpZXJ6IGRvc3TEmXBuZSBwdW5rdHkgZG8gdGVzdG93YW5pYQ0KICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgIHRyeToNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICBTRUxFQ1QgRElTVElOQ1QgbmF6d2FfcG9ydHUgYXMgcHVua3QsICdwb3J0JyBhcyB0eXAgRlJPTSBwb3J0eV9zcHJ6ZXR1DQogICAgICAgICAgICBVTklPTg0KICAgICAgICAgICAgU0VMRUNUIERJU1RJTkNUIG5hendhX3dlemxhIGFzIHB1bmt0LCAnd2V6ZWwnIGFzIHR5cCBGUk9NIHdlemx5X3J1cm9jaWFndQ0KICAgICAgICAgICAgT1JERVIgQlkgcHVua3QNCiAgICAgICAgIiIiKQ0KICAgICAgICBwdW5rdHkgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICANCiAgICAgICAgIyBQb2JpZXJ6IHphd29yeSBkbyBzZWxlY3RhDQogICAgICAgIGN1cnNvci5leGVjdXRlKCJTRUxFQ1QgaWQsIG5hendhX3phd29ydSwgc3RhbiBGUk9NIHphd29yeSBPUkRFUiBCWSBuYXp3YV96YXdvcnUiKQ0KICAgICAgICB6YXdvcnkgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICANCiAgICAgICAgIyBQb2JpZXJ6IGhpc3RvcmnEmSB0ZXN0w7N3DQogICAgICAgIGhpc3RvcnkgPSBwYXRoZmluZGVyX3Rlc3Rlci5nZXRfdGVzdF9oaXN0b3J5KGxpbWl0PTIwKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIHJlbmRlcl90ZW1wbGF0ZSgndG9wb2xvZ3kvcGF0aGZpbmRlci5odG1sJywgDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1bmt0eT1wdW5rdHksIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICB6YXdvcnk9emF3b3J5LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXN0X2hpc3Rvcnk9aGlzdG9yeS5nZXQoJ3Rlc3RfaGlzdG9yeScsIFtdKSkNCiAgICBmaW5hbGx5Og0KICAgICAgICBjdXJzb3IuY2xvc2UoKQ0KICAgICAgICBjb25uLmNsb3NlKCkNCg0KIyA9PT09PT09PT09PT09PT09PT0gQVBJIFpBV09SWSA9PT09PT09PT09PT09PT09PT0NCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3phd29yeScsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBhcGlfZ2V0X3phd29yeSgpOg0KICAgICIiIkFQSTogUG9iaWVyYSBsaXN0xJkgemF3b3LDs3ciIiINCiAgICBpbmNsdWRlX3NlZ21lbnRzID0gcmVxdWVzdC5hcmdzLmdldCgnaW5jbHVkZV9zZWdtZW50cycsICdmYWxzZScpLmxvd2VyKCkgPT0gJ3RydWUnDQogICAgemF3b3J5ID0gdG9wb2xvZ3lfbWFuYWdlci5nZXRfemF3b3J5KGluY2x1ZGVfc2VnbWVudHM9aW5jbHVkZV9zZWdtZW50cykNCiAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICdzdWNjZXNzJzogVHJ1ZSwNCiAgICAgICAgJ2RhdGEnOiB6YXdvcnksDQogICAgICAgICdjb3VudCc6IGxlbih6YXdvcnkpDQogICAgfSkNCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3phd29yeS88aW50Onphd29yX2lkPicsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBhcGlfZ2V0X3phd29yKHphd29yX2lkKToNCiAgICAiIiJBUEk6IFBvYmllcmEgc3pjemVnw7PFgnkgemF3b3J1IiIiDQogICAgemF3b3IgPSB0b3BvbG9neV9tYW5hZ2VyLmdldF96YXdvcih6YXdvcl9pZCkNCiAgICBpZiB6YXdvcjoNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiB6YXdvcg0KICAgICAgICB9KQ0KICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgJ21lc3NhZ2UnOiAnWmF3w7NyIG5pZSB6b3N0YcWCIHpuYWxlemlvbnknDQogICAgfSksIDQwNA0KDQpAdG9wb2xvZ3lfYnAucm91dGUoJy9hcGkvemF3b3J5JywgbWV0aG9kcz1bJ1BPU1QnXSkNCmRlZiBhcGlfY3JlYXRlX3phd29yKCk6DQogICAgIiIiQVBJOiBUd29yenkgbm93eSB6YXfDs3IiIiINCiAgICBkYXRhID0gcmVxdWVzdC5nZXRfanNvbigpDQogICAgaWYgbm90IGRhdGEgb3IgJ25hendhX3phd29ydScgbm90IGluIGRhdGE6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAnbWVzc2FnZSc6ICdXeW1hZ2FuYSBqZXN0IG5hendhIHphd29ydScNCiAgICAgICAgfSksIDQwMA0KICAgIA0KICAgIHRyeToNCiAgICAgICAgemF3b3JfaWQgPSB0b3BvbG9neV9tYW5hZ2VyLmNyZWF0ZV96YXdvcigNCiAgICAgICAgICAgIG5hendhX3phd29ydT1kYXRhWyduYXp3YV96YXdvcnUnXSwNCiAgICAgICAgICAgIHN0YW49ZGF0YS5nZXQoJ3N0YW4nLCAnWkFNS05JRVRZJykNCiAgICAgICAgKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiB7J2lkJzogemF3b3JfaWR9LA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiAnWmF3w7NyIHpvc3RhxYIgdXR3b3J6b255Jw0KICAgICAgICB9KSwgMjAxDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ0LFgsSFZCBwb2RjemFzIHR3b3J6ZW5pYSB6YXdvcnU6IHtzdHIoZSl9Jw0KICAgICAgICB9KSwgNTAwDQoNCkB0b3BvbG9neV9icC5yb3V0ZSgnL2FwaS96YXdvcnkvPGludDp6YXdvcl9pZD4nLCBtZXRob2RzPVsnUFVUJ10pDQpkZWYgYXBpX3VwZGF0ZV96YXdvcih6YXdvcl9pZCk6DQogICAgIiIiQVBJOiBBa3R1YWxpenVqZSB6YXfDs3IiIiINCiAgICBkYXRhID0gcmVxdWVzdC5nZXRfanNvbigpDQogICAgaWYgbm90IGRhdGE6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAnbWVzc2FnZSc6ICdCcmFrIGRhbnljaCBkbyBha3R1YWxpemFjamknDQogICAgICAgIH0pLCA0MDANCiAgICANCiAgICB0cnk6DQogICAgICAgIHN1Y2Nlc3MgPSB0b3BvbG9neV9tYW5hZ2VyLnVwZGF0ZV96YXdvcigNCiAgICAgICAgICAgIHphd29yX2lkPXphd29yX2lkLA0KICAgICAgICAgICAgbmF6d2FfemF3b3J1PWRhdGEuZ2V0KCduYXp3YV96YXdvcnUnKSwNCiAgICAgICAgICAgIHN0YW49ZGF0YS5nZXQoJ3N0YW4nKQ0KICAgICAgICApDQogICAgICAgIA0KICAgICAgICBpZiBzdWNjZXNzOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgICAgICdzdWNjZXNzJzogVHJ1ZSwNCiAgICAgICAgICAgICAgICAnbWVzc2FnZSc6ICdaYXfDs3Igem9zdGHFgiB6YWt0dWFsaXpvd2FueScNCiAgICAgICAgICAgIH0pDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICAgICAnbWVzc2FnZSc6ICdaYXfDs3IgbmllIHpvc3RhxYIgem5hbGV6aW9ueSBsdWIgYnJhayB6bWlhbicNCiAgICAgICAgICAgIH0pLCA0MDQNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAnbWVzc2FnZSc6IGYnQsWCxIVkIHBvZGN6YXMgYWt0dWFsaXphY2ppIHphd29ydToge3N0cihlKX0nDQogICAgICAgIH0pLCA1MDANCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3phd29yeS88aW50Onphd29yX2lkPicsIG1ldGhvZHM9WydERUxFVEUnXSkNCmRlZiBhcGlfZGVsZXRlX3phd29yKHphd29yX2lkKToNCiAgICAiIiJBUEk6IFVzdXdhIHphd8OzciIiIg0KICAgIHRyeToNCiAgICAgICAgc3VjY2VzcywgbWVzc2FnZSA9IHRvcG9sb2d5X21hbmFnZXIuZGVsZXRlX3phd29yKHphd29yX2lkKQ0KICAgICAgICANCiAgICAgICAgaWYgc3VjY2VzczoNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBtZXNzYWdlDQogICAgICAgICAgICB9KQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBtZXNzYWdlDQogICAgICAgICAgICB9KSwgNDAwDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ0LFgsSFZCBwb2RjemFzIHVzdXdhbmlhIHphd29ydToge3N0cihlKX0nDQogICAgICAgIH0pLCA1MDANCg0KIyA9PT09PT09PT09PT09PT09PT0gQVBJIFfEmFrFgVkgPT09PT09PT09PT09PT09PT09DQoNCkB0b3BvbG9neV9icC5yb3V0ZSgnL2FwaS93ZXpseScsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBhcGlfZ2V0X3dlemx5KCk6DQogICAgIiIiQVBJOiBQb2JpZXJhIGxpc3TEmSB3xJl6xYLDs3ciIiINCiAgICBpbmNsdWRlX3NlZ21lbnRzID0gcmVxdWVzdC5hcmdzLmdldCgnaW5jbHVkZV9zZWdtZW50cycsICdmYWxzZScpLmxvd2VyKCkgPT0gJ3RydWUnDQogICAgd2V6bHkgPSB0b3BvbG9neV9tYW5hZ2VyLmdldF93ZXpseShpbmNsdWRlX3NlZ21lbnRzPWluY2x1ZGVfc2VnbWVudHMpDQogICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICdkYXRhJzogd2V6bHksDQogICAgICAgICdjb3VudCc6IGxlbih3ZXpseSkNCiAgICB9KQ0KDQpAdG9wb2xvZ3lfYnAucm91dGUoJy9hcGkvd2V6bHkvPGludDp3ZXplbF9pZD4nLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgYXBpX2dldF93ZXplbCh3ZXplbF9pZCk6DQogICAgIiIiQVBJOiBQb2JpZXJhIHN6Y3plZ8OzxYJ5IHfEmXrFgmEiIiINCiAgICB3ZXplbCA9IHRvcG9sb2d5X21hbmFnZXIuZ2V0X3dlemVsKHdlemVsX2lkKQ0KICAgIGlmIHdlemVsOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAnZGF0YSc6IHdlemVsDQogICAgICAgIH0pDQogICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAnbWVzc2FnZSc6ICdXxJl6ZcWCIG5pZSB6b3N0YcWCIHpuYWxlemlvbnknDQogICAgfSksIDQwNA0KDQpAdG9wb2xvZ3lfYnAucm91dGUoJy9hcGkvd2V6bHknLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIGFwaV9jcmVhdGVfd2V6ZWwoKToNCiAgICAiIiJBUEk6IFR3b3J6eSBub3d5IHfEmXplxYIiIiINCiAgICBkYXRhID0gcmVxdWVzdC5nZXRfanNvbigpDQogICAgaWYgbm90IGRhdGEgb3IgJ25hendhX3dlemxhJyBub3QgaW4gZGF0YToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogJ1d5bWFnYW5hIGplc3QgbmF6d2Egd8SZesWCYScNCiAgICAgICAgfSksIDQwMA0KICAgIA0KICAgIHRyeToNCiAgICAgICAgd2V6ZWxfaWQgPSB0b3BvbG9neV9tYW5hZ2VyLmNyZWF0ZV93ZXplbChkYXRhWyduYXp3YV93ZXpsYSddKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiB7J2lkJzogd2V6ZWxfaWR9LA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiAnV8SZemXFgiB6b3N0YcWCIHV0d29yem9ueScNCiAgICAgICAgfSksIDIwMQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidCxYLEhWQgcG9kY3phcyB0d29yemVuaWEgd8SZesWCYToge3N0cihlKX0nDQogICAgICAgIH0pLCA1MDANCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3dlemx5LzxpbnQ6d2V6ZWxfaWQ+JywgbWV0aG9kcz1bJ1BVVCddKQ0KZGVmIGFwaV91cGRhdGVfd2V6ZWwod2V6ZWxfaWQpOg0KICAgICIiIkFQSTogQWt0dWFsaXp1amUgd8SZemXFgiIiIg0KICAgIGRhdGEgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICBpZiBub3QgZGF0YSBvciAnbmF6d2Ffd2V6bGEnIG5vdCBpbiBkYXRhOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiAnV3ltYWdhbmEgamVzdCBuYXp3YSB3xJl6xYJhJw0KICAgICAgICB9KSwgNDAwDQogICAgDQogICAgdHJ5Og0KICAgICAgICBzdWNjZXNzID0gdG9wb2xvZ3lfbWFuYWdlci51cGRhdGVfd2V6ZWwod2V6ZWxfaWQsIGRhdGFbJ25hendhX3dlemxhJ10pDQogICAgICAgIA0KICAgICAgICBpZiBzdWNjZXNzOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgICAgICdzdWNjZXNzJzogVHJ1ZSwNCiAgICAgICAgICAgICAgICAnbWVzc2FnZSc6ICdXxJl6ZcWCIHpvc3RhxYIgemFrdHVhbGl6b3dhbnknDQogICAgICAgICAgICB9KQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiAnV8SZemXFgiBuaWUgem9zdGHFgiB6bmFsZXppb255Jw0KICAgICAgICAgICAgfSksIDQwNA0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidCxYLEhWQgcG9kY3phcyBha3R1YWxpemFjamkgd8SZesWCYToge3N0cihlKX0nDQogICAgICAgIH0pLCA1MDANCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3dlemx5LzxpbnQ6d2V6ZWxfaWQ+JywgbWV0aG9kcz1bJ0RFTEVURSddKQ0KZGVmIGFwaV9kZWxldGVfd2V6ZWwod2V6ZWxfaWQpOg0KICAgICIiIkFQSTogVXN1d2Egd8SZemXFgiIiIg0KICAgIHRyeToNCiAgICAgICAgc3VjY2VzcywgbWVzc2FnZSA9IHRvcG9sb2d5X21hbmFnZXIuZGVsZXRlX3dlemVsKHdlemVsX2lkKQ0KICAgICAgICANCiAgICAgICAgaWYgc3VjY2VzczoNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBtZXNzYWdlDQogICAgICAgICAgICB9KQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBtZXNzYWdlDQogICAgICAgICAgICB9KSwgNDAwDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ0LFgsSFZCBwb2RjemFzIHVzdXdhbmlhIHfEmXrFgmE6IHtzdHIoZSl9Jw0KICAgICAgICB9KSwgNTAwDQoNCiMgPT09PT09PT09PT09PT09PT09IEFQSSBTRUdNRU5UWSA9PT09PT09PT09PT09PT09PT0NCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3NlZ21lbnR5JywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGFwaV9nZXRfc2VnbWVudHkoKToNCiAgICAiIiJBUEk6IFBvYmllcmEgbGlzdMSZIHNlZ21lbnTDs3ciIiINCiAgICBpbmNsdWRlX2RldGFpbHMgPSByZXF1ZXN0LmFyZ3MuZ2V0KCdpbmNsdWRlX2RldGFpbHMnLCAndHJ1ZScpLmxvd2VyKCkgPT0gJ3RydWUnDQogICAgc2VnbWVudHkgPSB0b3BvbG9neV9tYW5hZ2VyLmdldF9zZWdtZW50eShpbmNsdWRlX2RldGFpbHM9aW5jbHVkZV9kZXRhaWxzKQ0KICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAnZGF0YSc6IHNlZ21lbnR5LA0KICAgICAgICAnY291bnQnOiBsZW4oc2VnbWVudHkpDQogICAgfSkNCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3NlZ21lbnR5LzxpbnQ6c2VnbWVudF9pZD4nLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgYXBpX2dldF9zZWdtZW50KHNlZ21lbnRfaWQpOg0KICAgICIiIkFQSTogUG9iaWVyYSBzemN6ZWfDs8WCeSBzZWdtZW50dSIiIg0KICAgIHNlZ21lbnQgPSB0b3BvbG9neV9tYW5hZ2VyLmdldF9zZWdtZW50KHNlZ21lbnRfaWQpDQogICAgaWYgc2VnbWVudDoNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiBzZWdtZW50DQogICAgICAgIH0pDQogICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAnbWVzc2FnZSc6ICdTZWdtZW50IG5pZSB6b3N0YcWCIHpuYWxlemlvbnknDQogICAgfSksIDQwNA0KDQpAdG9wb2xvZ3lfYnAucm91dGUoJy9hcGkvc2VnbWVudHknLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIGFwaV9jcmVhdGVfc2VnbWVudCgpOg0KICAgICIiIkFQSTogVHdvcnp5IG5vd3kgc2VnbWVudCIiIg0KICAgIGRhdGEgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICBpZiBub3QgZGF0YToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogJ0JyYWsgZGFueWNoJw0KICAgICAgICB9KSwgNDAwDQogICAgDQogICAgcmVxdWlyZWRfZmllbGRzID0gWyduYXp3YV9zZWdtZW50dScsICdpZF96YXdvcnUnXQ0KICAgIGlmIG5vdCBhbGwoZmllbGQgaW4gZGF0YSBmb3IgZmllbGQgaW4gcmVxdWlyZWRfZmllbGRzKToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogJ1d5bWFnYW5lIHBvbGE6IG5hendhX3NlZ21lbnR1LCBpZF96YXdvcnUnDQogICAgICAgIH0pLCA0MDANCiAgICANCiAgICB0cnk6DQogICAgICAgIHNlZ21lbnRfaWQsIG1lc3NhZ2UgPSB0b3BvbG9neV9tYW5hZ2VyLmNyZWF0ZV9zZWdtZW50KA0KICAgICAgICAgICAgbmF6d2Ffc2VnbWVudHU9ZGF0YVsnbmF6d2Ffc2VnbWVudHUnXSwNCiAgICAgICAgICAgIGlkX3phd29ydT1kYXRhWydpZF96YXdvcnUnXSwNCiAgICAgICAgICAgIGlkX3BvcnR1X3N0YXJ0b3dlZ289ZGF0YS5nZXQoJ2lkX3BvcnR1X3N0YXJ0b3dlZ28nKSwNCiAgICAgICAgICAgIGlkX3dlemxhX3N0YXJ0b3dlZ289ZGF0YS5nZXQoJ2lkX3dlemxhX3N0YXJ0b3dlZ28nKSwNCiAgICAgICAgICAgIGlkX3BvcnR1X2tvbmNvd2Vnbz1kYXRhLmdldCgnaWRfcG9ydHVfa29uY293ZWdvJyksDQogICAgICAgICAgICBpZF93ZXpsYV9rb25jb3dlZ289ZGF0YS5nZXQoJ2lkX3dlemxhX2tvbmNvd2VnbycpDQogICAgICAgICkNCiAgICAgICAgDQogICAgICAgIGlmIHNlZ21lbnRfaWQ6DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgICAgICdkYXRhJzogeydpZCc6IHNlZ21lbnRfaWR9LA0KICAgICAgICAgICAgICAgICdtZXNzYWdlJzogbWVzc2FnZQ0KICAgICAgICAgICAgfSksIDIwMQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBtZXNzYWdlDQogICAgICAgICAgICB9KSwgNDAwDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ0LFgsSFZCBwb2RjemFzIHR3b3J6ZW5pYSBzZWdtZW50dToge3N0cihlKX0nDQogICAgICAgIH0pLCA1MDANCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3NlZ21lbnR5LzxpbnQ6c2VnbWVudF9pZD4nLCBtZXRob2RzPVsnUFVUJ10pDQpkZWYgYXBpX3VwZGF0ZV9zZWdtZW50KHNlZ21lbnRfaWQpOg0KICAgICIiIkFQSTogQWt0dWFsaXp1amUgc2VnbWVudCIiIg0KICAgIGRhdGEgPSByZXF1ZXN0LmdldF9qc29uKCkNCiAgICBpZiBub3QgZGF0YToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogJ0JyYWsgZGFueWNoIGRvIGFrdHVhbGl6YWNqaScNCiAgICAgICAgfSksIDQwMA0KICAgIA0KICAgIHRyeToNCiAgICAgICAgc3VjY2VzcywgbWVzc2FnZSA9IHRvcG9sb2d5X21hbmFnZXIudXBkYXRlX3NlZ21lbnQoc2VnbWVudF9pZCwgKipkYXRhKQ0KICAgICAgICANCiAgICAgICAgaWYgc3VjY2VzczoNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBtZXNzYWdlDQogICAgICAgICAgICB9KQ0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBtZXNzYWdlDQogICAgICAgICAgICB9KSwgNDAwDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ0LFgsSFZCBwb2RjemFzIGFrdHVhbGl6YWNqaSBzZWdtZW50dToge3N0cihlKX0nDQogICAgICAgIH0pLCA1MDANCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3NlZ21lbnR5LzxpbnQ6c2VnbWVudF9pZD4nLCBtZXRob2RzPVsnREVMRVRFJ10pDQpkZWYgYXBpX2RlbGV0ZV9zZWdtZW50KHNlZ21lbnRfaWQpOg0KICAgICIiIkFQSTogVXN1d2Egc2VnbWVudCIiIg0KICAgIHRyeToNCiAgICAgICAgc3VjY2VzcywgbWVzc2FnZSA9IHRvcG9sb2d5X21hbmFnZXIuZGVsZXRlX3NlZ21lbnQoc2VnbWVudF9pZCkNCiAgICAgICAgDQogICAgICAgIGlmIHN1Y2Nlc3M6DQogICAgICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgICAgICdtZXNzYWdlJzogbWVzc2FnZQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgZWxzZToNCiAgICAgICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAgICAgICAgICdtZXNzYWdlJzogbWVzc2FnZQ0KICAgICAgICAgICAgfSksIDQwMA0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidCxYLEhWQgcG9kY3phcyB1c3V3YW5pYSBzZWdtZW50dToge3N0cihlKX0nDQogICAgICAgIH0pLCA1MDANCg0KIyA9PT09PT09PT09PT09PT09PT0gQVBJIFdJWlVBTElaQUNKQSA9PT09PT09PT09PT09PT09PT0NCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3Zpc3VhbGl6YXRpb24vZ3JhcGgnLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgYXBpX3RvcG9sb2d5X2dyYXBoKCk6DQogICAgIiIiQVBJOiBQb2JpZXJhIGRhbmUgdG9wb2xvZ2lpIHcgZm9ybWFjaWUgZ3JhZnUiIiINCiAgICB0cnk6DQogICAgICAgIGdyYXBoX2RhdGEgPSB0b3BvbG9neV9tYW5hZ2VyLmdldF90b3BvbG9neV9ncmFwaCgpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICdzdWNjZXNzJzogVHJ1ZSwNCiAgICAgICAgICAgICdkYXRhJzogZ3JhcGhfZGF0YQ0KICAgICAgICB9KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidCxYLEhWQgcG9kY3phcyBnZW5lcm93YW5pYSBncmFmdToge3N0cihlKX0nDQogICAgICAgIH0pLCA1MDANCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3Zpc3VhbGl6YXRpb24vdGV4dCcsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBhcGlfdG9wb2xvZ3lfdGV4dCgpOg0KICAgICIiIkFQSTogUG9iaWVyYSB0ZWtzdG93eSBvcGlzIHRvcG9sb2dpaSIiIg0KICAgIHRyeToNCiAgICAgICAgdGV4dF9kZXNjcmlwdGlvbiA9IHRvcG9sb2d5X21hbmFnZXIuZ2V0X3RvcG9sb2d5X3RleHQoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAnZGF0YSc6IHsNCiAgICAgICAgICAgICAgICAndGV4dCc6IHRleHRfZGVzY3JpcHRpb24sDQogICAgICAgICAgICAgICAgJ2dlbmVyYXRlZF9hdCc6IGRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpLmlzb2Zvcm1hdCgpDQogICAgICAgICAgICB9DQogICAgICAgIH0pDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ0LFgsSFZCBwb2RjemFzIGdlbmVyb3dhbmlhIG9waXN1OiB7c3RyKGUpfScNCiAgICAgICAgfSksIDUwMA0KDQojID09PT09PT09PT09PT09PT09PSBBUEkgUEFUSEZJTkRFUiA9PT09PT09PT09PT09PT09PT0NCg0KQHRvcG9sb2d5X2JwLnJvdXRlKCcvYXBpL3BhdGhmaW5kZXIvdGVzdC1jb25uZWN0aW9uJywgbWV0aG9kcz1bJ1BPU1QnXSkNCmRlZiBhcGlfdGVzdF9jb25uZWN0aW9uKCk6DQogICAgIiIiQVBJOiBUZXN0dWplIHBvxYLEhWN6ZW5pZSBtacSZZHp5IHB1bmt0YW1pIiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIHByaW50KGYiREVCVUc6IFBhdGhGaW5kZXIgQVBJIGNhbGxlZCB3aXRoIGRhdGE6IHtkYXRhfSIpDQogICAgDQogICAgaWYgbm90IGRhdGEgb3IgJ3N0YXJ0X3BvaW50JyBub3QgaW4gZGF0YSBvciAnZW5kX3BvaW50JyBub3QgaW4gZGF0YToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogJ1d5bWFnYW5lIHBvbGE6IHN0YXJ0X3BvaW50LCBlbmRfcG9pbnQnDQogICAgICAgIH0pLCA0MDANCiAgICANCiAgICBzdGFydF90aW1lID0gdGltZS50aW1lKCkNCiAgICANCiAgICB0cnk6DQogICAgICAgIHJlc3VsdCA9IHBhdGhmaW5kZXJfdGVzdGVyLnRlc3RfY29ubmVjdGlvbl9hdmFpbGFiaWxpdHkoDQogICAgICAgICAgICBzdGFydF9wb2ludD1kYXRhWydzdGFydF9wb2ludCddLA0KICAgICAgICAgICAgZW5kX3BvaW50PWRhdGFbJ2VuZF9wb2ludCddLA0KICAgICAgICAgICAgdmFsdmVfc3RhdGVzPWRhdGEuZ2V0KCd2YWx2ZV9zdGF0ZXMnKQ0KICAgICAgICApDQogICAgICAgIA0KICAgICAgICBwcmludChmIkRFQlVHOiBQYXRoRmluZGVyIHJlc3VsdDoge3Jlc3VsdH0iKQ0KICAgICAgICANCiAgICAgICAgZXhlY3V0aW9uX3RpbWUgPSBpbnQoKHRpbWUudGltZSgpIC0gc3RhcnRfdGltZSkgKiAxMDAwKQ0KICAgICAgICANCiAgICAgICAgIyBaYXBpc3ogd3luaWsgZG8gaGlzdG9yaWkNCiAgICAgICAgcGF0aGZpbmRlcl90ZXN0ZXIuc2F2ZV90ZXN0X3Jlc3VsdCgNCiAgICAgICAgICAgIHRlc3RfdHlwZT0nY29ubmVjdGlvbl90ZXN0JywNCiAgICAgICAgICAgIHN0YXJ0X3BvaW50PWRhdGFbJ3N0YXJ0X3BvaW50J10sDQogICAgICAgICAgICBlbmRfcG9pbnQ9ZGF0YVsnZW5kX3BvaW50J10sDQogICAgICAgICAgICB0ZXN0X3BhcmFtZXRlcnM9eyd2YWx2ZV9zdGF0ZXMnOiBkYXRhLmdldCgndmFsdmVfc3RhdGVzJyl9LA0KICAgICAgICAgICAgcmVzdWx0PXJlc3VsdCwNCiAgICAgICAgICAgIHN1Y2Nlc3M9cmVzdWx0LmdldCgnYXZhaWxhYmxlJywgRmFsc2UpLA0KICAgICAgICAgICAgZXhlY3V0aW9uX3RpbWVfbXM9ZXhlY3V0aW9uX3RpbWUNCiAgICAgICAgKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiByZXN1bHQsDQogICAgICAgICAgICAnZXhlY3V0aW9uX3RpbWVfbXMnOiBleGVjdXRpb25fdGltZQ0KICAgICAgICB9KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcHJpbnQoZiJERUJVRzogUGF0aEZpbmRlciBBUEkgZXJyb3I6IHtlfSIpDQogICAgICAgIGltcG9ydCB0cmFjZWJhY2sNCiAgICAgICAgdHJhY2ViYWNrLnByaW50X2V4YygpDQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAnbWVzc2FnZSc6IGYnQsWCxIVkIHBvZGN6YXMgdGVzdG93YW5pYSBwb8WCxIVjemVuaWE6IHtzdHIoZSl9Jw0KICAgICAgICB9KSwgNTAwDQoNCkB0b3BvbG9neV9icC5yb3V0ZSgnL2FwaS9wYXRoZmluZGVyL2ZpbmQtcGF0aHMnLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIGFwaV9maW5kX3BhdGhzKCk6DQogICAgIiIiQVBJOiBabmFqZHVqZSB3c3p5c3RraWUgxZtjaWXFvGtpIG1pxJlkenkgcHVua3RhbWkiIiINCiAgICBkYXRhID0gcmVxdWVzdC5nZXRfanNvbigpDQogICAgaWYgbm90IGRhdGEgb3IgJ3N0YXJ0X3BvaW50JyBub3QgaW4gZGF0YSBvciAnZW5kX3BvaW50JyBub3QgaW4gZGF0YToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogJ1d5bWFnYW5lIHBvbGE6IHN0YXJ0X3BvaW50LCBlbmRfcG9pbnQnDQogICAgICAgIH0pLCA0MDANCiAgICANCiAgICBzdGFydF90aW1lID0gdGltZS50aW1lKCkNCiAgICANCiAgICB0cnk6DQogICAgICAgIHJlc3VsdCA9IHBhdGhmaW5kZXJfdGVzdGVyLmZpbmRfYWxsX3BhdGhzKA0KICAgICAgICAgICAgc3RhcnRfcG9pbnQ9ZGF0YVsnc3RhcnRfcG9pbnQnXSwNCiAgICAgICAgICAgIGVuZF9wb2ludD1kYXRhWydlbmRfcG9pbnQnXSwNCiAgICAgICAgICAgIG1heF9wYXRocz1kYXRhLmdldCgnbWF4X3BhdGhzJywgNSkNCiAgICAgICAgKQ0KICAgICAgICANCiAgICAgICAgZXhlY3V0aW9uX3RpbWUgPSBpbnQoKHRpbWUudGltZSgpIC0gc3RhcnRfdGltZSkgKiAxMDAwKQ0KICAgICAgICANCiAgICAgICAgIyBaYXBpc3ogd3luaWsgZG8gaGlzdG9yaWkNCiAgICAgICAgcGF0aGZpbmRlcl90ZXN0ZXIuc2F2ZV90ZXN0X3Jlc3VsdCgNCiAgICAgICAgICAgIHRlc3RfdHlwZT0nZmluZF9wYXRocycsDQogICAgICAgICAgICBzdGFydF9wb2ludD1kYXRhWydzdGFydF9wb2ludCddLA0KICAgICAgICAgICAgZW5kX3BvaW50PWRhdGFbJ2VuZF9wb2ludCddLA0KICAgICAgICAgICAgdGVzdF9wYXJhbWV0ZXJzPXsnbWF4X3BhdGhzJzogZGF0YS5nZXQoJ21heF9wYXRocycsIDUpfSwNCiAgICAgICAgICAgIHJlc3VsdD1yZXN1bHQsDQogICAgICAgICAgICBzdWNjZXNzPXJlc3VsdC5nZXQoJ2NvdW50JywgMCkgPiAwLA0KICAgICAgICAgICAgZXhlY3V0aW9uX3RpbWVfbXM9ZXhlY3V0aW9uX3RpbWUNCiAgICAgICAgKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiByZXN1bHQsDQogICAgICAgICAgICAnZXhlY3V0aW9uX3RpbWVfbXMnOiBleGVjdXRpb25fdGltZQ0KICAgICAgICB9KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidCxYLEhWQgcG9kY3phcyB3eXN6dWtpd2FuaWEgxZtjaWXFvGVrOiB7c3RyKGUpfScNCiAgICAgICAgfSksIDUwMA0KDQpAdG9wb2xvZ3lfYnAucm91dGUoJy9hcGkvcGF0aGZpbmRlci9zaW11bGF0ZS12YWx2ZXMnLCBtZXRob2RzPVsnUE9TVCddKQ0KZGVmIGFwaV9zaW11bGF0ZV92YWx2ZXMoKToNCiAgICAiIiJBUEk6IFN5bXVsdWplIHptaWFueSBzdGFuw7N3IHphd29yw7N3IiIiDQogICAgZGF0YSA9IHJlcXVlc3QuZ2V0X2pzb24oKQ0KICAgIGlmIG5vdCBkYXRhIG9yICd2YWx2ZV9jaGFuZ2VzJyBub3QgaW4gZGF0YToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogJ1d5bWFnYW5lIHBvbGU6IHZhbHZlX2NoYW5nZXMnDQogICAgICAgIH0pLCA0MDANCiAgICANCiAgICBzdGFydF90aW1lID0gdGltZS50aW1lKCkNCiAgICANCiAgICB0cnk6DQogICAgICAgIHJlc3VsdCA9IHBhdGhmaW5kZXJfdGVzdGVyLnNpbXVsYXRlX3ZhbHZlX3N0YXRlcyhkYXRhWyd2YWx2ZV9jaGFuZ2VzJ10pDQogICAgICAgIA0KICAgICAgICBleGVjdXRpb25fdGltZSA9IGludCgodGltZS50aW1lKCkgLSBzdGFydF90aW1lKSAqIDEwMDApDQogICAgICAgIA0KICAgICAgICAjIFphcGlzeiB3eW5payBkbyBoaXN0b3JpaQ0KICAgICAgICBwYXRoZmluZGVyX3Rlc3Rlci5zYXZlX3Rlc3RfcmVzdWx0KA0KICAgICAgICAgICAgdGVzdF90eXBlPSd2YWx2ZV9zaW11bGF0aW9uJywNCiAgICAgICAgICAgIHN0YXJ0X3BvaW50PU5vbmUsDQogICAgICAgICAgICBlbmRfcG9pbnQ9Tm9uZSwNCiAgICAgICAgICAgIHRlc3RfcGFyYW1ldGVycz17J3ZhbHZlX2NoYW5nZXMnOiBkYXRhWyd2YWx2ZV9jaGFuZ2VzJ119LA0KICAgICAgICAgICAgcmVzdWx0PXJlc3VsdCwNCiAgICAgICAgICAgIHN1Y2Nlc3M9bGVuKHJlc3VsdC5nZXQoJ3NpbXVsYXRpb25fcmVzdWx0cycsIFtdKSkgPiAwLA0KICAgICAgICAgICAgZXhlY3V0aW9uX3RpbWVfbXM9ZXhlY3V0aW9uX3RpbWUNCiAgICAgICAgKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiByZXN1bHQsDQogICAgICAgICAgICAnZXhlY3V0aW9uX3RpbWVfbXMnOiBleGVjdXRpb25fdGltZQ0KICAgICAgICB9KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidCxYLEhWQgcG9kY3phcyBzeW11bGFjamkgemF3b3LDs3c6IHtzdHIoZSl9Jw0KICAgICAgICB9KSwgNTAwDQoNCkB0b3BvbG9neV9icC5yb3V0ZSgnL2FwaS9wYXRoZmluZGVyL2NyaXRpY2FsLXZhbHZlcycsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBhcGlfY3JpdGljYWxfdmFsdmVzKCk6DQogICAgIiIiQVBJOiBBbmFsaXp1amUga3J5dHljem5lIHphd29yeSIiIg0KICAgIHN0YXJ0X3RpbWUgPSB0aW1lLnRpbWUoKQ0KICAgIA0KICAgIHRyeToNCiAgICAgICAgcmVzdWx0ID0gcGF0aGZpbmRlcl90ZXN0ZXIuYW5hbHl6ZV9jcml0aWNhbF92YWx2ZXMoKQ0KICAgICAgICANCiAgICAgICAgZXhlY3V0aW9uX3RpbWUgPSBpbnQoKHRpbWUudGltZSgpIC0gc3RhcnRfdGltZSkgKiAxMDAwKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiByZXN1bHQsDQogICAgICAgICAgICAnZXhlY3V0aW9uX3RpbWVfbXMnOiBleGVjdXRpb25fdGltZQ0KICAgICAgICB9KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidCxYLEhWQgcG9kY3phcyBhbmFsaXp5IGtyeXR5Y3pueWNoIHphd29yw7N3OiB7c3RyKGUpfScNCiAgICAgICAgfSksIDUwMA0KDQpAdG9wb2xvZ3lfYnAucm91dGUoJy9hcGkvcGF0aGZpbmRlci9oaXN0b3J5JywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGFwaV9wYXRoZmluZGVyX2hpc3RvcnkoKToNCiAgICAiIiJBUEk6IFBvYmllcmEgaGlzdG9yacSZIHRlc3TDs3cgUGF0aEZpbmRlciIiIg0KICAgIGxpbWl0ID0gcmVxdWVzdC5hcmdzLmdldCgnbGltaXQnLCA1MCwgdHlwZT1pbnQpDQogICAgDQogICAgdHJ5Og0KICAgICAgICByZXN1bHQgPSBwYXRoZmluZGVyX3Rlc3Rlci5nZXRfdGVzdF9oaXN0b3J5KGxpbWl0PWxpbWl0KQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiByZXN1bHQNCiAgICAgICAgfSkNCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAnbWVzc2FnZSc6IGYnQsWCxIVkIHBvZGN6YXMgcG9iaWVyYW5pYSBoaXN0b3JpaToge3N0cihlKX0nDQogICAgICAgIH0pLCA1MDANCg0KIyA9PT09PT09PT09PT09PT09PT0gQVBJIFBPTU9DTklDWkUgPT09PT09PT09PT09PT09PT09DQoNCkB0b3BvbG9neV9icC5yb3V0ZSgnL2FwaS9wb3J0eScsIG1ldGhvZHM9WydHRVQnXSkNCmRlZiBhcGlfZ2V0X3BvcnR5KCk6DQogICAgIiIiQVBJOiBQb2JpZXJhIGxpc3TEmSBwb3J0w7N3IHNwcnrEmXR1IiIiDQogICAgdHJ5Og0KICAgICAgICBwb3J0eSA9IHRvcG9sb2d5X21hbmFnZXIuZ2V0X3BvcnR5X3NwcnpldHUoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAnZGF0YSc6IHBvcnR5LA0KICAgICAgICAgICAgJ2NvdW50JzogbGVuKHBvcnR5KQ0KICAgICAgICB9KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidCxYLEhWQgcG9kY3phcyBwb2JpZXJhbmlhIHBvcnTDs3c6IHtzdHIoZSl9Jw0KICAgICAgICB9KSwgNTAwDQoNCkB0b3BvbG9neV9icC5yb3V0ZSgnL2FwaS9zcHJ6ZXQnLCBtZXRob2RzPVsnR0VUJ10sIGVuZHBvaW50PSdhcGlfZ2V0X3NwcnpldF90b3BvbG9neScpDQpkZWYgYXBpX2dldF9zcHJ6ZXQoKToNCiAgICAiIiJBUEk6IFBvYmllcmEgbGlzdMSZIHNwcnrEmXR1IiIiDQogICAgdHJ5Og0KICAgICAgICBzcHJ6ZXQgPSB0b3BvbG9neV9tYW5hZ2VyLmdldF9zcHJ6ZXQoKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAnZGF0YSc6IHNwcnpldCwNCiAgICAgICAgICAgICdjb3VudCc6IGxlbihzcHJ6ZXQpDQogICAgICAgIH0pDQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IEZhbHNlLA0KICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ0LFgsSFZCBwb2RjemFzIHBvYmllcmFuaWEgc3ByesSZdHU6IHtzdHIoZSl9Jw0KICAgICAgICB9KSwgNTAwDQoNCkB0b3BvbG9neV9icC5yb3V0ZSgnL2FwaS9wb2ludHMnLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgYXBpX2dldF9wb2ludHMoKToNCiAgICAiIiJBUEk6IFBvYmllcmEgd3N6eXN0a2llIGRvc3TEmXBuZSBwdW5rdHkgKHBvcnR5ICsgd8SZesWCeSkiIiINCiAgICB0cnk6DQogICAgICAgIGNvbm4gPSBnZXRfZGJfY29ubmVjdGlvbigpDQogICAgICAgIGN1cnNvciA9IGNvbm4uY3Vyc29yKGRpY3Rpb25hcnk9VHJ1ZSkNCiAgICAgICAgDQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgU0VMRUNUIHAubmF6d2FfcG9ydHUgYXMgbmFtZSwgJ3BvcnQnIGFzIHR5cGUsIHMubmF6d2FfdW5pa2FsbmEgYXMgZXF1aXBtZW50LA0KICAgICAgICAgICAgICAgICAgIHMudHlwX3NwcnpldHUgYXMgZXF1aXBtZW50X3R5cGUsIHAudHlwX3BvcnR1IGFzIHBvcnRfdHlwZQ0KICAgICAgICAgICAgRlJPTSBwb3J0eV9zcHJ6ZXR1IHANCiAgICAgICAgICAgIEpPSU4gc3ByemV0IHMgT04gcC5pZF9zcHJ6ZXR1ID0gcy5pZA0KICAgICAgICAgICAgVU5JT04NCiAgICAgICAgICAgIFNFTEVDVCB3Lm5hendhX3dlemxhIGFzIG5hbWUsICdqdW5jdGlvbicgYXMgdHlwZSwgTlVMTCBhcyBlcXVpcG1lbnQsDQogICAgICAgICAgICAgICAgICAgTlVMTCBhcyBlcXVpcG1lbnRfdHlwZSwgTlVMTCBhcyBwb3J0X3R5cGUNCiAgICAgICAgICAgIEZST00gd2V6bHlfcnVyb2NpYWd1IHcNCiAgICAgICAgICAgIE9SREVSIEJZIG5hbWUNCiAgICAgICAgIiIiKQ0KICAgICAgICANCiAgICAgICAgcG9pbnRzID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgDQogICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiBwb2ludHMsDQogICAgICAgICAgICAnY291bnQnOiBsZW4ocG9pbnRzKQ0KICAgICAgICB9KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidCxYLEhWQgcG9kY3phcyBwb2JpZXJhbmlhIHB1bmt0w7N3OiB7c3RyKGUpfScNCiAgICAgICAgfSksIDUwMA0KDQpAdG9wb2xvZ3lfYnAucm91dGUoJy9hcGkvc3ByemV0LzxpbnQ6c3ByemV0X2lkPi9wb3J0eScsIG1ldGhvZHM9WydHRVQnXSwgZW5kcG9pbnQ9J2FwaV9nZXRfc3ByemV0X3BvcnRzJykNCmRlZiBhcGlfZ2V0X3NwcnpldF9wb3J0cyhzcHJ6ZXRfaWQpOg0KICAgICIiIkFQSTogUG9iaWVyYSBwb3J0eSBkbGEga29ua3JldG5lZ28gc3ByesSZdHUiIiINCiAgICB0cnk6DQogICAgICAgIHBvcnR5ID0gdG9wb2xvZ3lfbWFuYWdlci5nZXRfcG9ydHlfZGxhX3NwcnpldHUoc3ByemV0X2lkKQ0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAnZGF0YSc6IHBvcnR5LA0KICAgICAgICAgICAgJ2NvdW50JzogbGVuKHBvcnR5KQ0KICAgICAgICB9KQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBGYWxzZSwNCiAgICAgICAgICAgICdtZXNzYWdlJzogZidCxYLEhWQgcG9kY3phcyBwb2JpZXJhbmlhIHBvcnTDs3cgc3ByesSZdHU6IHtzdHIoZSl9Jw0KICAgICAgICB9KSwgNTAwDQoNCiMgPT09PT09PT09PT09PT09PT09IEFQSSBESUFHTk9TVFlDWk5FID09PT09PT09PT09PT09PT09PQ0KDQpAdG9wb2xvZ3lfYnAucm91dGUoJy9hcGkvaGVhbHRoLWNoZWNrJywgbWV0aG9kcz1bJ0dFVCddKQ0KZGVmIGFwaV9oZWFsdGhfY2hlY2soKToNCiAgICAiIiJBUEk6IFNwcmF3ZHphIHN0YW4gemRyb3dpYSB0b3BvbG9naWkgaSB3eWtyeXdhIHByb2JsZW15IiIiDQogICAgdHJ5Og0KICAgICAgICBjb25uID0gZ2V0X2RiX2Nvbm5lY3Rpb24oKQ0KICAgICAgICBjdXJzb3IgPSBjb25uLmN1cnNvcihkaWN0aW9uYXJ5PVRydWUpDQogICAgICAgIA0KICAgICAgICBoZWFsdGhfaXNzdWVzID0gW10NCiAgICAgICAgd2FybmluZ3MgPSBbXQ0KICAgICAgICANCiAgICAgICAgIyBTcHJhd2TFuiB6YXdvcnkgYmV6IHNlZ21lbnTDs3cNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICBTRUxFQ1Qgei5uYXp3YV96YXdvcnUgDQogICAgICAgICAgICBGUk9NIHphd29yeSB6IA0KICAgICAgICAgICAgTEVGVCBKT0lOIHNlZ21lbnR5IHMgT04gei5pZCA9IHMuaWRfemF3b3J1IA0KICAgICAgICAgICAgV0hFUkUgcy5pZCBJUyBOVUxMDQogICAgICAgICIiIikNCiAgICAgICAgb3JwaGFuZWRfdmFsdmVzID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgaWYgb3JwaGFuZWRfdmFsdmVzOg0KICAgICAgICAgICAgd2FybmluZ3MuYXBwZW5kKHsNCiAgICAgICAgICAgICAgICAndHlwZSc6ICdvcnBoYW5lZF92YWx2ZXMnLA0KICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZidabmFsZXppb25vIHtsZW4ob3JwaGFuZWRfdmFsdmVzKX0gemF3b3LDs3cgYmV6IHNlZ21lbnTDs3cnLA0KICAgICAgICAgICAgICAgICdpdGVtcyc6IFt2WyduYXp3YV96YXdvcnUnXSBmb3IgdiBpbiBvcnBoYW5lZF92YWx2ZXNdDQogICAgICAgICAgICB9KQ0KICAgICAgICANCiAgICAgICAgIyBTcHJhd2TFuiBzZWdtZW50eSBiZXogemF3b3LDs3cNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICBTRUxFQ1Qgcy5uYXp3YV9zZWdtZW50dSANCiAgICAgICAgICAgIEZST00gc2VnbWVudHkgcyANCiAgICAgICAgICAgIExFRlQgSk9JTiB6YXdvcnkgeiBPTiBzLmlkX3phd29ydSA9IHouaWQgDQogICAgICAgICAgICBXSEVSRSB6LmlkIElTIE5VTEwNCiAgICAgICAgIiIiKQ0KICAgICAgICBzZWdtZW50c193aXRob3V0X3ZhbHZlcyA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgIGlmIHNlZ21lbnRzX3dpdGhvdXRfdmFsdmVzOg0KICAgICAgICAgICAgaGVhbHRoX2lzc3Vlcy5hcHBlbmQoew0KICAgICAgICAgICAgICAgICd0eXBlJzogJ3NlZ21lbnRzX3dpdGhvdXRfdmFsdmVzJywNCiAgICAgICAgICAgICAgICAnbWVzc2FnZSc6IGYnWm5hbGV6aW9ubyB7bGVuKHNlZ21lbnRzX3dpdGhvdXRfdmFsdmVzKX0gc2VnbWVudMOzdyBiZXogemF3b3LDs3cnLA0KICAgICAgICAgICAgICAgICdpdGVtcyc6IFtzWyduYXp3YV9zZWdtZW50dSddIGZvciBzIGluIHNlZ21lbnRzX3dpdGhvdXRfdmFsdmVzXQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgDQogICAgICAgICMgU3ByYXdkxbogd8SZesWCeSBiZXogcG/FgsSFY3plxYQNCiAgICAgICAgY3Vyc29yLmV4ZWN1dGUoIiIiDQogICAgICAgICAgICBTRUxFQ1Qgdy5uYXp3YV93ZXpsYSANCiAgICAgICAgICAgIEZST00gd2V6bHlfcnVyb2NpYWd1IHcgDQogICAgICAgICAgICBMRUZUIEpPSU4gc2VnbWVudHkgczEgT04gdy5pZCA9IHMxLmlkX3dlemxhX3N0YXJ0b3dlZ28gDQogICAgICAgICAgICBMRUZUIEpPSU4gc2VnbWVudHkgczIgT04gdy5pZCA9IHMyLmlkX3dlemxhX2tvbmNvd2VnbyANCiAgICAgICAgICAgIFdIRVJFIHMxLmlkIElTIE5VTEwgQU5EIHMyLmlkIElTIE5VTEwNCiAgICAgICAgIiIiKQ0KICAgICAgICBpc29sYXRlZF9ub2RlcyA9IGN1cnNvci5mZXRjaGFsbCgpDQogICAgICAgIGlmIGlzb2xhdGVkX25vZGVzOg0KICAgICAgICAgICAgd2FybmluZ3MuYXBwZW5kKHsNCiAgICAgICAgICAgICAgICAndHlwZSc6ICdpc29sYXRlZF9ub2RlcycsDQogICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiBmJ1puYWxlemlvbm8ge2xlbihpc29sYXRlZF9ub2Rlcyl9IGl6b2xvd2FueWNoIHfEmXrFgsOzdycsDQogICAgICAgICAgICAgICAgJ2l0ZW1zJzogW25bJ25hendhX3dlemxhJ10gZm9yIG4gaW4gaXNvbGF0ZWRfbm9kZXNdDQogICAgICAgICAgICB9KQ0KICAgICAgICANCiAgICAgICAgIyBTcHJhd2TFuiBzcHJ6xJl0IGJleiBwb3J0w7N3DQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgU0VMRUNUIHMubmF6d2FfdW5pa2FsbmEgDQogICAgICAgICAgICBGUk9NIHNwcnpldCBzIA0KICAgICAgICAgICAgTEVGVCBKT0lOIHBvcnR5X3NwcnpldHUgcCBPTiBzLmlkID0gcC5pZF9zcHJ6ZXR1IA0KICAgICAgICAgICAgV0hFUkUgcC5pZCBJUyBOVUxMDQogICAgICAgICIiIikNCiAgICAgICAgZXF1aXBtZW50X3dpdGhvdXRfcG9ydHMgPSBjdXJzb3IuZmV0Y2hhbGwoKQ0KICAgICAgICBpZiBlcXVpcG1lbnRfd2l0aG91dF9wb3J0czoNCiAgICAgICAgICAgIHdhcm5pbmdzLmFwcGVuZCh7DQogICAgICAgICAgICAgICAgJ3R5cGUnOiAnZXF1aXBtZW50X3dpdGhvdXRfcG9ydHMnLA0KICAgICAgICAgICAgICAgICdtZXNzYWdlJzogZidabmFsZXppb25vIHtsZW4oZXF1aXBtZW50X3dpdGhvdXRfcG9ydHMpfSBzcHJ6xJl0w7N3IGJleiBwb3J0w7N3JywNCiAgICAgICAgICAgICAgICAnaXRlbXMnOiBbZVsnbmF6d2FfdW5pa2FsbmEnXSBmb3IgZSBpbiBlcXVpcG1lbnRfd2l0aG91dF9wb3J0c10NCiAgICAgICAgICAgIH0pDQogICAgICAgIA0KICAgICAgICAjIE9ibGljeiBvZ8OzbG55IHN0YW4gemRyb3dpYQ0KICAgICAgICB0b3RhbF9pc3N1ZXMgPSBsZW4oaGVhbHRoX2lzc3VlcykNCiAgICAgICAgdG90YWxfd2FybmluZ3MgPSBsZW4od2FybmluZ3MpDQogICAgICAgIA0KICAgICAgICBpZiB0b3RhbF9pc3N1ZXMgPiAwOg0KICAgICAgICAgICAgc3RhdHVzID0gJ2NyaXRpY2FsJw0KICAgICAgICAgICAgc3RhdHVzX21lc3NhZ2UgPSBmJ0tyeXR5Y3puZSBwcm9ibGVteSB3IHRvcG9sb2dpaToge3RvdGFsX2lzc3Vlc30nDQogICAgICAgIGVsaWYgdG90YWxfd2FybmluZ3MgPiAwOg0KICAgICAgICAgICAgc3RhdHVzID0gJ3dhcm5pbmcnDQogICAgICAgICAgICBzdGF0dXNfbWVzc2FnZSA9IGYnT3N0cnplxbxlbmlhIHcgdG9wb2xvZ2lpOiB7dG90YWxfd2FybmluZ3N9Jw0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc3RhdHVzID0gJ2hlYWx0aHknDQogICAgICAgICAgICBzdGF0dXNfbWVzc2FnZSA9ICdUb3BvbG9naWEgdyBkb2JyeW0gc3RhbmllJw0KICAgICAgICANCiAgICAgICAgY3Vyc29yLmNsb3NlKCkNCiAgICAgICAgY29ubi5jbG9zZSgpDQogICAgICAgIA0KICAgICAgICByZXR1cm4ganNvbmlmeSh7DQogICAgICAgICAgICAnc3VjY2Vzcyc6IFRydWUsDQogICAgICAgICAgICAnZGF0YSc6IHsNCiAgICAgICAgICAgICAgICAnc3RhdHVzJzogc3RhdHVzLA0KICAgICAgICAgICAgICAgICdtZXNzYWdlJzogc3RhdHVzX21lc3NhZ2UsDQogICAgICAgICAgICAgICAgJ2lzc3Vlcyc6IGhlYWx0aF9pc3N1ZXMsDQogICAgICAgICAgICAgICAgJ3dhcm5pbmdzJzogd2FybmluZ3MsDQogICAgICAgICAgICAgICAgJ3N1bW1hcnknOiB7DQogICAgICAgICAgICAgICAgICAgICd0b3RhbF9pc3N1ZXMnOiB0b3RhbF9pc3N1ZXMsDQogICAgICAgICAgICAgICAgICAgICd0b3RhbF93YXJuaW5ncyc6IHRvdGFsX3dhcm5pbmdzLA0KICAgICAgICAgICAgICAgICAgICAnY2hlY2tlZF9hdCc6IGRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpLmlzb2Zvcm1hdCgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAnbWVzc2FnZSc6IGYnQsWCxIVkIHBvZGN6YXMgc3ByYXdkemFuaWEgc3RhbnUgdG9wb2xvZ2lpOiB7c3RyKGUpfScNCiAgICAgICAgfSksIDUwMA0KDQpAdG9wb2xvZ3lfYnAucm91dGUoJy9hcGkvaXNvbGF0ZWQtbm9kZXMnLCBtZXRob2RzPVsnR0VUJ10pDQpkZWYgYXBpX2lzb2xhdGVkX25vZGVzKCk6DQogICAgIiIiQVBJOiBabmFqZHVqZSBpem9sb3dhbmUgd8SZesWCeSB3IHRvcG9sb2dpaSIiIg0KICAgIHRyeToNCiAgICAgICAgY29ubiA9IGdldF9kYl9jb25uZWN0aW9uKCkNCiAgICAgICAgY3Vyc29yID0gY29ubi5jdXJzb3IoZGljdGlvbmFyeT1UcnVlKQ0KICAgICAgICANCiAgICAgICAgIyBabmFqZMW6IHfEmXrFgnkgYmV6IHBvxYLEhWN6ZcWEDQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgU0VMRUNUIHcuaWQsIHcubmF6d2Ffd2V6bGEsIHcub3BpcywNCiAgICAgICAgICAgICAgICAgICBDT1VOVChzMS5pZCkgKyBDT1VOVChzMi5pZCkgYXMgY29ubmVjdGlvbnNfY291bnQNCiAgICAgICAgICAgIEZST00gd2V6bHlfcnVyb2NpYWd1IHcgDQogICAgICAgICAgICBMRUZUIEpPSU4gc2VnbWVudHkgczEgT04gdy5pZCA9IHMxLmlkX3dlemxhX3N0YXJ0b3dlZ28gDQogICAgICAgICAgICBMRUZUIEpPSU4gc2VnbWVudHkgczIgT04gdy5pZCA9IHMyLmlkX3dlemxhX2tvbmNvd2VnbyANCiAgICAgICAgICAgIEdST1VQIEJZIHcuaWQsIHcubmF6d2Ffd2V6bGEsIHcub3Bpcw0KICAgICAgICAgICAgSEFWSU5HIGNvbm5lY3Rpb25zX2NvdW50ID0gMA0KICAgICAgICAgICAgT1JERVIgQlkgdy5uYXp3YV93ZXpsYQ0KICAgICAgICAiIiIpDQogICAgICAgIGlzb2xhdGVkX25vZGVzID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgDQogICAgICAgICMgWm5hamTFuiB3xJl6xYJ5IHogdHlsa28gamVkbnltIHBvxYLEhWN6ZW5pZW0gKG1hcnR3ZSBrb8WEY2UpDQogICAgICAgIGN1cnNvci5leGVjdXRlKCIiIg0KICAgICAgICAgICAgU0VMRUNUIHcuaWQsIHcubmF6d2Ffd2V6bGEsIHcub3BpcywNCiAgICAgICAgICAgICAgICAgICBDT1VOVChzMS5pZCkgKyBDT1VOVChzMi5pZCkgYXMgY29ubmVjdGlvbnNfY291bnQNCiAgICAgICAgICAgIEZST00gd2V6bHlfcnVyb2NpYWd1IHcgDQogICAgICAgICAgICBMRUZUIEpPSU4gc2VnbWVudHkgczEgT04gdy5pZCA9IHMxLmlkX3dlemxhX3N0YXJ0b3dlZ28gDQogICAgICAgICAgICBMRUZUIEpPSU4gc2VnbWVudHkgczIgT04gdy5pZCA9IHMyLmlkX3dlemxhX2tvbmNvd2VnbyANCiAgICAgICAgICAgIEdST1VQIEJZIHcuaWQsIHcubmF6d2Ffd2V6bGEsIHcub3Bpcw0KICAgICAgICAgICAgSEFWSU5HIGNvbm5lY3Rpb25zX2NvdW50ID0gMQ0KICAgICAgICAgICAgT1JERVIgQlkgdy5uYXp3YV93ZXpsYQ0KICAgICAgICAiIiIpDQogICAgICAgIGRlYWRfZW5kX25vZGVzID0gY3Vyc29yLmZldGNoYWxsKCkNCiAgICAgICAgDQogICAgICAgIGN1cnNvci5jbG9zZSgpDQogICAgICAgIGNvbm4uY2xvc2UoKQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIGpzb25pZnkoew0KICAgICAgICAgICAgJ3N1Y2Nlc3MnOiBUcnVlLA0KICAgICAgICAgICAgJ2RhdGEnOiB7DQogICAgICAgICAgICAgICAgJ2lzb2xhdGVkX25vZGVzJzogaXNvbGF0ZWRfbm9kZXMsDQogICAgICAgICAgICAgICAgJ2RlYWRfZW5kX25vZGVzJzogZGVhZF9lbmRfbm9kZXMsDQogICAgICAgICAgICAgICAgJ3N1bW1hcnknOiB7DQogICAgICAgICAgICAgICAgICAgICdpc29sYXRlZF9jb3VudCc6IGxlbihpc29sYXRlZF9ub2RlcyksDQogICAgICAgICAgICAgICAgICAgICdkZWFkX2VuZF9jb3VudCc6IGxlbihkZWFkX2VuZF9ub2RlcyksDQogICAgICAgICAgICAgICAgICAgICdhbmFseXplZF9hdCc6IGRhdGV0aW1lLm5vdyh0aW1lem9uZS51dGMpLmlzb2Zvcm1hdCgpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICANCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6DQogICAgICAgIHJldHVybiBqc29uaWZ5KHsNCiAgICAgICAgICAgICdzdWNjZXNzJzogRmFsc2UsDQogICAgICAgICAgICAnbWVzc2FnZSc6IGYnQsWCxIVkIHBvZGN6YXMgYW5hbGl6eSBpem9sb3dhbnljaCB3xJl6xYLDs3c6IHtzdHIoZSl9Jw0KICAgICAgICB9KSwgNTAwDQo=
  - path: backup_restore_point.sql
    content: LS0gTXlTUUwgZHVtcCAxMC4xMyAgRGlzdHJpYiA4LjAuNDIsIGZvciBXaW42NCAoeDg2XzY0KQ0KLS0NCi0tIEhvc3Q6IGxvY2FsaG9zdCAgICBEYXRhYmFzZTogbWVzX3BhcmFmaW5hX2RiDQotLSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tIFNlcnZlciB2ZXJzaW9uCTguMC40Mw0KDQovKiE0MDEwMSBTRVQgQE9MRF9DSEFSQUNURVJfU0VUX0NMSUVOVD1AQENIQVJBQ1RFUl9TRVRfQ0xJRU5UICovOw0KLyohNDAxMDEgU0VUIEBPTERfQ0hBUkFDVEVSX1NFVF9SRVNVTFRTPUBAQ0hBUkFDVEVSX1NFVF9SRVNVTFRTICovOw0KLyohNDAxMDEgU0VUIEBPTERfQ09MTEFUSU9OX0NPTk5FQ1RJT049QEBDT0xMQVRJT05fQ09OTkVDVElPTiAqLzsNCi8qITUwNTAzIFNFVCBOQU1FUyB1dGY4ICovOw0KLyohNDAxMDMgU0VUIEBPTERfVElNRV9aT05FPUBAVElNRV9aT05FICovOw0KLyohNDAxMDMgU0VUIFRJTUVfWk9ORT0nKzAwOjAwJyAqLzsNCi8qITQwMDE0IFNFVCBAT0xEX1VOSVFVRV9DSEVDS1M9QEBVTklRVUVfQ0hFQ0tTLCBVTklRVUVfQ0hFQ0tTPTAgKi87DQovKiE0MDAxNCBTRVQgQE9MRF9GT1JFSUdOX0tFWV9DSEVDS1M9QEBGT1JFSUdOX0tFWV9DSEVDS1MsIEZPUkVJR05fS0VZX0NIRUNLUz0wICovOw0KLyohNDAxMDEgU0VUIEBPTERfU1FMX01PREU9QEBTUUxfTU9ERSwgU1FMX01PREU9J05PX0FVVE9fVkFMVUVfT05fWkVSTycgKi87DQovKiE0MDExMSBTRVQgQE9MRF9TUUxfTk9URVM9QEBTUUxfTk9URVMsIFNRTF9OT1RFUz0wICovOw0KDQotLQ0KLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YWJsZSBgYWxhcm15YA0KLS0NCg0KRFJPUCBUQUJMRSBJRiBFWElTVFMgYGFsYXJteWA7DQovKiE0MDEwMSBTRVQgQHNhdmVkX2NzX2NsaWVudCAgICAgPSBAQGNoYXJhY3Rlcl9zZXRfY2xpZW50ICovOw0KLyohNTA1MDMgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gdXRmOG1iNCAqLzsNCkNSRUFURSBUQUJMRSBgYWxhcm15YCAoDQogIGBpZGAgaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULA0KICBgdHlwX2FsYXJtdWAgZW51bSgnVEVNUEVSQVRVUkEnLCdDSVNOSUVOSUUnLCdQT1pJT00nLCdTWVNURU0nKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgTk9UIE5VTEwsDQogIGBuYXp3YV9zcHJ6ZXR1YCB2YXJjaGFyKDEwMCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIE5PVCBOVUxMLA0KICBgd2FydG9zY2AgZGVjaW1hbCgxMCwyKSBOT1QgTlVMTCwNCiAgYGxpbWl0X3ByemVrcm9jemVuaWFgIGRlY2ltYWwoMTAsMikgTk9UIE5VTEwsDQogIGBjemFzX3d5c3RhcGllbmlhYCBkYXRldGltZSBOT1QgTlVMTCwNCiAgYHN0YXR1c19hbGFybXVgIGVudW0oJ0FLVFlXTlknLCdQT1RXSUVSRFpPTlknLCdaQUtPTkNaT05ZJykgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIERFRkFVTFQgJ0FLVFlXTlknLA0KICBgY3phc19wb3R3aWVyZHplbmlhYCBkYXRldGltZSBERUZBVUxUIE5VTEwsDQogIGBjemFzX3pha29uY3plbmlhYCBkYXRldGltZSBERUZBVUxUIE5VTEwsDQogIGBrb21lbnRhcnpgIHRleHQgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpLA0KICBQUklNQVJZIEtFWSAoYGlkYCkNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD0xMDAwIERFRkFVTFQgQ0hBUlNFVD11dGY4bWI0IENPTExBVEU9dXRmOG1iNF91bmljb2RlX2NpOw0KLyohNDAxMDEgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gQHNhdmVkX2NzX2NsaWVudCAqLzsNCg0KLS0NCi0tIFRhYmxlIHN0cnVjdHVyZSBmb3IgdGFibGUgYGFsZW1iaWNfdmVyc2lvbmANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBhbGVtYmljX3ZlcnNpb25gOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYGFsZW1iaWNfdmVyc2lvbmAgKA0KICBgdmVyc2lvbl9udW1gIHZhcmNoYXIoMzIpIE5PVCBOVUxMLA0KICBQUklNQVJZIEtFWSAoYHZlcnNpb25fbnVtYCkNCikgRU5HSU5FPUlubm9EQiBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfMDkwMF9haV9jaTsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBhcG9sbG9fc2VzamVgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgYXBvbGxvX3Nlc2plYDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBhcG9sbG9fc2VzamVgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBpZF9zcHJ6ZXR1YCBpbnQgTk9UIE5VTEwsDQogIGB0eXBfc3Vyb3djYWAgdmFyY2hhcigyNTUpIENPTExBVEUgdXRmOG1iNF91bmljb2RlX2NpIE5PVCBOVUxMLA0KICBgc3RhdHVzX3Nlc2ppYCBlbnVtKCdha3R5d25hJywnemFrb25jem9uYScpIENPTExBVEUgdXRmOG1iNF91bmljb2RlX2NpIE5PVCBOVUxMIERFRkFVTFQgJ2FrdHl3bmEnLA0KICBgY3phc19yb3pwb2N6ZWNpYWAgZGF0ZXRpbWUgTk9UIE5VTEwsDQogIGBjemFzX3pha29uY3plbmlhYCBkYXRldGltZSBERUZBVUxUIE5VTEwsDQogIGByb3pwb2N6ZXRhX3ByemV6YCB2YXJjaGFyKDI1NSkgQ09MTEFURSB1dGY4bWI0X3VuaWNvZGVfY2kgREVGQVVMVCBOVUxMLA0KICBgdXdhZ2lgIHRleHQgQ09MTEFURSB1dGY4bWI0X3VuaWNvZGVfY2ksDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgS0VZIGBpZF9zcHJ6ZXR1YCAoYGlkX3NwcnpldHVgKSwNCiAgQ09OU1RSQUlOVCBgYXBvbGxvX3Nlc2plX2liZmtfMWAgRk9SRUlHTiBLRVkgKGBpZF9zcHJ6ZXR1YCkgUkVGRVJFTkNFUyBgc3ByemV0YCAoYGlkYCkNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD00MiBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfdW5pY29kZV9jaTsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBhcG9sbG9fdHJhY2tpbmdgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgYXBvbGxvX3RyYWNraW5nYDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBhcG9sbG9fdHJhY2tpbmdgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBpZF9zZXNqaWAgaW50IE5PVCBOVUxMLA0KICBgdHlwX3pkYXJ6ZW5pYWAgZW51bSgnRE9EQU5JRV9TVVJPV0NBJywnVFJBTlNGRVJfV1lKU0NJT1dZJywnS09SRUtUQV9SRUNaTkEnKSBDT0xMQVRFIHV0ZjhtYjRfdW5pY29kZV9jaSBOT1QgTlVMTCwNCiAgYHdhZ2Ffa2dgIGRlY2ltYWwoMTAsMikgTk9UIE5VTEwsDQogIGBjemFzX3pkYXJ6ZW5pYWAgZGF0ZXRpbWUgTk9UIE5VTEwsDQogIGBpZF9vcGVyYWNqaV9sb2dgIGludCBERUZBVUxUIE5VTEwsDQogIGBvcGVyYXRvcmAgdmFyY2hhcigyNTUpIENPTExBVEUgdXRmOG1iNF91bmljb2RlX2NpIERFRkFVTFQgTlVMTCwNCiAgYHV3YWdpYCB0ZXh0IENPTExBVEUgdXRmOG1iNF91bmljb2RlX2NpLA0KICBQUklNQVJZIEtFWSAoYGlkYCksDQogIEtFWSBgaWRfc2VzamlgIChgaWRfc2VzamlgKSwNCiAgS0VZIGBpZF9vcGVyYWNqaV9sb2dgIChgaWRfb3BlcmFjamlfbG9nYCksDQogIENPTlNUUkFJTlQgYGFwb2xsb190cmFja2luZ19pYmZrXzFgIEZPUkVJR04gS0VZIChgaWRfc2VzamlgKSBSRUZFUkVOQ0VTIGBhcG9sbG9fc2VzamVgIChgaWRgKSwNCiAgQ09OU1RSQUlOVCBgYXBvbGxvX3RyYWNraW5nX2liZmtfMmAgRk9SRUlHTiBLRVkgKGBpZF9vcGVyYWNqaV9sb2dgKSBSRUZFUkVOQ0VTIGBvcGVyYWNqZV9sb2dgIChgaWRgKQ0KKSBFTkdJTkU9SW5ub0RCIEFVVE9fSU5DUkVNRU5UPTExNCBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfdW5pY29kZV9jaTsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBhdWRpdF90cmFpbGANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBhdWRpdF90cmFpbGA7DQovKiE0MDEwMSBTRVQgQHNhdmVkX2NzX2NsaWVudCAgICAgPSBAQGNoYXJhY3Rlcl9zZXRfY2xpZW50ICovOw0KLyohNTA1MDMgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gdXRmOG1iNCAqLzsNCkNSRUFURSBUQUJMRSBgYXVkaXRfdHJhaWxgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGB0aW1lc3RhbXBgIGRhdGV0aW1lIE5PVCBOVUxMIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsDQogIGB1c2VyX2lkYCB2YXJjaGFyKDEwMCkgTk9UIE5VTEwsDQogIGBlbnRpdHlfdHlwZWAgdmFyY2hhcig1MCkgTk9UIE5VTEwgQ09NTUVOVCAnTnAuIEJhdGNoZXMsIFRhbmtNaXhlcycsDQogIGBlbnRpdHlfaWRgIGludCBOT1QgTlVMTCwNCiAgYGZpZWxkX25hbWVgIHZhcmNoYXIoNTApIERFRkFVTFQgTlVMTCwNCiAgYG9sZF92YWx1ZWAgdGV4dCwNCiAgYG5ld192YWx1ZWAgdGV4dCwNCiAgYG9wZXJhdGlvbl90eXBlYCB2YXJjaGFyKDUwKSBOT1QgTlVMTCBDT01NRU5UICdOcC4gQ1JFQVRFLCBVUERBVEUsIERFTEVURSwgQ09SUkVDVElPTicsDQogIGByZWFzb25gIHRleHQsDQogIFBSSU1BUlkgS0VZIChgaWRgKQ0KKSBFTkdJTkU9SW5ub0RCIEFVVE9fSU5DUkVNRU5UPTQgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0XzA5MDBfYWlfY2k7DQovKiE0MDEwMSBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSBAc2F2ZWRfY3NfY2xpZW50ICovOw0KDQotLQ0KLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YWJsZSBgYmF0Y2hlc2ANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBiYXRjaGVzYDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBiYXRjaGVzYCAoDQogIGBpZGAgaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULA0KICBgdW5pcXVlX2NvZGVgIHZhcmNoYXIoNTApIE5PVCBOVUxMLA0KICBgbWF0ZXJpYWxfdHlwZWAgdmFyY2hhcig1MCkgTk9UIE5VTEwsDQogIGBzb3VyY2VfdHlwZWAgZW51bSgnQ1lTJywnQVBPTExPJykgTk9UIE5VTEwsDQogIGBzb3VyY2VfbmFtZWAgdmFyY2hhcig1MCkgTk9UIE5VTEwsDQogIGBpbml0aWFsX3F1YW50aXR5YCBkZWNpbWFsKDEwLDIpIE5PVCBOVUxMLA0KICBgY3VycmVudF9xdWFudGl0eWAgZGVjaW1hbCgxMCwyKSBOT1QgTlVMTCwNCiAgYGNyZWF0aW9uX2RhdGVgIGRhdGV0aW1lIE5PVCBOVUxMIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsDQogIGBzdGF0dXNgIGVudW0oJ0FDVElWRScsJ0RFUExFVEVEJywnQVJDSElWRUQnKSBOT1QgTlVMTCwNCiAgUFJJTUFSWSBLRVkgKGBpZGApLA0KICBVTklRVUUgS0VZIGB1bmlxdWVfY29kZWAgKGB1bmlxdWVfY29kZWApDQopIEVOR0lORT1Jbm5vREIgQVVUT19JTkNSRU1FTlQ9MzcgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0XzA5MDBfYWlfY2k7DQovKiE0MDEwMSBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSBAc2F2ZWRfY3NfY2xpZW50ICovOw0KDQotLQ0KLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YWJsZSBgY2VsZXJ5X2Nyb250YWJfc2NoZWR1bGVgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgY2VsZXJ5X2Nyb250YWJfc2NoZWR1bGVgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYGNlbGVyeV9jcm9udGFiX3NjaGVkdWxlYCAoDQogIGBpZGAgaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULA0KICBgbWludXRlYCB2YXJjaGFyKDI0MCkgREVGQVVMVCBOVUxMLA0KICBgaG91cmAgdmFyY2hhcig5NikgREVGQVVMVCBOVUxMLA0KICBgZGF5X29mX3dlZWtgIHZhcmNoYXIoNjQpIERFRkFVTFQgTlVMTCwNCiAgYGRheV9vZl9tb250aGAgdmFyY2hhcigxMjQpIERFRkFVTFQgTlVMTCwNCiAgYG1vbnRoX29mX3llYXJgIHZhcmNoYXIoNjQpIERFRkFVTFQgTlVMTCwNCiAgYHRpbWV6b25lYCB2YXJjaGFyKDY0KSBERUZBVUxUIE5VTEwsDQogIFBSSU1BUlkgS0VZIChgaWRgKQ0KKSBFTkdJTkU9SW5ub0RCIERFRkFVTFQgQ0hBUlNFVD11dGY4bWI0IENPTExBVEU9dXRmOG1iNF8wOTAwX2FpX2NpOw0KLyohNDAxMDEgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gQHNhdmVkX2NzX2NsaWVudCAqLzsNCg0KLS0NCi0tIFRhYmxlIHN0cnVjdHVyZSBmb3IgdGFibGUgYGNlbGVyeV9pbnRlcnZhbF9zY2hlZHVsZWANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBjZWxlcnlfaW50ZXJ2YWxfc2NoZWR1bGVgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYGNlbGVyeV9pbnRlcnZhbF9zY2hlZHVsZWAgKA0KICBgaWRgIGludCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwNCiAgYGV2ZXJ5YCBpbnQgTk9UIE5VTEwsDQogIGBwZXJpb2RgIHZhcmNoYXIoMjQpIERFRkFVTFQgTlVMTCwNCiAgUFJJTUFSWSBLRVkgKGBpZGApDQopIEVOR0lORT1Jbm5vREIgQVVUT19JTkNSRU1FTlQ9OSBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfMDkwMF9haV9jaTsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBjZWxlcnlfcGVyaW9kaWNfdGFza2ANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBjZWxlcnlfcGVyaW9kaWNfdGFza2A7DQovKiE0MDEwMSBTRVQgQHNhdmVkX2NzX2NsaWVudCAgICAgPSBAQGNoYXJhY3Rlcl9zZXRfY2xpZW50ICovOw0KLyohNTA1MDMgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gdXRmOG1iNCAqLzsNCkNSRUFURSBUQUJMRSBgY2VsZXJ5X3BlcmlvZGljX3Rhc2tgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBuYW1lYCB2YXJjaGFyKDI1NSkgREVGQVVMVCBOVUxMLA0KICBgdGFza2AgdmFyY2hhcigyNTUpIERFRkFVTFQgTlVMTCwNCiAgYGludGVydmFsX2lkYCBpbnQgREVGQVVMVCBOVUxMLA0KICBgY3JvbnRhYl9pZGAgaW50IERFRkFVTFQgTlVMTCwNCiAgYHNvbGFyX2lkYCBpbnQgREVGQVVMVCBOVUxMLA0KICBgYXJnc2AgdGV4dCwNCiAgYGt3YXJnc2AgdGV4dCwNCiAgYHF1ZXVlYCB2YXJjaGFyKDI1NSkgREVGQVVMVCBOVUxMLA0KICBgZXhjaGFuZ2VgIHZhcmNoYXIoMjU1KSBERUZBVUxUIE5VTEwsDQogIGByb3V0aW5nX2tleWAgdmFyY2hhcigyNTUpIERFRkFVTFQgTlVMTCwNCiAgYHByaW9yaXR5YCBpbnQgREVGQVVMVCBOVUxMLA0KICBgZXhwaXJlc2AgZGF0ZXRpbWUgREVGQVVMVCBOVUxMLA0KICBgb25lX29mZmAgdGlueWludCgxKSBERUZBVUxUIE5VTEwsDQogIGBzdGFydF90aW1lYCBkYXRldGltZSBERUZBVUxUIE5VTEwsDQogIGBlbmFibGVkYCB0aW55aW50KDEpIERFRkFVTFQgTlVMTCwNCiAgYGxhc3RfcnVuX2F0YCBkYXRldGltZSBERUZBVUxUIE5VTEwsDQogIGB0b3RhbF9ydW5fY291bnRgIGludCBOT1QgTlVMTCwNCiAgYGRhdGVfY2hhbmdlZGAgZGF0ZXRpbWUgREVGQVVMVCBOVUxMLA0KICBgZGVzY3JpcHRpb25gIHRleHQsDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgVU5JUVVFIEtFWSBgbmFtZWAgKGBuYW1lYCkNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD0zIERFRkFVTFQgQ0hBUlNFVD11dGY4bWI0IENPTExBVEU9dXRmOG1iNF8wOTAwX2FpX2NpOw0KLyohNDAxMDEgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gQHNhdmVkX2NzX2NsaWVudCAqLzsNCg0KLS0NCi0tIFRhYmxlIHN0cnVjdHVyZSBmb3IgdGFibGUgYGNlbGVyeV9wZXJpb2RpY190YXNrX2NoYW5nZWRgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgY2VsZXJ5X3BlcmlvZGljX3Rhc2tfY2hhbmdlZGA7DQovKiE0MDEwMSBTRVQgQHNhdmVkX2NzX2NsaWVudCAgICAgPSBAQGNoYXJhY3Rlcl9zZXRfY2xpZW50ICovOw0KLyohNTA1MDMgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gdXRmOG1iNCAqLzsNCkNSRUFURSBUQUJMRSBgY2VsZXJ5X3BlcmlvZGljX3Rhc2tfY2hhbmdlZGAgKA0KICBgaWRgIGludCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwNCiAgYGxhc3RfdXBkYXRlYCBkYXRldGltZSBOT1QgTlVMTCwNCiAgUFJJTUFSWSBLRVkgKGBpZGApDQopIEVOR0lORT1Jbm5vREIgQVVUT19JTkNSRU1FTlQ9MiBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfMDkwMF9haV9jaTsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBjZWxlcnlfc29sYXJfc2NoZWR1bGVgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgY2VsZXJ5X3NvbGFyX3NjaGVkdWxlYDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBjZWxlcnlfc29sYXJfc2NoZWR1bGVgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBldmVudGAgdmFyY2hhcigyNCkgREVGQVVMVCBOVUxMLA0KICBgbGF0aXR1ZGVgIGZsb2F0IERFRkFVTFQgTlVMTCwNCiAgYGxvbmdpdHVkZWAgZmxvYXQgREVGQVVMVCBOVUxMLA0KICBQUklNQVJZIEtFWSAoYGlkYCkNCikgRU5HSU5FPUlubm9EQiBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfMDkwMF9haV9jaTsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBjeWtsZV9maWx0cmFjeWpuZWANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBjeWtsZV9maWx0cmFjeWpuZWA7DQovKiE0MDEwMSBTRVQgQHNhdmVkX2NzX2NsaWVudCAgICAgPSBAQGNoYXJhY3Rlcl9zZXRfY2xpZW50ICovOw0KLyohNTA1MDMgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gdXRmOG1iNCAqLzsNCkNSRUFURSBUQUJMRSBgY3lrbGVfZmlsdHJhY3lqbmVgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBpZF9wYXJ0aWlgIGludCBERUZBVUxUIE5VTEwsDQogIGBudW1lcl9jeWtsdWAgaW50IERFRkFVTFQgTlVMTCwNCiAgYHR5cF9jeWtsdWAgZW51bSgncGxhY2VrJywnZmlsdHJhY2phJywnZG11Y2hhbmllJykgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIERFRkFVTFQgTlVMTCwNCiAgYGlkX2ZpbHRyYWAgdmFyY2hhcigxMCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIERFRkFVTFQgTlVMTCwNCiAgYHJlYWt0b3Jfc3RhcnRvd3lgIHZhcmNoYXIoMTApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIGByZWFrdG9yX2RvY2Vsb3d5YCB2YXJjaGFyKDEwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgREVGQVVMVCBOVUxMLA0KICBgY3phc19yb3pwb2N6ZWNpYWAgZGF0ZXRpbWUgREVGQVVMVCBOVUxMLA0KICBgY3phc196YWtvbmN6ZW5pYWAgZGF0ZXRpbWUgREVGQVVMVCBOVUxMLA0KICBgY3phc190cndhbmlhX21pbnV0YCBpbnQgREVGQVVMVCBOVUxMLA0KICBgd3luaWtfb2NlbnlgIGVudW0oJ3Bvenl0eXduYScsJ25lZ2F0eXduYScsJ29jemVrdWplJykgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIERFRkFVTFQgTlVMTCwNCiAgYGtvbWVudGFyemAgdGV4dCBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2ksDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgS0VZIGBpZHhfcGFydGlhX2N5a2xgIChgaWRfcGFydGlpYCxgbnVtZXJfY3lrbHVgKSwNCiAgS0VZIGBpZHhfZmlsdHJfY3phc2AgKGBpZF9maWx0cmFgLGBjemFzX3JvenBvY3plY2lhYCksDQogIENPTlNUUkFJTlQgYGN5a2xlX2ZpbHRyYWN5am5lX2liZmtfMWAgRk9SRUlHTiBLRVkgKGBpZF9wYXJ0aWlgKSBSRUZFUkVOQ0VTIGBwYXJ0aWVfc3Vyb3djYWAgKGBpZGApIE9OIERFTEVURSBDQVNDQURFDQopIEVOR0lORT1Jbm5vREIgQVVUT19JTkNSRU1FTlQ9MTkgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2kgQ09NTUVOVD0nSGlzdG9yaWEgd3N6eXN0a2ljaCBjeWtsaSBmaWx0cmFjeWpueWNoIGRsYSBrYcW8ZGVqIHBhcnRpaSc7DQovKiE0MDEwMSBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSBAc2F2ZWRfY3NfY2xpZW50ICovOw0KDQotLQ0KLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YWJsZSBgaGlzdG9yaWFfcG9taWFyb3dgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgaGlzdG9yaWFfcG9taWFyb3dgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYGhpc3RvcmlhX3BvbWlhcm93YCAoDQogIGBpZGAgaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULA0KICBgaWRfc3ByemV0dWAgaW50IE5PVCBOVUxMLA0KICBgY3phc19wb21pYXJ1YCBkYXRldGltZSBOT1QgTlVMTCwNCiAgYHRlbXBlcmF0dXJhYCBkZWNpbWFsKDEwLDYpIERFRkFVTFQgTlVMTCwNCiAgYGNpc25pZW5pZWAgZGVjaW1hbCg1LDIpIERFRkFVTFQgTlVMTCwNCiAgUFJJTUFSWSBLRVkgKGBpZGApLA0KICBLRVkgYGlkeF9oaXN0b3JpYV9zcHJ6ZXRfY3phc2AgKGBpZF9zcHJ6ZXR1YCxgY3phc19wb21pYXJ1YCksDQogIENPTlNUUkFJTlQgYGhpc3RvcmlhX3BvbWlhcm93X2liZmtfMWAgRk9SRUlHTiBLRVkgKGBpZF9zcHJ6ZXR1YCkgUkVGRVJFTkNFUyBgc3ByemV0YCAoYGlkYCkNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD01MjU2MSBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfMDkwMF9haV9jaTsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBsb2dfdXp5dGVfc2VnbWVudHlgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgbG9nX3V6eXRlX3NlZ21lbnR5YDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBsb2dfdXp5dGVfc2VnbWVudHlgICgNCiAgYGlkX29wZXJhY2ppX2xvZ2AgaW50IE5PVCBOVUxMLA0KICBgaWRfc2VnbWVudHVgIGludCBOT1QgTlVMTCwNCiAgUFJJTUFSWSBLRVkgKGBpZF9vcGVyYWNqaV9sb2dgLGBpZF9zZWdtZW50dWApLA0KICBLRVkgYGlkX3NlZ21lbnR1YCAoYGlkX3NlZ21lbnR1YCksDQogIENPTlNUUkFJTlQgYGxvZ191enl0ZV9zZWdtZW50eV9pYmZrXzFgIEZPUkVJR04gS0VZIChgaWRfb3BlcmFjamlfbG9nYCkgUkVGRVJFTkNFUyBgb3BlcmFjamVfbG9nYCAoYGlkYCkgT04gREVMRVRFIENBU0NBREUsDQogIENPTlNUUkFJTlQgYGxvZ191enl0ZV9zZWdtZW50eV9pYmZrXzJgIEZPUkVJR04gS0VZIChgaWRfc2VnbWVudHVgKSBSRUZFUkVOQ0VTIGBzZWdtZW50eWAgKGBpZGApDQopIEVOR0lORT1Jbm5vREIgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2kgQ09NTUVOVD0nWmFwaXN1amUsIGt0w7NyZSBzZWdtZW50eSBiecWCeSB1xbx5d2FuZSB3IGRhbmVqIG9wZXJhY2ppIHogbG9ndSc7DQovKiE0MDEwMSBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSBAc2F2ZWRfY3NfY2xpZW50ICovOw0KDQotLQ0KLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YWJsZSBgbWl4X2NvbXBvbmVudHNgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgbWl4X2NvbXBvbmVudHNgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYG1peF9jb21wb25lbnRzYCAoDQogIGBpZGAgaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULA0KICBgbWl4X2lkYCBpbnQgTk9UIE5VTEwsDQogIGBiYXRjaF9pZGAgaW50IE5PVCBOVUxMLA0KICBgZGF0ZV9hZGRlZGAgZGF0ZXRpbWUgTk9UIE5VTEwgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCwNCiAgYHF1YW50aXR5X2luX21peGAgZGVjaW1hbCgxMCwyKSBOT1QgTlVMTCwNCiAgUFJJTUFSWSBLRVkgKGBpZGApLA0KICBLRVkgYGJhdGNoX2lkYCAoYGJhdGNoX2lkYCksDQogIEtFWSBgbWl4X2lkYCAoYG1peF9pZGApLA0KICBDT05TVFJBSU5UIGBtaXhfY29tcG9uZW50c19pYmZrXzFgIEZPUkVJR04gS0VZIChgYmF0Y2hfaWRgKSBSRUZFUkVOQ0VTIGBiYXRjaGVzYCAoYGlkYCksDQogIENPTlNUUkFJTlQgYG1peF9jb21wb25lbnRzX2liZmtfMmAgRk9SRUlHTiBLRVkgKGBtaXhfaWRgKSBSRUZFUkVOQ0VTIGB0YW5rX21peGVzYCAoYGlkYCkNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD03MyBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfMDkwMF9haV9jaTsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBvcGVyYWNqZV9sb2dgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgb3BlcmFjamVfbG9nYDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBvcGVyYWNqZV9sb2dgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGB0eXBfb3BlcmFjamlgIHZhcmNoYXIoNTApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBOT1QgTlVMTCBDT01NRU5UICdOcC4gVFJBTlNGRVIsIERPREFOSUVfWklFTUksIEZJTFRSQUNKQV9LT8WBTycsDQogIGBpZF9wYXJ0aWlfc3Vyb3djYWAgaW50IERFRkFVTFQgTlVMTCwNCiAgYGlkX3NwcnpldHVfenJvZGxvd2Vnb2AgaW50IERFRkFVTFQgTlVMTCwNCiAgYGlkX3NwcnpldHVfZG9jZWxvd2Vnb2AgaW50IERFRkFVTFQgTlVMTCwNCiAgYGlkX2Fwb2xsb19zZXNqaWAgaW50IERFRkFVTFQgTlVMTCwNCiAgYGN6YXNfcm96cG9jemVjaWFgIGRhdGV0aW1lIE5PVCBOVUxMLA0KICBgY3phc196YWtvbmN6ZW5pYWAgZGF0ZXRpbWUgREVGQVVMVCBOVUxMLA0KICBgb3N0YXRuaWFfbW9keWZpa2FjamFgIGRhdGV0aW1lIERFRkFVTFQgTlVMTCwNCiAgYHptb2R5Zmlrb3dhbmVfcHJ6ZXpgIHZhcmNoYXIoMjU1KSBDT0xMQVRFIHV0ZjhtYjRfdW5pY29kZV9jaSBERUZBVUxUIE5VTEwsDQogIGB1d2FnaWAgdGV4dCBDT0xMQVRFIHV0ZjhtYjRfdW5pY29kZV9jaSwNCiAgYGlsb3NjX2tnYCBkZWNpbWFsKDEwLDIpIERFRkFVTFQgTlVMTCwNCiAgYG9waXNgIHRleHQgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpLA0KICBgc3RhdHVzX29wZXJhY2ppYCBlbnVtKCdha3R5d25hJywnemFrb25jem9uYScsJ3dzdHJ6eW1hbmEnLCdhbnVsb3dhbmEnKSBDT0xMQVRFIHV0ZjhtYjRfdW5pY29kZV9jaSBOT1QgTlVMTCBERUZBVUxUICdha3R5d25hJywNCiAgYHB1bmt0X3N0YXJ0b3d5YCB2YXJjaGFyKDUwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgREVGQVVMVCBOVUxMLA0KICBgcHVua3RfZG9jZWxvd3lgIHZhcmNoYXIoNTApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgS0VZIGBpZF9wYXJ0aWlfc3Vyb3djYWAgKGBpZF9wYXJ0aWlfc3Vyb3djYWApLA0KICBLRVkgYGlkX3NwcnpldHVfenJvZGxvd2Vnb2AgKGBpZF9zcHJ6ZXR1X3pyb2Rsb3dlZ29gKSwNCiAgS0VZIGBpZF9zcHJ6ZXR1X2RvY2Vsb3dlZ29gIChgaWRfc3ByemV0dV9kb2NlbG93ZWdvYCksDQogIEtFWSBgZmtfb3BlcmFjamVfbG9nX2Fwb2xsb19zZXNqZWAgKGBpZF9hcG9sbG9fc2VzamlgKSwNCiAgQ09OU1RSQUlOVCBgZmtfb3BlcmFjamVfbG9nX2Fwb2xsb19zZXNqZWAgRk9SRUlHTiBLRVkgKGBpZF9hcG9sbG9fc2VzamlgKSBSRUZFUkVOQ0VTIGBhcG9sbG9fc2VzamVgIChgaWRgKSwNCiAgQ09OU1RSQUlOVCBgb3BlcmFjamVfbG9nX2liZmtfMWAgRk9SRUlHTiBLRVkgKGBpZF9wYXJ0aWlfc3Vyb3djYWApIFJFRkVSRU5DRVMgYHBhcnRpZV9zdXJvd2NhYCAoYGlkYCkgT04gREVMRVRFIFNFVCBOVUxMLA0KICBDT05TVFJBSU5UIGBvcGVyYWNqZV9sb2dfaWJma18yYCBGT1JFSUdOIEtFWSAoYGlkX3NwcnpldHVfenJvZGxvd2Vnb2ApIFJFRkVSRU5DRVMgYHNwcnpldGAgKGBpZGApIE9OIERFTEVURSBTRVQgTlVMTCwNCiAgQ09OU1RSQUlOVCBgb3BlcmFjamVfbG9nX2liZmtfM2AgRk9SRUlHTiBLRVkgKGBpZF9zcHJ6ZXR1X2RvY2Vsb3dlZ29gKSBSRUZFUkVOQ0VTIGBzcHJ6ZXRgIChgaWRgKSBPTiBERUxFVEUgU0VUIE5VTEwNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD0xOTQgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2kgQ09NTUVOVD0nTG9nIHdzenlzdGtpY2ggemRhcnplxYQgaSBvcGVyYWNqaSB3IHByb2Nlc2llJzsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBvcGVyYXRvcl90ZW1wZXJhdHVyZXNgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgb3BlcmF0b3JfdGVtcGVyYXR1cmVzYDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBvcGVyYXRvcl90ZW1wZXJhdHVyZXNgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBpZF9zcHJ6ZXR1YCBpbnQgTk9UIE5VTEwsDQogIGB0ZW1wZXJhdHVyYWAgZGVjaW1hbCgxMCw2KSBOT1QgTlVMTCwNCiAgYGN6YXNfdXN0YXdpZW5pYWAgZGF0ZXRpbWUgTk9UIE5VTEwsDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgS0VZIGBpZF9zcHJ6ZXR1YCAoYGlkX3NwcnpldHVgKSwNCiAgQ09OU1RSQUlOVCBgb3BlcmF0b3JfdGVtcGVyYXR1cmVzX2liZmtfMWAgRk9SRUlHTiBLRVkgKGBpZF9zcHJ6ZXR1YCkgUkVGRVJFTkNFUyBgc3ByemV0YCAoYGlkYCkNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD0xNTQ4IERFRkFVTFQgQ0hBUlNFVD11dGY4bWI0IENPTExBVEU9dXRmOG1iNF91bmljb2RlX2NpOw0KLyohNDAxMDEgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gQHNhdmVkX2NzX2NsaWVudCAqLzsNCg0KLS0NCi0tIFRhYmxlIHN0cnVjdHVyZSBmb3IgdGFibGUgYHBhcnRpZV9oaXN0b3JpYWANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBwYXJ0aWVfaGlzdG9yaWFgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYHBhcnRpZV9oaXN0b3JpYWAgKA0KICBgaWRgIGludCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwNCiAgYGlkX3BhcnRpaV9zdXJvd2NhYCBpbnQgTk9UIE5VTEwsDQogIGB0eXBfb3BlcmFjamlgIGVudW0oJ1VUV09SWkVOSUUnLCdUUkFOU0ZFUicsJ0ZJTFRSQUNKQScsJ01JRVNaQU5JRScsJ0RaSUVMRU5JRScsJ1pNSUFOQV9TVEFOVScsJ1BPQk9SX1BST0JLSScsJ1pBVFdJRVJEWkVOSUUnKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgTk9UIE5VTEwsDQogIGBkYXRhX29wZXJhY2ppYCB0aW1lc3RhbXAgTlVMTCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLA0KICBgb3BlcmF0b3JgIHZhcmNoYXIoMTAwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgREVGQVVMVCBOVUxMLA0KICBgbG9rYWxpemFjamFfcHJ6ZWRgIHZhcmNoYXIoMTAwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgREVGQVVMVCBOVUxMLA0KICBgbG9rYWxpemFjamFfcG9gIHZhcmNoYXIoMTAwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgREVGQVVMVCBOVUxMLA0KICBgd2FnYV9wcnplZGAgZGVjaW1hbCgxMCwzKSBERUZBVUxUIE5VTEwsDQogIGB3YWdhX3BvYCBkZWNpbWFsKDEwLDMpIERFRkFVTFQgTlVMTCwNCiAgYHBhcmFtZXRyeV9vcGVyYWNqaWAganNvbiBERUZBVUxUIE5VTEwsDQogIGBvcGlzX29wZXJhY2ppYCB0ZXh0IENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSwNCiAgYGlkX29wZXJhY2ppX2xvZ2AgaW50IERFRkFVTFQgTlVMTCwNCiAgUFJJTUFSWSBLRVkgKGBpZGApLA0KICBLRVkgYGlkeF9wYXJ0aWFgIChgaWRfcGFydGlpX3N1cm93Y2FgKSwNCiAgS0VZIGBpZHhfdHlwX29wZXJhY2ppYCAoYHR5cF9vcGVyYWNqaWApLA0KICBLRVkgYGlkeF9kYXRhX29wZXJhY2ppYCAoYGRhdGFfb3BlcmFjamlgKSwNCiAgS0VZIGBpZF9vcGVyYWNqaV9sb2dgIChgaWRfb3BlcmFjamlfbG9nYCksDQogIENPTlNUUkFJTlQgYHBhcnRpZV9oaXN0b3JpYV9pYmZrXzFgIEZPUkVJR04gS0VZIChgaWRfcGFydGlpX3N1cm93Y2FgKSBSRUZFUkVOQ0VTIGBwYXJ0aWVfc3Vyb3djYWAgKGBpZGApIE9OIERFTEVURSBDQVNDQURFLA0KICBDT05TVFJBSU5UIGBwYXJ0aWVfaGlzdG9yaWFfaWJma18yYCBGT1JFSUdOIEtFWSAoYGlkX29wZXJhY2ppX2xvZ2ApIFJFRkVSRU5DRVMgYG9wZXJhY2plX2xvZ2AgKGBpZGApIE9OIERFTEVURSBTRVQgTlVMTA0KKSBFTkdJTkU9SW5ub0RCIEFVVE9fSU5DUkVNRU5UPTQgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2k7DQovKiE0MDEwMSBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSBAc2F2ZWRfY3NfY2xpZW50ICovOw0KDQotLQ0KLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YWJsZSBgcGFydGllX3Bvd2lhemFuaWFgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgcGFydGllX3Bvd2lhemFuaWFgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYHBhcnRpZV9wb3dpYXphbmlhYCAoDQogIGBpZGAgaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULA0KICBgcGFydGlhX3pyb2Rsb3dhX2lkYCBpbnQgTk9UIE5VTEwsDQogIGBwYXJ0aWFfZG9jZWxvd2FfaWRgIGludCBOT1QgTlVMTCwNCiAgYHR5cF9wb3dpYXphbmlhYCBlbnVtKCdEWklFTEVOSUUnLCdMQUNaRU5JRScsJ1RSQU5TRk9STUFDSkEnKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgTk9UIE5VTEwsDQogIGBwcm9jZW50X3VkemlhbHVgIGRlY2ltYWwoNSwyKSBERUZBVUxUIE5VTEwsDQogIGBkYXRhX3Bvd2lhemFuaWFgIHRpbWVzdGFtcCBOVUxMIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsDQogIGBpZF9vcGVyYWNqaV9sb2dgIGludCBERUZBVUxUIE5VTEwsDQogIGB1d2FnaWAgdGV4dCBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2ksDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgS0VZIGBpZHhfcGFydGlhX3pyb2Rsb3dhYCAoYHBhcnRpYV96cm9kbG93YV9pZGApLA0KICBLRVkgYGlkeF9wYXJ0aWFfZG9jZWxvd2FgIChgcGFydGlhX2RvY2Vsb3dhX2lkYCksDQogIEtFWSBgaWR4X3R5cF9wb3dpYXphbmlhYCAoYHR5cF9wb3dpYXphbmlhYCksDQogIEtFWSBgaWRfb3BlcmFjamlfbG9nYCAoYGlkX29wZXJhY2ppX2xvZ2ApLA0KICBDT05TVFJBSU5UIGBwYXJ0aWVfcG93aWF6YW5pYV9pYmZrXzFgIEZPUkVJR04gS0VZIChgcGFydGlhX3pyb2Rsb3dhX2lkYCkgUkVGRVJFTkNFUyBgcGFydGllX3N1cm93Y2FgIChgaWRgKSBPTiBERUxFVEUgQ0FTQ0FERSwNCiAgQ09OU1RSQUlOVCBgcGFydGllX3Bvd2lhemFuaWFfaWJma18yYCBGT1JFSUdOIEtFWSAoYHBhcnRpYV9kb2NlbG93YV9pZGApIFJFRkVSRU5DRVMgYHBhcnRpZV9zdXJvd2NhYCAoYGlkYCkgT04gREVMRVRFIENBU0NBREUsDQogIENPTlNUUkFJTlQgYHBhcnRpZV9wb3dpYXphbmlhX2liZmtfM2AgRk9SRUlHTiBLRVkgKGBpZF9vcGVyYWNqaV9sb2dgKSBSRUZFUkVOQ0VTIGBvcGVyYWNqZV9sb2dgIChgaWRgKSBPTiBERUxFVEUgU0VUIE5VTEwNCikgRU5HSU5FPUlubm9EQiBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfdW5pY29kZV9jaTsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBwYXJ0aWVfcHJvYmtpYA0KLS0NCg0KRFJPUCBUQUJMRSBJRiBFWElTVFMgYHBhcnRpZV9wcm9ia2lgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYHBhcnRpZV9wcm9ia2lgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBpZF9wYXJ0aWlfc3Vyb3djYWAgaW50IE5PVCBOVUxMLA0KICBgbnVtZXJfcHJvYmtpYCB2YXJjaGFyKDUwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgTk9UIE5VTEwsDQogIGBkYXRhX3BvYnJhbmlhYCB0aW1lc3RhbXAgTlVMTCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLA0KICBgcG9icmFuYV9wcnplemAgdmFyY2hhcigxMDApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIGBsb2thbGl6YWNqYV9wb2JyYW5pYWAgdmFyY2hhcigxMDApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIGB0eXBfcHJvYmtpYCBlbnVtKCdSVVRZTk9XQScsJ0tPTlRST0xOQScsJ1JFS0xBTUFDWUpOQScsJ1dBTElEQUNZSk5BJykgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIERFRkFVTFQgJ1JVVFlOT1dBJywNCiAgYHN0YXR1c19wcm9ia2lgIGVudW0oJ1BPQlJBTkEnLCdXX0FOQUxJWklFJywnWkFUV0lFUkRaT05BJywnT0RSWlVDT05BJykgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIERFRkFVTFQgJ1BPQlJBTkEnLA0KICBgd3luaWtpX2FuYWxpenlgIGpzb24gREVGQVVMVCBOVUxMLA0KICBgZGF0YV9hbmFsaXp5YCB0aW1lc3RhbXAgTlVMTCBERUZBVUxUIE5VTEwsDQogIGBhbmFsaXpvd2FuYV9wcnplemAgdmFyY2hhcigxMDApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIGB1d2FnaWAgdGV4dCBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2ksDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgVU5JUVVFIEtFWSBgbnVtZXJfcHJvYmtpYCAoYG51bWVyX3Byb2JraWApLA0KICBLRVkgYGlkeF9wYXJ0aWFgIChgaWRfcGFydGlpX3N1cm93Y2FgKSwNCiAgS0VZIGBpZHhfbnVtZXJfcHJvYmtpYCAoYG51bWVyX3Byb2JraWApLA0KICBLRVkgYGlkeF9zdGF0dXNgIChgc3RhdHVzX3Byb2JraWApLA0KICBLRVkgYGlkeF9kYXRhX3BvYnJhbmlhYCAoYGRhdGFfcG9icmFuaWFgKSwNCiAgQ09OU1RSQUlOVCBgcGFydGllX3Byb2JraV9pYmZrXzFgIEZPUkVJR04gS0VZIChgaWRfcGFydGlpX3N1cm93Y2FgKSBSRUZFUkVOQ0VTIGBwYXJ0aWVfc3Vyb3djYWAgKGBpZGApIE9OIERFTEVURSBDQVNDQURFDQopIEVOR0lORT1Jbm5vREIgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2k7DQovKiE0MDEwMSBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSBAc2F2ZWRfY3NfY2xpZW50ICovOw0KDQotLQ0KLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YWJsZSBgcGFydGllX3NrbGFkbmlraWANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBwYXJ0aWVfc2tsYWRuaWtpYDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBwYXJ0aWVfc2tsYWRuaWtpYCAoDQogIGBpZGAgaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULA0KICBgaWRfcGFydGlpX3d5bmlrb3dlamAgaW50IE5PVCBOVUxMLA0KICBgaWRfcGFydGlpX3NrbGFkb3dlamAgaW50IE5PVCBOVUxMLA0KICBgd2FnYV9za2xhZG93YV9rZ2AgZGVjaW1hbCgxMCwyKSBOT1QgTlVMTCwNCiAgYGRhdGFfZG9kYW5pYWAgdGltZXN0YW1wIE5VTEwgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCwNCiAgUFJJTUFSWSBLRVkgKGBpZGApLA0KICBLRVkgYGlkeF9wYXJ0aWFfd3luaWtvd2FgIChgaWRfcGFydGlpX3d5bmlrb3dlamApLA0KICBLRVkgYGlkeF9wYXJ0aWFfc2tsYWRvd2FgIChgaWRfcGFydGlpX3NrbGFkb3dlamApLA0KICBDT05TVFJBSU5UIGBma19wYXJ0aWFfc2tsYWRvd2FgIEZPUkVJR04gS0VZIChgaWRfcGFydGlpX3NrbGFkb3dlamApIFJFRkVSRU5DRVMgYHBhcnRpZV9zdXJvd2NhYCAoYGlkYCkgT04gREVMRVRFIFJFU1RSSUNULA0KICBDT05TVFJBSU5UIGBma19wYXJ0aWFfd3luaWtvd2FgIEZPUkVJR04gS0VZIChgaWRfcGFydGlpX3d5bmlrb3dlamApIFJFRkVSRU5DRVMgYHBhcnRpZV9zdXJvd2NhYCAoYGlkYCkgT04gREVMRVRFIENBU0NBREUNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD01NCBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfdW5pY29kZV9jaSBDT01NRU5UPSdUYWJlbGEgxYLEhWN6xIVjYSBwYXJ0aWUtbWllc3phbmlueSB6IGljaCBza8WCYWRuaWthbWkuJzsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBwYXJ0aWVfc3RhdHVzeWANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBwYXJ0aWVfc3RhdHVzeWA7DQovKiE0MDEwMSBTRVQgQHNhdmVkX2NzX2NsaWVudCAgICAgPSBAQGNoYXJhY3Rlcl9zZXRfY2xpZW50ICovOw0KLyohNTA1MDMgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gdXRmOG1iNCAqLzsNCkNSRUFURSBUQUJMRSBgcGFydGllX3N0YXR1c3lgICgNCiAgYGlkX3BhcnRpaWAgaW50IE5PVCBOVUxMLA0KICBgaWRfc3RhdHVzdWAgaW50IE5PVCBOVUxMLA0KICBgZGF0YV9uYWRhbmlhYCB0aW1lc3RhbXAgTlVMTCBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QLA0KICBQUklNQVJZIEtFWSAoYGlkX3BhcnRpaWAsYGlkX3N0YXR1c3VgKSwNCiAgS0VZIGBpZF9zdGF0dXN1YCAoYGlkX3N0YXR1c3VgKSwNCiAgQ09OU1RSQUlOVCBgcGFydGllX3N0YXR1c3lfaWJma18xYCBGT1JFSUdOIEtFWSAoYGlkX3BhcnRpaWApIFJFRkVSRU5DRVMgYHBhcnRpZV9zdXJvd2NhYCAoYGlkYCkgT04gREVMRVRFIENBU0NBREUsDQogIENPTlNUUkFJTlQgYHBhcnRpZV9zdGF0dXN5X2liZmtfMmAgRk9SRUlHTiBLRVkgKGBpZF9zdGF0dXN1YCkgUkVGRVJFTkNFUyBgc3RhdHVzeWAgKGBpZGApIE9OIERFTEVURSBDQVNDQURFDQopIEVOR0lORT1Jbm5vREIgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2kgQ09NTUVOVD0nUHJ6eXBpc3VqZSB3aWVsZSBzdGF0dXPDs3cgZG8gamVkbmVqIHBhcnRpaSc7DQovKiE0MDEwMSBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSBAc2F2ZWRfY3NfY2xpZW50ICovOw0KDQotLQ0KLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YWJsZSBgcGFydGllX3N1cm93Y2FgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgcGFydGllX3N1cm93Y2FgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYHBhcnRpZV9zdXJvd2NhYCAoDQogIGBpZGAgaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULA0KICBgdW5pa2Fsbnlfa29kYCB2YXJjaGFyKDUwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgTk9UIE5VTEwgQ09NTUVOVCAnSWRlbnR5ZmlrYXRvciBwYXJ0aWksIG5wLiBUMTAtMjAyMzEwMjctMTQzMC1BUE9MTE8nLA0KICBgdHlwX3N1cm93Y2FgIHZhcmNoYXIoNTApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIGB6cm9kbG9fcG9jaG9kemVuaWFgIGVudW0oJ2Fwb2xsbycsJ2N5c3Rlcm5hJykgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIE5PVCBOVUxMLA0KICBgd2FnYV9wb2N6YXRrb3dhX2tnYCBkZWNpbWFsKDEwLDIpIE5PVCBOVUxMLA0KICBgd2FnYV9ha3R1YWxuYV9rZ2AgZGVjaW1hbCgxMCwyKSBERUZBVUxUIE5VTEwsDQogIGBkYXRhX3V0d29yemVuaWFgIHRpbWVzdGFtcCBOVUxMIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsDQogIGBpZF9zcHJ6ZXR1YCBpbnQgREVGQVVMVCBOVUxMLA0KICBgbmF6d2FfcGFydGlpYCB2YXJjaGFyKDEwMCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIE5PVCBOVUxMLA0KICBgcm9kemFqX3N1cm93Y2FgIHZhcmNoYXIoNTApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIGBpZF9ha3R1YWxuZWdvX3NwcnpldHVgIGludCBERUZBVUxUIE5VTEwsDQogIGBzdGF0dXNfcGFydGlpYCBlbnVtKCdXIG1hZ2F6eW5pZSBicnVkbnltJywnU3Vyb3d5IHcgcmVha3RvcnplJywnQnVkb3dhbmllIHBsYWNrYScsJ1ByemVsZXdhbmllJywnRmlsdHJvd2FuaWUnLCdPY3pla2l3YW5pZSBuYSBvY2VuxJknLCdEbyBwb25vd25laiBmaWx0cmFjamknLCdEb2JpZWxhbmllJywnR290b3d5IGRvIHd5c8WCYW5pYScsJ1cgbWFnYXp5bmllIGN6eXN0eW0nLCdBcmNoaXdhbG5hJykgQ09MTEFURSB1dGY4bWI0X3VuaWNvZGVfY2kgTk9UIE5VTEwsDQogIGBha3R1YWxueV9ldGFwX3Byb2Nlc3VgIGVudW0oJ3N1cm93eScsJ3BsYWNlaycsJ3ByemVsZXcnLCd3X2tvbGUnLCdvY2VuYV9wcm9ia2knLCdkbXVjaGFuaWUnLCdnb3Rvd3knLCd3eWRtdWNoJykgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIERFRkFVTFQgJ3N1cm93eScsDQogIGBudW1lcl9jeWtsdV9ha3R1YWxuZWdvYCBpbnQgREVGQVVMVCAnMCcsDQogIGBjemFzX3JvenBvY3plY2lhX2V0YXB1YCBkYXRldGltZSBERUZBVUxUIE5VTEwsDQogIGBwbGFub3dhbnlfY3phc196YWtvbmN6ZW5pYWAgZGF0ZXRpbWUgREVGQVVMVCBOVUxMLA0KICBgaWRfYWt0dWFsbmVnb19maWx0cmFgIHZhcmNoYXIoMTApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIGByZWFrdG9yX2RvY2Vsb3d5YCB2YXJjaGFyKDEwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgREVGQVVMVCBOVUxMLA0KICBgaWxvc2NfY3lrbGlfZmlsdHJhY3lqbnljaGAgaW50IERFRkFVTFQgJzAnLA0KICBgaGlzdG9yaWFfb3BlcmFjamlgIGpzb24gREVGQVVMVCBOVUxMLA0KICBgdHlwX3RyYW5zZm9ybWFjamlgIGVudW0oJ05PV0EnLCdUUkFOU0ZFUicsJ0ZJTFRSQUNKQScsJ01JRVNaQU5JRScsJ0RaSUVMRU5JRScpIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUICdOT1dBJywNCiAgYGV0YXBfcHJvY2VzdWAgZW51bSgnU1VST1dBJywnV19QUk9DRVNJRScsJ0ZJTFRST1dBTkEnLCdHT1RPV0EnLCdaQVRXSUVSRFpPTkEnLCdPRFJaVUNPTkEnKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgREVGQVVMVCAnU1VST1dBJywNCiAgYHBvY2hvZHplbmllX29waXNgIHRleHQgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpLA0KICBgZGF0YV9vc3RhdG5pZWpfbW9keWZpa2FjamlgIHRpbWVzdGFtcCBOVUxMIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAgT04gVVBEQVRFIENVUlJFTlRfVElNRVNUQU1QLA0KICBgdXR3b3J6b25hX3ByemV6YCB2YXJjaGFyKDEwMCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIERFRkFVTFQgTlVMTCwNCiAgYGNlcnR5ZmlrYXRfamFrb3NjaWAgdGV4dCBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2ksDQogIGB1d2FnaV9vcGVyYXRvcmFgIHRleHQgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpLA0KICBQUklNQVJZIEtFWSAoYGlkYCksDQogIFVOSVFVRSBLRVkgYHVuaWthbG55X2tvZGAgKGB1bmlrYWxueV9rb2RgKSwNCiAgVU5JUVVFIEtFWSBgbmF6d2FfcGFydGlpYCAoYG5hendhX3BhcnRpaWApLA0KICBLRVkgYGlkX3NwcnpldHVgIChgaWRfc3ByemV0dWApLA0KICBLRVkgYGlkeF90eXBfdHJhbnNmb3JtYWNqaWAgKGB0eXBfdHJhbnNmb3JtYWNqaWApLA0KICBLRVkgYGlkeF9ldGFwX3Byb2Nlc3VgIChgZXRhcF9wcm9jZXN1YCksDQogIENPTlNUUkFJTlQgYHBhcnRpZV9zdXJvd2NhX2liZmtfMWAgRk9SRUlHTiBLRVkgKGBpZF9zcHJ6ZXR1YCkgUkVGRVJFTkNFUyBgc3ByemV0YCAoYGlkYCkgT04gREVMRVRFIFNFVCBOVUxMDQopIEVOR0lORT1Jbm5vREIgQVVUT19JTkNSRU1FTlQ9OTggREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2kgQ09NTUVOVD0nS2HFvGR5IHdpZXJzeiB0byB1bmlrYWxuYSBwYXJ0aWEgcHJvZHVrY3lqbmEgc3Vyb3djYSc7DQovKiE0MDEwMSBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSBAc2F2ZWRfY3NfY2xpZW50ICovOw0KDQotLQ0KLS0gVGFibGUgc3RydWN0dXJlIGZvciB0YWJsZSBgcGF0aGZpbmRlcl90ZXN0X2hpc3RvcnlgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgcGF0aGZpbmRlcl90ZXN0X2hpc3RvcnlgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYHBhdGhmaW5kZXJfdGVzdF9oaXN0b3J5YCAoDQogIGBpZGAgaW50IE5PVCBOVUxMIEFVVE9fSU5DUkVNRU5ULA0KICBgdGVzdF90eXBlYCB2YXJjaGFyKDUwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgTk9UIE5VTEwsDQogIGBzdGFydF9wb2ludGAgdmFyY2hhcigxMDApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIGBlbmRfcG9pbnRgIHZhcmNoYXIoMTAwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgREVGQVVMVCBOVUxMLA0KICBgdGVzdF9wYXJhbWV0ZXJzYCBqc29uIERFRkFVTFQgTlVMTCwNCiAgYHJlc3VsdGAganNvbiBERUZBVUxUIE5VTEwsDQogIGBzdWNjZXNzYCB0aW55aW50KDEpIERFRkFVTFQgTlVMTCwNCiAgYGV4ZWN1dGlvbl90aW1lX21zYCBpbnQgREVGQVVMVCBOVUxMLA0KICBgY3JlYXRlZF9hdGAgZGF0ZXRpbWUgREVGQVVMVCBDVVJSRU5UX1RJTUVTVEFNUCwNCiAgUFJJTUFSWSBLRVkgKGBpZGApDQopIEVOR0lORT1Jbm5vREIgQVVUT19JTkNSRU1FTlQ9MTAwIERFRkFVTFQgQ0hBUlNFVD11dGY4bWI0IENPTExBVEU9dXRmOG1iNF91bmljb2RlX2NpOw0KLyohNDAxMDEgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gQHNhdmVkX2NzX2NsaWVudCAqLzsNCg0KLS0NCi0tIFRhYmxlIHN0cnVjdHVyZSBmb3IgdGFibGUgYHBvcnR5X3NwcnpldHVgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgcG9ydHlfc3ByemV0dWA7DQovKiE0MDEwMSBTRVQgQHNhdmVkX2NzX2NsaWVudCAgICAgPSBAQGNoYXJhY3Rlcl9zZXRfY2xpZW50ICovOw0KLyohNTA1MDMgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gdXRmOG1iNCAqLzsNCkNSRUFURSBUQUJMRSBgcG9ydHlfc3ByemV0dWAgKA0KICBgaWRgIGludCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwNCiAgYGlkX3NwcnpldHVgIGludCBOT1QgTlVMTCwNCiAgYG5hendhX3BvcnR1YCB2YXJjaGFyKDUwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgTk9UIE5VTEwsDQogIGB0eXBfcG9ydHVgIGVudW0oJ0lOJywnT1VUJykgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIE5PVCBOVUxMLA0KICBQUklNQVJZIEtFWSAoYGlkYCksDQogIFVOSVFVRSBLRVkgYG5hendhX3BvcnR1YCAoYG5hendhX3BvcnR1YCksDQogIEtFWSBgaWRfc3ByemV0dWAgKGBpZF9zcHJ6ZXR1YCksDQogIENPTlNUUkFJTlQgYHBvcnR5X3NwcnpldHVfaWJma18xYCBGT1JFSUdOIEtFWSAoYGlkX3NwcnpldHVgKSBSRUZFUkVOQ0VTIGBzcHJ6ZXRgIChgaWRgKSBPTiBERUxFVEUgQ0FTQ0FERQ0KKSBFTkdJTkU9SW5ub0RCIEFVVE9fSU5DUkVNRU5UPTEyNiBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfdW5pY29kZV9jaSBDT01NRU5UPSdQdW5rdHkgd2VqxZtjaW93ZS93eWrFm2Npb3dlIG5hIHNwcnrEmWNpZSAocmVha3RvcmFjaCwgZmlsdHJhY2gpJzsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBwcm9ia2lfb2NlbmFgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgcHJvYmtpX29jZW5hYDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBwcm9ia2lfb2NlbmFgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBpZF9wYXJ0aWlgIGludCBOT1QgTlVMTCwNCiAgYGlkX2N5a2x1X2ZpbHRyYWN5am5lZ29gIGludCBOT1QgTlVMTCwNCiAgYGN6YXNfcG9icmFuaWFgIGRhdGV0aW1lIE5PVCBOVUxMLA0KICBgY3phc19vY2VueWAgZGF0ZXRpbWUgREVGQVVMVCBOVUxMLA0KICBgd3luaWtfb2NlbnlgIGVudW0oJ3Bvenl0eXduYScsJ25lZ2F0eXduYScsJ29jemVrdWplJykgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIERFRkFVTFQgJ29jemVrdWplJywNCiAgYG9jZW5hX2tvbG9ydWAgdmFyY2hhcig1MCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIERFRkFVTFQgTlVMTCwNCiAgYGRlY3l6amFgIGVudW0oJ2tvbnR5bnV1al9maWx0cmFjamUnLCd3eXNsaWpfZG9fbWFnYXp5bnUnLCdkb2Rhal96aWVtaWUnKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgREVGQVVMVCBOVUxMLA0KICBgb3BlcmF0b3Jfb2NlbmlhamFjeWAgdmFyY2hhcigxMDApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIGB1d2FnaWAgdGV4dCBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2ksDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgS0VZIGBpZF9jeWtsdV9maWx0cmFjeWpuZWdvYCAoYGlkX2N5a2x1X2ZpbHRyYWN5am5lZ29gKSwNCiAgS0VZIGBpZHhfcGFydGlhX2N6YXNgIChgaWRfcGFydGlpYCxgY3phc19wb2JyYW5pYWApLA0KICBDT05TVFJBSU5UIGBwcm9ia2lfb2NlbmFfaWJma18xYCBGT1JFSUdOIEtFWSAoYGlkX3BhcnRpaWApIFJFRkVSRU5DRVMgYHBhcnRpZV9zdXJvd2NhYCAoYGlkYCkgT04gREVMRVRFIENBU0NBREUsDQogIENPTlNUUkFJTlQgYHByb2JraV9vY2VuYV9pYmZrXzJgIEZPUkVJR04gS0VZIChgaWRfY3lrbHVfZmlsdHJhY3lqbmVnb2ApIFJFRkVSRU5DRVMgYGN5a2xlX2ZpbHRyYWN5am5lYCAoYGlkYCkgT04gREVMRVRFIENBU0NBREUNCikgRU5HSU5FPUlubm9EQiBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfdW5pY29kZV9jaSBDT01NRU5UPSdSZWplc3RyIHByw7NiZWsgaSBpY2ggb2NlbiBwb2RjemFzIHByb2Nlc3UgZmlsdHJhY2ppJzsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBzZWdtZW50eWANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGBzZWdtZW50eWA7DQovKiE0MDEwMSBTRVQgQHNhdmVkX2NzX2NsaWVudCAgICAgPSBAQGNoYXJhY3Rlcl9zZXRfY2xpZW50ICovOw0KLyohNTA1MDMgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gdXRmOG1iNCAqLzsNCkNSRUFURSBUQUJMRSBgc2VnbWVudHlgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBuYXp3YV9zZWdtZW50dWAgdmFyY2hhcigxMDApIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBOT1QgTlVMTCwNCiAgYGlkX3BvcnR1X3N0YXJ0b3dlZ29gIGludCBERUZBVUxUIE5VTEwsDQogIGBpZF93ZXpsYV9zdGFydG93ZWdvYCBpbnQgREVGQVVMVCBOVUxMLA0KICBgaWRfcG9ydHVfa29uY293ZWdvYCBpbnQgREVGQVVMVCBOVUxMLA0KICBgaWRfd2V6bGFfa29uY293ZWdvYCBpbnQgREVGQVVMVCBOVUxMLA0KICBgaWRfemF3b3J1YCBpbnQgTk9UIE5VTEwsDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgVU5JUVVFIEtFWSBgbmF6d2Ffc2VnbWVudHVgIChgbmF6d2Ffc2VnbWVudHVgKSwNCiAgS0VZIGBpZF9wb3J0dV9zdGFydG93ZWdvYCAoYGlkX3BvcnR1X3N0YXJ0b3dlZ29gKSwNCiAgS0VZIGBpZF93ZXpsYV9zdGFydG93ZWdvYCAoYGlkX3dlemxhX3N0YXJ0b3dlZ29gKSwNCiAgS0VZIGBpZF9wb3J0dV9rb25jb3dlZ29gIChgaWRfcG9ydHVfa29uY293ZWdvYCksDQogIEtFWSBgaWRfd2V6bGFfa29uY293ZWdvYCAoYGlkX3dlemxhX2tvbmNvd2Vnb2ApLA0KICBLRVkgYGlkX3phd29ydWAgKGBpZF96YXdvcnVgKSwNCiAgQ09OU1RSQUlOVCBgc2VnbWVudHlfaWJma18xYCBGT1JFSUdOIEtFWSAoYGlkX3BvcnR1X3N0YXJ0b3dlZ29gKSBSRUZFUkVOQ0VTIGBwb3J0eV9zcHJ6ZXR1YCAoYGlkYCksDQogIENPTlNUUkFJTlQgYHNlZ21lbnR5X2liZmtfMmAgRk9SRUlHTiBLRVkgKGBpZF93ZXpsYV9zdGFydG93ZWdvYCkgUkVGRVJFTkNFUyBgd2V6bHlfcnVyb2NpYWd1YCAoYGlkYCksDQogIENPTlNUUkFJTlQgYHNlZ21lbnR5X2liZmtfM2AgRk9SRUlHTiBLRVkgKGBpZF9wb3J0dV9rb25jb3dlZ29gKSBSRUZFUkVOQ0VTIGBwb3J0eV9zcHJ6ZXR1YCAoYGlkYCksDQogIENPTlNUUkFJTlQgYHNlZ21lbnR5X2liZmtfNGAgRk9SRUlHTiBLRVkgKGBpZF93ZXpsYV9rb25jb3dlZ29gKSBSRUZFUkVOQ0VTIGB3ZXpseV9ydXJvY2lhZ3VgIChgaWRgKSwNCiAgQ09OU1RSQUlOVCBgc2VnbWVudHlfaWJma181YCBGT1JFSUdOIEtFWSAoYGlkX3phd29ydWApIFJFRkVSRU5DRVMgYHphd29yeWAgKGBpZGApDQopIEVOR0lORT1Jbm5vREIgQVVUT19JTkNSRU1FTlQ9MjQxIERFRkFVTFQgQ0hBUlNFVD11dGY4bWI0IENPTExBVEU9dXRmOG1iNF91bmljb2RlX2NpIENPTU1FTlQ9J0RlZmluaXVqZSBmaXp5Y3puZSBwb8WCxIVjemVuaWEgKGtyYXfEmWR6aWUgZ3JhZnUpJzsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBzcHJ6ZXRgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgc3ByemV0YDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBzcHJ6ZXRgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBuYXp3YV91bmlrYWxuYWAgdmFyY2hhcigyMCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIE5PVCBOVUxMIENPTU1FTlQgJ05wLiBSMSwgRlosIEIxYiwgQjdjJywNCiAgYHR5cF9zcHJ6ZXR1YCBlbnVtKCdyZWFrdG9yJywnZmlsdHInLCdiZWN6a2FfYnJ1ZG5hJywnYmVjemthX2N6eXN0YScsJ2Fwb2xsbycsJ21hZ2F6eW4nLCdjeXN0ZXJuYScsJ21hdXplcicpIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIGBwb2plbW5vc2Nfa2dgIGRlY2ltYWwoMTAsMikgREVGQVVMVCBOVUxMLA0KICBgc3Rhbl9zcHJ6ZXR1YCB2YXJjaGFyKDUwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgREVGQVVMVCBOVUxMIENPTU1FTlQgJ05wLiBQdXN0eSwgVyBrb8WCbywgUHJ6ZWxldywgRG11Y2hhbmllIGZpbHRyYScsDQogIGB0ZW1wZXJhdHVyYV9ha3R1YWxuYWAgZGVjaW1hbCgxMCw2KSBERUZBVUxUIE5VTEwsDQogIGBjaXNuaWVuaWVfYWt0dWFsbmVgIGRlY2ltYWwoNSwyKSBERUZBVUxUIE5VTEwsDQogIGBwb3ppb21fYWt0dWFsbnlfcHJvY2VudGAgZGVjaW1hbCg1LDIpIERFRkFVTFQgTlVMTCwNCiAgYG9zdGF0bmlhX2FrdHVhbGl6YWNqYWAgZGF0ZXRpbWUgREVGQVVMVCBOVUxMLA0KICBgdGVtcGVyYXR1cmFfbWF4YCBkZWNpbWFsKDEwLDYpIERFRkFVTFQgJzEyMC4wMDAwMDAnLA0KICBgY2lzbmllbmllX21heGAgZGVjaW1hbCg1LDIpIERFRkFVTFQgJzYuMDAnLA0KICBgaWRfcGFydGlpX3N1cm93Y2FgIGludCBERUZBVUxUIE5VTEwsDQogIGB0ZW1wZXJhdHVyYV9kb2NlbG93YWAgZGVjaW1hbCgxMCw2KSBERUZBVUxUIE5VTEwgQ09NTUVOVCAnVGVtcGVyYXR1cmEgemFkYW5hIHByemV6IG9wZXJhdG9yYScsDQogIGBzenlia29zY190b3BuaWVuaWFfa2dfaGAgZGVjaW1hbCgxMCwyKSBERUZBVUxUICcxMDAwLjAwJyBDT01NRU5UICdTemFjb3dhbmEgc3p5YmtvxZvEhyB0b3BuaWVuaWEgc3Vyb3djYSB3IGtnIG5hIGdvZHppbsSZJywNCiAgYHV3YWdpX3Nlcndpc293ZWAgdGV4dCBDT0xMQVRFIHV0ZjhtYjRfdW5pY29kZV9jaSwNCiAgYGFjdGl2ZV9taXhfaWRgIGludCBERUZBVUxUIE5VTEwsDQogIGBzenlia29zY19ncnphbmlhX2NfbmFfbWludXRlYCBkZWNpbWFsKDEwLDYpIERFRkFVTFQgTlVMTCBDT01NRU5UICdTemFjb3dhbmEgc3p5YmtvxZvEhyBncnphbmlhIHcgwrBDL21pbicsDQogIGBzenlia29zY19jaGxvZHplbmlhX2NfbmFfbWludXRlYCBkZWNpbWFsKDEwLDYpIERFRkFVTFQgTlVMTCBDT01NRU5UICdTemFjb3dhbmEgc3p5YmtvxZvEhyBjaMWCb2R6ZW5pYSB3IMKwQy9taW4nLA0KICBgc3Rhbl9wYWxuaWthYCBlbnVtKCdXTEFDWk9OWScsJ1dZTEFDWk9OWScpIENPTExBVEUgdXRmOG1iNF91bmljb2RlX2NpIERFRkFVTFQgTlVMTCBDT01NRU5UICdBa3R1YWxueSBzdGFuIHBhbG5pa2EgcmVha3RvcmEnLA0KICBgZmlsdGVyX2Nha2Vfc3RhdHVzYCB2YXJjaGFyKDUwKSBDT0xMQVRFIHV0ZjhtYjRfdW5pY29kZV9jaSBERUZBVUxUIE5VTEwgQ09NTUVOVCAnU3RhdHVzIHBsYWNrYSBuYSBmaWx0cnplIChucC4gQ1pZU1RZLCBUMTBfR09UT1dZKScsDQogIGBmaWx0ZXJfY2FrZV9vcmlnaW5fbWl4X2lkYCBpbnQgREVGQVVMVCBOVUxMIENPTU1FTlQgJ0lEIG1pZXN6YW5pbnkgKFRhbmtNaXgpLCB6IGt0w7NyZWogcG9jaG9kemkgb2JlY255IHBsYWNlaycsDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgVU5JUVVFIEtFWSBgbmF6d2FfdW5pa2FsbmFgIChgbmF6d2FfdW5pa2FsbmFgKSwNCiAgS0VZIGBpeF9zcHJ6ZXRfYWN0aXZlX21peF9pZGAgKGBhY3RpdmVfbWl4X2lkYCkNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD0xMTggREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2kgQ09NTUVOVD0nTGlzdGEgY2HFgmVnbyBzcHJ6xJl0dSBwcm9kdWtjeWpuZWdvIGkgbWFnYXp5bm93ZWdvJzsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGBzdGF0dXN5YA0KLS0NCg0KRFJPUCBUQUJMRSBJRiBFWElTVFMgYHN0YXR1c3lgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYHN0YXR1c3lgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBuYXp3YV9zdGF0dXN1YCB2YXJjaGFyKDUwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgTk9UIE5VTEwgQ09NTUVOVCAnTnAuIFN1cm93eSwgRmlsdHJvd2FueSwgRG9iaWVsb255LCBXeWRtdWNoJywNCiAgUFJJTUFSWSBLRVkgKGBpZGApLA0KICBVTklRVUUgS0VZIGBuYXp3YV9zdGF0dXN1YCAoYG5hendhX3N0YXR1c3VgKQ0KKSBFTkdJTkU9SW5ub0RCIEFVVE9fSU5DUkVNRU5UPTggREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2kgQ09NTUVOVD0nU8WCb3duaWsgbW/FvGxpd3ljaCBzdGF0dXPDs3cgcGFydGlpIHN1cm93Y2EnOw0KLyohNDAxMDEgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gQHNhdmVkX2NzX2NsaWVudCAqLzsNCg0KLS0NCi0tIFRhYmxlIHN0cnVjdHVyZSBmb3IgdGFibGUgYHN0YXR1c3lfcGFydGlpYA0KLS0NCg0KRFJPUCBUQUJMRSBJRiBFWElTVFMgYHN0YXR1c3lfcGFydGlpYDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGBzdGF0dXN5X3BhcnRpaWAgKA0KICBgaWRgIGludCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwNCiAgYG5hendhX3N0YXR1c3VgIHZhcmNoYXIoNTApIE5PVCBOVUxMLA0KICBgb3Bpc2AgdGV4dCwNCiAgUFJJTUFSWSBLRVkgKGBpZGApLA0KICBVTklRVUUgS0VZIGBuYXp3YV9zdGF0dXN1YCAoYG5hendhX3N0YXR1c3VgKQ0KKSBFTkdJTkU9SW5ub0RCIERFRkFVTFQgQ0hBUlNFVD11dGY4bWI0IENPTExBVEU9dXRmOG1iNF8wOTAwX2FpX2NpOw0KLyohNDAxMDEgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gQHNhdmVkX2NzX2NsaWVudCAqLzsNCg0KLS0NCi0tIFRhYmxlIHN0cnVjdHVyZSBmb3IgdGFibGUgYHRhbmtfbWl4ZXNgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgdGFua19taXhlc2A7DQovKiE0MDEwMSBTRVQgQHNhdmVkX2NzX2NsaWVudCAgICAgPSBAQGNoYXJhY3Rlcl9zZXRfY2xpZW50ICovOw0KLyohNTA1MDMgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gdXRmOG1iNCAqLzsNCkNSRUFURSBUQUJMRSBgdGFua19taXhlc2AgKA0KICBgaWRgIGludCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwNCiAgYHVuaXF1ZV9jb2RlYCB2YXJjaGFyKDUwKSBOT1QgTlVMTCwNCiAgYHRhbmtfaWRgIGludCBOT1QgTlVMTCwNCiAgYGNyZWF0aW9uX2RhdGVgIGRhdGV0aW1lIE5PVCBOVUxMIERFRkFVTFQgQ1VSUkVOVF9USU1FU1RBTVAsDQogIGBzdGF0dXNgIGVudW0oJ0FDVElWRScsJ0FSQ0hJVkVEJykgTk9UIE5VTEwsDQogIGBwcm9jZXNzX3N0YXR1c2AgdmFyY2hhcig1MCkgTk9UIE5VTEwgQ09NTUVOVCAnSmF3bnkgc3RhdHVzIGV0YXB1IHByemV0d2FyemFuaWEgbWllc3phbmlueScsDQogIGBtYWluX2NvbXBvc2l0aW9uYCBqc29uIERFRkFVTFQgTlVMTCBDT01NRU5UICdTxYJvd25payBnxYLDs3dueWNoIHNrxYJhZG5pa8OzdyB6IHByb2NlbnRhbWksIG5wLiB7IlQxMCI6IDk5LjB9JywNCiAgYHd5ZG11Y2hfcGVyY2VudGFnZWAgZGVjaW1hbCg1LDIpIE5PVCBOVUxMLA0KICBgZmlsdGVyX3JlbWFpbnNfcGVyY2VudGFnZWAgZGVjaW1hbCg1LDIpIE5PVCBOVUxMLA0KICBgZmlsdHJhdGlvbl9jeWNsZXNfY291bnRgIGludCBOT1QgTlVMTCwNCiAgYHd5ZG11Y2hfY3ljbGVzX2NvdW50YCBpbnQgTk9UIE5VTEwsDQogIGBibGVhY2hpbmdfZWFydGhfYmFnc190b3RhbGAgaW50IE5PVCBOVUxMLA0KICBgd2hpdGVib2FyZF9pZGAgdmFyY2hhcigxMCkgREVGQVVMVCBOVUxMIENPTU1FTlQgJ0lkZW50eWZpa2F0b3IgeiB3aGl0ZWJvYXJkdSwgbnAuIChBKSwgKEIpJywNCiAgYGlzX3d5ZG11Y2hfbWl4YCB0aW55aW50KDEpIE5PVCBOVUxMIENPTU1FTlQgJ096bmFjemEsIGN6eSB0YSBtaWVzemFuaW5hIHNrxYJhZGEgc2nEmSB3ecWCxIVjem5pZSB6IHd5ZG11Y2jDs3cuJywNCiAgUFJJTUFSWSBLRVkgKGBpZGApLA0KICBVTklRVUUgS0VZIGB1bmlxdWVfY29kZWAgKGB1bmlxdWVfY29kZWApLA0KICBLRVkgYHRhbmtfaWRgIChgdGFua19pZGApLA0KICBDT05TVFJBSU5UIGB0YW5rX21peGVzX2liZmtfMWAgRk9SRUlHTiBLRVkgKGB0YW5rX2lkYCkgUkVGRVJFTkNFUyBgc3ByemV0YCAoYGlkYCkNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD0xOCBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfMDkwMF9haV9jaTsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGB0eXB5X3N1cm93Y2FgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgdHlweV9zdXJvd2NhYDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGB0eXB5X3N1cm93Y2FgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBuYXp3YWAgdmFyY2hhcig1MCkgQ0hBUkFDVEVSIFNFVCB1dGY4bWI0IENPTExBVEUgdXRmOG1iNF8wOTAwX2FpX2NpIE5PVCBOVUxMLA0KICBgb3Bpc2AgdmFyY2hhcigyNTUpIENIQVJBQ1RFUiBTRVQgdXRmOG1iNCBDT0xMQVRFIHV0ZjhtYjRfMDkwMF9haV9jaSBERUZBVUxUIE5VTEwsDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgVU5JUVVFIEtFWSBgbmF6d2FgIChgbmF6d2FgKQ0KKSBFTkdJTkU9SW5ub0RCIEFVVE9fSU5DUkVNRU5UPTYgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2kgQ09NTUVOVD0nU8WCb3duaWsgdHlww7N3IHN1cm93Y2EnOw0KLyohNDAxMDEgU0VUIGNoYXJhY3Rlcl9zZXRfY2xpZW50ID0gQHNhdmVkX2NzX2NsaWVudCAqLzsNCg0KLS0NCi0tIFRhYmxlIHN0cnVjdHVyZSBmb3IgdGFibGUgYHdlemx5X3J1cm9jaWFndWANCi0tDQoNCkRST1AgVEFCTEUgSUYgRVhJU1RTIGB3ZXpseV9ydXJvY2lhZ3VgOw0KLyohNDAxMDEgU0VUIEBzYXZlZF9jc19jbGllbnQgICAgID0gQEBjaGFyYWN0ZXJfc2V0X2NsaWVudCAqLzsNCi8qITUwNTAzIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IHV0ZjhtYjQgKi87DQpDUkVBVEUgVEFCTEUgYHdlemx5X3J1cm9jaWFndWAgKA0KICBgaWRgIGludCBOT1QgTlVMTCBBVVRPX0lOQ1JFTUVOVCwNCiAgYG5hendhX3dlemxhYCB2YXJjaGFyKDUwKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgTk9UIE5VTEwsDQogIFBSSU1BUlkgS0VZIChgaWRgKSwNCiAgVU5JUVVFIEtFWSBgbmF6d2Ffd2V6bGFgIChgbmF6d2Ffd2V6bGFgKQ0KKSBFTkdJTkU9SW5ub0RCIEFVVE9fSU5DUkVNRU5UPTEzOCBERUZBVUxUIENIQVJTRVQ9dXRmOG1iNCBDT0xMQVRFPXV0ZjhtYjRfdW5pY29kZV9jaSBDT01NRU5UPSdQdW5rdHkgxYLEhWN6ZW5pb3dlIHcgcnVyb2NpxIVndSAodHLDs2puaWtpLCBrb2xla3RvcnkpJzsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQoNCi0tDQotLSBUYWJsZSBzdHJ1Y3R1cmUgZm9yIHRhYmxlIGB6YXdvcnlgDQotLQ0KDQpEUk9QIFRBQkxFIElGIEVYSVNUUyBgemF3b3J5YDsNCi8qITQwMTAxIFNFVCBAc2F2ZWRfY3NfY2xpZW50ICAgICA9IEBAY2hhcmFjdGVyX3NldF9jbGllbnQgKi87DQovKiE1MDUwMyBTRVQgY2hhcmFjdGVyX3NldF9jbGllbnQgPSB1dGY4bWI0ICovOw0KQ1JFQVRFIFRBQkxFIGB6YXdvcnlgICgNCiAgYGlkYCBpbnQgTk9UIE5VTEwgQVVUT19JTkNSRU1FTlQsDQogIGBuYXp3YV96YXdvcnVgIHZhcmNoYXIoODApIENPTExBVEUgdXRmOG1iNF91bmljb2RlX2NpIERFRkFVTFQgTlVMTCwNCiAgYHN0YW5gIGVudW0oJ09UV0FSVFknLCdaQU1LTklFVFknKSBDSEFSQUNURVIgU0VUIHV0ZjhtYjQgQ09MTEFURSB1dGY4bWI0XzA5MDBfYWlfY2kgTk9UIE5VTEwgREVGQVVMVCAnWkFNS05JRVRZJywNCiAgUFJJTUFSWSBLRVkgKGBpZGApLA0KICBVTklRVUUgS0VZIGBuYXp3YV96YXdvcnVgIChgbmF6d2FfemF3b3J1YCkNCikgRU5HSU5FPUlubm9EQiBBVVRPX0lOQ1JFTUVOVD0yMDUgREVGQVVMVCBDSEFSU0VUPXV0ZjhtYjQgQ09MTEFURT11dGY4bWI0X3VuaWNvZGVfY2kgQ09NTUVOVD0nTGlzdGEgemF3b3LDs3cgc3RlcnVqxIVjeWNoIHByemVwxYJ5d2VtJzsNCi8qITQwMTAxIFNFVCBjaGFyYWN0ZXJfc2V0X2NsaWVudCA9IEBzYXZlZF9jc19jbGllbnQgKi87DQovKiE0MDEwMyBTRVQgVElNRV9aT05FPUBPTERfVElNRV9aT05FICovOw0KDQovKiE0MDEwMSBTRVQgU1FMX01PREU9QE9MRF9TUUxfTU9ERSAqLzsNCi8qITQwMDE0IFNFVCBGT1JFSUdOX0tFWV9DSEVDS1M9QE9MRF9GT1JFSUdOX0tFWV9DSEVDS1MgKi87DQovKiE0MDAxNCBTRVQgVU5JUVVFX0NIRUNLUz1AT0xEX1VOSVFVRV9DSEVDS1MgKi87DQovKiE0MDEwMSBTRVQgQ0hBUkFDVEVSX1NFVF9DTElFTlQ9QE9MRF9DSEFSQUNURVJfU0VUX0NMSUVOVCAqLzsNCi8qITQwMTAxIFNFVCBDSEFSQUNURVJfU0VUX1JFU1VMVFM9QE9MRF9DSEFSQUNURVJfU0VUX1JFU1VMVFMgKi87DQovKiE0MDEwMSBTRVQgQ09MTEFUSU9OX0NPTk5FQ1RJT049QE9MRF9DT0xMQVRJT05fQ09OTkVDVElPTiAqLzsNCi8qITQwMTExIFNFVCBTUUxfTk9URVM9QE9MRF9TUUxfTk9URVMgKi87DQoNCi0tIER1bXAgY29tcGxldGVkIG9uIDIwMjUtMDktMTIgMTk6NTY6NTcNCg==
  - path: celery_app.py
    content: IyBjZWxlcnlfYXBwLnB5DQpmcm9tIGFwcCBpbXBvcnQgY3JlYXRlX2FwcA0KZnJvbSBjZWxlcnkgaW1wb3J0IENlbGVyeQ0KaW1wb3J0IG9zDQppbXBvcnQgc3lzDQpzeXMucGF0aC5pbnNlcnQoMCwgb3MucGF0aC5qb2luKG9zLnBhdGguZGlybmFtZShfX2ZpbGVfXyksICdsb2NhbF9saWJzJykpDQoNCnByaW50KGYiLS0tIFtERUJVR10gRG9kYW5vIGRvIHN5cy5wYXRoOiB7b3MucGF0aC5qb2luKG9zLnBhdGguZGlybmFtZShfX2ZpbGVfXyksICdsb2NhbF9saWJzJyl9IikNCnByaW50KGYiLS0tIFtDRUxFUllfQVBQIERFQlVHXSBTWVMuUEFUSCBuYSBzdGFyY2llOiB7c3lzLnBhdGhbMF19IikNCg0KIyBVc3RhbCBhZHJlcyBVUkwgYnJva2VyYSBSZWRpcyBuYSBwb2RzdGF3aWUgem1pZW5ueWNoIMWbcm9kb3dpc2tvd3ljaA0KUkVESVNfVVJMID0gb3MuZW52aXJvbi5nZXQoJ1JFRElTX1VSTCcsICdyZWRpczovL2xvY2FsaG9zdDo2Mzc5LzAnKQ0KaWYgIlJFRElTX1VSTCIgbm90IGluIG9zLmVudmlyb246DQogICAgdHJ5Og0KICAgICAgICBpbXBvcnQgc29ja2V0DQogICAgICAgIHNvY2tldC5nZXRob3N0YnluYW1lKCdyZWRpcycpDQogICAgICAgIFJFRElTX1VSTCA9ICdyZWRpczovL3JlZGlzOjYzNzkvMCcNCiAgICBleGNlcHQgc29ja2V0LmVycm9yOg0KICAgICAgICBwYXNzDQoNCiMgVXR3w7NyeiBpbnN0YW5jasSZIGFwbGlrYWNqaSBGbGFzaywgYWJ5IG1pZcSHIGRvc3TEmXAgZG8gamVqIGtvbmZpZ3VyYWNqaQ0KcHJpbnQoIi0tLSBbQ0VMRVJZX0FQUCBERUJVR10gUHJ6ZWQgd3l3b8WCYW5pZW0gY3JlYXRlX2FwcCgpLi4uIikNCmZsYXNrX2FwcCA9IGNyZWF0ZV9hcHAoKQ0KcHJpbnQoIi0tLSBbQ0VMRVJZX0FQUCBERUJVR10gUG8gd3l3b8WCYW5pdSBjcmVhdGVfYXBwKCkuIEFwbGlrYWNqYSBzdHdvcnpvbmEuIikNCg0KZGVmIG1ha2VfY2VsZXJ5KGFwcCk6DQogICAgIiIiDQogICAgVHdvcnp5IGkga29uZmlndXJ1amUgaW5zdGFuY2rEmSBDZWxlcnksIMWCxIVjesSFYyBqxIUgeiBhcGxpa2FjasSFIEZsYXNrLg0KICAgICIiIg0KICAgIGNlbGVyeSA9IENlbGVyeSgNCiAgICAgICAgYXBwLmltcG9ydF9uYW1lLA0KICAgICAgICBiYWNrZW5kPVJFRElTX1VSTCwNCiAgICAgICAgYnJva2VyPVJFRElTX1VSTA0KICAgICkNCiAgICBwcmludChmIi0tLSBbQ0VMRVJZX0FQUCBERUJVR10gS29uZmlndXJhY2phIHogRmxhc2thIChhcHAuY29uZmlnKToge2FwcC5jb25maWcuZ2V0KCdDRUxFUllfQkVBVF9EQlVSSScpfSIpDQogICAgY2VsZXJ5LmNvbmZpZ19mcm9tX29iamVjdCgnYXBwLmNvbmZpZy5Db25maWcnKQ0KDQogICAgIyBTcHJhd2TFum15LCBjbyBDZWxlcnkgbWEgcG8gemHFgmFkb3dhbml1IGtvbmZpZ3VyYWNqaQ0KICAgIHByaW50KGYiLS0tIFtDRUxFUllfQVBQIERFQlVHXSBLb25maWd1cmFjamEgdyBDZWxlcnkgKHBvIGNvbmZpZ19mcm9tX29iamVjdCk6IHtjZWxlcnkuY29uZi5nZXQoJ2JlYXRfc2NoZWR1bGVyX2RidXJpJyl9IikNCg0KICAgIGJlYXRfZGJfdXJpID0gYXBwLmNvbmZpZy5nZXQoJ0NFTEVSWV9CRUFUX0RCVVJJJykNCiAgICBwcmludChmIi0tLSBbQ0VMRVJZX0FQUCBERUJVR10gSmF3bmUgdXN0YXdpYW5pZSAnYmVhdF9kYnVyaScgbmE6IHtiZWF0X2RiX3VyaX0iKQ0KICAgIGNlbGVyeS5jb25mLnVwZGF0ZSh7DQogICAgICAgICdiZWF0X2RidXJpJzogYmVhdF9kYl91cmkNCiAgICB9KQ0KDQogICAgY2xhc3MgQ29udGV4dFRhc2soY2VsZXJ5LlRhc2spOg0KICAgICAgICBkZWYgX19jYWxsX18oc2VsZiwgKmFyZ3MsICoqa3dhcmdzKToNCiAgICAgICAgICAgIHdpdGggYXBwLmFwcF9jb250ZXh0KCk6DQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYucnVuKCphcmdzLCAqKmt3YXJncykNCiAgICANCiAgICBjZWxlcnkuVGFzayA9IENvbnRleHRUYXNrDQogICAgcmV0dXJuIGNlbGVyeQ0KDQpjZWxlcnkgPSBtYWtlX2NlbGVyeShmbGFza19hcHApDQoNCiMgSmF3bmUgemFpbXBvcnRvd2FuaWUgbW9kdcWCdSB6IHphZGFuaWFtaQ0KY2VsZXJ5LmF1dG9kaXNjb3Zlcl90YXNrcyhbJ2FwcC50YXNrcyddKQ0KDQojIC0tLSBVU1VOScSYVEEgU0VLQ0pBIC0tLQ0KIyBDYcWCYSBsb2dpa2EgendpxIV6YW5hIHogU0VOU09SU19JTlRFUlZBTCwgQUxBUk1TX0VOQUJMRUQNCiMgaSBidWRvd2FuaWVtIHPFgm93bmlrYSBgYmVhdF9zY2hlZHVsZWAgem9zdGHFgmEgdXN1bmnEmXRhLg0KIyBUZXJheiBoYXJtb25vZ3JhbSBixJlkemllIHcgY2HFgm/Fm2NpIHcgYmF6aWUgZGFueWNoLg0KIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQ==
  - path: manage.py
    content: IyBtYW5hZ2UucHkNCg0KDQppbXBvcnQgc3lzDQppbXBvcnQgb3MNCnN5cy5wYXRoLmluc2VydCgwLCBvcy5wYXRoLmpvaW4ob3MucGF0aC5kaXJuYW1lKF9fZmlsZV9fKSwgJ2xvY2FsX2xpYnMnKSkNCmZyb20gY2VsZXJ5X3NxbGFsY2hlbXlfc2NoZWR1bGVyIGltcG9ydCBtb2RlbHMNCg0KDQoNCmltcG9ydCBjbGljaw0KZnJvbSBhcHAgaW1wb3J0IGNyZWF0ZV9hcHANCmZyb20gYXBwLnNlbnNvcnMgaW1wb3J0IFNlbnNvclNlcnZpY2UNCmZyb20gYXBwLmV4dGVuc2lvbnMgaW1wb3J0IGRiDQpmcm9tIHRhYnVsYXRlIGltcG9ydCB0YWJ1bGF0ZQ0KZnJvbSBhcHAuc29ja2V0cyBpbXBvcnQgYnJvYWRjYXN0X2Rhc2hib2FyZF91cGRhdGUNCmltcG9ydCB0aW1lDQpmcm9tIGNlbGVyeV9zcWxhbGNoZW15X3NjaGVkdWxlci5tb2RlbHMgaW1wb3J0IFBlcmlvZGljVGFzaywgSW50ZXJ2YWxTY2hlZHVsZQ0KDQoNCiMgVHdvcnp5bXkgaW5zdGFuY2rEmSBhcGxpa2FjamksIGFieSBtaWXEhyBkb3N0xJlwIGRvIGplaiBrb250ZWtzdHUNCiMgSmVzdCB0byBrb25pZWN6bmUsIGFieSBTZW5zb3JTZXJ2aWNlIG3Ds2fFgiBrb3J6eXN0YcSHIHogYGRiLnNlc3Npb25gDQphcHAgPSBjcmVhdGVfYXBwKCkNCg0KQGFwcC5jbGkuY29tbWFuZCgic2V0LXRlbXAiKQ0KQGNsaWNrLmFyZ3VtZW50KCJ0ZW1wZXJhdHVyYSIsIHR5cGU9ZmxvYXQpDQpAY2xpY2suYXJndW1lbnQoInNwcnpldHkiLCBuYXJncz0tMSkNCmRlZiBzZXRfdGVtcF9jb21tYW5kKHRlbXBlcmF0dXJhLCBzcHJ6ZXR5KToNCiAgICAiIiINCiAgICBVc3Rhd2lhIHRlbXBlcmF0dXLEmSBkbGEgcG9kYW5lZ28gc3ByesSZdHUuDQoNCiAgICBQcnp5a8WCYWQgdcW8eWNpYToNCiAgICBmbGFzayBzZXQtdGVtcCA4NS41IFIxIFIyIEZaMQ0KICAgIGZsYXNrIHNldC10ZW1wIDYwLjAgLS0gLS13c3p5c3RraWUtcmVha3RvcnkNCiAgICAiIiINCiAgICBlcXVpcG1lbnRfdG9fdXBkYXRlID0gbGlzdChzcHJ6ZXR5KQ0KDQogICAgIyBPcGNqYSBzcGVjamFsbmEgZG8gYWt0dWFsaXphY2ppIHdzenlzdGtpY2ggcmVha3RvcsOzdw0KICAgIGlmICItLWFsbCIgaW4gZXF1aXBtZW50X3RvX3VwZGF0ZToNCiAgICAgICAgIyBXIHByenlzesWCb8WbY2kgbW/FvG5hIHRvIHByemVuaWXFm8SHIGRvIHNlcndpc3UsIGFsZSBkbGEgcHJvc3RvdHkgamVzdCB0dXRhag0KICAgICAgICBmcm9tIGFwcC5tb2RlbHMgaW1wb3J0IFNwcnpldA0KICAgICAgICB3aXRoIGFwcC5hcHBfY29udGV4dCgpOg0KICAgICAgICAgICAgZXF1aXBtZW50X3RvX3VwZGF0ZSA9IGRiLnNlc3Npb24uZXhlY3V0ZSgNCiAgICAgICAgICAgICAgICBkYi5zZWxlY3QoU3ByemV0Lm5hendhX3VuaWthbG5hKS53aGVyZShTcHJ6ZXQudHlwX3NwcnpldHUuaW5fKFsncmVha3RvcicsICdhcG9sbG8nLCAnYmVjemthX2JydWRuYScsICdiZWN6a2FfY3p5c3RhJ10pKQ0KICAgICAgICAgICAgKS5zY2FsYXJzKCkuYWxsKCkNCg0KICAgIGlmIG5vdCBlcXVpcG1lbnRfdG9fdXBkYXRlOg0KICAgICAgICBjbGljay5lY2hvKCJCxYLEhWQ6IE5pZSBwb2Rhbm8gxbxhZG5lZ28gc3ByesSZdHUgZG8gYWt0dWFsaXphY2ppLiIpDQogICAgICAgIHJldHVybg0KDQogICAgY2xpY2suZWNobyhmIlByw7NiYSB1c3Rhd2llbmlhIHRlbXBlcmF0dXJ5IHt0ZW1wZXJhdHVyYX3CsEMgZGxhIHNwcnrEmXR1OiB7JywgJy5qb2luKGVxdWlwbWVudF90b191cGRhdGUpfS4uLiIpDQogICAgDQogICAgIyBXeXdvxYJ1amVteSBuYXN6xIUgbm93xIUgbWV0b2TEmSBzZXJ3aXNvd8SFIHcga29udGVrxZtjaWUgYXBsaWthY2ppDQogICAgd2l0aCBhcHAuYXBwX2NvbnRleHQoKToNCiAgICAgICAgdXBkYXRlZCA9IFNlbnNvclNlcnZpY2Uuc2V0X3RlbXBlcmF0dXJlX2Zvcl9tdWx0aXBsZShlcXVpcG1lbnRfdG9fdXBkYXRlLCB0ZW1wZXJhdHVyYSkNCg0KICAgIGlmIHVwZGF0ZWQ6DQogICAgICAgIGNsaWNrLmVjaG8oY2xpY2suc3R5bGUoIlN1a2NlcyEiLCBmZz0iZ3JlZW4iKSkNCiAgICAgICAgY2xpY2suZWNobyhmIlpha3R1YWxpem93YW5vIHRlbXBlcmF0dXLEmSBkbGE6IHsnLCAnLmpvaW4odXBkYXRlZCl9IikNCiAgICAgICAgdGltZS5zbGVlcCgxKQ0KICAgICAgICBicm9hZGNhc3RfZGFzaGJvYXJkX3VwZGF0ZSgpDQogICAgZWxzZToNCiAgICAgICAgY2xpY2suZWNobyhjbGljay5zdHlsZSgiTmllIHVkYcWCbyBzacSZIHpha3R1YWxpem93YcSHIMW8YWRuZWdvIHNwcnrEmXR1LiIsIGZnPSJ5ZWxsb3ciKSkNCg0KQGFwcC5jbGkuY29tbWFuZCgic2hvdy10ZW1wIikNCkBjbGljay5hcmd1bWVudCgic3ByemV0eSIsIG5hcmdzPS0xKQ0KZGVmIHNob3dfdGVtcF9jb21tYW5kKHNwcnpldHkpOg0KICAgICIiIg0KICAgIFd5xZt3aWV0bGEgYWt0dWFsbsSFIGkgZG9jZWxvd8SFIHRlbXBlcmF0dXLEmSBkbGEgcG9kYW5lZ28gc3ByesSZdHUuDQoNCiAgICBQcnp5a8WCYWQgdcW8eWNpYToNCiAgICBmbGFzayBzaG93LXRlbXAgUjEgUjINCiAgICBmbGFzayBzaG93LXRlbXAgLS0gLS13c3p5c3RraWUtcmVha3RvcnkNCiAgICBmbGFzayBzaG93LXRlbXANCiAgICAiIiINCiAgICBlcXVpcG1lbnRfdG9fc2hvdyA9IGxpc3Qoc3ByemV0eSkNCg0KICAgICMgRG9tecWbbG5pZSwgamXFm2xpIG5pZSBwb2Rhbm8gYXJndW1lbnTDs3csIHBva2HFvCB3c3p5c3RraWUgcmVha3RvcnkgaSBhcG9sbG8NCiAgICBpZiBub3QgZXF1aXBtZW50X3RvX3Nob3c6DQogICAgICAgIGZyb20gYXBwLm1vZGVscyBpbXBvcnQgU3ByemV0DQogICAgICAgIHdpdGggYXBwLmFwcF9jb250ZXh0KCk6DQogICAgICAgICAgICBlcXVpcG1lbnRfdG9fc2hvdyA9IGRiLnNlc3Npb24uZXhlY3V0ZSgNCiAgICAgICAgICAgICAgICBkYi5zZWxlY3QoU3ByemV0Lm5hendhX3VuaWthbG5hKS53aGVyZShTcHJ6ZXQudHlwX3NwcnpldHUuaW5fKFsncmVha3RvcicsICdhcG9sbG8nLCAnYmVjemthX2JydWRuYScsICdiZWN6a2FfY3p5c3RhJ10pKQ0KICAgICAgICAgICAgKS5zY2FsYXJzKCkuYWxsKCkNCiAgICANCiAgICAjIE9ic8WCdWdhIGZsYWdpIC0td3N6eXN0a2llLXJlYWt0b3J5DQogICAgZWxpZiAiLS13c3p5c3RraWUtcmVha3RvcnkiIGluIGVxdWlwbWVudF90b19zaG93Og0KICAgICAgICBmcm9tIGFwcC5tb2RlbHMgaW1wb3J0IFNwcnpldA0KICAgICAgICB3aXRoIGFwcC5hcHBfY29udGV4dCgpOg0KICAgICAgICAgICAgZXF1aXBtZW50X3RvX3Nob3cgPSBkYi5zZXNzaW9uLmV4ZWN1dGUoDQogICAgICAgICAgICAgICAgZGIuc2VsZWN0KFNwcnpldC5uYXp3YV91bmlrYWxuYSkud2hlcmUoU3ByemV0LnR5cF9zcHJ6ZXR1ID09ICdyZWFrdG9yJykNCiAgICAgICAgICAgICkuc2NhbGFycygpLmFsbCgpDQoNCiAgICBpZiBub3QgZXF1aXBtZW50X3RvX3Nob3c6DQogICAgICAgIGNsaWNrLmVjaG8oIk5pZSB6bmFsZXppb25vIHNwcnrEmXR1IGRvIHd5xZt3aWV0bGVuaWEuIikNCiAgICAgICAgcmV0dXJuDQoNCiAgICAjIFd5d2/FgmFqIG1ldG9kxJkgc2Vyd2lzb3fEhQ0KICAgIHdpdGggYXBwLmFwcF9jb250ZXh0KCk6DQogICAgICAgIHRlbXBlcmF0dXJlc19kYXRhID0gU2Vuc29yU2VydmljZS5nZXRfdGVtcGVyYXR1cmVzX2Zvcl9tdWx0aXBsZShlcXVpcG1lbnRfdG9fc2hvdykNCg0KICAgIGlmIG5vdCB0ZW1wZXJhdHVyZXNfZGF0YToNCiAgICAgICAgY2xpY2suZWNobygiTmllIHpuYWxlemlvbm8gZGFueWNoIGRsYSBwb2RhbmVnbyBzcHJ6xJl0dS4iKQ0KICAgICAgICByZXR1cm4NCg0KICAgICMgUHJ6eWdvdHVqIGRhbmUgZG8gdGFiZWxpDQogICAgaGVhZGVycyA9IFsiTmF6d2EgU3ByesSZdHUiLCAiVGVtcGVyYXR1cmEgQWt0dWFsbmEiLCAiVGVtcGVyYXR1cmEgRG9jZWxvd2EiXQ0KICAgIHRhYmxlX2RhdGEgPSBbDQogICAgICAgIFsNCiAgICAgICAgICAgIGl0ZW1bJ25hendhJ10sDQogICAgICAgICAgICBmIntpdGVtWydha3R1YWxuYSddfSDCsEMiIGlmIGl0ZW1bJ2FrdHVhbG5hJ10gaXMgbm90IE5vbmUgZWxzZSAiQnJhayBkYW55Y2giLA0KICAgICAgICAgICAgZiJ7aXRlbVsnZG9jZWxvd2EnXX0gwrBDIiBpZiBpdGVtWydkb2NlbG93YSddIGlzIG5vdCBOb25lIGVsc2UgIkJyYWsgZGFueWNoIg0KICAgICAgICBdDQogICAgICAgIGZvciBpdGVtIGluIHRlbXBlcmF0dXJlc19kYXRhDQogICAgXQ0KDQogICAgIyBXecWbd2lldGwgc2Zvcm1hdG93YW7EhSB0YWJlbMSZDQogICAgY2xpY2suZWNobyh0YWJ1bGF0ZSh0YWJsZV9kYXRhLCBoZWFkZXJzPWhlYWRlcnMsIHRhYmxlZm10PSJncmlkIikpDQoNCkBhcHAuY2xpLmNvbW1hbmQoImNsZWFyLW1lYXN1cmVtZW50cyIpDQpAY2xpY2sub3B0aW9uKCItLWNvbmZpcm0iLCBpc19mbGFnPVRydWUsIGhlbHA9IlBvdHdpZXJkxbogdXN1bmnEmWNpZSB3c3p5c3RraWNoIGRhbnljaCIpDQpAY2xpY2sub3B0aW9uKCItLXJlY3JlYXRlIiwgaXNfZmxhZz1UcnVlLCBoZWxwPSJVc3XFhCBpIHV0d8OzcnogdGFiZWzEmSBuYSBub3dvIChuYWpzenlic3plKSIpDQpkZWYgY2xlYXJfbWVhc3VyZW1lbnRzX2NvbW1hbmQoY29uZmlybSwgcmVjcmVhdGUpOg0KICAgICIiIg0KICAgIEN6ecWbY2kgd3N6eXN0a2llIGRhbmUgeiB0YWJlbGkgaGlzdG9yaWFfcG9taWFyb3cuDQogICAgDQogICAgUHJ6eWvFgmFkeSB1xbx5Y2lhOg0KICAgIGZsYXNrIGNsZWFyLW1lYXN1cmVtZW50cyAtLWNvbmZpcm0gICAgICAgICAgICAgICAgICAgICMgVXN1d2Egd3N6eXN0a2llIGRhbmUgKERFTEVURSkNCiAgICBmbGFzayBjbGVhci1tZWFzdXJlbWVudHMgLS1jb25maXJtIC0tcmVjcmVhdGUgICAgICAgICMgVXN1d2EgaSB0d29yenkgdGFiZWzEmSBuYSBub3dvIChuYWpzenlic3plKQ0KICAgICIiIg0KICAgIGlmIG5vdCBjb25maXJtOg0KICAgICAgICBjbGljay5lY2hvKGNsaWNrLnN0eWxlKCJCxYHEhEQ6IE11c2lzeiBwb3R3aWVyZHppxIcgb3BlcmFjasSZIHXFvHl3YWrEhWMgZmxhZ2kgLS1jb25maXJtIiwgZmc9InJlZCIpKQ0KICAgICAgICBjbGljay5lY2hvKCJQcnp5a8WCYWQ6IGZsYXNrIGNsZWFyLW1lYXN1cmVtZW50cyAtLWNvbmZpcm0iKQ0KICAgICAgICByZXR1cm4NCiAgICANCiAgICB3aXRoIGFwcC5hcHBfY29udGV4dCgpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBpZiByZWNyZWF0ZToNCiAgICAgICAgICAgICAgICAjIE5hanN6eWJzemUgcm96d2nEhXphbmllOiB1c3XFhCBpIHV0d8OzcnogdGFiZWzEmSBuYSBub3dvDQogICAgICAgICAgICAgICAgY2xpY2suZWNobygiVXN1d2FuaWUgdGFiZWxpIGhpc3RvcmlhX3BvbWlhcm93Li4uIikNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAjIFXFvHlqIFNRTEFsY2hlbXkgZG8gdXN1bmnEmWNpYSBrb25rcmV0bmVqIHRhYmVsaQ0KICAgICAgICAgICAgICAgIGZyb20gYXBwLm1vZGVscyBpbXBvcnQgSGlzdG9yaWFQb21pYXJvdw0KICAgICAgICAgICAgICAgIEhpc3RvcmlhUG9taWFyb3cuX190YWJsZV9fLmRyb3AoZGIuZW5naW5lLCBjaGVja2ZpcnN0PVRydWUpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgY2xpY2suZWNobygiVHdvcnplbmllIG5vd2VqIHRhYmVsaSBoaXN0b3JpYV9wb21pYXJvdy4uLiIpDQogICAgICAgICAgICAgICAgSGlzdG9yaWFQb21pYXJvdy5fX3RhYmxlX18uY3JlYXRlKGRiLmVuZ2luZSkNCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpDQogICAgICAgICAgICAgICAgY2xpY2suZWNobygiVGFiZWxhIHpvc3RhxYJhIHVzdW5pxJl0YSBpIHV0d29yem9uYSBuYSBub3dvISIpDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgICMgU3RhbmRhcmRvd2UgdXN1d2FuaWUgd3N6eXN0a2ljaCBkYW55Y2gNCiAgICAgICAgICAgICAgICBjbGljay5lY2hvKCJVc3V3YW5pZSB3c3p5c3RraWNoIHJla29yZMOzdy4uLiIpDQogICAgICAgICAgICAgICAgcmVzdWx0ID0gZGIuc2Vzc2lvbi5leGVjdXRlKCJERUxFVEUgRlJPTSBoaXN0b3JpYV9wb21pYXJvdyIpDQogICAgICAgICAgICAgICAgZGVsZXRlZF9jb3VudCA9IHJlc3VsdC5yb3djb3VudA0KICAgICAgICAgICAgICAgIGRiLnNlc3Npb24uY29tbWl0KCkNCiAgICAgICAgICAgICAgICBjbGljay5lY2hvKGYiVXN1bmnEmXRvIHtkZWxldGVkX2NvdW50fSByZWtvcmTDs3ciKQ0KICAgICAgICAgICAgDQogICAgICAgICAgICBjbGljay5lY2hvKGNsaWNrLnN0eWxlKCJTdWtjZXMhIFRhYmVsYSB6b3N0YcWCYSBjYcWCa293aWNpZSB3eWN6eXN6Y3pvbmEuIiwgZmc9ImdyZWVuIikpDQogICAgICAgICAgICANCiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOg0KICAgICAgICAgICAgZGIuc2Vzc2lvbi5yb2xsYmFjaygpDQogICAgICAgICAgICBjbGljay5lY2hvKGNsaWNrLnN0eWxlKGYiQsWCxIVkIHBvZGN6YXMgY3p5c3pjemVuaWEgdGFiZWxpOiB7c3RyKGUpfSIsIGZnPSJyZWQiKSkNCiAgICAgICAgICAgIHJhaXNlIGNsaWNrLkFib3J0KCkNCg0KQGFwcC5jbGkuY29tbWFuZCgic2VlZC10YXNrcyIpDQpkZWYgc2VlZF90YXNrc19jb21tYW5kKCk6DQogICAgIiIiDQogICAgVHdvcnp5IGRvbXnFm2xuZSwgY3lrbGljem5lIHphZGFuaWEgQ2VsZXJ5IEJlYXQgdyBiYXppZSBkYW55Y2guDQogICAgVGEga29tZW5kYSBqZXN0IGlkZW1wb3RlbnRuYSAtIG5pZSBzdHdvcnp5IGR1cGxpa2F0w7N3Lg0KICAgICIiIg0KICAgIHByaW50KCJSb3pwb2N6xJl0byBpbmljamFsaXphY2rEmSBkb215xZtsbnljaCB6YWRhxYQgQ2VsZXJ5Li4uIikNCg0KICAgIHdpdGggYXBwLmFwcF9jb250ZXh0KCk6DQogICAgICAgICMgWmFkYW5pZSAxOiBPZGN6eXQgc2Vuc29yw7N3IGNvIDEwIHNla3VuZA0KICAgICAgICB0YXNrX25hbWVfMSA9ICdyZWFkLXNlbnNvcnMtcGVyaW9kaWMnDQogICAgICAgIGlmIG5vdCBkYi5zZXNzaW9uLnF1ZXJ5KFBlcmlvZGljVGFzaykuZmlsdGVyX2J5KG5hbWU9dGFza19uYW1lXzEpLmZpcnN0KCk6DQogICAgICAgICAgICBpbnRlcnZhbF8xMHMgPSBkYi5zZXNzaW9uLnF1ZXJ5KEludGVydmFsU2NoZWR1bGUpLmZpbHRlcl9ieShldmVyeT0xMCwgcGVyaW9kPSdzZWNvbmRzJykuZmlyc3QoKQ0KICAgICAgICAgICAgaWYgbm90IGludGVydmFsXzEwczoNCiAgICAgICAgICAgICAgICBpbnRlcnZhbF8xMHMgPSBJbnRlcnZhbFNjaGVkdWxlKGV2ZXJ5PTEwLCBwZXJpb2Q9J3NlY29uZHMnKQ0KICAgICAgICAgICAgICAgIGRiLnNlc3Npb24uYWRkKGludGVydmFsXzEwcykNCiAgICAgICAgICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpDQogICAgICAgICAgICANCiAgICAgICAgICAgIHRhc2sxID0gUGVyaW9kaWNUYXNrKA0KICAgICAgICAgICAgICAgIGludGVydmFsX2lkPWludGVydmFsXzEwcy5pZCwNCiAgICAgICAgICAgICAgICBuYW1lPXRhc2tfbmFtZV8xLA0KICAgICAgICAgICAgICAgIHRhc2s9J2FwcC50YXNrcy5yZWFkX3NlbnNvcnNfdGFzaycNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIGRiLnNlc3Npb24uYWRkKHRhc2sxKQ0KICAgICAgICAgICAgcHJpbnQoZiItPiBTdHdvcnpvbm8gemFkYW5pZTogJ3t0YXNrX25hbWVfMX0nIikNCg0KICAgICAgICAjIFphZGFuaWUgMjogU3ByYXdkemFuaWUgYWxhcm3Ds3cgY28gNSBzZWt1bmQNCiAgICAgICAgdGFza19uYW1lXzIgPSAnY2hlY2stYWxhcm1zLXBlcmlvZGljJw0KICAgICAgICBpZiBub3QgZGIuc2Vzc2lvbi5xdWVyeShQZXJpb2RpY1Rhc2spLmZpbHRlcl9ieShuYW1lPXRhc2tfbmFtZV8yKS5maXJzdCgpOg0KICAgICAgICAgICAgaW50ZXJ2YWxfNXMgPSBkYi5zZXNzaW9uLnF1ZXJ5KEludGVydmFsU2NoZWR1bGUpLmZpbHRlcl9ieShldmVyeT01LCBwZXJpb2Q9J3NlY29uZHMnKS5maXJzdCgpDQogICAgICAgICAgICBpZiBub3QgaW50ZXJ2YWxfNXM6DQogICAgICAgICAgICAgICAgaW50ZXJ2YWxfNXMgPSBJbnRlcnZhbFNjaGVkdWxlKGV2ZXJ5PTUsIHBlcmlvZD0nc2Vjb25kcycpDQogICAgICAgICAgICAgICAgZGIuc2Vzc2lvbi5hZGQoaW50ZXJ2YWxfNXMpDQogICAgICAgICAgICAgICAgZGIuc2Vzc2lvbi5jb21taXQoKQ0KDQogICAgICAgICAgICB0YXNrMiA9IFBlcmlvZGljVGFzaygNCiAgICAgICAgICAgICAgICBpbnRlcnZhbF9pZD1pbnRlcnZhbF81cy5pZCwNCiAgICAgICAgICAgICAgICBuYW1lPXRhc2tfbmFtZV8yLA0KICAgICAgICAgICAgICAgIHRhc2s9J2FwcC50YXNrcy5jaGVja19hbGFybXNfdGFzaycNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIGRiLnNlc3Npb24uYWRkKHRhc2syKQ0KICAgICAgICAgICAgcHJpbnQoZiItPiBTdHdvcnpvbm8gemFkYW5pZTogJ3t0YXNrX25hbWVfMn0nIikNCg0KICAgICAgICBkYi5zZXNzaW9uLmNvbW1pdCgpDQogICAgICAgIHByaW50KCJaYWtvxYRjem9ubyBpbmljamFsaXphY2rEmSBkb215xZtsbnljaCB6YWRhxYQuIik=
  - path: migrate.ps1
    content: IyBtaWdyYXRlLnBzMQ0KIyBXZXJzamEgZmluYWxuYSwgdcW8eXdhasSFY2Egem1pZW5ueWNoIMWbcm9kb3dpc2tvd3ljaCBpIHphd2llcmFqxIVjYSBrb21lbmTEmSBzdGFtcC10ZXN0Lg0KDQpwYXJhbSAoDQogICAgW1BhcmFtZXRlcihNYW5kYXRvcnk9JHRydWUsIFBvc2l0aW9uPTApXQ0KICAgIFtWYWxpZGF0ZVNldCgiZ2VuZXJhdGUiLCAidXBncmFkZSIsICJkb3duZ3JhZGUiLCAiaGlzdG9yeSIsICJjdXJyZW50IiwgInN0YW1wLXRlc3QiKV0NCiAgICBbc3RyaW5nXSRDb21tYW5kLA0KDQogICAgW1BhcmFtZXRlcihQb3NpdGlvbj0xKV0NCiAgICBbc3RyaW5nXSRNZXNzYWdlDQopDQoNCmZ1bmN0aW9uIENoZWNrLUxhc3QtU3VjY2VzcyB7DQogICAgaWYgKCRMQVNURVhJVENPREUgLW5lIDApIHsNCiAgICAgICAgV3JpdGUtT3V0cHV0ICIhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhIg0KICAgICAgICBXcml0ZS1PdXRwdXQgIiEhISBCTEFEOiBQb3ByemVkbmlhIGtvbWVuZGEgemFrb25jenlsYSBzaWUgbmllcG93b2R6ZW5pZW0uIFByemVyd2FuaWUgc2tyeXB0dS4iDQogICAgICAgIFdyaXRlLU91dHB1dCAiISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISINCiAgICAgICAgIyBQcnp5d3LDs8SHIHptaWVubsSFIMWbcm9kb3dpc2tvd8SFIG5hIHdzemVsa2kgd3lwYWRlaw0KICAgICAgICAkZW52OkFMRU1CSUNfVEVTVF9NT0RFID0gJG51bGwNCiAgICAgICAgZXhpdCAxDQogICAgfQ0KfQ0KDQppZiAoJENvbW1hbmQgLWVxICJnZW5lcmF0ZSIpIHsNCiAgICBpZiAoW3N0cmluZ106OklzTnVsbE9yRW1wdHkoJE1lc3NhZ2UpKSB7DQogICAgICAgIFdyaXRlLU91dHB1dCAiQkxBRDogS29tZW5kYSAnZ2VuZXJhdGUnIHd5bWFnYSBwb2RhbmlhIGtvbXVuaWthdHUgbWlncmFjamkuIg0KICAgICAgICBXcml0ZS1PdXRwdXQgIlByenlrbGFkOiAuXG1pZ3JhdGUucHMxIGdlbmVyYXRlICdEb2RhbmllIG5vd2VqIHRhYmVsaSB1enl0a293bmlrb3cnIg0KICAgICAgICBleGl0IDENCiAgICB9DQogICAgV3JpdGUtT3V0cHV0ICItLS0gR2VuZXJvd2FuaWUgbm93ZWogbWlncmFjamkuLi4gLS0tIg0KICAgIGFsZW1iaWMgcmV2aXNpb24gLS1hdXRvZ2VuZXJhdGUgLW0gIiRNZXNzYWdlIg0KDQp9IGVsc2VpZiAoJENvbW1hbmQgLWVxICJ1cGdyYWRlIikgew0KICAgIFdyaXRlLU91dHB1dCAiLS0tIEFrdHVhbGl6YWNqYSBiYXp5IERFV0VMT1BFUlNLSUVKIGRvIG5ham5vd3N6ZWogd2Vyc2ppLi4uIC0tLSINCiAgICBhbGVtYmljIHVwZ3JhZGUgaGVhZA0KICAgIENoZWNrLUxhc3QtU3VjY2Vzcw0KDQogICAgV3JpdGUtT3V0cHV0ICIiDQogICAgV3JpdGUtT3V0cHV0ICItLS0gQWt0dWFsaXphY2phIGJhenkgVEVTVE9XRUogZG8gbmFqbm93c3plaiB3ZXJzamkuLi4gLS0tIg0KICAgIHRyeSB7DQogICAgICAgICRlbnY6QUxFTUJJQ19URVNUX01PREUgPSAidHJ1ZSINCiAgICAgICAgYWxlbWJpYyB1cGdyYWRlIGhlYWQNCiAgICB9IGZpbmFsbHkgew0KICAgICAgICAkZW52OkFMRU1CSUNfVEVTVF9NT0RFID0gJG51bGwNCiAgICB9DQogICAgQ2hlY2stTGFzdC1TdWNjZXNzDQoNCn0gZWxzZWlmICgkQ29tbWFuZCAtZXEgImRvd25ncmFkZSIpIHsNCiAgICBXcml0ZS1PdXRwdXQgIi0tLSBXeWNvZmFuaWUgb3N0YXRuaWVqIG1pZ3JhY2ppIHogYmF6eSBERVdFTE9QRVJTS0lFSi4uLiAtLS0iDQogICAgYWxlbWJpYyBkb3duZ3JhZGUgLTENCiAgICBDaGVjay1MYXN0LVN1Y2Nlc3MNCg0KICAgIFdyaXRlLU91dHB1dCAiIg0KICAgIFdyaXRlLU91dHB1dCAiLS0tIFd5Y29mYW5pZSBvc3RhdG5pZWogbWlncmFjamkgeiBiYXp5IFRFU1RPV0VKLi4uIC0tLSINCiAgICB0cnkgew0KICAgICAgICAkZW52OkFMRU1CSUNfVEVTVF9NT0RFID0gInRydWUiDQogICAgICAgIGFsZW1iaWMgZG93bmdyYWRlIC0xDQogICAgfSBmaW5hbGx5IHsNCiAgICAgICAgJGVudjpBTEVNQklDX1RFU1RfTU9ERSA9ICRudWxsDQogICAgfQ0KICAgIENoZWNrLUxhc3QtU3VjY2Vzcw0KDQp9IGVsc2VpZiAoJENvbW1hbmQgLWVxICJoaXN0b3J5Iikgew0KICAgIFdyaXRlLU91dHB1dCAiLS0tIEhpc3RvcmlhIG1pZ3JhY2ppLi4uIC0tLSINCiAgICBhbGVtYmljIGhpc3RvcnkNCg0KfSBlbHNlaWYgKCRDb21tYW5kIC1lcSAiY3VycmVudCIpIHsNCiAgICBXcml0ZS1PdXRwdXQgIi0tLSBBa3R1YWxuYSB3ZXJzamEgYmF6eSBkZXdlbG9wZXJza2llai4uLiAtLS0iDQogICAgYWxlbWJpYyBjdXJyZW50DQogICAgDQogICAgV3JpdGUtT3V0cHV0ICIiDQogICAgV3JpdGUtT3V0cHV0ICItLS0gQWt0dWFsbmEgd2Vyc2phIGJhenkgdGVzdG93ZWouLi4gLS0tIg0KICAgIHRyeSB7DQogICAgICAgICRlbnY6QUxFTUJJQ19URVNUX01PREUgPSAidHJ1ZSINCiAgICAgICAgYWxlbWJpYyBjdXJyZW50DQogICAgfSBmaW5hbGx5IHsNCiAgICAgICAgJGVudjpBTEVNQklDX1RFU1RfTU9ERSA9ICRudWxsDQogICAgfQ0KfSBlbHNlaWYgKCRDb21tYW5kIC1lcSAic3RhbXAtdGVzdCIpIHsNCiAgICBXcml0ZS1PdXRwdXQgIi0tLSBTdGVtcGxvd2FuaWUgYmF6eSBURVNUT1dFSiBkbyBuYWpub3dzemVqIHdlcnNqaSAoaGVhZCkuLi4gLS0tIg0KICAgIHRyeSB7DQogICAgICAgICRlbnY6QUxFTUJJQ19URVNUX01PREUgPSAidHJ1ZSINCiAgICAgICAgYWxlbWJpYyBzdGFtcCBoZWFkDQogICAgfSBmaW5hbGx5IHsNCiAgICAgICAgJGVudjpBTEVNQklDX1RFU1RfTU9ERSA9ICRudWxsDQogICAgfQ0KICAgIENoZWNrLUxhc3QtU3VjY2Vzcw0KfQ0KDQoNCldyaXRlLU91dHB1dCAiIg0KV3JpdGUtT3V0cHV0ICItLS0gU2tyeXB0IHpha29uY3p5bCBkemlhbGFuaWUgLS0tIg==
  - path: requirements.txt
    content: Iw0KIyBUaGlzIGZpbGUgaXMgYXV0b2dlbmVyYXRlZCBieSBwaXAtY29tcGlsZSB3aXRoIFB5dGhvbiAzLjExDQojIGJ5IHRoZSBmb2xsb3dpbmcgY29tbWFuZDoNCiMNCiMgICAgcGlwLWNvbXBpbGUNCiMNCmFsZW1iaWM9PTEuMTMuMQ0KICAgICMgdmlhIC1yIHJlcXVpcmVtZW50cy5pbg0KYW1xcD09NS4zLjENCiAgICAjIHZpYSBrb21idQ0KYXBzY2hlZHVsZXI9PTMuMTEuMA0KICAgICMgdmlhIGZsYXNrLWFwc2NoZWR1bGVyDQpiaWRpY3Q9PTAuMjMuMQ0KICAgICMgdmlhIHB5dGhvbi1zb2NrZXRpbw0KYmlsbGlhcmQ9PTQuMi4xDQogICAgIyB2aWEgY2VsZXJ5DQpibGlua2VyPT0xLjkuMA0KICAgICMgdmlhIGZsYXNrDQpjZWxlcnk9PTUuNS4zDQogICAgIyB2aWENCiAgICAjICAgLXIgcmVxdWlyZW1lbnRzLmluDQogICAgIyAgIGZsb3dlcg0KY2xpY2s9PTguMi4xDQogICAgIyB2aWENCiAgICAjICAgY2VsZXJ5DQogICAgIyAgIGNsaWNrLWRpZHlvdW1lYW4NCiAgICAjICAgY2xpY2stcGx1Z2lucw0KICAgICMgICBjbGljay1yZXBsDQogICAgIyAgIGZsYXNrDQpjbGljay1kaWR5b3VtZWFuPT0wLjMuMQ0KICAgICMgdmlhIGNlbGVyeQ0KY2xpY2stcGx1Z2lucz09MS4xLjEuMg0KICAgICMgdmlhIGNlbGVyeQ0KY2xpY2stcmVwbD09MC4zLjANCiAgICAjIHZpYSBjZWxlcnkNCmNvbG9yYW1hPT0wLjQuNg0KICAgICMgdmlhDQogICAgIyAgIGNsaWNrDQogICAgIyAgIHB5dGVzdA0KZG5zcHl0aG9uPT0yLjcuMA0KICAgICMgdmlhIGV2ZW50bGV0DQpldmVudGxldD09MC40MC4yDQogICAgIyB2aWEgLXIgcmVxdWlyZW1lbnRzLmluDQpmbGFzaz09My4xLjENCiAgICAjIHZpYQ0KICAgICMgICAtciByZXF1aXJlbWVudHMuaW4NCiAgICAjICAgZmxhc2stYWRtaW4NCiAgICAjICAgZmxhc2stYXBzY2hlZHVsZXINCiAgICAjICAgZmxhc2stY29ycw0KICAgICMgICBmbGFzay1zb2NrZXRpbw0KICAgICMgICBmbGFzay1zcWxhbGNoZW15DQpmbGFzay1hZG1pbj09MS42LjENCiAgICAjIHZpYSAtciByZXF1aXJlbWVudHMuaW4NCmZsYXNrLWFwc2NoZWR1bGVyPT0xLjEyLjMNCiAgICAjIHZpYSAtciByZXF1aXJlbWVudHMuaW4NCmZsYXNrLWNvcnM9PTYuMC4xDQogICAgIyB2aWEgLXIgcmVxdWlyZW1lbnRzLmluDQpmbGFzay1zb2NrZXRpbz09NS41LjENCiAgICAjIHZpYSAtciByZXF1aXJlbWVudHMuaW4NCmZsYXNrLXNxbGFsY2hlbXk9PTMuMS4xDQogICAgIyB2aWEgLXIgcmVxdWlyZW1lbnRzLmluDQpmbG93ZXI9PTIuMC4xDQogICAgIyB2aWEgLXIgcmVxdWlyZW1lbnRzLmluDQpncmVlbmxldD09My4yLjMNCiAgICAjIHZpYQ0KICAgICMgICBldmVudGxldA0KICAgICMgICBzcWxhbGNoZW15DQpndW5pY29ybj09MjMuMC4wDQogICAgIyB2aWEgLXIgcmVxdWlyZW1lbnRzLmluDQpoMTE9PTAuMTYuMA0KICAgICMgdmlhIHdzcHJvdG8NCmh1bWFuaXplPT00LjEzLjANCiAgICAjIHZpYSBmbG93ZXINCmluaWNvbmZpZz09Mi4xLjANCiAgICAjIHZpYSBweXRlc3QNCml0c2Rhbmdlcm91cz09Mi4yLjANCiAgICAjIHZpYSBmbGFzaw0KamluamEyPT0zLjEuNg0KICAgICMgdmlhIGZsYXNrDQprb21idT09NS41LjQNCiAgICAjIHZpYSBjZWxlcnkNCm1ha289PTEuMy4xMA0KICAgICMgdmlhIGFsZW1iaWMNCm1hcmt1cHNhZmU9PTMuMC4yDQogICAgIyB2aWENCiAgICAjICAgZmxhc2sNCiAgICAjICAgamluamEyDQogICAgIyAgIG1ha28NCiAgICAjICAgd2Vya3pldWcNCiAgICAjICAgd3Rmb3Jtcw0KbWVtb3J5LXByb2ZpbGVyPT0wLjYxLjANCiAgICAjIHZpYSAtciByZXF1aXJlbWVudHMuaW4NCm15c3FsLWNvbm5lY3Rvci1weXRob249PTkuMy4wDQogICAgIyB2aWEgLXIgcmVxdWlyZW1lbnRzLmluDQpuZXR3b3JreD09My41DQogICAgIyB2aWEgLXIgcmVxdWlyZW1lbnRzLmluDQpwYWNrYWdpbmc9PTI1LjANCiAgICAjIHZpYQ0KICAgICMgICBndW5pY29ybg0KICAgICMgICBrb21idQ0KICAgICMgICBweXRlc3QNCnBsdWdneT09MS42LjANCiAgICAjIHZpYSBweXRlc3QNCnByb21ldGhldXMtY2xpZW50PT0wLjIyLjENCiAgICAjIHZpYSBmbG93ZXINCnByb21wdC10b29sa2l0PT0zLjAuNTINCiAgICAjIHZpYSBjbGljay1yZXBsDQpwc3V0aWw9PTcuMC4wDQogICAgIyB2aWEgbWVtb3J5LXByb2ZpbGVyDQpweWdtZW50cz09Mi4xOS4yDQogICAgIyB2aWEgcHl0ZXN0DQpweXRlc3Q9PTguNC4xDQogICAgIyB2aWEgLXIgcmVxdWlyZW1lbnRzLmluDQpweXRob24tZGF0ZXV0aWw9PTIuOS4wLnBvc3QwDQogICAgIyB2aWENCiAgICAjICAgY2VsZXJ5DQogICAgIyAgIGZsYXNrLWFwc2NoZWR1bGVyDQpweXRob24tZG90ZW52PT0xLjEuMQ0KICAgICMgdmlhIC1yIHJlcXVpcmVtZW50cy5pbg0KcHl0aG9uLWVuZ2luZWlvPT00LjEyLjINCiAgICAjIHZpYSBweXRob24tc29ja2V0aW8NCnB5dGhvbi1zb2NrZXRpbz09NS4xMy4wDQogICAgIyB2aWEgZmxhc2stc29ja2V0aW8NCnB5dHo9PTIwMjUuMg0KICAgICMgdmlhDQogICAgIyAgIC1yIHJlcXVpcmVtZW50cy5pbg0KICAgICMgICBmbG93ZXINCnB5d2luMzI9PTMxMCA7IHN5c19wbGF0Zm9ybSA9PSAid2luMzIiDQogICAgIyB2aWEgLXIgcmVxdWlyZW1lbnRzLmluDQpweXlhbWw9PTYuMC4yDQogICAgIyB2aWEgLXIgcmVxdWlyZW1lbnRzLmluDQpyZWRpcz09Ni40LjANCiAgICAjIHZpYSAtciByZXF1aXJlbWVudHMuaW4NCnNpbXBsZS13ZWJzb2NrZXQ9PTEuMS4wDQogICAgIyB2aWEgcHl0aG9uLWVuZ2luZWlvDQpzaXg9PTEuMTcuMA0KICAgICMgdmlhIHB5dGhvbi1kYXRldXRpbA0Kc3FsYWxjaGVteT09Mi4wLjI3DQogICAgIyB2aWENCiAgICAjICAgYWxlbWJpYw0KICAgICMgICBmbGFzay1zcWxhbGNoZW15DQp0YWJ1bGF0ZT09MC45LjANCiAgICAjIHZpYSAtciByZXF1aXJlbWVudHMuaW4NCnRvcm5hZG89PTYuNS4yDQogICAgIyB2aWEgZmxvd2VyDQp0eXBpbmctZXh0ZW5zaW9ucz09NC4xNC4xDQogICAgIyB2aWENCiAgICAjICAgYWxlbWJpYw0KICAgICMgICBzcWxhbGNoZW15DQp0emRhdGE9PTIwMjUuMg0KICAgICMgdmlhDQogICAgIyAgIGtvbWJ1DQogICAgIyAgIHR6bG9jYWwNCnR6bG9jYWw9PTUuMy4xDQogICAgIyB2aWEgYXBzY2hlZHVsZXINCnZpbmU9PTUuMS4wDQogICAgIyB2aWENCiAgICAjICAgYW1xcA0KICAgICMgICBjZWxlcnkNCiAgICAjICAga29tYnUNCndjd2lkdGg9PTAuMi4xMw0KICAgICMgdmlhIHByb21wdC10b29sa2l0DQp3ZXJremV1Zz09My4xLjMNCiAgICAjIHZpYQ0KICAgICMgICBmbGFzaw0KICAgICMgICBmbGFzay1jb3JzDQp3c3Byb3RvPT0xLjIuMA0KICAgICMgdmlhIHNpbXBsZS13ZWJzb2NrZXQNCnd0Zm9ybXM9PTMuMi4xDQogICAgIyB2aWEgZmxhc2stYWRtaW4NCg==
  - path: run.py
    content: IyBydW4ucHkNCmltcG9ydCBldmVudGxldA0KZXZlbnRsZXQubW9ua2V5X3BhdGNoKCkNCg0KZnJvbSBhcHAgaW1wb3J0IGNyZWF0ZV9hcHAsIHNvY2tldGlvDQoNCmFwcCA9IGNyZWF0ZV9hcHAoKQ0KDQppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOg0KICAgICNhcHAucnVuKCBkZWJ1Zz1UcnVlLCBwb3J0PTUwMDAsIGhvc3Q9JzAuMC4wLjAnICkNCiAgICBzb2NrZXRpby5ydW4oYXBwLCBkZWJ1Zz1UcnVlLCBwb3J0PTUwMDAsIGhvc3Q9JzAuMC4wLjAnKQ0K
